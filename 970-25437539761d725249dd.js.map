{"version":3,"file":"970-25437539761d725249dd.js","mappings":"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IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACnwCC,EAAY,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAqMxgCz0C,EAAQmzC,KAAO,SAAcztB,GAC3B,IAAIgvB,EAAS3jC,KAAKgR,MAAMphB,KAAKgzB,cAEzB+gB,EAAS,GAtMf,SAA6BhvB,EAAWgvB,GACtC,IAGIvtC,EAAGC,EAAG3E,EAAGmB,EAAG+wC,EAAIC,EAAIC,EAAIC,EAAOC,EAAOC,EAAOC,EAAOC,EAAWC,EAAWC,EAAWC,EAAWC,EAAUC,EAAUC,EAAUC,EAAU/G,EAAIgH,EAAIC,EAAIC,EAAIC,EAHxJC,EAASpwB,EAAU1D,KACnBlb,EAAQ4e,EAAU5e,MAClBC,EAAS2e,EAAU3e,OAEnBgvC,EAAMrB,EAASA,EAAS,EACxBsB,EAAclvC,EAAQ,EACtBmvC,EAAelvC,EAAS,EACxBmvC,EAAcxB,EAAS,EACvByB,EAAYD,GAAeA,EAAc,GAAK,EAC9CE,EAAa,IAAI9B,EACjB+B,EAAW,KACXC,EAAQF,EACRG,EAAU,KACVC,EAAW,KACXC,EAAUjC,EAAUE,GACpBgC,EAAUjC,EAAUC,GAExB,IAAKjyC,EAAI,EAAGA,EAAIszC,EAAKtzC,IACnB6zC,EAAQA,EAAM/B,KAAO,IAAID,EAErB7xC,IAAMyzC,IACRG,EAAWC,GAOf,IAHAA,EAAM/B,KAAO6B,EACbvB,EAAKD,EAAK,EAELxtC,EAAI,EAAGA,EAAIL,EAAQK,IAAK,CAY3B,IAXAkuC,EAAWC,EAAWC,EAAWC,EAAWX,EAAQC,EAAQC,EAAQC,EAAQ,EAC5EC,EAAYgB,GAAexH,EAAKoH,EAAOlB,IACvCO,EAAYe,GAAeR,EAAKI,EAAOlB,EAAK,IAC5CQ,EAAYc,GAAeP,EAAKG,EAAOlB,EAAK,IAC5CS,EAAYa,GAAeN,EAAKE,EAAOlB,EAAK,IAC5CE,GAASqB,EAAYzH,EACrBqG,GAASoB,EAAYT,EACrBV,GAASmB,EAAYR,EACrBV,GAASkB,EAAYP,EACrBU,EAAQF,EAEH3zC,EAAI,EAAGA,EAAIyzC,EAAazzC,IAC3B6zC,EAAM3jB,EAAI+b,EACV4H,EAAMx2B,EAAI41B,EACVY,EAAM9yC,EAAImyC,EACVW,EAAM7hC,EAAImhC,EACVU,EAAQA,EAAM/B,KAGhB,IAAK9xC,EAAI,EAAGA,EAAIyzC,EAAazzC,IAC3BmB,EAAIgxC,IAAOoB,EAAcvzC,EAAIuzC,EAAcvzC,IAAM,GACjDqyC,IAAUwB,EAAM3jB,EAAI+b,EAAKoH,EAAOlyC,KAAOiyC,EAAMK,EAAczzC,GAC3DsyC,IAAUuB,EAAMx2B,EAAI41B,EAAKI,EAAOlyC,EAAI,IAAMiyC,EAC1Cb,IAAUsB,EAAM9yC,EAAImyC,EAAKG,EAAOlyC,EAAI,IAAMiyC,EAC1CZ,IAAUqB,EAAM7hC,EAAImhC,EAAKE,EAAOlyC,EAAI,IAAMiyC,EAC1CP,GAAY5G,EACZ6G,GAAYG,EACZF,GAAYG,EACZF,GAAYG,EACZU,EAAQA,EAAM/B,KAMhB,IAHAgC,EAAUH,EACVI,EAAWH,EAENlvC,EAAI,EAAGA,EAAIL,EAAOK,IACrB2uC,EAAOlB,EAAK,GAAKgB,EAAKX,EAAQwB,GAAWC,EAE9B,IAAPd,GACFA,EAAK,IAAMA,EACXE,EAAOlB,IAAOE,EAAQ2B,GAAWC,GAAWd,EAC5CE,EAAOlB,EAAK,IAAMG,EAAQ0B,GAAWC,GAAWd,EAChDE,EAAOlB,EAAK,IAAMI,EAAQyB,GAAWC,GAAWd,GAEhDE,EAAOlB,GAAMkB,EAAOlB,EAAK,GAAKkB,EAAOlB,EAAK,GAAK,EAGjDE,GAASI,EACTH,GAASI,EACTH,GAASI,EACTH,GAASI,EACTH,GAAaqB,EAAQ5jB,EACrBwiB,GAAaoB,EAAQz2B,EACrBs1B,GAAamB,EAAQ/yC,EACrB6xC,GAAakB,EAAQ9hC,EACrB7Q,EAAIixC,IAAOjxC,EAAIuD,EAAIutC,EAAS,GAAKsB,EAAcpyC,EAAIoyC,IAAgB,EAKnElB,GAJAQ,GAAYiB,EAAQ5jB,EAAImjB,EAAOlyC,GAK/BmxC,GAJAQ,GAAYgB,EAAQz2B,EAAIg2B,EAAOlyC,EAAI,GAKnCoxC,GAJAQ,GAAYe,EAAQ/yC,EAAIsyC,EAAOlyC,EAAI,GAKnCqxC,GAJAQ,GAAYc,EAAQ9hC,EAAIqhC,EAAOlyC,EAAI,GAKnC2yC,EAAUA,EAAQhC,KAClBW,GAAaxG,EAAK8H,EAAS7jB,EAC3BwiB,GAAaO,EAAKc,EAAS12B,EAC3Bs1B,GAAaO,EAAKa,EAAShzC,EAC3B6xC,GAAaO,EAAKY,EAAS/hC,EAC3B6gC,GAAY5G,EACZ6G,GAAYG,EACZF,GAAYG,EACZF,GAAYG,EACZY,EAAWA,EAASjC,KACpBK,GAAM,EAGRC,GAAM/tC,EAGR,IAAKK,EAAI,EAAGA,EAAIL,EAAOK,IAAK,CAa1B,IAZAouC,EAAWC,EAAWC,EAAWH,EAAWP,EAAQC,EAAQC,EAAQH,EAAQ,EAE5EI,EAAYgB,GAAexH,EAAKoH,EADhClB,EAAKztC,GAAK,IAEVguC,EAAYe,GAAeR,EAAKI,EAAOlB,EAAK,IAC5CQ,EAAYc,GAAeP,EAAKG,EAAOlB,EAAK,IAC5CS,EAAYa,GAAeN,EAAKE,EAAOlB,EAAK,IAC5CE,GAASqB,EAAYzH,EACrBqG,GAASoB,EAAYT,EACrBV,GAASmB,EAAYR,EACrBV,GAASkB,EAAYP,EACrBU,EAAQF,EAEH3zC,EAAI,EAAGA,EAAIyzC,EAAazzC,IAC3B6zC,EAAM3jB,EAAI+b,EACV4H,EAAMx2B,EAAI41B,EACVY,EAAM9yC,EAAImyC,EACVW,EAAM7hC,EAAImhC,EACVU,EAAQA,EAAM/B,KAKhB,IAFAI,EAAK7tC,EAEArE,EAAI,EAAGA,GAAKiyC,EAAQjyC,IACvBmyC,EAAKD,EAAKxtC,GAAK,EACf2tC,IAAUwB,EAAM3jB,EAAI+b,EAAKoH,EAAOlB,KAAQiB,EAAMK,EAAczzC,GAC5DsyC,IAAUuB,EAAMx2B,EAAI41B,EAAKI,EAAOlB,EAAK,IAAMiB,EAC3Cb,IAAUsB,EAAM9yC,EAAImyC,EAAKG,EAAOlB,EAAK,IAAMiB,EAC3CZ,IAAUqB,EAAM7hC,EAAImhC,EAAKE,EAAOlB,EAAK,IAAMiB,EAC3CP,GAAY5G,EACZ6G,GAAYG,EACZF,GAAYG,EACZF,GAAYG,EACZU,EAAQA,EAAM/B,KAEV9xC,EAAIwzC,IACNtB,GAAM7tC,GAQV,IAJA8tC,EAAKztC,EACLovC,EAAUH,EACVI,EAAWH,EAENjvC,EAAI,EAAGA,EAAIL,EAAQK,IAEtB0uC,EAAW,GADXlyC,EAAIgxC,GAAM,IACMgB,EAAKX,EAAQwB,GAAWC,EAEpCd,EAAK,GACPA,EAAK,IAAMA,EACXE,EAAOlyC,IAAMkxC,EAAQ2B,GAAWC,GAAWd,EAC3CE,EAAOlyC,EAAI,IAAMmxC,EAAQ0B,GAAWC,GAAWd,EAC/CE,EAAOlyC,EAAI,IAAMoxC,EAAQyB,GAAWC,GAAWd,GAE/CE,EAAOlyC,GAAKkyC,EAAOlyC,EAAI,GAAKkyC,EAAOlyC,EAAI,GAAK,EAG9CkxC,GAASI,EACTH,GAASI,EACTH,GAASI,EACTH,GAASI,EACTH,GAAaqB,EAAQ5jB,EACrBwiB,GAAaoB,EAAQz2B,EACrBs1B,GAAamB,EAAQ/yC,EACrB6xC,GAAakB,EAAQ9hC,EACrB7Q,EAAIuD,IAAMvD,EAAIwD,EAAI8uC,GAAeD,EAAeryC,EAAIqyC,GAAgBnvC,GAAS,EAC7EguC,GAASQ,GAAYiB,EAAQ5jB,EAAImjB,EAAOlyC,GACxCmxC,GAASQ,GAAYgB,EAAQz2B,EAAIg2B,EAAOlyC,EAAI,GAC5CoxC,GAASQ,GAAYe,EAAQ/yC,EAAIsyC,EAAOlyC,EAAI,GAC5CqxC,GAASQ,GAAYc,EAAQ9hC,EAAIqhC,EAAOlyC,EAAI,GAC5C2yC,EAAUA,EAAQhC,KAClBW,GAAaxG,EAAK8H,EAAS7jB,EAC3BwiB,GAAaO,EAAKc,EAAS12B,EAC3Bs1B,GAAaO,EAAKa,EAAShzC,EAC3B6xC,GAAaO,EAAKY,EAAS/hC,EAC3B6gC,GAAY5G,EACZ6G,GAAYG,EACZF,GAAYG,EACZF,GAAYG,EACZY,EAAWA,EAASjC,KACpBK,GAAM9tC,GASR6vC,CAAoBjxB,EAAWgvB,IAInCvwC,EAAUyE,QAAQC,gBAAgB3E,EAAO+B,KAAM,aAAc,EAAGiD,EAAa+B,qBAAsB9G,EAAUyE,QAAQsV,mDChOrHpe,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAAIkE,EAAY,EAAQ,MAEpBD,EAAS,EAAQ,MAEjBgF,EAAe,EAAQ,MAE3BlJ,EAAQozC,SAAW,SAAU1tB,GAC3B,IAGIjjB,EAHAm0C,EAAiC,IAApBj2C,KAAKi2C,aAClB50B,EAAO0D,EAAU1D,KACjBrgB,EAAMqgB,EAAK1gB,OAGf,IAAKmB,EAAI,EAAGA,EAAId,EAAKc,GAAK,EACxBuf,EAAKvf,IAAMm0C,EACX50B,EAAKvf,EAAI,IAAMm0C,EACf50B,EAAKvf,EAAI,IAAMm0C,GAInBzyC,EAAUyE,QAAQC,gBAAgB3E,EAAO+B,KAAM,aAAc,EAAGiD,EAAa+B,qBAAsB9G,EAAUyE,QAAQsV,kDCvBrHpe,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAAIkE,EAAY,EAAQ,MAEpBD,EAAS,EAAQ,MAEjBgF,EAAe,EAAQ,MAE3BlJ,EAAQqzC,SAAW,SAAU3tB,GAC3B,IAMIjjB,EANAo0C,EAAS9lC,KAAKwsB,KAAK58B,KAAKm2C,WAAa,KAAO,IAAK,GACjD90B,EAAO0D,EAAU1D,KACjB+0B,EAAU/0B,EAAK1gB,OACfgmC,EAAM,IACNlE,EAAQ,IACR7C,EAAO,IAGX,IAAK99B,EAAI,EAAGA,EAAIs0C,EAASt0C,GAAK,EAC5B6kC,EAAMtlB,EAAKvf,GACX2gC,EAAQphB,EAAKvf,EAAI,GACjB89B,EAAOve,EAAKvf,EAAI,GAChB6kC,GAAO,IACPA,GAAO,GACPA,GAAOuP,EACPvP,GAAO,GAEPlE,GAAS,IACTA,GAAS,GACTA,GAASyT,EACTzT,GAAS,GAET7C,GAAQ,IACRA,GAAQ,GACRA,GAAQsW,EACRtW,GAAQ,GAER+G,GAXAA,GAAO,KAWK,EAAI,EAAIA,EAAM,IAAM,IAAMA,EACtClE,GAPAA,GAAS,KAOO,EAAI,EAAIA,EAAQ,IAAM,IAAMA,EAC5C7C,GAHAA,GAAQ,KAGM,EAAI,EAAIA,EAAO,IAAM,IAAMA,EACzCve,EAAKvf,GAAK6kC,EACVtlB,EAAKvf,EAAI,GAAK2gC,EACdphB,EAAKvf,EAAI,GAAK89B,GAIlBp8B,EAAUyE,QAAQC,gBAAgB3E,EAAO+B,KAAM,WAAY,EAAGiD,EAAa+B,qBAAsB9G,EAAUyE,QAAQsV,mDC/CnHpe,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAAIkE,EAAY,EAAQ,MAEpBD,EAAS,EAAQ,MAEjBF,EAAS,EAAQ,MAEjBkF,EAAe,EAAQ,MAE3BlJ,EAAQszC,OAAS,SAAU5tB,GACzB,IAAIsxB,EAAmC,GAAxBr2C,KAAKs2C,iBAChBC,EAAsC,IAA1Bv2C,KAAKw2C,mBACjBC,EAAYz2C,KAAK02C,kBACjBC,EAAQ32C,KAAK42C,cACbC,EAAO,EACPC,EAAO,EACPz1B,EAAO0D,EAAU1D,KACjB01B,EAAIhyB,EAAU5e,MACd6wC,EAAIjyB,EAAU3e,OACd6wC,EAAS,EAAJF,EACLtwC,EAAIuwC,EAER,OAAQP,GACN,IAAK,WACHI,GAAQ,EACRC,GAAQ,EACR,MAEF,IAAK,MACHD,GAAQ,EACRC,EAAO,EACP,MAEF,IAAK,YACHD,GAAQ,EACRC,EAAO,EACP,MAEF,IAAK,QACHD,EAAO,EACPC,EAAO,EACP,MAEF,IAAK,eACHD,EAAO,EACPC,EAAO,EACP,MAEF,IAAK,SACHD,EAAO,EACPC,EAAO,EACP,MAEF,IAAK,cACHD,EAAO,EACPC,GAAQ,EACR,MAEF,IAAK,OACHD,EAAO,EACPC,GAAQ,EACR,MAEF,QACEzzC,EAAOyC,KAAKsE,MAAM,6BAA+BqsC,GAGrD,EAAG,CACD,IAAIjuB,GAAW/hB,EAAI,GAAKwwC,EACpBC,EAASL,EAETpwC,EAAIywC,EAAS,IACfA,EAAS,GAGPzwC,EAAIywC,EAASF,IACfE,EAAS,GAGX,IAAIC,GAAgB1wC,EAAI,EAAIywC,GAAUH,EAAI,EACtCvwC,EAAIuwC,EAER,EAAG,CACD,IAAIt9B,EAAS+O,EAAoB,GAAThiB,EAAI,GACxB4wC,EAASN,EAETtwC,EAAI4wC,EAAS,IACfA,EAAS,GAGP5wC,EAAI4wC,EAASL,IACfK,EAAS,GAGX,IAAIC,EAAcF,EAAkC,GAAlB3wC,EAAI,EAAI4wC,GACtCE,EAAKj2B,EAAK5H,GAAU4H,EAAKg2B,GACzBE,EAAKl2B,EAAK5H,EAAS,GAAK4H,EAAKg2B,EAAc,GAC3CG,EAAKn2B,EAAK5H,EAAS,GAAK4H,EAAKg2B,EAAc,GAC3CI,EAAMH,EACNI,EAASD,EAAM,EAAIA,GAAOA,EAc9B,IAbWF,EAAK,EAAIA,GAAMA,GAGfG,IACTD,EAAMF,IAHGC,EAAK,EAAIA,GAAMA,GAMfE,IACTD,EAAMD,GAGRC,GAAOpB,EAEHM,EAAO,CACT,IAAI3kB,EAAI3Q,EAAK5H,GAAUg+B,EACnBt4B,EAAIkC,EAAK5H,EAAS,GAAKg+B,EACvB50C,EAAIwe,EAAK5H,EAAS,GAAKg+B,EAC3Bp2B,EAAK5H,GAAUuY,EAAI,IAAM,IAAMA,EAAI,EAAI,EAAIA,EAC3C3Q,EAAK5H,EAAS,GAAK0F,EAAI,IAAM,IAAMA,EAAI,EAAI,EAAIA,EAC/CkC,EAAK5H,EAAS,GAAK5W,EAAI,IAAM,IAAMA,EAAI,EAAI,EAAIA,MAC1C,CACL,IAAI8/B,EAAO4T,EAAYkB,EAEnB9U,EAAO,EACTA,EAAO,EACEA,EAAO,MAChBA,EAAO,KAGTthB,EAAK5H,GAAU4H,EAAK5H,EAAS,GAAK4H,EAAK5H,EAAS,GAAKkpB,WAE9Cn8B,WACFC,IAGbjD,EAAUyE,QAAQC,gBAAgB3E,EAAO+B,KAAM,iBAAkB,GAAKiD,EAAa+B,qBAAsB9G,EAAUyE,QAAQsV,gBAC3H/Z,EAAUyE,QAAQC,gBAAgB3E,EAAO+B,KAAM,mBAAoB,GAAKiD,EAAa+B,qBAAsB9G,EAAUyE,QAAQsV,gBAC7H/Z,EAAUyE,QAAQC,gBAAgB3E,EAAO+B,KAAM,kBAAmB,WAAY,KAAM9B,EAAUyE,QAAQsV,gBACtG/Z,EAAUyE,QAAQC,gBAAgB3E,EAAO+B,KAAM,eAAe,EAAO,KAAM9B,EAAUyE,QAAQsV,mDC7I7Fpe,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAAIkE,EAAY,EAAQ,MAEpBD,EAAS,EAAQ,MAEjBgF,EAAe,EAAQ,MAE3B,SAASovC,EAAMC,EAAWC,EAASC,EAASC,EAAOC,GACjD,IAAIC,EAAYH,EAAUD,EACtBK,EAAUF,EAAQD,EAGtB,OAAkB,IAAdE,EACKF,EAAQG,EAAU,EAGX,IAAZA,EACKH,EAICG,IADCN,EAAYC,GAAWI,GACJF,EAIhC14C,EAAQuzC,QAAU,SAAU7tB,GAC1B,IAIIiN,EAGA7S,EAGAtc,EACAf,EAXAuf,EAAO0D,EAAU1D,KACjB82B,EAAa92B,EAAK1gB,OAClBy3C,EAAO/2B,EAAK,GACZg3B,EAAOD,EAEPE,EAAOj3B,EAAK,GACZk3B,EAAOD,EAEPE,EAAOn3B,EAAK,GACZo3B,EAAOD,EAGPE,EAAgB14C,KAAK24C,UAEzB,GAAsB,IAAlBD,EAAJ,CAIA,IAAK52C,EAAI,EAAGA,EAAIq2C,EAAYr2C,GAAK,GAC/BkwB,EAAI3Q,EAAKvf,EAAI,IAELs2C,EACNA,EAAOpmB,EACEA,EAAIqmB,IACbA,EAAOrmB,IAGT7S,EAAIkC,EAAKvf,EAAI,IAELw2C,EACNA,EAAOn5B,EACEA,EAAIo5B,IACbA,EAAOp5B,IAGTtc,EAAIwe,EAAKvf,EAAI,IAEL02C,EACNA,EAAO31C,EACEA,EAAI41C,IACbA,EAAO51C,GAmBX,IAAI+1C,EAAMC,EAAUC,EAAUC,EAAMC,EAAUC,EAAUC,EAAMC,EAAUC,EAqBxE,IApCIf,IAASD,IACXC,EAAO,IACPD,EAAO,GAGLG,IAASD,IACXC,EAAO,IACPD,EAAO,GAGLG,IAASD,IACXC,EAAO,IACPD,EAAO,GAKLE,EAAgB,GAClBG,EAAWR,EAAOK,GAAiB,IAAML,GACzCS,EAAWV,EAAOM,GAAiBN,EAAO,GAC1CY,EAAWT,EAAOG,GAAiB,IAAMH,GACzCU,EAAWX,EAAOI,GAAiBJ,EAAO,GAC1Ca,EAAWV,EAAOC,GAAiB,IAAMD,GACzCW,EAAWZ,EAAOE,GAAiBF,EAAO,KAG1CK,EAAWR,EAAOK,GAAiBL,GADnCO,EAAuB,IAAfP,EAAOD,KAEfU,EAAWV,EAAOM,GAAiBN,EAAOQ,GAE1CI,EAAWT,EAAOG,GAAiBH,GADnCQ,EAAuB,IAAfR,EAAOD,KAEfW,EAAWX,EAAOI,GAAiBJ,EAAOS,GAE1CI,EAAWV,EAAOC,GAAiBD,GADnCS,EAAuB,IAAfT,EAAOD,KAEfY,EAAWZ,EAAOE,GAAiBF,EAAOU,IAGvCp3C,EAAI,EAAGA,EAAIq2C,EAAYr2C,GAAK,EAC/Buf,EAAKvf,EAAI,GAAK61C,EAAMt2B,EAAKvf,EAAI,GAAIs2C,EAAMC,EAAMS,EAAUD,GACvDx3B,EAAKvf,EAAI,GAAK61C,EAAMt2B,EAAKvf,EAAI,GAAIw2C,EAAMC,EAAMU,EAAUD,GACvD33B,EAAKvf,EAAI,GAAK61C,EAAMt2B,EAAKvf,EAAI,GAAI02C,EAAMC,EAAMW,EAAUD,KAI3D31C,EAAUyE,QAAQC,gBAAgB3E,EAAO+B,KAAM,UAAW,EAAGiD,EAAa+B,qBAAsB9G,EAAUyE,QAAQsV,iDCpHlHpe,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGTD,EAAQwzC,UAAY,SAAU9tB,GAC5B,IAEIjjB,EACAm0C,EAHA50B,EAAO0D,EAAU1D,KACjBrgB,EAAMqgB,EAAK1gB,OAIf,IAAKmB,EAAI,EAAGA,EAAId,EAAKc,GAAK,EACxBm0C,EAAa,IAAO50B,EAAKvf,GAAK,GAAMuf,EAAKvf,EAAI,GAAK,IAAOuf,EAAKvf,EAAI,GAClEuf,EAAKvf,GAAKm0C,EACV50B,EAAKvf,EAAI,GAAKm0C,EACd50B,EAAKvf,EAAI,GAAKm0C,sCCdlB92C,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAAIkE,EAAY,EAAQ,MAEpBD,EAAS,EAAQ,MAEjBgF,EAAe,EAAQ,MAE3B/E,EAAUyE,QAAQC,gBAAgB3E,EAAO+B,KAAM,MAAO,EAAGiD,EAAa+B,qBAAsB9G,EAAUyE,QAAQsV,gBAC9G/Z,EAAUyE,QAAQC,gBAAgB3E,EAAO+B,KAAM,aAAc,EAAGiD,EAAa+B,qBAAsB9G,EAAUyE,QAAQsV,gBACrH/Z,EAAUyE,QAAQC,gBAAgB3E,EAAO+B,KAAM,YAAa,EAAGiD,EAAa+B,qBAAsB9G,EAAUyE,QAAQsV,gBAEpHle,EAAQyzC,IAAM,SAAU/tB,GACtB,IAMIjjB,EAYAkwB,EAAG7S,EAAGtc,EAAGiR,EAlBTuN,EAAO0D,EAAU1D,KACjB+0B,EAAU/0B,EAAK1gB,OAEf47B,EAAInsB,KAAKwsB,IAAI,EAAG58B,KAAKq5C,cACrBrC,EAAI5mC,KAAK2J,IAAI/Z,KAAKs5C,MAAQ,KAAO,IACjCC,EAAuB,IAAnBv5C,KAAKw5C,YAETC,EALI,EAKMld,EAAInsB,KAAK2tB,IAAIiZ,EAAI5mC,KAAK6N,GAAK,KACrCy7B,EANI,EAMMnd,EAAInsB,KAAKysB,IAAIma,EAAI5mC,KAAK6N,GAAK,KACrC07B,EAAK,KAAY,KAAQF,EAAM,KAAQC,EACvCE,EAAK,KAAY,KAAQH,EAAM,IAAOC,EACtCG,EAAK,KAAY,KAAQJ,EAAM,KAAQC,EACvCI,EAAK,KAAY,KAAQL,EAAM,KAAQC,EACvCK,EAAK,KAAY,KAAQN,EAAM,KAAQC,EACvCM,EAAK,KAAY,KAAQP,EAAM,KAAQC,EACvCO,EAAK,KAAY,GAAMR,EAAM,KAAOC,EACpCQ,EAAK,KAAY,KAAQT,EAAM,KAAOC,EACtCS,EAAK,KAAY,KAAQV,EAAM,GAAMC,EAGzC,IAAK53C,EAAI,EAAGA,EAAIs0C,EAASt0C,GAAK,EAC5BkwB,EAAI3Q,EAAKvf,EAAI,GACbqd,EAAIkC,EAAKvf,EAAI,GACbe,EAAIwe,EAAKvf,EAAI,GACbgS,EAAIuN,EAAKvf,EAAI,GACbuf,EAAKvf,EAAI,GAAK63C,EAAK3nB,EAAI4nB,EAAKz6B,EAAI06B,EAAKh3C,EAAI02C,EACzCl4B,EAAKvf,EAAI,GAAKg4C,EAAK9nB,EAAI+nB,EAAK56B,EAAI66B,EAAKn3C,EAAI02C,EACzCl4B,EAAKvf,EAAI,GAAKm4C,EAAKjoB,EAAIkoB,EAAK/6B,EAAIg7B,EAAKt3C,EAAI02C,EACzCl4B,EAAKvf,EAAI,GAAKgS,sCC3ClB3U,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAAIkE,EAAY,EAAQ,MAEpBD,EAAS,EAAQ,MAEjBgF,EAAe,EAAQ,MAE3BlJ,EAAQ0zC,IAAM,SAAUhuB,GACtB,IAKIjjB,EAYAkwB,EAAG7S,EAAGtc,EAAGiR,EAjBTuN,EAAO0D,EAAU1D,KACjB+0B,EAAU/0B,EAAK1gB,OACfy5C,EAAIhqC,KAAKwsB,IAAI,EAAG58B,KAAKV,SACrBi9B,EAAInsB,KAAKwsB,IAAI,EAAG58B,KAAKq5C,cACrBrC,EAAI5mC,KAAK2J,IAAI/Z,KAAKs5C,MAAQ,KAAO,IAEjCG,EAAMW,EAAI7d,EAAInsB,KAAK2tB,IAAIiZ,EAAI5mC,KAAK6N,GAAK,KACrCy7B,EAAMU,EAAI7d,EAAInsB,KAAKysB,IAAIma,EAAI5mC,KAAK6N,GAAK,KACrC07B,EAAK,KAAQS,EAAI,KAAQX,EAAM,KAAQC,EACvCE,EAAK,KAAQQ,EAAI,KAAQX,EAAM,IAAOC,EACtCG,EAAK,KAAQO,EAAI,KAAQX,EAAM,KAAQC,EACvCI,EAAK,KAAQM,EAAI,KAAQX,EAAM,KAAQC,EACvCK,EAAK,KAAQK,EAAI,KAAQX,EAAM,KAAQC,EACvCM,EAAK,KAAQI,EAAI,KAAQX,EAAM,KAAQC,EACvCO,EAAK,KAAQG,EAAI,GAAMX,EAAM,KAAOC,EACpCQ,EAAK,KAAQE,EAAI,KAAQX,EAAM,KAAOC,EACtCS,EAAK,KAAQC,EAAI,KAAQX,EAAM,GAAMC,EAGzC,IAAK53C,EAAI,EAAGA,EAAIs0C,EAASt0C,GAAK,EAC5BkwB,EAAI3Q,EAAKvf,EAAI,GACbqd,EAAIkC,EAAKvf,EAAI,GACbe,EAAIwe,EAAKvf,EAAI,GACbgS,EAAIuN,EAAKvf,EAAI,GACbuf,EAAKvf,EAAI,GAAK63C,EAAK3nB,EAAI4nB,EAAKz6B,EAAI06B,EAAKh3C,EACrCwe,EAAKvf,EAAI,GAAKg4C,EAAK9nB,EAAI+nB,EAAK56B,EAAI66B,EAAKn3C,EACrCwe,EAAKvf,EAAI,GAAKm4C,EAAKjoB,EAAIkoB,EAAK/6B,EAAIg7B,EAAKt3C,EACrCwe,EAAKvf,EAAI,GAAKgS,GAIlBtQ,EAAUyE,QAAQC,gBAAgB3E,EAAO+B,KAAM,MAAO,EAAGiD,EAAa+B,qBAAsB9G,EAAUyE,QAAQsV,gBAC9G/Z,EAAUyE,QAAQC,gBAAgB3E,EAAO+B,KAAM,aAAc,EAAGiD,EAAa+B,qBAAsB9G,EAAUyE,QAAQsV,gBACrH/Z,EAAUyE,QAAQC,gBAAgB3E,EAAO+B,KAAM,QAAS,EAAGiD,EAAa+B,qBAAsB9G,EAAUyE,QAAQsV,iDC5ChHpe,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGTD,EAAQ2zC,OAAS,SAAUjuB,GACzB,IAEIjjB,EAFAuf,EAAO0D,EAAU1D,KACjBrgB,EAAMqgB,EAAK1gB,OAGf,IAAKmB,EAAI,EAAGA,EAAId,EAAKc,GAAK,EACxBuf,EAAKvf,GAAK,IAAMuf,EAAKvf,GACrBuf,EAAKvf,EAAI,GAAK,IAAMuf,EAAKvf,EAAI,GAC7Buf,EAAKvf,EAAI,GAAK,IAAMuf,EAAKvf,EAAI,uCCZjC3C,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAAIkE,EAAY,EAAQ,MAEpBD,EAAS,EAAQ,MAEjBF,EAAS,EAAQ,MAEjBkF,EAAe,EAAQ,MAuG3BlJ,EAAQ4zC,aAAe,SAAUluB,GAC/B,IAEIve,EAAGC,EAAS3E,EAAGkwB,EAAG7S,EAAGtc,EAAGiR,EAAGumC,EAAQC,EAFnCC,EAAQx1B,EAAU5e,MAClBq0C,EAAQz1B,EAAU3e,OAElBq0C,EAAQrqC,KAAKgR,MAAMphB,KAAK06C,qBACxB/6B,EAAQvP,KAAKgR,MAAMphB,KAAK26C,qBACxBlhC,EAASrJ,KAAKwqC,MAAML,GAAS56B,EAAQ,KAAO,KAEhD,KAAI86B,EAAQ,GAAZ,CAIA,IAAII,EAAax3C,EAAOyC,KAAK8C,sBAC7BiyC,EAAW10C,MAAQo0C,EACnBM,EAAWz0C,OAASo0C,EACpB,IAAIM,EAAcD,EAAWp2C,WAAW,MAAMqQ,aAAa,EAAG,EAAGylC,EAAOC,IApH5D,SAAiB9Q,EAAKqR,EAAKC,GACvC,IAMIl5C,EACA0E,EACAC,EAKAq3B,EAbAmd,EAAYvR,EAAIroB,KAChB65B,EAAYH,EAAI15B,KAChBk5B,EAAQ7Q,EAAIvjC,MACZq0C,EAAQ9Q,EAAItjC,OACZ+0C,EAAOH,EAAII,cAAgBb,EAAQ,EACnCc,EAAOL,EAAIM,cAAgBd,EAAQ,EAInCxoB,EAAI,EACJ7S,EAAI,EACJtc,EAAI,EACJiR,EAAI,EAEJukC,EAAOjoC,KAAK27B,KAAKoP,EAAOA,EAAOE,EAAOA,GAC1C70C,EAAI+zC,EAAQY,EACZ10C,EAAI+zC,EAAQa,EAEZhD,GADAva,EAAM1tB,KAAK27B,KAAKvlC,EAAIA,EAAIC,EAAIA,IACf4xC,EAAOva,EAAMua,EAC1B,IAEItE,EACA7qB,EAEA2T,EACAkB,EANAwd,EAAQf,EACRgB,EAAQjB,EAGRkB,EAAa,IAAMD,EAAQprC,KAAK6N,GAAK,IAIzC,IAAKiL,EAAQ,EAAGA,EAAQsyB,EAAOtyB,GAAS,EAItC,IAHA2T,EAAMzsB,KAAKysB,IAAI3T,EAAQuyB,GACvB1d,EAAM3tB,KAAK2tB,IAAI7U,EAAQuyB,GAElB1H,EAAS,EAAGA,EAASwH,EAAOxH,GAAU,EACzCvtC,EAAI4J,KAAKwqC,MAAMO,EAAO9C,EAAOtE,EAASwH,EAAQxd,GAG9C/L,EAAIipB,EAAc,GADlBn5C,EAAsB,IADtB2E,EAAI2J,KAAKwqC,MAAMS,EAAOhD,EAAOtE,EAASwH,EAAQ1e,IACrC0d,EAAQ/zC,KAEjB2Y,EAAI87B,EAAUn5C,EAAI,GAClBe,EAAIo4C,EAAUn5C,EAAI,GAClBgS,EAAImnC,EAAUn5C,EAAI,GAElBo5C,EAAc,GADdp5C,EAA+B,GAA1BonB,EAAQ6qB,EAASwG,KACHvoB,EACnBkpB,EAAUp5C,EAAI,GAAKqd,EACnB+7B,EAAUp5C,EAAI,GAAKe,EACnBq4C,EAAUp5C,EAAI,GAAKgS,EAyEvB4nC,CAAQ32B,EAAW+1B,EAAa,CAC9BM,aAAcb,EAAQ,EACtBe,aAAcd,EAAQ,IAIxB,IAFA,IAAImB,EAAiBpB,EAAQnqC,KAAKwsB,IAAI,EAAG6d,GAElCkB,GAAkB,GACvBA,GAAkC,EAClClB,GAAS,EAIX,IAAImB,EADJD,EAAiBvrC,KAAKyrC,KAAKF,GAEvBG,EAAS,EACTC,EAAOH,EACPI,EAAS,EAQb,IANIviC,EAASkiC,EAAiBpB,IAC5BuB,EAASF,EACTG,EAAO,EACPC,GAAU,GAGPv1C,EAAI,EAAGA,EAAI+zC,EAAO/zC,GAAK,EAC1B,IAAKD,EAAIs1C,EAAQt1C,IAAMu1C,EAAMv1C,GAAKw1C,EAEhC3B,EAA8B,GAApBE,EAAQ9zC,EADX2J,KAAKgR,MAAM5a,EAAIiT,GAAU8gC,GAEhCvoB,EAAI8oB,EAAYz5B,KAAKg5B,EAAS,GAC9Bl7B,EAAI27B,EAAYz5B,KAAKg5B,EAAS,GAC9Bx3C,EAAIi4C,EAAYz5B,KAAKg5B,EAAS,GAC9BvmC,EAAIgnC,EAAYz5B,KAAKg5B,EAAS,GAC9BC,EAA2B,GAAjBC,EAAQ9zC,EAAID,GACtBs0C,EAAYz5B,KAAKi5B,EAAS,GAAKtoB,EAC/B8oB,EAAYz5B,KAAKi5B,EAAS,GAAKn7B,EAC/B27B,EAAYz5B,KAAKi5B,EAAS,GAAKz3C,EAC/Bi4C,EAAYz5B,KAAKi5B,EAAS,GAAKxmC,EAInC,IAAKrN,EAAI,EAAGA,EAAI+zC,EAAO/zC,GAAK,EAG1B,IAFAm1C,EAAcxrC,KAAKwqC,MAAMe,GAEpB75C,EAAI,EAAGA,EAAI24C,EAAO34C,GAAK,EAAG,CAC7B,IAAK0E,EAAI,EAAGA,EAAIo1C,EAAc,EAAGp1C,GAAK,EACpC6zC,EAA2B,GAAjBE,EAAQ9zC,EAAID,GACtBwrB,EAAI8oB,EAAYz5B,KAAKg5B,EAAS,GAC9Bl7B,EAAI27B,EAAYz5B,KAAKg5B,EAAS,GAC9Bx3C,EAAIi4C,EAAYz5B,KAAKg5B,EAAS,GAC9BvmC,EAAIgnC,EAAYz5B,KAAKg5B,EAAS,GAC9BC,EAAiD,GAAvCC,EAAQ9zC,EAAkB,EAAdm1C,EAAkBp1C,EAAI,GAC5Cs0C,EAAYz5B,KAAKi5B,EAAS,GAAKtoB,EAC/B8oB,EAAYz5B,KAAKi5B,EAAS,GAAKn7B,EAC/B27B,EAAYz5B,KAAKi5B,EAAS,GAAKz3C,EAC/Bi4C,EAAYz5B,KAAKi5B,EAAS,GAAKxmC,EAGjC8nC,GAAe,GA5HL,SAAmBlS,EAAKqR,EAAKC,GAC3C,IAMIl5C,EACA0E,EACAC,EACA43B,EACAC,EAKAR,EAfAmd,EAAYvR,EAAIroB,KAChB65B,EAAYH,EAAI15B,KAChBk5B,EAAQ7Q,EAAIvjC,MACZq0C,EAAQ9Q,EAAItjC,OACZ+0C,EAAOH,EAAII,cAAgBb,EAAQ,EACnCc,EAAOL,EAAIM,cAAgBd,EAAQ,EAMnCxoB,EAAI,EACJ7S,EAAI,EACJtc,EAAI,EACJiR,EAAI,EAEJukC,EAAOjoC,KAAK27B,KAAKoP,EAAOA,EAAOE,EAAOA,GAC1C70C,EAAI+zC,EAAQY,EACZ10C,EAAI+zC,EAAQa,EAEZhD,GADAva,EAAM1tB,KAAK27B,KAAKvlC,EAAIA,EAAIC,EAAIA,IACf4xC,EAAOva,EAAMua,EAC1B,IAEItE,EACA7qB,EAEAwiB,EALA6P,EAAQf,EACRgB,EAAQjB,EAGR0B,EAAajB,EAAIkB,eAAiB,EAGtC,IAAK11C,EAAI,EAAGA,EAAI+zC,EAAO/zC,GAAK,EAC1B,IAAKC,EAAI,EAAGA,EAAI+zC,EAAO/zC,GAAK,EAC1B43B,EAAK73B,EAAI20C,EACT7c,EAAK73B,EAAI40C,EACTtH,EAAS3jC,KAAK27B,KAAK1N,EAAKA,EAAKC,EAAKA,GAAMid,EAAQlD,EAEhDnvB,GADAA,GAA8B,IAArB9Y,KAAK+rC,MAAM7d,EAAID,GAAYjuB,KAAK6N,GAAK,IAAMg+B,GAAc,KAClDT,EAAQ,IACxB9P,EAAKt7B,KAAKwqC,MAAM1xB,GAGhB8I,EAAIipB,EAAc,GADlBn5C,EAAwB,GADnBsO,KAAKwqC,MAAM7G,GACNwG,EAAQ7O,KAElBvsB,EAAI87B,EAAUn5C,EAAI,GAClBe,EAAIo4C,EAAUn5C,EAAI,GAClBgS,EAAImnC,EAAUn5C,EAAI,GAElBo5C,EAAc,GADdp5C,EAAsB,GAAjB2E,EAAI8zC,EAAQ/zC,KACEwrB,EACnBkpB,EAAUp5C,EAAI,GAAKqd,EACnB+7B,EAAUp5C,EAAI,GAAKe,EACnBq4C,EAAUp5C,EAAI,GAAKgS,EAiFvBsoC,CAAUtB,EAAa/1B,EAAW,CAChCm3B,cAAe,MAInB14C,EAAUyE,QAAQC,gBAAgB3E,EAAO+B,KAAM,oBAAqB,EAAGiD,EAAa+B,qBAAsB9G,EAAUyE,QAAQsV,gBAC5H/Z,EAAUyE,QAAQC,gBAAgB3E,EAAO+B,KAAM,oBAAqB,EAAGiD,EAAa+B,qBAAsB9G,EAAUyE,QAAQsV,mDCnM5Hpe,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAAIkE,EAAY,EAAQ,MAEpBD,EAAS,EAAQ,MAEjBgF,EAAe,EAAQ,MAE3B,SAAS8zC,EAAQC,EAAO91C,EAAGC,GACzB,IAAI81C,EAA8B,GAAvB91C,EAAI61C,EAAMn2C,MAAQK,GACzB5D,EAAI,GAER,OADAA,EAAE1B,KAAKo7C,EAAMj7B,KAAKk7B,KAAQD,EAAMj7B,KAAKk7B,KAAQD,EAAMj7B,KAAKk7B,KAAQD,EAAMj7B,KAAKk7B,MACpE35C,EAGT,SAAS45C,EAAYnP,EAAIC,GACvB,OAAOl9B,KAAK27B,KAAK37B,KAAKwsB,IAAIyQ,EAAG,GAAKC,EAAG,GAAI,GAAKl9B,KAAKwsB,IAAIyQ,EAAG,GAAKC,EAAG,GAAI,GAAKl9B,KAAKwsB,IAAIyQ,EAAG,GAAKC,EAAG,GAAI,IAyIrGjuC,EAAQ6zC,KAAO,SAAUnuB,GACvB,IACI03B,EAzHN,SAAwBH,EAAOI,GAC7B,IAAIC,EAAUN,EAAQC,EAAO,EAAG,GAC5BM,EAAUP,EAAQC,EAAOA,EAAMn2C,MAAQ,EAAG,GAC1C02C,EAAUR,EAAQC,EAAO,EAAGA,EAAMl2C,OAAS,GAC3C02C,EAAUT,EAAQC,EAAOA,EAAMn2C,MAAQ,EAAGm2C,EAAMl2C,OAAS,GACzD22C,EAAQL,GAAa,GAEzB,GAAIF,EAAYG,EAASC,GAAWG,GAASP,EAAYI,EAASE,GAAWC,GAASP,EAAYM,EAASD,GAAWE,GAASP,EAAYK,EAASF,GAAWI,EAAO,CAIpK,IAHA,IAAIC,EAvBR,SAAiBC,GAGf,IAFA,IAAIt1C,EAAI,CAAC,EAAG,EAAG,GAEN7F,EAAI,EAAGA,EAAIm7C,EAAKt8C,OAAQmB,IAC/B6F,EAAE,IAAMs1C,EAAKn7C,GAAG,GAChB6F,EAAE,IAAMs1C,EAAKn7C,GAAG,GAChB6F,EAAE,IAAMs1C,EAAKn7C,GAAG,GAMlB,OAHA6F,EAAE,IAAMs1C,EAAKt8C,OACbgH,EAAE,IAAMs1C,EAAKt8C,OACbgH,EAAE,IAAMs1C,EAAKt8C,OACNgH,EAWMu1C,CAAQ,CAACN,EAASD,EAASG,EAASD,IAC3CJ,EAAO,GAEF36C,EAAI,EAAGA,EAAIw6C,EAAMn2C,MAAQm2C,EAAMl2C,OAAQtE,IAAK,CACnD,IAAIc,EAAI45C,EAAYQ,EAAM,CAACV,EAAMj7B,KAAS,EAAJvf,GAAQw6C,EAAMj7B,KAAS,EAAJvf,EAAQ,GAAIw6C,EAAMj7B,KAAS,EAAJvf,EAAQ,KACxF26C,EAAK36C,GAAKc,EAAIm6C,EAAQ,EAAI,IAG5B,OAAON,GAyGEU,CAAep4B,EADV/kB,KAAK08C,aAUrB,OAPID,GAvGN,SAAmBH,EAAOG,GACxB,IAAK,IAAI36C,EAAI,EAAGA,EAAIw6C,EAAMn2C,MAAQm2C,EAAMl2C,OAAQtE,IAC9Cw6C,EAAMj7B,KAAK,EAAIvf,EAAI,GAAK26C,EAAK36C,GAyG7Bs7C,CAAUr4B,EADV03B,EAtCJ,SAAwBA,EAAMY,EAAIC,GAMhC,IALA,IAAIC,EAAU,CAAC,EAAI,EAAG,EAAI,EAAG,EAAI,EAAG,EAAI,EAAG,EAAI,EAAG,EAAI,EAAG,EAAI,EAAG,EAAI,EAAG,EAAI,GACvEC,EAAOptC,KAAKgR,MAAMhR,KAAK27B,KAAKwR,EAAQ58C,SACpC88C,EAAWrtC,KAAKwqC,MAAM4C,EAAO,GAC7BE,EAAa,GAERj3C,EAAI,EAAGA,EAAI62C,EAAI72C,IACtB,IAAK,IAAID,EAAI,EAAGA,EAAI62C,EAAI72C,IAAK,CAI3B,IAHA,IAAIm3C,EAAKl3C,EAAI42C,EAAK72C,EACdsN,EAAI,EAEC8pC,EAAK,EAAGA,EAAKJ,EAAMI,IAC1B,IAAK,IAAIC,EAAK,EAAGA,EAAKL,EAAMK,IAAM,CAChC,IAAIC,EAAMr3C,EAAIm3C,EAAKH,EACfM,EAAMv3C,EAAIq3C,EAAKJ,EAEnB,GAAIK,GAAO,GAAKA,EAAMR,GAAMS,GAAO,GAAKA,EAAMV,EAAI,CAChD,IACIW,EAAKT,EAAQK,EAAKJ,EAAOK,GAC7B/pC,GAAK2oC,EAFQqB,EAAMT,EAAKU,GAEJC,GAK1BN,EAAWC,GAAM7pC,EAIrB,OAAO4pC,EAUEO,CADPxB,EApEJ,SAAoBA,EAAMY,EAAIC,GAM5B,IALA,IAAIC,EAAU,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACnCC,EAAOptC,KAAKgR,MAAMhR,KAAK27B,KAAKwR,EAAQ58C,SACpC88C,EAAWrtC,KAAKwqC,MAAM4C,EAAO,GAC7BE,EAAa,GAERj3C,EAAI,EAAGA,EAAI62C,EAAI72C,IACtB,IAAK,IAAID,EAAI,EAAGA,EAAI62C,EAAI72C,IAAK,CAI3B,IAHA,IAAIm3C,EAAKl3C,EAAI42C,EAAK72C,EACdsN,EAAI,EAEC8pC,EAAK,EAAGA,EAAKJ,EAAMI,IAC1B,IAAK,IAAIC,EAAK,EAAGA,EAAKL,EAAMK,IAAM,CAChC,IAAIC,EAAMr3C,EAAIm3C,EAAKH,EACfM,EAAMv3C,EAAIq3C,EAAKJ,EAEnB,GAAIK,GAAO,GAAKA,EAAMR,GAAMS,GAAO,GAAKA,EAAMV,EAAI,CAChD,IACIW,EAAKT,EAAQK,EAAKJ,EAAOK,GAC7B/pC,GAAK2oC,EAFQqB,EAAMT,EAAKU,GAEJC,GAK1BN,EAAWC,GAAM7pC,GAAK,KAAU,IAAM,EAI1C,OAAO4pC,EAwCEQ,CADPzB,EAlGJ,SAAmBA,EAAMY,EAAIC,GAM3B,IALA,IAAIC,EAAU,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACnCC,EAAOptC,KAAKgR,MAAMhR,KAAK27B,KAAKwR,EAAQ58C,SACpC88C,EAAWrtC,KAAKwqC,MAAM4C,EAAO,GAC7BE,EAAa,GAERj3C,EAAI,EAAGA,EAAI62C,EAAI72C,IACtB,IAAK,IAAID,EAAI,EAAGA,EAAI62C,EAAI72C,IAAK,CAI3B,IAHA,IAAIm3C,EAAKl3C,EAAI42C,EAAK72C,EACdsN,EAAI,EAEC8pC,EAAK,EAAGA,EAAKJ,EAAMI,IAC1B,IAAK,IAAIC,EAAK,EAAGA,EAAKL,EAAMK,IAAM,CAChC,IAAIC,EAAMr3C,EAAIm3C,EAAKH,EACfM,EAAMv3C,EAAIq3C,EAAKJ,EAEnB,GAAIK,GAAO,GAAKA,EAAMR,GAAMS,GAAO,GAAKA,EAAMV,EAAI,CAChD,IACIW,EAAKT,EAAQK,EAAKJ,EAAOK,GAC7B/pC,GAAK2oC,EAFQqB,EAAMT,EAAKU,GAEJC,GAK1BN,EAAWC,GAAY,OAAN7pC,EAAgB,IAAM,EAI3C,OAAO4pC,EAsEES,CAAU1B,EAAM13B,EAAU5e,MAAO4e,EAAU3e,QAC1B2e,EAAU5e,MAAO4e,EAAU3e,QACvB2e,EAAU5e,MAAO4e,EAAU3e,SAIlD2e,GAGTvhB,EAAUyE,QAAQC,gBAAgB3E,EAAO+B,KAAM,YAAa,EAAGiD,EAAa+B,qBAAsB9G,EAAUyE,QAAQsV,mDCzKpHpe,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAAIkE,EAAY,EAAQ,MAEpBD,EAAS,EAAQ,MAEjBgF,EAAe,EAAQ,MAE3BlJ,EAAQ8zC,MAAQ,SAAUpuB,GACxB,IAIIjjB,EAJAs8C,EAAwB,IAAfp+C,KAAKq+C,QACdh9B,EAAO0D,EAAU1D,KACjB+0B,EAAU/0B,EAAK1gB,OACf29C,EAAOF,EAAS,EAGpB,IAAKt8C,EAAI,EAAGA,EAAIs0C,EAASt0C,GAAK,EAC5Buf,EAAKvf,EAAI,IAAMw8C,EAAO,EAAIA,EAAOluC,KAAK05B,SACtCzoB,EAAKvf,EAAI,IAAMw8C,EAAO,EAAIA,EAAOluC,KAAK05B,SACtCzoB,EAAKvf,EAAI,IAAMw8C,EAAO,EAAIA,EAAOluC,KAAK05B,UAI1CtmC,EAAUyE,QAAQC,gBAAgB3E,EAAO+B,KAAM,QAAS,GAAKiD,EAAa+B,qBAAsB9G,EAAUyE,QAAQsV,kDCxBlHpe,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAAIkE,EAAY,EAAQ,MAEpBH,EAAS,EAAQ,MAEjBE,EAAS,EAAQ,MAEjBgF,EAAe,EAAQ,MAE3BlJ,EAAQ+zC,SAAW,SAAUruB,GAC3B,IAGIve,EACAC,EACA3E,EACA6kC,EACAlE,EACA7C,EACA2e,EAGAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAlBAC,EAAY3uC,KAAKyrC,KAAK77C,KAAK++C,aAC3B54C,EAAQ4e,EAAU5e,MAClBC,EAAS2e,EAAU3e,OAQnB44C,EAAS5uC,KAAKyrC,KAAK11C,EAAQ44C,GAC3BE,EAAS7uC,KAAKyrC,KAAKz1C,EAAS24C,GAQ5B19B,EAAO0D,EAAU1D,KAErB,GAAI09B,GAAa,EACf17C,EAAOyC,KAAKsE,MAAM,wCAIpB,IAAKw0C,EAAO,EAAGA,EAAOI,EAAQJ,GAAQ,EACpC,IAAKC,EAAO,EAAGA,EAAOI,EAAQJ,GAAQ,EAAG,CAWvC,IAVAlY,EAAM,EACNlE,EAAQ,EACR7C,EAAO,EACP2e,EAAQ,EAERE,GADAD,EAAYI,EAAOG,GACGA,EAEtBJ,GADAD,EAAYG,EAAOE,GACGA,EACtBD,EAAc,EAETt4C,EAAIg4C,EAAWh4C,EAAIi4C,EAASj4C,GAAK,EACpC,KAAIA,GAAKL,GAIT,IAAKM,EAAIi4C,EAAWj4C,EAAIk4C,EAASl4C,GAAK,EAChCA,GAAKL,IAKTugC,GAAOtlB,GADPvf,EAAsB,GAAjBqE,EAAQM,EAAID,IACD,GAChBi8B,GAASphB,EAAKvf,EAAI,GAClB89B,GAAQve,EAAKvf,EAAI,GACjBy8C,GAASl9B,EAAKvf,EAAI,GAClBg9C,GAAe,GASnB,IALAnY,GAAYmY,EACZrc,GAAgBqc,EAChBlf,GAAckf,EACdP,GAAgBO,EAEXt4C,EAAIg4C,EAAWh4C,EAAIi4C,EAASj4C,GAAK,EACpC,KAAIA,GAAKL,GAIT,IAAKM,EAAIi4C,EAAWj4C,EAAIk4C,EAASl4C,GAAK,EAChCA,GAAKL,IAKTib,GADAvf,EAAsB,GAAjBqE,EAAQM,EAAID,IACR,GAAKmgC,EACdtlB,EAAKvf,EAAI,GAAK2gC,EACdphB,EAAKvf,EAAI,GAAK89B,EACdve,EAAKvf,EAAI,GAAKy8C,KAOxB/6C,EAAUyE,QAAQC,gBAAgB3E,EAAO+B,KAAM,YAAa,EAAGiD,EAAa+B,qBAAsB9G,EAAUyE,QAAQsV,mDChGpHpe,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAAIkE,EAAY,EAAQ,MAEpBD,EAAS,EAAQ,MAEjBgF,EAAe,EAAQ,MAE3BlJ,EAAQg0C,UAAY,SAAUtuB,GAC5B,IAIIjjB,EAJAo9C,EAAS9uC,KAAKgR,MAAsB,IAAhBphB,KAAKk/C,UAAkB,EAC3C79B,EAAO0D,EAAU1D,KACjBrgB,EAAMqgB,EAAK1gB,OACXmJ,EAAQ,IAAMo1C,EAGlB,IAAKp9C,EAAI,EAAGA,EAAId,EAAKc,GAAK,EACxBuf,EAAKvf,GAAKsO,KAAKwqC,MAAMv5B,EAAKvf,GAAKgI,GAASA,GAI5CtG,EAAUyE,QAAQC,gBAAgB3E,EAAO+B,KAAM,SAAU,GAAKiD,EAAa+B,qBAAsB9G,EAAUyE,QAAQsV,mDCtBnHpe,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAAIkE,EAAY,EAAQ,MAEpBD,EAAS,EAAQ,MAEjBgF,EAAe,EAAQ,MAE3BlJ,EAAQi0C,IAAM,SAAUvuB,GACtB,IAKIjjB,EACAm0C,EANA50B,EAAO0D,EAAU1D,KACjB+0B,EAAU/0B,EAAK1gB,OACfgmC,EAAM3mC,KAAK2mC,MACXlE,EAAQziC,KAAKyiC,QACb7C,EAAO5/B,KAAK4/B,OAIhB,IAAK99B,EAAI,EAAGA,EAAIs0C,EAASt0C,GAAK,EAC5Bm0C,GAAc,IAAO50B,EAAKvf,GAAK,GAAMuf,EAAKvf,EAAI,GAAK,IAAOuf,EAAKvf,EAAI,IAAM,IACzEuf,EAAKvf,GAAKm0C,EAAatP,EACvBtlB,EAAKvf,EAAI,GAAKm0C,EAAaxT,EAC3BphB,EAAKvf,EAAI,GAAKm0C,EAAarW,EAC3Bve,EAAKvf,EAAI,GAAKuf,EAAKvf,EAAI,IAI3B0B,EAAUyE,QAAQC,gBAAgB3E,EAAO+B,KAAM,MAAO,GAAG,SAAU2M,GAGjE,OAFAjS,KAAKwd,iBAAkB,EAEnBvL,EAAM,IACD,IACEA,EAAM,EACR,EAEA7B,KAAKgR,MAAMnP,MAGtBzO,EAAUyE,QAAQC,gBAAgB3E,EAAO+B,KAAM,QAAS,GAAG,SAAU2M,GAGnE,OAFAjS,KAAKwd,iBAAkB,EAEnBvL,EAAM,IACD,IACEA,EAAM,EACR,EAEA7B,KAAKgR,MAAMnP,MAGtBzO,EAAUyE,QAAQC,gBAAgB3E,EAAO+B,KAAM,OAAQ,EAAGiD,EAAagmC,aAAc/qC,EAAUyE,QAAQsV,kDClDvGpe,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAAIkE,EAAY,EAAQ,MAEpBD,EAAS,EAAQ,MAEjBgF,EAAe,EAAQ,MAE3BlJ,EAAQk0C,KAAO,SAAUxuB,GACvB,IAMIjjB,EACAq9C,EAPA99B,EAAO0D,EAAU1D,KACjB+0B,EAAU/0B,EAAK1gB,OACfgmC,EAAM3mC,KAAK2mC,MACXlE,EAAQziC,KAAKyiC,QACb7C,EAAO5/B,KAAK4/B,OACZ2e,EAAQv+C,KAAKu+C,QAIjB,IAAKz8C,EAAI,EAAGA,EAAIs0C,EAASt0C,GAAK,EAC5Bq9C,EAAK,EAAIZ,EACTl9B,EAAKvf,GAAK6kC,EAAM4X,EAAQl9B,EAAKvf,GAAKq9C,EAClC99B,EAAKvf,EAAI,GAAK2gC,EAAQ8b,EAAQl9B,EAAKvf,EAAI,GAAKq9C,EAC5C99B,EAAKvf,EAAI,GAAK89B,EAAO2e,EAAQl9B,EAAKvf,EAAI,GAAKq9C,GAI/C37C,EAAUyE,QAAQC,gBAAgB3E,EAAO+B,KAAM,MAAO,GAAG,SAAU2M,GAGjE,OAFAjS,KAAKwd,iBAAkB,EAEnBvL,EAAM,IACD,IACEA,EAAM,EACR,EAEA7B,KAAKgR,MAAMnP,MAGtBzO,EAAUyE,QAAQC,gBAAgB3E,EAAO+B,KAAM,QAAS,GAAG,SAAU2M,GAGnE,OAFAjS,KAAKwd,iBAAkB,EAEnBvL,EAAM,IACD,IACEA,EAAM,EACR,EAEA7B,KAAKgR,MAAMnP,MAGtBzO,EAAUyE,QAAQC,gBAAgB3E,EAAO+B,KAAM,OAAQ,EAAGiD,EAAagmC,aAAc/qC,EAAUyE,QAAQsV,gBACvG/Z,EAAUyE,QAAQC,gBAAgB3E,EAAO+B,KAAM,QAAS,GAAG,SAAU2M,GAGnE,OAFAjS,KAAKwd,iBAAkB,EAEnBvL,EAAM,EACD,EACEA,EAAM,EACR,EAEAA,sCC3DX9S,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGTD,EAAQm0C,MAAQ,SAAUzuB,GACxB,IAEIjjB,EACAkwB,EACA7S,EACAtc,EALAwe,EAAO0D,EAAU1D,KACjB+0B,EAAU/0B,EAAK1gB,OAMnB,IAAKmB,EAAI,EAAGA,EAAIs0C,EAASt0C,GAAK,EAC5BkwB,EAAI3Q,EAAKvf,EAAI,GACbqd,EAAIkC,EAAKvf,EAAI,GACbe,EAAIwe,EAAKvf,EAAI,GACbuf,EAAKvf,EAAI,GAAKsO,KAAKC,IAAI,IAAS,KAAJ2hB,EAAgB,KAAJ7S,EAAgB,KAAJtc,GACpDwe,EAAKvf,EAAI,GAAKsO,KAAKC,IAAI,IAAS,KAAJ2hB,EAAgB,KAAJ7S,EAAgB,KAAJtc,GACpDwe,EAAKvf,EAAI,GAAKsO,KAAKC,IAAI,IAAS,KAAJ2hB,EAAgB,KAAJ7S,EAAgB,KAAJtc,qCClBxD1D,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGTD,EAAQo0C,SAAW,SAAU1uB,GAC3B,IAAI1D,EAAO0D,EAAU1D,KACjB01B,EAAIhyB,EAAU5e,MAEd8wC,EAAS,EAAJF,EACLtwC,EAFIse,EAAU3e,OAIlB,EAAG,CACD,IAAIoiB,GAAW/hB,EAAI,GAAKwwC,EACpBzwC,EAAIuwC,EAER,EAAG,CACD,IAAIt9B,EAAS+O,EAAoB,GAAThiB,EAAI,GACxBwrB,EAAI3Q,EAAK5H,GACT0F,EAAIkC,EAAK5H,EAAS,GAClB5W,EAAIwe,EAAK5H,EAAS,GAElBuY,EAAI,MACNA,EAAI,IAAMA,GAGR7S,EAAI,MACNA,EAAI,IAAMA,GAGRtc,EAAI,MACNA,EAAI,IAAMA,GAGZwe,EAAK5H,GAAUuY,EACf3Q,EAAK5H,EAAS,GAAK0F,EACnBkC,EAAK5H,EAAS,GAAK5W,UACV2D,WACFC,uCCrCbtH,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAAIkE,EAAY,EAAQ,MAEpBD,EAAS,EAAQ,MAEjBgF,EAAe,EAAQ,MAE3BlJ,EAAQq0C,UAAY,SAAU3uB,GAC5B,IAGIjjB,EAHAs9C,EAA2B,IAAnBp/C,KAAK08C,YACbr7B,EAAO0D,EAAU1D,KACjBrgB,EAAMqgB,EAAK1gB,OAGf,IAAKmB,EAAI,EAAGA,EAAId,EAAKc,GAAK,EACxBuf,EAAKvf,GAAKuf,EAAKvf,GAAKs9C,EAAQ,EAAI,KAIpC57C,EAAUyE,QAAQC,gBAAgB3E,EAAO+B,KAAM,YAAa,GAAKiD,EAAa+B,qBAAsB9G,EAAUyE,QAAQsV,sCCvBtH,IAAI5U,EAAQ,UAEZA,EAAM0X,cAAc1X,GAEpBtJ,EAAA,QAAqBsJ,EACrB02C,EAAOhgD,QAAUA,EAAiB,2CCHlC,IACMqD,EADFC,EAAY3C,MAAQA,KAAK2C,YACvBD,EAAiB,SAAuBE,EAAGC,GAW7C,OAVAH,EAAiBvD,OAAO2D,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAET,eAAea,KAAIL,EAAEK,GAAKJ,EAAEI,KAI/BP,EAAeE,EAAGC,IAGpB,SAAUD,EAAGC,GAGlB,SAASK,IACPlD,KAAKmD,YAAcP,EAHrBF,EAAeE,EAAGC,GAMlBD,EAAEnC,UAAkB,OAANoC,EAAa1D,OAAOiE,OAAOP,IAAMK,EAAGzC,UAAYoC,EAAEpC,UAAW,IAAIyC,KAInF/D,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAAI+D,EAAS,EAAQ,MAEjBG,EAAY,EAAQ,MAEpBkd,EAAU,EAAQ,MAElBnhB,EAAW,EAAQ,MAEnBgJ,EAAe,EAAQ,MAEvBisB,EAAW,EAAQ,MAEnB8c,EAAM,SAAU3tC,GAGlB,SAAS2tC,IACP,OAAkB,OAAX3tC,GAAmBA,EAAOgH,MAAM3K,KAAM4K,YAAc5K,KA6B7D,OAhCA2C,EAAU2uC,EAAK3tC,GAMf2tC,EAAI7wC,UAAU6+C,WAAa,SAAU73C,GACnC,IAAIkY,EAAQpgB,EAASoJ,MAAMmO,SAAS9W,KAAK2f,SACrC4/B,EAAYv/C,KAAKu/C,YACrB93C,EAAQmH,YACRnH,EAAQ0L,IAAI,EAAG,EAAGnT,KAAKw/C,cAAe,EAAG7/B,EAAO4/B,GAChD93C,EAAQ0L,IAAI,EAAG,EAAGnT,KAAKy/C,cAAe9/B,EAAO,GAAI4/B,GACjD93C,EAAQmM,YACRnM,EAAQ8J,gBAAgBvR,OAG1BsxC,EAAI7wC,UAAU6F,SAAW,WACvB,OAA4B,EAArBtG,KAAKw/C,eAGdlO,EAAI7wC,UAAU8F,UAAY,WACxB,OAA4B,EAArBvG,KAAKw/C,eAGdlO,EAAI7wC,UAAUsG,SAAW,SAAUZ,GACjCnG,KAAKw/C,YAAYr5C,EAAQ,IAG3BmrC,EAAI7wC,UAAUwG,UAAY,SAAUb,GAClCpG,KAAKw/C,YAAYp5C,EAAS,IAGrBkrC,EAjCC,CAkCR5wB,EAAQuP,OAEV5wB,EAAQiyC,IAAMA,EACdA,EAAI7wC,UAAUiyB,WAAY,EAC1B4e,EAAI7wC,UAAUipB,UAAY,MAC1B4nB,EAAI7wC,UAAU6tB,oBAAsB,CAAC,cAAe,eAEpDkG,EAASzW,cAAcuzB,GAEvB9tC,EAAUyE,QAAQC,gBAAgBopC,EAAK,cAAe,EAAG/oC,EAAa+B,sBACtE9G,EAAUyE,QAAQC,gBAAgBopC,EAAK,cAAe,EAAG/oC,EAAa+B,sBACtE9G,EAAUyE,QAAQC,gBAAgBopC,EAAK,QAAS,EAAG/oC,EAAa+B,sBAChE9G,EAAUyE,QAAQC,gBAAgBopC,EAAK,aAAa,EAAO/oC,EAAaoZ,uBACxEte,EAAO8E,WAAWC,WAAWkpC,sCCzF7B,IACM5uC,EADFC,EAAY3C,MAAQA,KAAK2C,YACvBD,EAAiB,SAAuBE,EAAGC,GAW7C,OAVAH,EAAiBvD,OAAO2D,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAET,eAAea,KAAIL,EAAEK,GAAKJ,EAAEI,KAI/BP,EAAeE,EAAGC,IAGpB,SAAUD,EAAGC,GAGlB,SAASK,IACPlD,KAAKmD,YAAcP,EAHrBF,EAAeE,EAAGC,GAMlBD,EAAEnC,UAAkB,OAANoC,EAAa1D,OAAOiE,OAAOP,IAAMK,EAAGzC,UAAYoC,EAAEpC,UAAW,IAAIyC,KAInF/D,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAAI+D,EAAS,EAAQ,MAEjBG,EAAY,EAAQ,MAEpBgsC,EAAS,EAAQ,MAEjBjnC,EAAe,EAAQ,MAEvBhJ,EAAW,EAAQ,MAEnBgyC,EAAQ,SAAU5tC,GAGpB,SAAS4tC,IACP,OAAkB,OAAX5tC,GAAmBA,EAAOgH,MAAM3K,KAAM4K,YAAc5K,KAyE7D,OA5EA2C,EAAU4uC,EAAO5tC,GAMjB4tC,EAAM9wC,UAAU6+C,WAAa,SAAUluB,GACrCztB,EAAOlD,UAAU6+C,WAAWp9C,KAAKlC,KAAMoxB,GAEvC,IAAIsuB,EAAgB,EAAVtvC,KAAK6N,GACXuG,EAASxkB,KAAKwkB,SACdm7B,EAAKn7B,EACLo7B,EAAiC,IAAnB5/C,KAAKosC,WAAmB5nB,EAAO7jB,OAAS,EAEtDi/C,IACFD,EAAK3/C,KAAK6/C,oBAGZ,IACIxhB,EAAIC,EADJv9B,EAAIyjB,EAAO7jB,OAGXi/C,GACFvhB,EAAK7Z,EAAOzjB,EAAI,GAAK4+C,EAAG5+C,EAAI,GAC5Bu9B,EAAK9Z,EAAOzjB,EAAI,GAAK4+C,EAAG5+C,EAAI,KAE5Bs9B,EAAK7Z,EAAOzjB,EAAI,GAAKyjB,EAAOzjB,EAAI,GAChCu9B,EAAK9Z,EAAOzjB,EAAI,GAAKyjB,EAAOzjB,EAAI,IAGlC,IAAI++C,GAAW1vC,KAAK+rC,MAAM7d,EAAID,GAAMqhB,GAAOA,EACvC/+C,EAASX,KAAK+/C,gBACd55C,EAAQnG,KAAKggD,eACjB5uB,EAAI1jB,OACJ0jB,EAAIxiB,YACJwiB,EAAI7b,UAAUiP,EAAOzjB,EAAI,GAAIyjB,EAAOzjB,EAAI,IACxCqwB,EAAIlc,OAAO4qC,GACX1uB,EAAI7lB,OAAO,EAAG,GACd6lB,EAAIrc,QAAQpU,EAAQwF,EAAQ,GAC5BirB,EAAIrc,QAAQpU,GAASwF,EAAQ,GAC7BirB,EAAIxd,YACJwd,EAAIxjB,UAEA5N,KAAKigD,uBACP7uB,EAAI1jB,OACJ0jB,EAAI7b,UAAUiP,EAAO,GAAIA,EAAO,IAE5Bo7B,GACFvhB,EAAKshB,EAAG,GAAKn7B,EAAO,GACpB8Z,EAAKqhB,EAAG,GAAKn7B,EAAO,KAEpB6Z,EAAK7Z,EAAO,GAAKA,EAAO,GACxB8Z,EAAK9Z,EAAO,GAAKA,EAAO,IAG1B4M,EAAIlc,QAAQ9E,KAAK+rC,OAAO7d,GAAKD,GAAMqhB,GAAOA,GAC1CtuB,EAAI7lB,OAAO,EAAG,GACd6lB,EAAIrc,QAAQpU,EAAQwF,EAAQ,GAC5BirB,EAAIrc,QAAQpU,GAASwF,EAAQ,GAC7BirB,EAAIxd,YACJwd,EAAIxjB,WAGN,IAAIsyC,EAAgBlgD,KAAK8Y,cAErBonC,IACFlgD,KAAKwP,MAAMsJ,aAAc,EACzBsY,EAAIjc,YAAY,KAGlBic,EAAI7f,gBAAgBvR,MAEhBkgD,IACFlgD,KAAKwP,MAAMsJ,aAAc,IAItBy4B,EA7EG,CA8EV/B,EAAOoC,MAETvyC,EAAQkyC,MAAQA,EAChBA,EAAM9wC,UAAUipB,UAAY,QAE5BnqB,EAASwe,cAAcwzB,GAEvB/tC,EAAUyE,QAAQC,gBAAgBqpC,EAAO,gBAAiB,GAAIhpC,EAAa+B,sBAC3E9G,EAAUyE,QAAQC,gBAAgBqpC,EAAO,eAAgB,GAAIhpC,EAAa+B,sBAC1E9G,EAAUyE,QAAQC,gBAAgBqpC,EAAO,sBAAsB,GAC/DluC,EAAO8E,WAAWC,WAAWmpC,sCChI7B,IACM7uC,EADFC,EAAY3C,MAAQA,KAAK2C,YACvBD,EAAiB,SAAuBE,EAAGC,GAW7C,OAVAH,EAAiBvD,OAAO2D,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAET,eAAea,KAAIL,EAAEK,GAAKJ,EAAEI,KAI/BP,EAAeE,EAAGC,IAGpB,SAAUD,EAAGC,GAGlB,SAASK,IACPlD,KAAKmD,YAAcP,EAHrBF,EAAeE,EAAGC,GAMlBD,EAAEnC,UAAkB,OAANoC,EAAa1D,OAAOiE,OAAOP,IAAMK,EAAGzC,UAAYoC,EAAEpC,UAAW,IAAIyC,KAInF/D,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAAI+D,EAAS,EAAQ,MAEjBG,EAAY,EAAQ,MAEpBkd,EAAU,EAAQ,MAElBnY,EAAe,EAAQ,MAEvBhJ,EAAW,EAAQ,MAEnBiyC,EAAS,SAAU7tC,GAGrB,SAAS6tC,IACP,OAAkB,OAAX7tC,GAAmBA,EAAOgH,MAAM3K,KAAM4K,YAAc5K,KA8B7D,OAjCA2C,EAAU6uC,EAAQ7tC,GAMlB6tC,EAAO/wC,UAAU6+C,WAAa,SAAU73C,GACtCA,EAAQmH,YACRnH,EAAQ0L,IAAI,EAAG,EAAGnT,KAAK+zC,SAAU,EAAa,EAAV3jC,KAAK6N,IAAQ,GACjDxW,EAAQmM,YACRnM,EAAQ8J,gBAAgBvR,OAG1BwxC,EAAO/wC,UAAU6F,SAAW,WAC1B,OAAuB,EAAhBtG,KAAK+zC,UAGdvC,EAAO/wC,UAAU8F,UAAY,WAC3B,OAAuB,EAAhBvG,KAAK+zC,UAGdvC,EAAO/wC,UAAUsG,SAAW,SAAUZ,GAChCnG,KAAK+zC,WAAa5tC,EAAQ,GAC5BnG,KAAK+zC,OAAO5tC,EAAQ,IAIxBqrC,EAAO/wC,UAAUwG,UAAY,SAAUb,GACjCpG,KAAK+zC,WAAa3tC,EAAS,GAC7BpG,KAAK+zC,OAAO3tC,EAAS,IAIlBorC,EAlCI,CAmCX9wB,EAAQuP,OAEV5wB,EAAQmyC,OAASA,EACjBA,EAAO/wC,UAAUiyB,WAAY,EAC7B8e,EAAO/wC,UAAUipB,UAAY,SAC7B8nB,EAAO/wC,UAAU6tB,oBAAsB,CAAC,UAExC/uB,EAASwe,cAAcyzB,GAEvBhuC,EAAUyE,QAAQC,gBAAgBspC,EAAQ,SAAU,EAAGjpC,EAAa+B,sBACpEjH,EAAO8E,WAAWC,WAAWopC,sCCrF7B,IACM9uC,EADFC,EAAY3C,MAAQA,KAAK2C,YACvBD,EAAiB,SAAuBE,EAAGC,GAW7C,OAVAH,EAAiBvD,OAAO2D,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAET,eAAea,KAAIL,EAAEK,GAAKJ,EAAEI,KAI/BP,EAAeE,EAAGC,IAGpB,SAAUD,EAAGC,GAGlB,SAASK,IACPlD,KAAKmD,YAAcP,EAHrBF,EAAeE,EAAGC,GAMlBD,EAAEnC,UAAkB,OAANoC,EAAa1D,OAAOiE,OAAOP,IAAMK,EAAGzC,UAAYoC,EAAEpC,UAAW,IAAIyC,KAInF/D,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAAI+D,EAAS,EAAQ,MAEjBG,EAAY,EAAQ,MAEpBkd,EAAU,EAAQ,MAElBnY,EAAe,EAAQ,MAEvBhJ,EAAW,EAAQ,MAEnBkyC,EAAU,SAAU9tC,GAGtB,SAAS8tC,IACP,OAAkB,OAAX9tC,GAAmBA,EAAOgH,MAAM3K,KAAM4K,YAAc5K,KAmC7D,OAtCA2C,EAAU8uC,EAAS9tC,GAMnB8tC,EAAQhxC,UAAU6+C,WAAa,SAAU73C,GACvC,IAAI04C,EAAKngD,KAAKogD,UACVC,EAAKrgD,KAAKsgD,UACd74C,EAAQmH,YACRnH,EAAQiG,OAEJyyC,IAAOE,GACT54C,EAAQqC,MAAM,EAAGu2C,EAAKF,GAGxB14C,EAAQ0L,IAAI,EAAG,EAAGgtC,EAAI,EAAa,EAAV/vC,KAAK6N,IAAQ,GACtCxW,EAAQmG,UACRnG,EAAQmM,YACRnM,EAAQ8J,gBAAgBvR,OAG1ByxC,EAAQhxC,UAAU6F,SAAW,WAC3B,OAAwB,EAAjBtG,KAAKogD,WAGd3O,EAAQhxC,UAAU8F,UAAY,WAC5B,OAAwB,EAAjBvG,KAAKsgD,WAGd7O,EAAQhxC,UAAUsG,SAAW,SAAUZ,GACrCnG,KAAKogD,QAAQj6C,EAAQ,IAGvBsrC,EAAQhxC,UAAUwG,UAAY,SAAUb,GACtCpG,KAAKsgD,QAAQl6C,EAAS,IAGjBqrC,EAvCK,CAwCZ/wB,EAAQuP,OAEV5wB,EAAQoyC,QAAUA,EAClBA,EAAQhxC,UAAUipB,UAAY,UAC9B+nB,EAAQhxC,UAAUiyB,WAAY,EAC9B+e,EAAQhxC,UAAU6tB,oBAAsB,CAAC,UAAW,WAEpD/uB,EAASwe,cAAc0zB,GAEvBjuC,EAAUyE,QAAQ0I,0BAA0B8gC,EAAS,SAAU,CAAC,IAAK,MACrEjuC,EAAUyE,QAAQC,gBAAgBupC,EAAS,UAAW,EAAGlpC,EAAa+B,sBACtE9G,EAAUyE,QAAQC,gBAAgBupC,EAAS,UAAW,EAAGlpC,EAAa+B,sBACtEjH,EAAO8E,WAAWC,WAAWqpC,sCC5F7B,IACM/uC,EADFC,EAAY3C,MAAQA,KAAK2C,YACvBD,EAAiB,SAAuBE,EAAGC,GAW7C,OAVAH,EAAiBvD,OAAO2D,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAET,eAAea,KAAIL,EAAEK,GAAKJ,EAAEI,KAI/BP,EAAeE,EAAGC,IAGpB,SAAUD,EAAGC,GAGlB,SAASK,IACPlD,KAAKmD,YAAcP,EAHrBF,EAAeE,EAAGC,GAMlBD,EAAEnC,UAAkB,OAANoC,EAAa1D,OAAOiE,OAAOP,IAAMK,EAAGzC,UAAYoC,EAAEpC,UAAW,IAAIyC,KAInF/D,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAAI+D,EAAS,EAAQ,MAEjBG,EAAY,EAAQ,MAEpBkd,EAAU,EAAQ,MAElBnY,EAAe,EAAQ,MAEvBhJ,EAAW,EAAQ,MAEnBiqC,EAAQ,SAAU7lC,GAGpB,SAAS6lC,IACP,OAAkB,OAAX7lC,GAAmBA,EAAOgH,MAAM3K,KAAM4K,YAAc5K,KAuE7D,OA1EA2C,EAAU6mC,EAAO7lC,GAMjB6lC,EAAM/oC,UAAU4xB,iBAAmB,WACjC,SAAWryB,KAAKuwB,aAA6C,IAA9BvwB,KAAK8S,uBAA+B9S,KAAK6Y,cAAe7Y,KAAK+E,aAG9FykC,EAAM/oC,UAAU6+C,WAAa,SAAU73C,GACrC,IAGI84C,EACAC,EACApkB,EALAj2B,EAAQnG,KAAKmG,QACbC,EAASpG,KAAKoG,SACdq6C,EAAQzgD,KAAKygD,QAKbA,IACFF,EAAYvgD,KAAKugD,YACjBC,EAAaxgD,KAAKwgD,aAGhBpkB,EADEmkB,GAAaC,EACN,CAACC,EAAOzgD,KAAK0gD,QAAS1gD,KAAK2gD,QAASJ,EAAWC,EAAY,EAAG,EAAGr6C,EAAOC,GAExE,CAACq6C,EAAO,EAAG,EAAGt6C,EAAOC,KAI9BpG,KAAKiyB,WAAajyB,KAAK6Y,eACzBpR,EAAQmH,YACRnH,EAAQoH,KAAK,EAAG,EAAG1I,EAAOC,GAC1BqB,EAAQmM,YACRnM,EAAQ8J,gBAAgBvR,OAGtBygD,GACFh5C,EAAQyM,UAAUvJ,MAAMlD,EAAS20B,IAIrCoN,EAAM/oC,UAAUmgD,SAAW,SAAUn5C,GACnC,IAAItB,EAAQnG,KAAKmG,QACbC,EAASpG,KAAKoG,SAClBqB,EAAQmH,YACRnH,EAAQoH,KAAK,EAAG,EAAG1I,EAAOC,GAC1BqB,EAAQmM,YACRnM,EAAQ8J,gBAAgBvR,OAG1BwpC,EAAM/oC,UAAU6F,SAAW,WACzB,IAAIm6C,EAAQzgD,KAAKygD,QACjB,OAAOzgD,KAAKwP,MAAMrJ,QAAUs6C,EAAQA,EAAMt6C,MAAQ,IAGpDqjC,EAAM/oC,UAAU8F,UAAY,WAC1B,IAAIk6C,EAAQzgD,KAAKygD,QACjB,OAAOzgD,KAAKwP,MAAMpJ,SAAWq6C,EAAQA,EAAMr6C,OAAS,IAGtDojC,EAAMqX,QAAU,SAAUh1B,EAAKjG,GAC7B,IAAIoG,EAAM3oB,EAAOyC,KAAKujC,qBAEtBrd,EAAIyd,OAAS,WACX,IAAIgX,EAAQ,IAAIjX,EAAM,CACpBiX,MAAOz0B,IAETpG,EAAS66B,IAGXz0B,EAAI80B,YAAc,YAClB90B,EAAI0d,IAAM7d,GAGL2d,EA3EG,CA4EV9oB,EAAQuP,OAEV5wB,EAAQmqC,MAAQA,EAChBA,EAAM/oC,UAAUipB,UAAY,QAE5BnqB,EAASwe,cAAcyrB,GAEvBhmC,EAAUyE,QAAQC,gBAAgBshC,EAAO,SACzChmC,EAAUyE,QAAQ0I,0BAA0B64B,EAAO,OAAQ,CAAC,IAAK,IAAK,QAAS,WAC/EhmC,EAAUyE,QAAQC,gBAAgBshC,EAAO,QAAS,EAAGjhC,EAAa+B,sBAClE9G,EAAUyE,QAAQC,gBAAgBshC,EAAO,QAAS,EAAGjhC,EAAa+B,sBAClE9G,EAAUyE,QAAQC,gBAAgBshC,EAAO,YAAa,EAAGjhC,EAAa+B,sBACtE9G,EAAUyE,QAAQC,gBAAgBshC,EAAO,aAAc,EAAGjhC,EAAa+B,sBACvEjH,EAAO8E,WAAWC,WAAWohC,sCCjI7B,IACM9mC,EADFC,EAAY3C,MAAQA,KAAK2C,YACvBD,EAAiB,SAAuBE,EAAGC,GAW7C,OAVAH,EAAiBvD,OAAO2D,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAET,eAAea,KAAIL,EAAEK,GAAKJ,EAAEI,KAI/BP,EAAeE,EAAGC,IAGpB,SAAUD,EAAGC,GAGlB,SAASK,IACPlD,KAAKmD,YAAcP,EAHrBF,EAAeE,EAAGC,GAMlBD,EAAEnC,UAAkB,OAANoC,EAAa1D,OAAOiE,OAAOP,IAAMK,EAAGzC,UAAYoC,EAAEpC,UAAW,IAAIyC,KAInF/D,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAAI+D,EAAS,EAAQ,MAEjBG,EAAY,EAAQ,MAEpBkd,EAAU,EAAQ,MAElBquB,EAAU,EAAQ,MAElBxmC,EAAe,EAAQ,MAEvBhJ,EAAW,EAAQ,MAEnBwhD,EAAmB,CAAC,aAAc,WAAY,YAAa,UAAW,aAAc,OAAQ,SAG5FC,EAAK,KACLC,EAAQ,QACRC,EAAO,OACPC,EAAO,OACPC,EAAoBL,EAAiBpgD,OAErC+wC,EAAQ,SAAU/tC,GAGpB,SAAS+tC,EAAM9tC,GACb,IAAIC,EAAQF,EAAOzB,KAAKlC,KAAM4D,IAAW5D,KAQzC,OANA6D,EAAMI,GAAG,aAAa,SAAUwW,GAC9Bza,KAAKm7B,cAAc1gB,EAAIzP,OAEvBhL,KAAKqhD,WAGAx9C,EAuFT,OAlGAlB,EAAU+uC,EAAO/tC,GAcjB+tC,EAAMjxC,UAAU6gD,QAAU,WACxB,OAAOthD,KAAK4L,KAAK,QAAQ,IAG3B8lC,EAAMjxC,UAAU8gD,OAAS,WACvB,OAAOvhD,KAAK4L,KAAK,OAAO,IAG1B8lC,EAAMjxC,UAAU06B,cAAgB,SAAUtmB,GACxC,IACI9T,EADAkP,EAAOjQ,KAGPF,EAAO,WACTmQ,EAAKoxC,SAGP,IAAKtgD,EAAI,EAAGA,EAAIqgD,EAAmBrgD,IACjC8T,EAAK5Q,GAAG88C,EAAiBhgD,GAxCZ,eAwC+BjB,IAIhD4xC,EAAMjxC,UAAU6F,SAAW,WACzB,OAAOtG,KAAKshD,UAAUn7C,SAGxBurC,EAAMjxC,UAAU8F,UAAY,WAC1B,OAAOvG,KAAKshD,UAAUl7C,UAGxBsrC,EAAMjxC,UAAU4gD,MAAQ,WACtB,IAEIl7C,EACAC,EACAo7C,EACAxB,EACAx5C,EACAC,EACAg7C,EARA5sC,EAAO7U,KAAKshD,UACZI,EAAM1hD,KAAKuhD,SASf,GAAI1sC,GAAQ6sC,EAAK,CASf,OARAv7C,EAAQ0O,EAAK1O,QACbC,EAASyO,EAAKzO,SACdo7C,EAAmBE,EAAIF,mBACvBxB,EAAe0B,EAAI1B,eACnByB,EAAgBC,EAAID,gBACpBj7C,EAAI,EACJC,EAAI,EAEI+6C,GACN,KAAKR,EACHx6C,EAAIL,EAAQ,EACZM,GAAK,EAAIg7C,EACT,MAEF,KAAKR,EACHz6C,EAAIL,EAAQ65C,EACZv5C,EAAIL,EAAS,EACb,MAEF,KAAK86C,EACH16C,EAAIL,EAAQ,EACZM,EAAIL,EAASq7C,EACb,MAEF,KAAKN,EACH36C,GAAK,EAAIw5C,EACTv5C,EAAIL,EAAS,EAIjBs7C,EAAIj+B,SAAS,CACXjd,GAAI,EAAIA,EACRC,GAAI,EAAIA,EACRN,MAAOA,EACPC,OAAQA,IAEVyO,EAAK4O,SAAS,CACZjd,GAAI,EAAIA,EACRC,GAAI,EAAIA,MAKPirC,EAnGG,CAoGV3C,EAAQtuB,OAEVphB,EAAQqyC,MAAQA,EAChBA,EAAMjxC,UAAUipB,UAAY,QAE5BnqB,EAASwe,cAAc2zB,GAEvBruC,EAAO8E,WAAWC,WAAWspC,GAE7B,IAAIC,EAAM,SAAUhuC,GAGlB,SAASguC,IACP,OAAkB,OAAXhuC,GAAmBA,EAAOgH,MAAM3K,KAAM4K,YAAc5K,KAqG7D,OAxGA2C,EAAUgvC,EAAKhuC,GAMfguC,EAAIlxC,UAAU6+C,WAAa,SAAU73C,GACnC,IAAItB,EAAQnG,KAAKmG,QACbC,EAASpG,KAAKoG,SACdo7C,EAAmBxhD,KAAKwhD,mBACxBxB,EAAehgD,KAAKggD,eACpByB,EAAgBzhD,KAAKyhD,gBACrBE,EAAevxC,KAAKC,IAAIrQ,KAAK2hD,eAAgBx7C,EAAQ,EAAGC,EAAS,GACrEqB,EAAQmH,YAEH+yC,EAGHl6C,EAAQ8D,OAAOo2C,EAAc,GAF7Bl6C,EAAQ8D,OAAO,EAAG,GAKhBi2C,IAAqBR,IACvBv5C,EAAQsN,QAAQ5O,EAAQ65C,GAAgB,EAAG,GAC3Cv4C,EAAQsN,OAAO5O,EAAQ,GAAI,EAAIs7C,GAC/Bh6C,EAAQsN,QAAQ5O,EAAQ65C,GAAgB,EAAG,IAGxC2B,GAGHl6C,EAAQsN,OAAO5O,EAAQw7C,EAAc,GACrCl6C,EAAQ0L,IAAIhN,EAAQw7C,EAAcA,EAAcA,EAAwB,EAAVvxC,KAAK6N,GAAS,EAAG,GAAG,IAHlFxW,EAAQsN,OAAO5O,EAAO,GAMpBq7C,IAAqBP,IACvBx5C,EAAQsN,OAAO5O,GAAQC,EAASq7C,GAAiB,GACjDh6C,EAAQsN,OAAO5O,EAAQ65C,EAAc55C,EAAS,GAC9CqB,EAAQsN,OAAO5O,GAAQC,EAASq7C,GAAiB,IAG9CE,GAGHl6C,EAAQsN,OAAO5O,EAAOC,EAASu7C,GAC/Bl6C,EAAQ0L,IAAIhN,EAAQw7C,EAAcv7C,EAASu7C,EAAcA,EAAc,EAAGvxC,KAAK6N,GAAK,GAAG,IAHvFxW,EAAQsN,OAAO5O,EAAOC,GAMpBo7C,IAAqBN,IACvBz5C,EAAQsN,QAAQ5O,EAAQ65C,GAAgB,EAAG55C,GAC3CqB,EAAQsN,OAAO5O,EAAQ,EAAGC,EAASq7C,GACnCh6C,EAAQsN,QAAQ5O,EAAQ65C,GAAgB,EAAG55C,IAGxCu7C,GAGHl6C,EAAQsN,OAAO4sC,EAAcv7C,GAC7BqB,EAAQ0L,IAAIwuC,EAAcv7C,EAASu7C,EAAcA,EAAcvxC,KAAK6N,GAAK,EAAG7N,KAAK6N,IAAI,IAHrFxW,EAAQsN,OAAO,EAAG3O,GAMhBo7C,IAAqBL,IACvB15C,EAAQsN,OAAO,GAAI3O,EAASq7C,GAAiB,GAC7Ch6C,EAAQsN,QAAQ,EAAIirC,EAAc55C,EAAS,GAC3CqB,EAAQsN,OAAO,GAAI3O,EAASq7C,GAAiB,IAG3CE,IACFl6C,EAAQsN,OAAO,EAAG4sC,GAClBl6C,EAAQ0L,IAAIwuC,EAAcA,EAAcA,EAAcvxC,KAAK6N,GAAc,EAAV7N,KAAK6N,GAAS,GAAG,IAGlFxW,EAAQmM,YACRnM,EAAQ8J,gBAAgBvR,OAG1B2xC,EAAIlxC,UAAUgyB,YAAc,WAC1B,IAAIjsB,EAAI,EACJC,EAAI,EACJu5C,EAAehgD,KAAKggD,eACpByB,EAAgBzhD,KAAKyhD,gBACrBhL,EAAYz2C,KAAKwhD,mBACjBr7C,EAAQnG,KAAKmG,QACbC,EAASpG,KAAKoG,SAclB,OAZIqwC,IAAcuK,GAChBv6C,GAAKg7C,EACLr7C,GAAUq7C,GACDhL,IAAcyK,EACvB96C,GAAUq7C,EACDhL,IAAc0K,GACvB36C,GAAoB,IAAfw5C,EACL75C,GAAS65C,GACAvJ,IAAcwK,IACvB96C,GAAwB,IAAf65C,GAGJ,CACLx5C,EAAGA,EACHC,EAAGA,EACHN,MAAOA,EACPC,OAAQA,IAILurC,EAzGC,CA0GRjxB,EAAQuP,OAEV5wB,EAAQsyC,IAAMA,EACdA,EAAIlxC,UAAUipB,UAAY,MAE1BnqB,EAASwe,cAAc4zB,GAEvBnuC,EAAUyE,QAAQC,gBAAgBypC,EAAK,mBArO5B,QAsOXnuC,EAAUyE,QAAQC,gBAAgBypC,EAAK,eAAgB,EAAGppC,EAAa+B,sBACvE9G,EAAUyE,QAAQC,gBAAgBypC,EAAK,gBAAiB,EAAGppC,EAAa+B,sBACxE9G,EAAUyE,QAAQC,gBAAgBypC,EAAK,eAAgB,EAAGppC,EAAa+B,sBACvEjH,EAAO8E,WAAWC,WAAWupC,sCCrR7B,IACMjvC,EADFC,EAAY3C,MAAQA,KAAK2C,YACvBD,EAAiB,SAAuBE,EAAGC,GAW7C,OAVAH,EAAiBvD,OAAO2D,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAET,eAAea,KAAIL,EAAEK,GAAKJ,EAAEI,KAI/BP,EAAeE,EAAGC,IAGpB,SAAUD,EAAGC,GAGlB,SAASK,IACPlD,KAAKmD,YAAcP,EAHrBF,EAAeE,EAAGC,GAMlBD,EAAEnC,UAAkB,OAANoC,EAAa1D,OAAOiE,OAAOP,IAAMK,EAAGzC,UAAYoC,EAAEpC,UAAW,IAAIyC,KAInF/D,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAAI+D,EAAS,EAAQ,MAEjBG,EAAY,EAAQ,MAEpBkd,EAAU,EAAQ,MAElBnY,EAAe,EAAQ,MAEvBhJ,EAAW,EAAQ,MAEnBqyC,EAAO,SAAUjuC,GAGnB,SAASiuC,EAAKhuC,GACZ,IAAIC,EAAQF,EAAOzB,KAAKlC,KAAM4D,IAAW5D,KAMzC,OAJA6D,EAAMI,GAAG,gFAAgF,WACvFjE,KAAK0jB,YAAY,oBAGZ7f,EAwHT,OAjIAlB,EAAUivC,EAAMjuC,GAYhBiuC,EAAKnxC,UAAU6+C,WAAa,SAAU73C,GACpC,IAKIk4C,EACA3+C,EACAD,EAPAyjB,EAASxkB,KAAKwkB,SACd7jB,EAAS6jB,EAAO7jB,OAChByrC,EAAUpsC,KAAKosC,UACfvQ,EAAS77B,KAAK67B,SACd+lB,EAAS5hD,KAAK4hD,SAKlB,GAAKjhD,EAAL,CAOA,GAHA8G,EAAQmH,YACRnH,EAAQ8D,OAAOiZ,EAAO,GAAIA,EAAO,IAEjB,IAAZ4nB,GAAiBzrC,EAAS,EAAG,CAS/B,IAPAK,GADA2+C,EAAK3/C,KAAK6/C,oBACDl/C,OACTI,EAAI86B,EAAS,EAAI,EAEZA,GACHp0B,EAAQwN,iBAAiB0qC,EAAG,GAAIA,EAAG,GAAIA,EAAG,GAAIA,EAAG,IAG5C5+C,EAAIC,EAAM,GACfyG,EAAQkM,cAAcgsC,EAAG5+C,KAAM4+C,EAAG5+C,KAAM4+C,EAAG5+C,KAAM4+C,EAAG5+C,KAAM4+C,EAAG5+C,KAAM4+C,EAAG5+C,MAGnE86B,GACHp0B,EAAQwN,iBAAiB0qC,EAAG3+C,EAAM,GAAI2+C,EAAG3+C,EAAM,GAAIwjB,EAAO7jB,EAAS,GAAI6jB,EAAO7jB,EAAS,SAEpF,GAAIihD,EAGT,IAFA7gD,EAAI,EAEGA,EAAIJ,GACT8G,EAAQkM,cAAc6Q,EAAOzjB,KAAMyjB,EAAOzjB,KAAMyjB,EAAOzjB,KAAMyjB,EAAOzjB,KAAMyjB,EAAOzjB,KAAMyjB,EAAOzjB,WAGhG,IAAKA,EAAI,EAAGA,EAAIJ,EAAQI,GAAK,EAC3B0G,EAAQsN,OAAOyP,EAAOzjB,GAAIyjB,EAAOzjB,EAAI,IAIrC86B,GACFp0B,EAAQmM,YACRnM,EAAQ8J,gBAAgBvR,OAExByH,EAAQ2J,YAAYpR,QAIxB4xC,EAAKnxC,UAAUo/C,iBAAmB,WAChC,OAAO7/C,KAAK6jB,UAAU,gBAAiB7jB,KAAK6hD,oBAG9CjQ,EAAKnxC,UAAUohD,kBAAoB,WACjC,OAAI7hD,KAAK67B,SACA77B,KAAK8hD,0BAELz+C,EAAOyC,KAAKqmC,cAAcnsC,KAAKwkB,SAAUxkB,KAAKosC,YAIzDwF,EAAKnxC,UAAUqhD,wBAA0B,WACvC,IAAI7+C,EAAIjD,KAAKwkB,SACTxjB,EAAMiC,EAAEtC,OACRyrC,EAAUpsC,KAAKosC,UACf2V,EAAqB1+C,EAAOyC,KAAKylC,kBAAkBtoC,EAAEjC,EAAM,GAAIiC,EAAEjC,EAAM,GAAIiC,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAImpC,GACnG4V,EAAoB3+C,EAAOyC,KAAKylC,kBAAkBtoC,EAAEjC,EAAM,GAAIiC,EAAEjC,EAAM,GAAIiC,EAAEjC,EAAM,GAAIiC,EAAEjC,EAAM,GAAIiC,EAAE,GAAIA,EAAE,GAAImpC,GAC9G6V,EAAS5+C,EAAOyC,KAAKqmC,cAAclpC,EAAGmpC,GAG1C,MAFS,CAAC2V,EAAmB,GAAIA,EAAmB,IAAIv6B,OAAOy6B,GAAQz6B,OAAO,CAACw6B,EAAkB,GAAIA,EAAkB,GAAI/+C,EAAEjC,EAAM,GAAIiC,EAAEjC,EAAM,GAAIghD,EAAkB,GAAIA,EAAkB,GAAID,EAAmB,GAAIA,EAAmB,GAAI9+C,EAAE,GAAIA,EAAE,MAKvP2uC,EAAKnxC,UAAU6F,SAAW,WACxB,OAAOtG,KAAKyyB,cAActsB,OAG5ByrC,EAAKnxC,UAAU8F,UAAY,WACzB,OAAOvG,KAAKyyB,cAAcrsB,QAG5BwrC,EAAKnxC,UAAUgyB,YAAc,WAe3B,IAdA,IAAIjO,EAYAhe,EAAGC,EAJHgJ,GALF+U,EADqB,IAAnBxkB,KAAKosC,UACEpsC,KAAK6hD,oBAEL7hD,KAAKwkB,UAGE,GACd7U,EAAO6U,EAAO,GACd9U,EAAO8U,EAAO,GACd5U,EAAO4U,EAAO,GAGT1iB,EAAI,EAAGA,EAAI0iB,EAAO7jB,OAAS,EAAGmB,IACrC0E,EAAIge,EAAW,EAAJ1iB,GACX2E,EAAI+d,EAAW,EAAJ1iB,EAAQ,GACnB2N,EAAOW,KAAKC,IAAIZ,EAAMjJ,GACtBmJ,EAAOS,KAAKE,IAAIX,EAAMnJ,GACtBkJ,EAAOU,KAAKC,IAAIX,EAAMjJ,GACtBmJ,EAAOQ,KAAKE,IAAIV,EAAMnJ,GAGxB,MAAO,CACLD,EAAG4J,KAAKgR,MAAM3R,GACdhJ,EAAG2J,KAAKgR,MAAM1R,GACdvJ,MAAOiK,KAAKgR,MAAMzR,EAAOF,GACzBrJ,OAAQgK,KAAKgR,MAAMxR,EAAOF,KAIvBkiC,EAlIE,CAmITlxB,EAAQuP,OAEV5wB,EAAQuyC,KAAOA,EACfA,EAAKnxC,UAAUipB,UAAY,OAC3BkoB,EAAKnxC,UAAU6tB,oBAAsB,CAAC,SAAU,SAAU,WAE1D/uB,EAASwe,cAAc6zB,GAEvBpuC,EAAUyE,QAAQC,gBAAgB0pC,EAAM,UAAU,GAClDpuC,EAAUyE,QAAQC,gBAAgB0pC,EAAM,UAAU,GAClDpuC,EAAUyE,QAAQC,gBAAgB0pC,EAAM,UAAW,EAAGrpC,EAAa+B,sBACnE9G,EAAUyE,QAAQC,gBAAgB0pC,EAAM,SAAU,GAAIrpC,EAAammC,2BACnErrC,EAAO8E,WAAWC,WAAWwpC,sCCvL7B,IACMlvC,EADFC,EAAY3C,MAAQA,KAAK2C,YACvBD,EAAiB,SAAuBE,EAAGC,GAW7C,OAVAH,EAAiBvD,OAAO2D,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAET,eAAea,KAAIL,EAAEK,GAAKJ,EAAEI,KAI/BP,EAAeE,EAAGC,IAGpB,SAAUD,EAAGC,GAGlB,SAASK,IACPlD,KAAKmD,YAAcP,EAHrBF,EAAeE,EAAGC,GAMlBD,EAAEnC,UAAkB,OAANoC,EAAa1D,OAAOiE,OAAOP,IAAMK,EAAGzC,UAAYoC,EAAEpC,UAAW,IAAIyC,KAInF/D,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAAI+D,EAAS,EAAQ,MAEjBG,EAAY,EAAQ,MAEpBkd,EAAU,EAAQ,MAElBnhB,EAAW,EAAQ,MAEnBsyC,EAAO,SAAUluC,GAGnB,SAASkuC,EAAKjuC,GACZ,IAAIC,EAAQF,EAAOzB,KAAKlC,KAAM4D,IAAW5D,KAEzC6D,EAAMq+C,UAAY,GAClBr+C,EAAMs+C,WAAa,EACnBt+C,EAAMq+C,UAAYrQ,EAAKuQ,cAAcv+C,EAAMwd,QAC3Cxd,EAAMs+C,WAAa,EAEnB,IAAK,IAAIrgD,EAAI,EAAGA,EAAI+B,EAAMq+C,UAAUvhD,SAAUmB,EAC5C+B,EAAMs+C,YAAct+C,EAAMq+C,UAAUpgD,GAAGqgD,WAYzC,OATAt+C,EAAMI,GAAG,oBAAoB,WAC3BjE,KAAKkiD,UAAYrQ,EAAKuQ,cAAcpiD,KAAKqhB,QACzCrhB,KAAKmiD,WAAa,EAElB,IAAK,IAAIrgD,EAAI,EAAGA,EAAI9B,KAAKkiD,UAAUvhD,SAAUmB,EAC3C9B,KAAKmiD,YAAcniD,KAAKkiD,UAAUpgD,GAAGqgD,cAIlCt+C,EAoqBT,OA3rBAlB,EAAUkvC,EAAMluC,GA0BhBkuC,EAAKpxC,UAAU6+C,WAAa,SAAU73C,GACpC,IAAI46C,EAAKriD,KAAKkiD,UACdz6C,EAAQmH,YAER,IAAK,IAAI7N,EAAI,EAAGA,EAAIshD,EAAG1hD,OAAQI,IAAK,CAClC,IAAIu7B,EAAI+lB,EAAGthD,GAAGuhD,QACVr/C,EAAIo/C,EAAGthD,GAAGyjB,OAEd,OAAQ8X,GACN,IAAK,IACH70B,EAAQsN,OAAO9R,EAAE,GAAIA,EAAE,IACvB,MAEF,IAAK,IACHwE,EAAQ8D,OAAOtI,EAAE,GAAIA,EAAE,IACvB,MAEF,IAAK,IACHwE,EAAQkM,cAAc1Q,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IACtD,MAEF,IAAK,IACHwE,EAAQwN,iBAAiBhS,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAC7C,MAEF,IAAK,IACH,IAAI46C,EAAK56C,EAAE,GACP26C,EAAK36C,EAAE,GACPk9C,EAAKl9C,EAAE,GACPo9C,EAAKp9C,EAAE,GACPimB,EAAQjmB,EAAE,GACVs/C,EAASt/C,EAAE,GACXu/C,EAAMv/C,EAAE,GACRw/C,EAAKx/C,EAAE,GACP+uB,EAAImuB,EAAKE,EAAKF,EAAKE,EACnBxmC,EAASsmC,EAAKE,EAAK,EAAIF,EAAKE,EAC5BvmC,EAASqmC,EAAKE,EAAKA,EAAKF,EAAK,EACjC14C,EAAQ8N,UAAUsoC,EAAID,GACtBn2C,EAAQyN,OAAOstC,GACf/6C,EAAQqC,MAAM+P,EAAQC,GACtBrS,EAAQ0L,IAAI,EAAG,EAAG6e,EAAG9I,EAAOA,EAAQq5B,EAAQ,EAAIE,GAChDh7C,EAAQqC,MAAM,EAAI+P,EAAQ,EAAIC,GAC9BrS,EAAQyN,QAAQstC,GAChB/6C,EAAQ8N,WAAWsoC,GAAKD,GACxB,MAEF,IAAK,IACHn2C,EAAQmM,aAKdnM,EAAQ8J,gBAAgBvR,OAG1B6xC,EAAKpxC,UAAUgyB,YAAc,WAC3B,IAAIjO,EAAS,GACbxkB,KAAKkiD,UAAUlsC,SAAQ,SAAUqL,GAC/BmD,EAASA,EAAOgD,OAAOnG,EAAKmD,WAQ9B,IANA,IAIIhe,EAAGC,EAJHgJ,EAAO+U,EAAO,GACd7U,EAAO6U,EAAO,GACd9U,EAAO8U,EAAO,GACd5U,EAAO4U,EAAO,GAGT1iB,EAAI,EAAGA,EAAI0iB,EAAO7jB,OAAS,EAAGmB,IACrC0E,EAAIge,EAAW,EAAJ1iB,GACX2E,EAAI+d,EAAW,EAAJ1iB,EAAQ,GAEd8mC,MAAMpiC,KACTiJ,EAAOW,KAAKC,IAAIZ,EAAMjJ,GACtBmJ,EAAOS,KAAKE,IAAIX,EAAMnJ,IAGnBoiC,MAAMniC,KACTiJ,EAAOU,KAAKC,IAAIX,EAAMjJ,GACtBmJ,EAAOQ,KAAKE,IAAIV,EAAMnJ,IAI1B,MAAO,CACLD,EAAG4J,KAAKgR,MAAM3R,GACdhJ,EAAG2J,KAAKgR,MAAM1R,GACdvJ,MAAOiK,KAAKgR,MAAMzR,EAAOF,GACzBrJ,OAAQgK,KAAKgR,MAAMxR,EAAOF,KAI9BmiC,EAAKpxC,UAAUiiD,UAAY,WACzB,OAAO1iD,KAAKmiD,YAGdtQ,EAAKpxC,UAAUkiD,iBAAmB,SAAUhiD,GAC1C,IAAI+jB,EACA5iB,EAAI,EACJ8gD,EAAK5iD,KAAKkiD,UAAUvhD,OAExB,IAAKiiD,EACH,OAAO,KAGT,KAAO9gD,EAAI8gD,GAAMjiD,EAASX,KAAKkiD,UAAUpgD,GAAGqgD,YAC1CxhD,GAAUX,KAAKkiD,UAAUpgD,GAAGqgD,aAC1BrgD,EAGJ,GAAIA,IAAM8gD,EAER,MAAO,CACLp8C,GAFFke,EAAQ1kB,KAAKkiD,UAAUpgD,EAAI,GAAG0iB,OAAO3O,OAAO,IAEjC,GACTpP,EAAGie,EAAM,IAIb,GAAI/jB,EAAS,IAEX,MAAO,CACL6F,GAFFke,EAAQ1kB,KAAKkiD,UAAUpgD,GAAG0iB,OAAO3O,MAAM,EAAG,IAE/B,GACTpP,EAAGie,EAAM,IAIb,IAAI2nB,EAAKrsC,KAAKkiD,UAAUpgD,GACpBmB,EAAIopC,EAAG7nB,OAEX,OAAQ6nB,EAAGiW,SACT,IAAK,IACH,OAAOzQ,EAAKgR,eAAeliD,EAAQ0rC,EAAGhrC,MAAMmF,EAAG6lC,EAAGhrC,MAAMoF,EAAGxD,EAAE,GAAIA,EAAE,IAErE,IAAK,IACH,OAAO4uC,EAAKiR,sBAAsBniD,EAAS0rC,EAAG8V,WAAY9V,EAAGhrC,MAAMmF,EAAG6lC,EAAGhrC,MAAMoF,EAAGxD,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAEpH,IAAK,IACH,OAAO4uC,EAAKkR,0BAA0BpiD,EAAS0rC,EAAG8V,WAAY9V,EAAGhrC,MAAMmF,EAAG6lC,EAAGhrC,MAAMoF,EAAGxD,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAE5G,IAAK,IACH,IAAI46C,EAAK56C,EAAE,GACP26C,EAAK36C,EAAE,GACPk9C,EAAKl9C,EAAE,GACPo9C,EAAKp9C,EAAE,GACPimB,EAAQjmB,EAAE,GACVs/C,EAASt/C,EAAE,GACXu/C,EAAMv/C,EAAE,GAEZ,OADAimB,GAASq5B,EAAS5hD,EAAS0rC,EAAG8V,WACvBtQ,EAAKmR,wBAAwBnF,EAAID,EAAIuC,EAAIE,EAAIn3B,EAAOs5B,GAG/D,OAAO,MAGT3Q,EAAKoR,cAAgB,SAAUvX,EAAIC,EAAIC,EAAIC,GACzC,OAAOz7B,KAAK27B,MAAMH,EAAKF,IAAOE,EAAKF,IAAOG,EAAKF,IAAOE,EAAKF,KAG7DkG,EAAKgR,eAAiB,SAAUjW,EAAMsW,EAAKC,EAAKC,EAAKC,EAAKC,EAAOC,QACjDphD,IAAVmhD,IACFA,EAAQJ,QAGI/gD,IAAVohD,IACFA,EAAQJ,GAGV,IAAIx7C,GAAK07C,EAAMF,IAAQC,EAAMF,EAAM,MAC/BM,EAAMpzC,KAAK27B,KAAKa,EAAOA,GAAQ,EAAIjlC,EAAIA,IAEvCy7C,EAAMF,IACRM,IAAQ,GAGV,IACIxW,EADAyW,EAAO97C,EAAI67C,EAGf,GAAIJ,IAAQF,EACVlW,EAAK,CACHxmC,EAAG88C,EACH78C,EAAG88C,EAAQE,QAER,IAAKF,EAAQJ,IAAQG,EAAQJ,EAAM,QAAgBv7C,EACxDqlC,EAAK,CACHxmC,EAAG88C,EAAQE,EACX/8C,EAAG88C,EAAQE,OAER,CACL,IAAIC,EAAIC,EACJ3iD,EAAMhB,KAAKijD,cAAcC,EAAKC,EAAKC,EAAKC,GAE5C,GAAIriD,EAAM,KACR,OAGF,IAAI8rC,GAAKwW,EAAQJ,IAAQE,EAAMF,IAAQK,EAAQJ,IAAQE,EAAMF,GAE7DO,EAAKR,GADLpW,GAAS9rC,EAAMA,IACCoiD,EAAMF,GACtBS,EAAKR,EAAMrW,GAAKuW,EAAMF,GACtB,IAAIS,EAAQ5jD,KAAKijD,cAAcK,EAAOC,EAAOG,EAAIC,GAC7CE,EAAOzzC,KAAK27B,KAAKa,EAAOA,EAAOgX,EAAQA,GAC3CJ,EAAMpzC,KAAK27B,KAAK8X,EAAOA,GAAQ,EAAIl8C,EAAIA,IAEnCy7C,EAAMF,IACRM,IAAQ,GAIVxW,EAAK,CACHxmC,EAAGk9C,EAAKF,EACR/8C,EAAGk9C,GAHLF,EAAO97C,EAAI67C,IAOb,OAAOxW,GAGT6E,EAAKiR,sBAAwB,SAAUgB,EAAKZ,EAAKC,EAAKC,EAAKC,EAAKU,EAAKC,EAAKC,EAAKC,GAC7E,SAASC,EAAIt+B,GACX,OAAOA,EAAIA,EAAIA,EAGjB,SAASu+B,EAAIv+B,GACX,OAAO,EAAIA,EAAIA,GAAK,EAAIA,GAG1B,SAASw+B,EAAIx+B,GACX,OAAO,EAAIA,GAAK,EAAIA,IAAM,EAAIA,GAGhC,SAASy+B,EAAIz+B,GACX,OAAQ,EAAIA,IAAM,EAAIA,IAAM,EAAIA,GAKlC,MAAO,CACLrf,EAHMy9C,EAAME,EAAIL,GAAOC,EAAMK,EAAIN,GAAOV,EAAMiB,EAAIP,GAAOZ,EAAMoB,EAAIR,GAInEr9C,EAHMy9C,EAAMC,EAAIL,GAAOE,EAAMI,EAAIN,GAAOT,EAAMgB,EAAIP,GAAOX,EAAMmB,EAAIR,KAOvEjS,EAAKkR,0BAA4B,SAAUe,EAAKZ,EAAKC,EAAKC,EAAKC,EAAKU,EAAKC,GACvE,SAASO,EAAI1+B,GACX,OAAOA,EAAIA,EAGb,SAAS2+B,EAAI3+B,GACX,OAAO,EAAIA,GAAK,EAAIA,GAGtB,SAAS4+B,EAAI5+B,GACX,OAAQ,EAAIA,IAAM,EAAIA,GAKxB,MAAO,CACLrf,EAHMu9C,EAAMQ,EAAIT,GAAOV,EAAMoB,EAAIV,GAAOZ,EAAMuB,EAAIX,GAIlDr9C,EAHMu9C,EAAMO,EAAIT,GAAOT,EAAMmB,EAAIV,GAAOX,EAAMsB,EAAIX,KAOtDjS,EAAKmR,wBAA0B,SAAUnF,EAAID,EAAIuC,EAAIE,EAAIn3B,EAAOs5B,GAC9D,IAAIkC,EAASt0C,KAAK2tB,IAAIykB,GAClBmC,EAASv0C,KAAKysB,IAAI2lB,GAClBxV,EACCmT,EAAK/vC,KAAK2tB,IAAI7U,GADf8jB,EAECqT,EAAKjwC,KAAKysB,IAAI3T,GAEnB,MAAO,CACL1iB,EAAGq3C,GAAM7Q,EAAO0X,EAAS1X,EAAO2X,GAChCl+C,EAAGm3C,GAAM5Q,EAAO2X,EAAS3X,EAAO0X,KAIpC7S,EAAKuQ,cAAgB,SAAU/gC,GAC7B,IAAKA,EACH,MAAO,GAGT,IAAIujC,EAAKvjC,EACLwjC,EAAK,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACzGD,EAAKA,EAAGx6B,QAAQ,IAAI06B,OAAO,IAAK,KAAM,KAEtC,IAAK,IAAI/jD,EAAI,EAAGA,EAAI8jD,EAAGlkD,OAAQI,IAC7B6jD,EAAKA,EAAGx6B,QAAQ,IAAI06B,OAAOD,EAAG9jD,GAAI,KAAM,IAAM8jD,EAAG9jD,IAGnD,IAMI6d,EANAjS,EAAMi4C,EAAGl/B,MAAM,KACf28B,EAAK,GACL0C,EAAS,GACTC,EAAM,EACNC,EAAM,EACNC,EAAK,sDAGT,IAAKnkD,EAAI,EAAGA,EAAI4L,EAAIhM,OAAQI,IAAK,CAC/B,IAAI8Q,EAAMlF,EAAI5L,GACVu7B,EAAIzqB,EAAIyY,OAAO,GAInB,IAHAzY,EAAMA,EAAIgE,MAAM,GAChBkvC,EAAOpkD,OAAS,EAETie,EAAQsmC,EAAGrmC,KAAKhN,IACrBkzC,EAAO7jD,KAAK0d,EAAM,IAKpB,IAFA,IAAI3b,EAAI,GAECkiD,EAAI,EAAGC,EAAOL,EAAOpkD,OAAQwkD,EAAIC,EAAMD,IAAK,CACnD,IAAIE,EAASC,WAAWP,EAAOI,IAE1Bvc,MAAMyc,GAGTpiD,EAAE/B,KAAK,GAFP+B,EAAE/B,KAAKmkD,GAMX,KAAOpiD,EAAEtC,OAAS,IACZioC,MAAM3lC,EAAE,KADO,CAKnB,IAIIsiD,EAASC,EAAQC,EACjBtF,EAAIE,EAAImC,EAAKvW,EAAIwW,EAAI/W,EAAIC,EALzB+Z,EAAM,KACNlhC,EAAS,GACTmhC,EAASX,EACTY,EAASX,EAIb,OAAQ3oB,GACN,IAAK,IACH0oB,GAAO/hD,EAAEmP,QACT6yC,GAAOhiD,EAAEmP,QACTszC,EAAM,IACNlhC,EAAOtjB,KAAK8jD,EAAKC,GACjB,MAEF,IAAK,IACHD,EAAM/hD,EAAEmP,QACR6yC,EAAMhiD,EAAEmP,QACRoS,EAAOtjB,KAAK8jD,EAAKC,GACjB,MAEF,IAAK,IACH,IAAI5mB,EAAKp7B,EAAEmP,QACPksB,EAAKr7B,EAAEmP,QAKX,GAJA4yC,GAAO3mB,EACP4mB,GAAO3mB,EACPonB,EAAM,IAEFrD,EAAG1hD,OAAS,GAAmC,MAA9B0hD,EAAGA,EAAG1hD,OAAS,GAAG2hD,QACrC,IAAK,IAAI/F,EAAM8F,EAAG1hD,OAAS,EAAG47C,GAAO,EAAGA,IACtC,GAAwB,MAApB8F,EAAG9F,GAAK+F,QAAiB,CAC3B0C,EAAM3C,EAAG9F,GAAK/3B,OAAO,GAAK6Z,EAC1B4mB,EAAM5C,EAAG9F,GAAK/3B,OAAO,GAAK8Z,EAC1B,MAKN9Z,EAAOtjB,KAAK8jD,EAAKC,GACjB3oB,EAAI,IACJ,MAEF,IAAK,IACH0oB,EAAM/hD,EAAEmP,QACR6yC,EAAMhiD,EAAEmP,QACRszC,EAAM,IACNlhC,EAAOtjB,KAAK8jD,EAAKC,GACjB3oB,EAAI,IACJ,MAEF,IAAK,IACH0oB,GAAO/hD,EAAEmP,QACTszC,EAAM,IACNlhC,EAAOtjB,KAAK8jD,EAAKC,GACjB,MAEF,IAAK,IACHD,EAAM/hD,EAAEmP,QACRszC,EAAM,IACNlhC,EAAOtjB,KAAK8jD,EAAKC,GACjB,MAEF,IAAK,IACHA,GAAOhiD,EAAEmP,QACTszC,EAAM,IACNlhC,EAAOtjB,KAAK8jD,EAAKC,GACjB,MAEF,IAAK,IACHA,EAAMhiD,EAAEmP,QACRszC,EAAM,IACNlhC,EAAOtjB,KAAK8jD,EAAKC,GACjB,MAEF,IAAK,IACHzgC,EAAOtjB,KAAK+B,EAAEmP,QAASnP,EAAEmP,QAASnP,EAAEmP,QAASnP,EAAEmP,SAC/C4yC,EAAM/hD,EAAEmP,QACR6yC,EAAMhiD,EAAEmP,QACRoS,EAAOtjB,KAAK8jD,EAAKC,GACjB,MAEF,IAAK,IACHzgC,EAAOtjB,KAAK8jD,EAAM/hD,EAAEmP,QAAS6yC,EAAMhiD,EAAEmP,QAAS4yC,EAAM/hD,EAAEmP,QAAS6yC,EAAMhiD,EAAEmP,SACvE4yC,GAAO/hD,EAAEmP,QACT6yC,GAAOhiD,EAAEmP,QACTszC,EAAM,IACNlhC,EAAOtjB,KAAK8jD,EAAKC,GACjB,MAEF,IAAK,IACHO,EAASR,EACTS,EAASR,EAGe,OAFxBM,EAAUlD,EAAGA,EAAG1hD,OAAS,IAEb2hD,UACVkD,EAASR,GAAOA,EAAMO,EAAQ/gC,OAAO,IACrCihC,EAASR,GAAOA,EAAMM,EAAQ/gC,OAAO,KAGvCA,EAAOtjB,KAAKskD,EAAQC,EAAQxiD,EAAEmP,QAASnP,EAAEmP,SACzC4yC,EAAM/hD,EAAEmP,QACR6yC,EAAMhiD,EAAEmP,QACRszC,EAAM,IACNlhC,EAAOtjB,KAAK8jD,EAAKC,GACjB,MAEF,IAAK,IACHO,EAASR,EACTS,EAASR,EAGe,OAFxBM,EAAUlD,EAAGA,EAAG1hD,OAAS,IAEb2hD,UACVkD,EAASR,GAAOA,EAAMO,EAAQ/gC,OAAO,IACrCihC,EAASR,GAAOA,EAAMM,EAAQ/gC,OAAO,KAGvCA,EAAOtjB,KAAKskD,EAAQC,EAAQT,EAAM/hD,EAAEmP,QAAS6yC,EAAMhiD,EAAEmP,SACrD4yC,GAAO/hD,EAAEmP,QACT6yC,GAAOhiD,EAAEmP,QACTszC,EAAM,IACNlhC,EAAOtjB,KAAK8jD,EAAKC,GACjB,MAEF,IAAK,IACHzgC,EAAOtjB,KAAK+B,EAAEmP,QAASnP,EAAEmP,SACzB4yC,EAAM/hD,EAAEmP,QACR6yC,EAAMhiD,EAAEmP,QACRoS,EAAOtjB,KAAK8jD,EAAKC,GACjB,MAEF,IAAK,IACHzgC,EAAOtjB,KAAK8jD,EAAM/hD,EAAEmP,QAAS6yC,EAAMhiD,EAAEmP,SACrC4yC,GAAO/hD,EAAEmP,QACT6yC,GAAOhiD,EAAEmP,QACTszC,EAAM,IACNlhC,EAAOtjB,KAAK8jD,EAAKC,GACjB,MAEF,IAAK,IACHO,EAASR,EACTS,EAASR,EAGe,OAFxBM,EAAUlD,EAAGA,EAAG1hD,OAAS,IAEb2hD,UACVkD,EAASR,GAAOA,EAAMO,EAAQ/gC,OAAO,IACrCihC,EAASR,GAAOA,EAAMM,EAAQ/gC,OAAO,KAGvCwgC,EAAM/hD,EAAEmP,QACR6yC,EAAMhiD,EAAEmP,QACRszC,EAAM,IACNlhC,EAAOtjB,KAAKskD,EAAQC,EAAQT,EAAKC,GACjC,MAEF,IAAK,IACHO,EAASR,EACTS,EAASR,EAGe,OAFxBM,EAAUlD,EAAGA,EAAG1hD,OAAS,IAEb2hD,UACVkD,EAASR,GAAOA,EAAMO,EAAQ/gC,OAAO,IACrCihC,EAASR,GAAOA,EAAMM,EAAQ/gC,OAAO,KAGvCwgC,GAAO/hD,EAAEmP,QACT6yC,GAAOhiD,EAAEmP,QACTszC,EAAM,IACNlhC,EAAOtjB,KAAKskD,EAAQC,EAAQT,EAAKC,GACjC,MAEF,IAAK,IACH9E,EAAKl9C,EAAEmP,QACPiuC,EAAKp9C,EAAEmP,QACPowC,EAAMv/C,EAAEmP,QACR65B,EAAKhpC,EAAEmP,QACPqwC,EAAKx/C,EAAEmP,QACPs5B,EAAKsZ,EACLrZ,EAAKsZ,EACLD,EAAM/hD,EAAEmP,QACR6yC,EAAMhiD,EAAEmP,QACRszC,EAAM,IACNlhC,EAASxkB,KAAK6lD,wCAAwCna,EAAIC,EAAIqZ,EAAKC,EAAKhZ,EAAIwW,EAAItC,EAAIE,EAAImC,GACxF,MAEF,IAAK,IACHrC,EAAKl9C,EAAEmP,QACPiuC,EAAKp9C,EAAEmP,QACPowC,EAAMv/C,EAAEmP,QACR65B,EAAKhpC,EAAEmP,QACPqwC,EAAKx/C,EAAEmP,QACPs5B,EAAKsZ,EACLrZ,EAAKsZ,EACLD,GAAO/hD,EAAEmP,QACT6yC,GAAOhiD,EAAEmP,QACTszC,EAAM,IACNlhC,EAASxkB,KAAK6lD,wCAAwCna,EAAIC,EAAIqZ,EAAKC,EAAKhZ,EAAIwW,EAAItC,EAAIE,EAAImC,GAI5FH,EAAGnhD,KAAK,CACNohD,QAASoD,GAAOppB,EAChB9X,OAAQA,EACRnjB,MAAO,CACLmF,EAAGm/C,EACHl/C,EAAGm/C,GAELzD,WAAYniD,KAAK8lD,WAAWH,EAAQC,EAAQF,GAAOppB,EAAG9X,KAIhD,MAAN8X,GAAmB,MAANA,GACf+lB,EAAGnhD,KAAK,CACNohD,QAAS,IACT99B,OAAQ,GACRnjB,WAAOc,EACPggD,WAAY,IAKlB,OAAOE,GAGTxQ,EAAKiU,WAAa,SAAUt/C,EAAGC,EAAGi/C,EAAKlhC,GACrC,IAAIxjB,EAAKqsC,EAAIC,EAAIznB,EACbkgC,EAAOlU,EAEX,OAAQ6T,GACN,IAAK,IACH,OAAOK,EAAK9C,cAAcz8C,EAAGC,EAAG+d,EAAO,GAAIA,EAAO,IAEpD,IAAK,IAIH,IAHAxjB,EAAM,EACNqsC,EAAK0Y,EAAKjD,sBAAsB,EAAGt8C,EAAGC,EAAG+d,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,IAElGqB,EAAI,IAAMA,GAAK,EAAGA,GAAK,IAC1BynB,EAAKyY,EAAKjD,sBAAsBj9B,EAAGrf,EAAGC,EAAG+d,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,IACvGxjB,GAAO+kD,EAAK9C,cAAc5V,EAAG7mC,EAAG6mC,EAAG5mC,EAAG6mC,EAAG9mC,EAAG8mC,EAAG7mC,GAC/C4mC,EAAKC,EAGP,OAAOtsC,EAET,IAAK,IAIH,IAHAA,EAAM,EACNqsC,EAAK0Y,EAAKhD,0BAA0B,EAAGv8C,EAAGC,EAAG+d,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,IAEhFqB,EAAI,IAAMA,GAAK,EAAGA,GAAK,IAC1BynB,EAAKyY,EAAKhD,0BAA0Bl9B,EAAGrf,EAAGC,EAAG+d,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,IACrFxjB,GAAO+kD,EAAK9C,cAAc5V,EAAG7mC,EAAG6mC,EAAG5mC,EAAG6mC,EAAG9mC,EAAG8mC,EAAG7mC,GAC/C4mC,EAAKC,EAGP,OAAOtsC,EAET,IAAK,IACHA,EAAM,EACN,IAAIK,EAAQmjB,EAAO,GACf+9B,EAAS/9B,EAAO,GAChBnM,EAAMmM,EAAO,GAAK+9B,EAClByD,EAAM51C,KAAK6N,GAAK,IAQpB,GANI7N,KAAK2J,IAAI1Y,EAAQgX,GAAO2tC,IAC1BA,EAAM51C,KAAK2J,IAAI1Y,EAAQgX,IAGzBg1B,EAAK0Y,EAAK/C,wBAAwBx+B,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAInjB,EAAO,GAEjFkhD,EAAS,EACX,IAAK18B,EAAIxkB,EAAQ2kD,EAAKngC,EAAIxN,EAAKwN,GAAKmgC,EAClC1Y,EAAKyY,EAAK/C,wBAAwBx+B,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIqB,EAAG,GACjF7kB,GAAO+kD,EAAK9C,cAAc5V,EAAG7mC,EAAG6mC,EAAG5mC,EAAG6mC,EAAG9mC,EAAG8mC,EAAG7mC,GAC/C4mC,EAAKC,OAGP,IAAKznB,EAAIxkB,EAAQ2kD,EAAKngC,EAAIxN,EAAKwN,GAAKmgC,EAClC1Y,EAAKyY,EAAK/C,wBAAwBx+B,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIqB,EAAG,GACjF7kB,GAAO+kD,EAAK9C,cAAc5V,EAAG7mC,EAAG6mC,EAAG5mC,EAAG6mC,EAAG9mC,EAAG8mC,EAAG7mC,GAC/C4mC,EAAKC,EAMT,OAFAA,EAAKyY,EAAK/C,wBAAwBx+B,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAInM,EAAK,GACnFrX,GAAO+kD,EAAK9C,cAAc5V,EAAG7mC,EAAG6mC,EAAG5mC,EAAG6mC,EAAG9mC,EAAG8mC,EAAG7mC,GAInD,OAAO,GAGTorC,EAAKgU,wCAA0C,SAAUna,EAAIC,EAAIC,EAAIC,EAAII,EAAIwW,EAAItC,EAAIE,EAAI4F,GACvF,IAAIzD,EAAMyD,GAAU71C,KAAK6N,GAAK,KAC1BioC,EAAK91C,KAAK2tB,IAAIykB,IAAQ9W,EAAKE,GAAM,EAAMx7B,KAAKysB,IAAI2lB,IAAQ7W,EAAKE,GAAM,EACnEmI,GAAM,EAAI5jC,KAAKysB,IAAI2lB,IAAQ9W,EAAKE,GAAM,EAAMx7B,KAAK2tB,IAAIykB,IAAQ7W,EAAKE,GAAM,EACxEsa,EAASD,EAAKA,GAAM/F,EAAKA,GAAMnM,EAAKA,GAAMqM,EAAKA,GAE/C8F,EAAS,IACXhG,GAAM/vC,KAAK27B,KAAKoa,GAChB9F,GAAMjwC,KAAK27B,KAAKoa,IAGlB,IAAIC,EAAIh2C,KAAK27B,MAAMoU,EAAKA,GAAME,EAAKA,GAAMF,EAAKA,GAAMnM,EAAKA,GAAMqM,EAAKA,GAAM6F,EAAKA,KAAQ/F,EAAKA,GAAMnM,EAAKA,GAAMqM,EAAKA,GAAM6F,EAAKA,KAEzHja,IAAOwW,IACT2D,IAAM,GAGJxd,MAAMwd,KACRA,EAAI,GAGN,IAAIC,EAAMD,EAAIjG,EAAKnM,EAAKqM,EACpBiG,EAAMF,GAAK/F,EAAK6F,EAAK/F,EACrBtC,GAAMnS,EAAKE,GAAM,EAAMx7B,KAAK2tB,IAAIykB,GAAO6D,EAAMj2C,KAAKysB,IAAI2lB,GAAO8D,EAC7D1I,GAAMjS,EAAKE,GAAM,EAAMz7B,KAAKysB,IAAI2lB,GAAO6D,EAAMj2C,KAAK2tB,IAAIykB,GAAO8D,EAE7DC,EAAO,SAAcnM,GACvB,OAAOhqC,KAAK27B,KAAKqO,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,KAGtCoM,EAAS,SAAgB1Z,EAAGsN,GAC9B,OAAQtN,EAAE,GAAKsN,EAAE,GAAKtN,EAAE,GAAKsN,EAAE,KAAOmM,EAAKzZ,GAAKyZ,EAAKnM,KAGnDqM,EAAS,SAAgB3Z,EAAGsN,GAC9B,OAAQtN,EAAE,GAAKsN,EAAE,GAAKtN,EAAE,GAAKsN,EAAE,IAAM,EAAI,GAAKhqC,KAAKs2C,KAAKF,EAAO1Z,EAAGsN,KAGhElxB,EAAQu9B,EAAO,CAAC,EAAG,GAAI,EAAEP,EAAKG,GAAOlG,GAAKnM,EAAKsS,GAAOjG,IACtDvT,EAAI,EAAEoZ,EAAKG,GAAOlG,GAAKnM,EAAKsS,GAAOjG,GACnCjG,EAAI,GAAG,EAAI8L,EAAKG,GAAOlG,IAAM,EAAInM,EAAKsS,GAAOjG,GAC7CkC,EAASkE,EAAO3Z,EAAGsN,GAkBvB,OAhBIoM,EAAO1Z,EAAGsN,KAAO,IACnBmI,EAASnyC,KAAK6N,IAGZuoC,EAAO1Z,EAAGsN,IAAM,IAClBmI,EAAS,GAGA,IAAPE,GAAYF,EAAS,IACvBA,GAAkB,EAAInyC,KAAK6N,IAGlB,IAAPwkC,GAAYF,EAAS,IACvBA,GAAkB,EAAInyC,KAAK6N,IAGtB,CAAC4/B,EAAID,EAAIuC,EAAIE,EAAIn3B,EAAOq5B,EAAQC,EAAKC,IAGvC5Q,EA5rBE,CA6rBTnxB,EAAQuP,OAEV5wB,EAAQwyC,KAAOA,EACfA,EAAKpxC,UAAUipB,UAAY,OAC3BmoB,EAAKpxC,UAAU6tB,oBAAsB,CAAC,QAEtC/uB,EAASwe,cAAc8zB,GAEvBruC,EAAUyE,QAAQC,gBAAgB2pC,EAAM,QACxCxuC,EAAO8E,WAAWC,WAAWypC,sCC5uB7B,IACMnvC,EADFC,EAAY3C,MAAQA,KAAK2C,YACvBD,EAAiB,SAAuBE,EAAGC,GAW7C,OAVAH,EAAiBvD,OAAO2D,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAET,eAAea,KAAIL,EAAEK,GAAKJ,EAAEI,KAI/BP,EAAeE,EAAGC,IAGpB,SAAUD,EAAGC,GAGlB,SAASK,IACPlD,KAAKmD,YAAcP,EAHrBF,EAAeE,EAAGC,GAMlBD,EAAEnC,UAAkB,OAANoC,EAAa1D,OAAOiE,OAAOP,IAAMK,EAAGzC,UAAYoC,EAAEpC,UAAW,IAAIyC,KAInF/D,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAAI+D,EAAS,EAAQ,MAEjBG,EAAY,EAAQ,MAEpBkd,EAAU,EAAQ,MAElBnhB,EAAW,EAAQ,MAEnBuyC,EAAO,SAAUnuC,GAGnB,SAASmuC,IACP,OAAkB,OAAXnuC,GAAmBA,EAAOgH,MAAM3K,KAAM4K,YAAc5K,KAyC7D,OA5CA2C,EAAUmvC,EAAMnuC,GAMhBmuC,EAAKrxC,UAAU6+C,WAAa,SAAU73C,GACpC,IAAIk6C,EAAe3hD,KAAK2hD,eACpBx7C,EAAQnG,KAAKmG,QACbC,EAASpG,KAAKoG,SAGlB,GAFAqB,EAAQmH,YAEH+yC,EAEE,CACL,IAAIgF,EAAU,EACVC,EAAW,EACXC,EAAa,EACbC,EAAc,EAEU,iBAAjBnF,EACTgF,EAAUC,EAAWC,EAAaC,EAAc12C,KAAKC,IAAIsxC,EAAcx7C,EAAQ,EAAGC,EAAS,IAE3FugD,EAAUv2C,KAAKC,IAAIsxC,EAAa,GAAIx7C,EAAQ,EAAGC,EAAS,GACxDwgD,EAAWx2C,KAAKC,IAAIsxC,EAAa,GAAIx7C,EAAQ,EAAGC,EAAS,GACzD0gD,EAAc12C,KAAKC,IAAIsxC,EAAa,GAAIx7C,EAAQ,EAAGC,EAAS,GAC5DygD,EAAaz2C,KAAKC,IAAIsxC,EAAa,GAAIx7C,EAAQ,EAAGC,EAAS,IAG7DqB,EAAQ8D,OAAOo7C,EAAS,GACxBl/C,EAAQsN,OAAO5O,EAAQygD,EAAU,GACjCn/C,EAAQ0L,IAAIhN,EAAQygD,EAAUA,EAAUA,EAAoB,EAAVx2C,KAAK6N,GAAS,EAAG,GAAG,GACtExW,EAAQsN,OAAO5O,EAAOC,EAAS0gD,GAC/Br/C,EAAQ0L,IAAIhN,EAAQ2gD,EAAa1gD,EAAS0gD,EAAaA,EAAa,EAAG12C,KAAK6N,GAAK,GAAG,GACpFxW,EAAQsN,OAAO8xC,EAAYzgD,GAC3BqB,EAAQ0L,IAAI0zC,EAAYzgD,EAASygD,EAAYA,EAAYz2C,KAAK6N,GAAK,EAAG7N,KAAK6N,IAAI,GAC/ExW,EAAQsN,OAAO,EAAG4xC,GAClBl/C,EAAQ0L,IAAIwzC,EAASA,EAASA,EAASv2C,KAAK6N,GAAc,EAAV7N,KAAK6N,GAAS,GAAG,QAxBjExW,EAAQoH,KAAK,EAAG,EAAG1I,EAAOC,GA2B5BqB,EAAQmM,YACRnM,EAAQ8J,gBAAgBvR,OAGnB8xC,EA7CE,CA8CTpxB,EAAQuP,OAEV5wB,EAAQyyC,KAAOA,EACfA,EAAKrxC,UAAUipB,UAAY,OAE3BnqB,EAASwe,cAAc+zB,GAEvBtuC,EAAUyE,QAAQC,gBAAgB4pC,EAAM,eAAgB,GACxDzuC,EAAO8E,WAAWC,WAAW0pC,sCC5F7B,IACMpvC,EADFC,EAAY3C,MAAQA,KAAK2C,YACvBD,EAAiB,SAAuBE,EAAGC,GAW7C,OAVAH,EAAiBvD,OAAO2D,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAET,eAAea,KAAIL,EAAEK,GAAKJ,EAAEI,KAI/BP,EAAeE,EAAGC,IAGpB,SAAUD,EAAGC,GAGlB,SAASK,IACPlD,KAAKmD,YAAcP,EAHrBF,EAAeE,EAAGC,GAMlBD,EAAEnC,UAAkB,OAANoC,EAAa1D,OAAOiE,OAAOP,IAAMK,EAAGzC,UAAYoC,EAAEpC,UAAW,IAAIyC,KAInF/D,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAAI+D,EAAS,EAAQ,MAEjBG,EAAY,EAAQ,MAEpBkd,EAAU,EAAQ,MAElBnY,EAAe,EAAQ,MAEvBhJ,EAAW,EAAQ,MAEnBwyC,EAAiB,SAAUpuC,GAG7B,SAASouC,IACP,OAAkB,OAAXpuC,GAAmBA,EAAOgH,MAAM3K,KAAM4K,YAAc5K,KAsC7D,OAzCA2C,EAAUovC,EAAgBpuC,GAM1BouC,EAAetxC,UAAU6+C,WAAa,SAAU73C,GAC9C,IAEI1G,EACAyF,EACAC,EAJAsgD,EAAQ/mD,KAAK+mD,QACbhT,EAAS/zC,KAAK+zC,SAOlB,IAHAtsC,EAAQmH,YACRnH,EAAQ8D,OAAO,EAAG,EAAIwoC,GAEjBhzC,EAAI,EAAGA,EAAIgmD,EAAOhmD,IACrByF,EAAIutC,EAAS3jC,KAAKysB,IAAQ,EAAJ97B,EAAQqP,KAAK6N,GAAK8oC,GACxCtgD,GAAK,EAAIstC,EAAS3jC,KAAK2tB,IAAQ,EAAJh9B,EAAQqP,KAAK6N,GAAK8oC,GAC7Ct/C,EAAQsN,OAAOvO,EAAGC,GAGpBgB,EAAQmM,YACRnM,EAAQ8J,gBAAgBvR,OAG1B+xC,EAAetxC,UAAU6F,SAAW,WAClC,OAAuB,EAAhBtG,KAAK+zC,UAGdhC,EAAetxC,UAAU8F,UAAY,WACnC,OAAuB,EAAhBvG,KAAK+zC,UAGdhC,EAAetxC,UAAUsG,SAAW,SAAUZ,GAC5CnG,KAAK+zC,OAAO5tC,EAAQ,IAGtB4rC,EAAetxC,UAAUwG,UAAY,SAAUb,GAC7CpG,KAAK+zC,OAAO3tC,EAAS,IAGhB2rC,EA1CY,CA2CnBrxB,EAAQuP,OAEV5wB,EAAQ0yC,eAAiBA,EACzBA,EAAetxC,UAAUipB,UAAY,iBACrCqoB,EAAetxC,UAAUiyB,WAAY,EACrCqf,EAAetxC,UAAU6tB,oBAAsB,CAAC,UAEhD/uB,EAASwe,cAAcg0B,GAEvBvuC,EAAUyE,QAAQC,gBAAgB6pC,EAAgB,SAAU,EAAGxpC,EAAa+B,sBAC5E9G,EAAUyE,QAAQC,gBAAgB6pC,EAAgB,QAAS,EAAGxpC,EAAa+B,sBAC3EjH,EAAO8E,WAAWC,WAAW2pC,sCC9F7B,IACMrvC,EADFC,EAAY3C,MAAQA,KAAK2C,YACvBD,EAAiB,SAAuBE,EAAGC,GAW7C,OAVAH,EAAiBvD,OAAO2D,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAET,eAAea,KAAIL,EAAEK,GAAKJ,EAAEI,KAI/BP,EAAeE,EAAGC,IAGpB,SAAUD,EAAGC,GAGlB,SAASK,IACPlD,KAAKmD,YAAcP,EAHrBF,EAAeE,EAAGC,GAMlBD,EAAEnC,UAAkB,OAANoC,EAAa1D,OAAOiE,OAAOP,IAAMK,EAAGzC,UAAYoC,EAAEpC,UAAW,IAAIyC,KAInF/D,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAAI+D,EAAS,EAAQ,MAEjBG,EAAY,EAAQ,MAEpBkd,EAAU,EAAQ,MAElBnY,EAAe,EAAQ,MAEvBhJ,EAAW,EAAQ,MAEnBynD,EAAiB,EAAV52C,KAAK6N,GAEZ+zB,EAAO,SAAUruC,GAGnB,SAASquC,IACP,OAAkB,OAAXruC,GAAmBA,EAAOgH,MAAM3K,KAAM4K,YAAc5K,KA4B7D,OA/BA2C,EAAUqvC,EAAMruC,GAMhBquC,EAAKvxC,UAAU6+C,WAAa,SAAU73C,GACpCA,EAAQmH,YACRnH,EAAQ0L,IAAI,EAAG,EAAGnT,KAAKy/C,cAAe,EAAGuH,GAAM,GAC/Cv/C,EAAQ8D,OAAOvL,KAAKw/C,cAAe,GACnC/3C,EAAQ0L,IAAI,EAAG,EAAGnT,KAAKw/C,cAAewH,EAAM,GAAG,GAC/Cv/C,EAAQmM,YACRnM,EAAQ8J,gBAAgBvR,OAG1BgyC,EAAKvxC,UAAU6F,SAAW,WACxB,OAA4B,EAArBtG,KAAKw/C,eAGdxN,EAAKvxC,UAAU8F,UAAY,WACzB,OAA4B,EAArBvG,KAAKw/C,eAGdxN,EAAKvxC,UAAUsG,SAAW,SAAUZ,GAClCnG,KAAKw/C,YAAYr5C,EAAQ,IAG3B6rC,EAAKvxC,UAAUwG,UAAY,SAAUb,GACnCpG,KAAKw/C,YAAYp5C,EAAS,IAGrB4rC,EAhCE,CAiCTtxB,EAAQuP,OAEV5wB,EAAQ2yC,KAAOA,EACfA,EAAKvxC,UAAUipB,UAAY,OAC3BsoB,EAAKvxC,UAAUiyB,WAAY,EAC3Bsf,EAAKvxC,UAAU6tB,oBAAsB,CAAC,cAAe,eAErD/uB,EAASwe,cAAci0B,GAEvBxuC,EAAUyE,QAAQC,gBAAgB8pC,EAAM,cAAe,EAAGzpC,EAAa+B,sBACvE9G,EAAUyE,QAAQC,gBAAgB8pC,EAAM,cAAe,EAAGzpC,EAAa+B,sBACvEjH,EAAO8E,WAAWC,WAAW4pC,sCCtF7B,IACMtvC,EADFC,EAAY3C,MAAQA,KAAK2C,YACvBD,EAAiB,SAAuBE,EAAGC,GAW7C,OAVAH,EAAiBvD,OAAO2D,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAET,eAAea,KAAIL,EAAEK,GAAKJ,EAAEI,KAI/BP,EAAeE,EAAGC,IAGpB,SAAUD,EAAGC,GAGlB,SAASK,IACPlD,KAAKmD,YAAcP,EAHrBF,EAAeE,EAAGC,GAMlBD,EAAEnC,UAAkB,OAANoC,EAAa1D,OAAOiE,OAAOP,IAAMK,EAAGzC,UAAYoC,EAAEpC,UAAW,IAAIyC,KAInF/D,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAAI+D,EAAS,EAAQ,MAEjBG,EAAY,EAAQ,MAEpBkd,EAAU,EAAQ,MAElBtG,EAAc,EAAQ,MAEtB7R,EAAe,EAAQ,MAEvBhJ,EAAW,EAAQ,MAEnB0yC,EAAS,SAAUtuC,GAGrB,SAASsuC,EAAOruC,GACd,IAAIC,EAAQF,EAAOzB,KAAKlC,KAAM4D,IAAW5D,KA2BzC,OAzBA6D,EAAMojD,UAAW,EACjBpjD,EAAMnC,KAAO,IAAI0Y,EAAYva,WAAU,WACrC,IAAIqnD,EAAUrjD,EAAMojD,SAEpB,OADApjD,EAAMojD,UAAW,EACVC,KAGTrjD,EAAMI,GAAG,yBAAyB,WAChCjE,KAAKmnD,WAAW,MAGlBtjD,EAAMI,GAAG,0BAA0B,WACjCjE,KAAKinD,UAAW,KAGlBpjD,EAAMI,GAAG,yBAAyB,WAC3BjE,KAAK0B,KAAKP,cAIfimD,cAAcpnD,KAAKqnD,UAEnBrnD,KAAKsnD,mBAGAzjD,EAsGT,OApIAlB,EAAUsvC,EAAQtuC,GAiClBsuC,EAAOxxC,UAAU6+C,WAAa,SAAU73C,GACtC,IAAI/F,EAAO1B,KAAKunD,YACZ1iD,EAAQ7E,KAAKmnD,aACbK,EAAc,EAAR3iD,EACNoR,EAAMjW,KAAKoB,aAAaM,GACxB+lD,EAAUznD,KAAK0nD,eACflhD,EAAIyP,EAAIuxC,EAAM,GACd/gD,EAAIwP,EAAIuxC,EAAM,GACdrhD,EAAQ8P,EAAIuxC,EAAM,GAClBphD,EAAS6P,EAAIuxC,EAAM,GACnB/G,EAAQzgD,KAAKygD,QASjB,IAPIzgD,KAAKiyB,WAAajyB,KAAK6Y,eACzBpR,EAAQmH,YACRnH,EAAQoH,KAAK,EAAG,EAAG1I,EAAOC,GAC1BqB,EAAQmM,YACRnM,EAAQ8J,gBAAgBvR,OAGtBygD,EACF,GAAIgH,EAAS,CACX,IAAIhuC,EAASguC,EAAQ/lD,GACjBimD,EAAc,EAAR9iD,EACV4C,EAAQyM,UAAUusC,EAAOj6C,EAAGC,EAAGN,EAAOC,EAAQqT,EAAOkuC,EAAM,GAAIluC,EAAOkuC,EAAM,GAAIxhD,EAAOC,QAEvFqB,EAAQyM,UAAUusC,EAAOj6C,EAAGC,EAAGN,EAAOC,EAAQ,EAAG,EAAGD,EAAOC,IAKjE6rC,EAAOxxC,UAAUmgD,SAAW,SAAUn5C,GACpC,IAAI/F,EAAO1B,KAAKunD,YACZ1iD,EAAQ7E,KAAKmnD,aACbK,EAAc,EAAR3iD,EACNoR,EAAMjW,KAAKoB,aAAaM,GACxB+lD,EAAUznD,KAAK0nD,eACfvhD,EAAQ8P,EAAIuxC,EAAM,GAClBphD,EAAS6P,EAAIuxC,EAAM,GAGvB,GAFA//C,EAAQmH,YAEJ64C,EAAS,CACX,IAAIhuC,EAASguC,EAAQ/lD,GACjBimD,EAAc,EAAR9iD,EACV4C,EAAQoH,KAAK4K,EAAOkuC,EAAM,GAAIluC,EAAOkuC,EAAM,GAAIxhD,EAAOC,QAEtDqB,EAAQoH,KAAK,EAAG,EAAG1I,EAAOC,GAG5BqB,EAAQmM,YACRnM,EAAQwJ,UAAUjR,OAGpBiyC,EAAOxxC,UAAU4xB,iBAAmB,WAClC,OAAQryB,KAAKuwB,aAA6C,IAA9BvwB,KAAK8S,uBAA+B9S,KAAK6Y,aAGvEo5B,EAAOxxC,UAAU6mD,aAAe,WAC9B,IAAIr3C,EAAOjQ,KACXA,KAAKqnD,SAAWO,aAAY,WAC1B33C,EAAK43C,iBACJ,IAAO7nD,KAAKO,cAGjB0xC,EAAOxxC,UAAUY,MAAQ,WACvB,IAAIrB,KAAKmB,YAAT,CAIA,IAAIL,EAAQd,KAAK2F,WACjB3F,KAAK0B,KAAKlB,UAAUM,GAEpBd,KAAKsnD,eAELtnD,KAAK0B,KAAKL,UAGZ4wC,EAAOxxC,UAAUa,KAAO,WACtBtB,KAAK0B,KAAKJ,OACV8lD,cAAcpnD,KAAKqnD,WAGrBpV,EAAOxxC,UAAUU,UAAY,WAC3B,OAAOnB,KAAK0B,KAAKP,aAGnB8wC,EAAOxxC,UAAUonD,aAAe,WAC9B,IAAIhjD,EAAQ7E,KAAKmnD,aACbI,EAAYvnD,KAAKunD,YAKjB1iD,EAJa7E,KAAKoB,aACAmmD,GACP5mD,OAAS,EAEN,EAChBX,KAAKmnD,WAAWtiD,EAAQ,GAExB7E,KAAKmnD,WAAW,IAIblV,EArII,CAsIXvxB,EAAQuP,OAEV5wB,EAAQ4yC,OAASA,EACjBA,EAAOxxC,UAAUipB,UAAY,SAE7BnqB,EAASwe,cAAck0B,GAEvBzuC,EAAUyE,QAAQC,gBAAgB+pC,EAAQ,aAC1CzuC,EAAUyE,QAAQC,gBAAgB+pC,EAAQ,cAC1CzuC,EAAUyE,QAAQC,gBAAgB+pC,EAAQ,gBAC1CzuC,EAAUyE,QAAQC,gBAAgB+pC,EAAQ,SAC1CzuC,EAAUyE,QAAQC,gBAAgB+pC,EAAQ,aAAc,EAAG1pC,EAAa+B,sBACxE9G,EAAUyE,QAAQC,gBAAgB+pC,EAAQ,YAAa,GAAI1pC,EAAa+B,sBACxE9G,EAAUyE,QAAQ+U,WAAWi1B,EAAQ,CACnCptC,MAAO,aACPijD,SAAU,gBACVC,SAAU,kBAEZ1kD,EAAO8E,WAAWC,WAAW6pC,sCClM7B,IACMvvC,EADFC,EAAY3C,MAAQA,KAAK2C,YACvBD,EAAiB,SAAuBE,EAAGC,GAW7C,OAVAH,EAAiBvD,OAAO2D,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAET,eAAea,KAAIL,EAAEK,GAAKJ,EAAEI,KAI/BP,EAAeE,EAAGC,IAGpB,SAAUD,EAAGC,GAGlB,SAASK,IACPlD,KAAKmD,YAAcP,EAHrBF,EAAeE,EAAGC,GAMlBD,EAAEnC,UAAkB,OAANoC,EAAa1D,OAAOiE,OAAOP,IAAMK,EAAGzC,UAAYoC,EAAEpC,UAAW,IAAIyC,KAInF/D,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAAI+D,EAAS,EAAQ,MAEjBG,EAAY,EAAQ,MAEpBkd,EAAU,EAAQ,MAElBnY,EAAe,EAAQ,MAEvBhJ,EAAW,EAAQ,MAEnB2yC,EAAO,SAAUvuC,GAGnB,SAASuuC,IACP,OAAkB,OAAXvuC,GAAmBA,EAAOgH,MAAM3K,KAAM4K,YAAc5K,KAqC7D,OAxCA2C,EAAUuvC,EAAMvuC,GAMhBuuC,EAAKzxC,UAAU6+C,WAAa,SAAU73C,GACpC,IAAIg4C,EAAcz/C,KAAKy/C,cACnBD,EAAcx/C,KAAKw/C,cACnBwI,EAAYhoD,KAAKgoD,YACrBvgD,EAAQmH,YACRnH,EAAQ8D,OAAO,EAAG,EAAIi0C,GAEtB,IAAK,IAAIz+C,EAAI,EAAGA,EAAgB,EAAZinD,EAAejnD,IAAK,CACtC,IAAIgzC,EAAShzC,EAAI,GAAM,EAAIy+C,EAAcC,EACrCj5C,EAAIutC,EAAS3jC,KAAKysB,IAAI97B,EAAIqP,KAAK6N,GAAK+pC,GACpCvhD,GAAK,EAAIstC,EAAS3jC,KAAK2tB,IAAIh9B,EAAIqP,KAAK6N,GAAK+pC,GAC7CvgD,EAAQsN,OAAOvO,EAAGC,GAGpBgB,EAAQmM,YACRnM,EAAQ8J,gBAAgBvR,OAG1BkyC,EAAKzxC,UAAU6F,SAAW,WACxB,OAA4B,EAArBtG,KAAKw/C,eAGdtN,EAAKzxC,UAAU8F,UAAY,WACzB,OAA4B,EAArBvG,KAAKw/C,eAGdtN,EAAKzxC,UAAUsG,SAAW,SAAUZ,GAClCnG,KAAKw/C,YAAYr5C,EAAQ,IAG3B+rC,EAAKzxC,UAAUwG,UAAY,SAAUb,GACnCpG,KAAKw/C,YAAYp5C,EAAS,IAGrB8rC,EAzCE,CA0CTxxB,EAAQuP,OAEV5wB,EAAQ6yC,KAAOA,EACfA,EAAKzxC,UAAUipB,UAAY,OAC3BwoB,EAAKzxC,UAAUiyB,WAAY,EAC3Bwf,EAAKzxC,UAAU6tB,oBAAsB,CAAC,cAAe,eAErD/uB,EAASwe,cAAcm0B,GAEvB1uC,EAAUyE,QAAQC,gBAAgBgqC,EAAM,YAAa,EAAG3pC,EAAa+B,sBACrE9G,EAAUyE,QAAQC,gBAAgBgqC,EAAM,cAAe,EAAG3pC,EAAa+B,sBACvE9G,EAAUyE,QAAQC,gBAAgBgqC,EAAM,cAAe,EAAG3pC,EAAa+B,sBACvEjH,EAAO8E,WAAWC,WAAW8pC,sCC9F7B,EAAQ,MAER,EAAQ,MAER,IACMxvC,EADFC,EAAY3C,MAAQA,KAAK2C,YACvBD,EAAiB,SAAuBE,EAAGC,GAW7C,OAVAH,EAAiBvD,OAAO2D,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAET,eAAea,KAAIL,EAAEK,GAAKJ,EAAEI,KAI/BP,EAAeE,EAAGC,IAGpB,SAAUD,EAAGC,GAGlB,SAASK,IACPlD,KAAKmD,YAAcP,EAHrBF,EAAeE,EAAGC,GAMlBD,EAAEnC,UAAkB,OAANoC,EAAa1D,OAAOiE,OAAOP,IAAMK,EAAGzC,UAAYoC,EAAEpC,UAAW,IAAIyC,KAInF/D,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAkCI8vB,EAlCA/rB,EAAS,EAAQ,MAEjBG,EAAY,EAAQ,MAEpBkd,EAAU,EAAQ,MAElBnhB,EAAW,EAAQ,MAEnBgJ,EAAe,EAAQ,MAEvBisB,EAAW,EAAQ,MAEnByzB,EAAO,OAEPC,EAAU,UAIV/G,EAAO,OAKPgH,EAAS,SACTC,EAAS,SAETzlC,EAAQ,IAMRo+B,EAAmB,CAAC,aAAc,WAAY,YAAa,cAAe,UAAW,QAAS,gBAAiB,aAAc,OAAQ,QAAS,SAAU,OAAQ,WAAY,iBAC5KK,EAAoBL,EAAiBpgD,OAGzC,SAASgvB,IACP,OAAIP,IAIJA,EAAe/rB,EAAOyC,KAAK8C,sBAAsBnE,WAzBlC,OA+CjB,IAAI0tC,EAAO,SAAUxuC,GAGnB,SAASwuC,EAAKvuC,GACZ,IAAIC,EAAQF,EAAOzB,KAAKlC,KAd5B,SAA0B4D,GAOxB,OANAA,EAASA,GAAU,IAEPutB,8BAAiCvtB,EAAO4tB,8BAAiC5tB,EAAOotB,mBAC1FptB,EAAO4Q,KAAO5Q,EAAO4Q,MAAQ,SAGxB5Q,EAOyBykD,CAAiBzkD,KAAY5D,KAE3D6D,EAAMykD,cAAgB,EACtBzkD,EAAM0kD,cAAgB,EAEtB,IAAK,IAAIxnD,EAAI,EAAGA,EAAIqgD,EAAmBrgD,IACrC8C,EAAMI,GAAG88C,EAAiBhgD,GA1Db,eA0DgC8C,EAAM2kD,cAKrD,OAFA3kD,EAAM2kD,eAEC3kD,EAoTT,OAlUAlB,EAAUwvC,EAAMxuC,GAiBhBwuC,EAAK1xC,UAAU6+C,WAAa,SAAU73C,GACpC,IAcI1G,EAdAsI,EAAUrJ,KAAKqJ,UACfo/C,EAAWzoD,KAAKyoD,WAChBC,EAAe1oD,KAAK2oD,aAAeF,EACnCG,EAAU5oD,KAAK4oD,QACfC,EAAaD,EAAQjoD,OACrBmoD,EAAgB9oD,KAAK8oD,gBACrBC,EAAS,EACTC,EAAQhpD,KAAKgpD,QACbC,EAAajpD,KAAKsG,WAClB4iD,EAAgBlpD,KAAKkpD,gBACrB10C,EAAOxU,KAAKwU,OACZ20C,EAAiBnpD,KAAKmpD,iBACtBC,GAA2D,IAAzCD,EAAe95C,QAAQ,aACzCg6C,GAAgE,IAA5CF,EAAe95C,QAAQ,gBAE3Ci6C,EAAa,EAEbC,GADAD,EAAaZ,EAAe,EACX,GACjBc,EAAiB,EAarB,IAZA/hD,EAAQkL,QAAQ,OAAQ3S,KAAKypD,mBAC7BhiD,EAAQkL,QAAQ,eAAgBw1C,GAChC1gD,EAAQkL,QAAQ,YAAawuC,GAEzB2H,IAAkBX,EACpBY,GAAU/oD,KAAKuG,YAAcsiD,EAAaH,EAAyB,EAAVr/C,GAAe,EApFjE,WAqFEy/C,IACTC,EAAS/oD,KAAKuG,YAAcsiD,EAAaH,EAAyB,EAAVr/C,GAG1D5B,EAAQ8N,UAAUlM,EAAS0/C,EAAS1/C,GAE/BtI,EAAI,EAAGA,EAAI8nD,EAAY9nD,IAAK,CAC3BwoD,EAAiB,EACjBC,EAAiB,EADrB,IAMIE,EACAC,EACAC,EANAn9C,EAAMm8C,EAAQ7nD,GACd8T,EAAOpI,EAAIoI,KACX1O,EAAQsG,EAAItG,MACZ0jD,EAAW9oD,IAAM8nD,EAAa,EAwClC,GApCAphD,EAAQiG,OAhGF,UAkGFs7C,EACFO,GAAkBN,EAAa9iD,EAAkB,EAAVkD,EAjHlC,WAkHI2/C,IACTO,IAAmBN,EAAa9iD,EAAkB,EAAVkD,GAAe,GAGrD+/C,IACF3hD,EAAQiG,OACRjG,EAAQmH,YACRnH,EAAQ8D,OAAOg+C,EAAgBD,EAAaE,EAAiBp5C,KAAKgR,MAAMqnC,EAAW,IAEnFkB,EAA2B,KAD3BD,EAAe70C,EAAK6Q,MAAM,KAAK/kB,OAAS,GAExCipD,EAAYZ,IAAUd,GAAW2B,IAAaF,EAAUV,EAAuB,EAAV5/C,EAAclD,EACnFsB,EAAQsN,OAAOw0C,EAAiBn5C,KAAKgR,MAAMwoC,GAAYN,EAAaE,EAAiBp5C,KAAKgR,MAAMqnC,EAAW,IAC3GhhD,EAAQmiD,UAAYnB,EAAW,GAC/BhhD,EAAQqiD,YAAct1C,EACtB/M,EAAQ4N,SACR5N,EAAQmG,WAGNy7C,IACF5hD,EAAQiG,OACRjG,EAAQmH,YACRnH,EAAQ8D,OAAOg+C,EAAgBD,EAAaE,GAE5CG,EAA2B,KAD3BD,EAAe70C,EAAK6Q,MAAM,KAAK/kB,OAAS,GAExCipD,EAAYZ,IAAUd,GAAW2B,IAAaF,EAAUV,EAAuB,EAAV5/C,EAAclD,EACnFsB,EAAQsN,OAAOw0C,EAAiBn5C,KAAKgR,MAAMwoC,GAAYN,EAAaE,GACpE/hD,EAAQmiD,UAAYnB,EAAW,GAC/BhhD,EAAQqiD,YAAct1C,EACtB/M,EAAQ4N,SACR5N,EAAQmG,WAGY,IAAlBs7C,GAAuBF,IAAUd,EAAS,CAC5CwB,EAAe70C,EAAK6Q,MAAM,KAAK/kB,OAAS,EAExC,IAAK,IAAIopD,EAAK,EAAGA,EAAKl1C,EAAKlU,OAAQopD,IAAM,CACvC,IAAIC,EAASn1C,EAAKk1C,GAEH,MAAXC,GAAkBjpD,IAAM8nD,EAAa,GAAKG,IAAUd,IACtDqB,GAAkBn5C,KAAKwqC,OAAOqO,EAAuB,EAAV5/C,EAAclD,GAASujD,IAGpE1pD,KAAKsoD,cAAgBiB,EACrBvpD,KAAKuoD,cAAgBe,EAAaE,EAClCxpD,KAAKiqD,aAAeD,EACpBviD,EAAQ8J,gBAAgBvR,MACxBupD,GAAkBn5C,KAAKgR,MAAMphB,KAAKkqD,YAAYF,GAAQ7jD,OAAS+iD,QAGjElpD,KAAKsoD,cAAgBiB,EACrBvpD,KAAKuoD,cAAgBe,EAAaE,EAClCxpD,KAAKiqD,aAAep1C,EACpBpN,EAAQ8J,gBAAgBvR,MAG1ByH,EAAQmG,UAEJi7C,EAAa,IACfS,GAAcZ,KAKpBvW,EAAK1xC,UAAUmgD,SAAW,SAAUn5C,GAClC,IAAItB,EAAQnG,KAAKsG,WACbF,EAASpG,KAAKuG,YAClBkB,EAAQmH,YACRnH,EAAQoH,KAAK,EAAG,EAAG1I,EAAOC,GAC1BqB,EAAQmM,YACRnM,EAAQ8J,gBAAgBvR,OAG1BmyC,EAAK1xC,UAAU0pD,QAAU,SAAUt1C,GACjC,IAAIhD,EAAMxO,EAAOyC,KAAKooB,UAAUrZ,GAAQA,GAAQA,GAAQ,IAAIyK,WAI5D,OAFAtf,KAAKmc,SAvLE,OAuLatK,GAEb7R,MAGTmyC,EAAK1xC,UAAU6F,SAAW,WAExB,OADatG,KAAKwP,MAAMrJ,QAAU8hD,QAA6B9lD,IAArBnC,KAAKwP,MAAMrJ,MACrCnG,KAAKoqD,eAAkC,EAAjBpqD,KAAKqJ,UAAgBrJ,KAAKwP,MAAMrJ,OAGxEgsC,EAAK1xC,UAAU8F,UAAY,WAEzB,OADavG,KAAKwP,MAAMpJ,SAAW6hD,QAA8B9lD,IAAtBnC,KAAKwP,MAAMpJ,OACtCpG,KAAKyoD,WAAazoD,KAAK4oD,QAAQjoD,OAASX,KAAK2oD,aAAgC,EAAjB3oD,KAAKqJ,UAAgBrJ,KAAKwP,MAAMpJ,QAG9G+rC,EAAK1xC,UAAU2pD,aAAe,WAC5B,OAAOpqD,KAAKqqD,WAGdlY,EAAK1xC,UAAU6pD,cAAgB,WAE7B,OADAjnD,EAAOyC,KAAKkB,KAAK,6HACVhH,KAAKuqD,YAGdpY,EAAK1xC,UAAUypD,YAAc,SAAUr1C,GACrC,IAEI21C,EAFA3jD,EAAW8oB,IACX84B,EAAWzoD,KAAKyoD,WAUpB,OAPA5hD,EAAS6G,OAET7G,EAAS4jD,KAAOzqD,KAAKypD,kBACrBe,EAAU3jD,EAAS+N,YAAYC,GAE/BhO,EAAS+G,UAEF,CACLzH,MAAOqkD,EAAQrkD,MACfC,OAAQqiD,IAIZtW,EAAK1xC,UAAUgpD,gBAAkB,WAC/B,OAAIlqD,EAASoJ,MAAMuX,GAAGhB,KACblf,KAAK0qD,YAAc/nC,EAAQ3iB,KAAKyoD,WA7N9B,MA6NsDzoD,KAAK2qD,aAG/D3qD,KAAK0qD,YAAc/nC,EAAQ3iB,KAAK4qD,cAAgBjoC,EAAQ3iB,KAAKyoD,WAhOzD,MAgOiFzoD,KAAK2qD,cAGnGxY,EAAK1xC,UAAUoqD,aAAe,SAAU5d,GAClCjtC,KAAKgpD,UAAYd,IACnBjb,EAAOA,EAAK6d,QAGd,IAAI3kD,EAAQnG,KAAK+qD,cAAc9d,GAE/B,OAAOjtC,KAAK4oD,QAAQ1nD,KAAK,CACvB2T,KAAMo4B,EACN9mC,MAAOA,KAIXgsC,EAAK1xC,UAAUsqD,cAAgB,SAAUl2C,GACvC,IAAIq0C,EAAgBlpD,KAAKkpD,gBACrBvoD,EAASkU,EAAKlU,OAClB,OAAOgvB,IAAkB/a,YAAYC,GAAM1O,OAASxF,EAASuoD,GAAiBvoD,EAAS,GAAK,IAG9FwxC,EAAK1xC,UAAU+nD,aAAe,WAC5B,IAAIwC,EAAQhrD,KAAK6U,OAAO6Q,MAAM,MAC1B+iC,GAAYzoD,KAAKyoD,WACjB4B,EAAY,EACZ3B,EAAe1oD,KAAK2oD,aAAeF,EACnCtiD,EAAQnG,KAAKwP,MAAMrJ,MACnBC,EAASpG,KAAKwP,MAAMpJ,OACpB6kD,EAAa9kD,IAAU8hD,QAAkB9lD,IAAVgE,EAC/B+kD,EAAc9kD,IAAW6hD,QAAmB9lD,IAAXiE,EACjCiD,EAAUrJ,KAAKqJ,UACf8hD,EAAWhlD,EAAkB,EAAVkD,EACnB+hD,EAAchlD,EAAmB,EAAViD,EACvBgiD,EAAkB,EAClBC,EAAOtrD,KAAKsrD,OACZC,EA/PG,SA+PUD,EACbE,EAjQG,SAiQUF,GAAiBC,EAC9BE,EAAoBzrD,KAAK0rD,aAAeH,EAC5CvrD,KAAK4oD,QAAU,GACfj5B,IAAkB86B,KAAOzqD,KAAKypD,kBAG9B,IAFA,IAAIkC,EAAkBF,EAAoBzrD,KAAK+qD,cAnQpC,KAmQ8D,EAEhEjpD,EAAI,EAAGwO,EAAM06C,EAAMrqD,OAAQmB,EAAIwO,IAAOxO,EAAG,CAChD,IAAImrC,EAAO+d,EAAMlpD,GAEb8nD,EAAY5pD,KAAK+qD,cAAc9d,GAEnC,GAAIge,GAAcrB,EAAYuB,EAC5B,KAAOle,EAAKtsC,OAAS,GAAG,CAMtB,IALA,IAAIirD,EAAM,EACNC,EAAO5e,EAAKtsC,OACZie,EAAQ,GACRktC,EAAa,EAEVF,EAAMC,GAAM,CACjB,IAAIE,EAAMH,EAAMC,IAAS,EACrB5hB,EAASgD,EAAKp3B,MAAM,EAAGk2C,EAAM,GAC7BC,EAAchsD,KAAK+qD,cAAc9gB,GAAU0hB,EAE3CK,GAAeb,GACjBS,EAAMG,EAAM,EACZntC,EAAQqrB,GAAUwhB,EAxRjB,IAwRgD,IACjDK,EAAaE,GAEbH,EAAOE,EAIX,IAAIntC,EA6CF,MA5CA,GAAI4sC,EAAY,CACd,IAAIS,EACAC,EAAWjf,EAAKruB,EAAMje,SAIxBsrD,GAHsBC,IAAavpC,GAjTxC,MAiTiDupC,IAErBJ,GAAcX,EACzBvsC,EAAMje,OAENyP,KAAKE,IAAIsO,EAAMutC,YAAYxpC,GAAQ/D,EAAMutC,YAtT1D,MAsT+E,GAG5D,IACdP,EAAMK,EACNrtC,EAAQA,EAAM/I,MAAM,EAAG+1C,GACvBE,EAAa9rD,KAAK+qD,cAAcnsC,IAWpC,GAPAA,EAAQA,EAAMwtC,YAEdpsD,KAAK6qD,aAAajsC,GAElByrC,EAAYj6C,KAAKE,IAAI+5C,EAAWyB,GAChCT,GAAmB3C,GAEd6C,GAAcL,GAAeG,EAAkB3C,EAAe0C,EACjE,MAMF,IAFAne,GADAA,EAAOA,EAAKp3B,MAAM+1C,IACNS,YAEH1rD,OAAS,IAChBipD,EAAY5pD,KAAK+qD,cAAc9d,KAEdke,EAAU,CACzBnrD,KAAK6qD,aAAa5d,GAElBoe,GAAmB3C,EACnB2B,EAAYj6C,KAAKE,IAAI+5C,EAAWT,GAChC,YAQR5pD,KAAK6qD,aAAa5d,GAElBoe,GAAmB3C,EACnB2B,EAAYj6C,KAAKE,IAAI+5C,EAAWT,GAGlC,GAAIsB,GAAeG,EAAkB3C,EAAe0C,EAClD,MAIJprD,KAAKuqD,WAAa9B,EAClBzoD,KAAKqqD,UAAYA,GAGnBlY,EAAK1xC,UAAUmY,sBAAwB,WACrC,OAAO,GAGFu5B,EAnUE,CAoUTzxB,EAAQuP,OAEV5wB,EAAQ8yC,KAAOA,EACfA,EAAK1xC,UAAU0V,UAzVf,SAAmB1O,GACjBA,EAAQkN,SAAS3U,KAAKiqD,aAAcjqD,KAAKsoD,cAAetoD,KAAKuoD,gBAyV/DpW,EAAK1xC,UAAUyY,YAtVf,SAAqBzR,GACnBA,EAAQ6N,WAAWtV,KAAKiqD,aAAcjqD,KAAKsoD,cAAetoD,KAAKuoD,gBAsVjEpW,EAAK1xC,UAAUipB,UApXE,OAqXjByoB,EAAK1xC,UAAU6tB,oBAAsB,CAAC,OAAQ,WAAY,UAAW,OAAQ,cAE7EkG,EAASzW,cAAco0B,GAEvB3uC,EAAUyE,QAAQiU,gBAAgBi2B,EAAM,QAAS5pC,EAAawrB,4BAC9DvwB,EAAUyE,QAAQiU,gBAAgBi2B,EAAM,SAAU5pC,EAAawrB,4BAC/DvwB,EAAUyE,QAAQC,gBAAgBiqC,EAAM,aAAc,SACtD3uC,EAAUyE,QAAQC,gBAAgBiqC,EAAM,WAAY,GAAI5pC,EAAa+B,sBACrE9G,EAAUyE,QAAQC,gBAAgBiqC,EAAM,YAAaiW,GACrD5kD,EAAUyE,QAAQC,gBAAgBiqC,EAAM,cAAeiW,GACvD5kD,EAAUyE,QAAQC,gBAAgBiqC,EAAM,UAAW,EAAG5pC,EAAa+B,sBACnE9G,EAAUyE,QAAQC,gBAAgBiqC,EAAM,QAASgP,GACjD39C,EAAUyE,QAAQC,gBAAgBiqC,EAAM,gBAhY9B,OAiYV3uC,EAAUyE,QAAQC,gBAAgBiqC,EAAM,aAAc,EAAG5pC,EAAa+B,sBACtE9G,EAAUyE,QAAQC,gBAAgBiqC,EAAM,OA3X7B,QA4XX3uC,EAAUyE,QAAQC,gBAAgBiqC,EAAM,YAAY,GACpD3uC,EAAUyE,QAAQC,gBAAgBiqC,EAAM,gBAAiB,EAAG5pC,EAAa+B,sBACzE9G,EAAUyE,QAAQC,gBAAgBiqC,EAAM,OAAQ,GAAI5pC,EAAagmB,sBACjE/qB,EAAUyE,QAAQC,gBAAgBiqC,EAAM,iBAAkB,IAC1D9uC,EAAO8E,WAAWC,WAAW+pC,sCC9b7B,IACMzvC,EADFC,EAAY3C,MAAQA,KAAK2C,YACvBD,EAAiB,SAAuBE,EAAGC,GAW7C,OAVAH,EAAiBvD,OAAO2D,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAET,eAAea,KAAIL,EAAEK,GAAKJ,EAAEI,KAI/BP,EAAeE,EAAGC,IAGpB,SAAUD,EAAGC,GAGlB,SAASK,IACPlD,KAAKmD,YAAcP,EAHrBF,EAAeE,EAAGC,GAMlBD,EAAEnC,UAAkB,OAANoC,EAAa1D,OAAOiE,OAAOP,IAAMK,EAAGzC,UAAYoC,EAAEpC,UAAW,IAAIyC,KAInF/D,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAAI+D,EAAS,EAAQ,MAEjBG,EAAY,EAAQ,MAEpBkd,EAAU,EAAQ,MAElB+uB,EAAS,EAAQ,MAEjBM,EAAS,EAAQ,MAEjBxnC,EAAe,EAAQ,MAEvBhJ,EAAW,EAAQ,MAGnB6oD,EAAS,SAEb,SAASjyC,EAAU1O,GACjBA,EAAQkN,SAAS3U,KAAKssD,YAAa,EAAG,GAGxC,SAASpzC,EAAYzR,GACnBA,EAAQ6N,WAAWtV,KAAKssD,YAAa,EAAG,GAG1C,IAAIla,EAAW,SAAUzuC,GAGvB,SAASyuC,EAASxuC,GAChB,IAAIC,EAAQF,EAAOzB,KAAKlC,KAAM4D,IAAW5D,KAsBzC,OApBA6D,EAAM0oD,YAAclpD,EAAOyC,KAAK8C,sBAChC/E,EAAMq+C,UAAY,GAClBr+C,EAAMq+C,UAAYzS,EAAOoC,KAAKuQ,cAAcv+C,EAAM2L,MAAM6R,MAExDxd,EAAMI,GAAG,oBAAoB,WAC3BjE,KAAKkiD,UAAYzS,EAAOoC,KAAKuQ,cAAcpiD,KAAKwP,MAAM6R,MAEtDrhB,KAAKwoD,kBAGP3kD,EAAMI,GAAG,uFAAwFJ,EAAM2kD,cAEnG5kD,GAAUA,EAAmB,aAC/BP,EAAOyC,KAAKkB,KAAK,4EAEjBnD,EAAM2oD,YAAY5oD,EAAmB,aAGvCC,EAAM2kD,eAEC3kD,EA0VT,OAnXAlB,EAAUyvC,EAAUzuC,GA4BpByuC,EAAS3xC,UAAU6+C,WAAa,SAAU73C,GACxCA,EAAQkL,QAAQ,OAAQ3S,KAAKypD,mBAC7BhiD,EAAQkL,QAAQ,eAAgB3S,KAAKysD,gBACrChlD,EAAQkL,QAAQ,YAAa,QAC7BlL,EAAQiG,OACR,IAAIy7C,EAAiBnpD,KAAKmpD,iBACtB30C,EAAOxU,KAAKwU,OACZi0C,EAAWzoD,KAAKyoD,WAChBiE,EAAY1sD,KAAK0sD,UAEE,cAAnBvD,GACF1hD,EAAQmH,YAGV,IAAK,IAAI9M,EAAI,EAAGA,EAAI4qD,EAAU/rD,OAAQmB,IAAK,CACzC2F,EAAQiG,OACR,IAAIi/C,EAAKD,EAAU5qD,GAAG6qD,GACtBllD,EAAQ8N,UAAUo3C,EAAGnmD,EAAGmmD,EAAGlmD,GAC3BgB,EAAQyN,OAAOw3C,EAAU5qD,GAAGwmB,UAC5BtoB,KAAKssD,YAAcI,EAAU5qD,GAAG+S,KAChCpN,EAAQ8J,gBAAgBvR,MAED,cAAnBmpD,IACQ,IAANrnD,GACF2F,EAAQ8D,OAAO,EAAGk9C,EAAW,EAAI,GAGnChhD,EAAQsN,OAAO0zC,EAAUA,EAAW,EAAI,IAG1ChhD,EAAQmG,UAGa,cAAnBu7C,IACF1hD,EAAQqiD,YAAct1C,EACtB/M,EAAQmiD,UAAYnB,EAAW,GAC/BhhD,EAAQ4N,UAGV5N,EAAQmG,WAGVwkC,EAAS3xC,UAAUmgD,SAAW,SAAUn5C,GACtCA,EAAQmH,YACR,IAAI89C,EAAY1sD,KAAK0sD,UAErB,GAAIA,EAAU/rD,QAAU,EAAG,CACzB,IAAIgsD,EAAKD,EAAU,GAAGC,GACtBllD,EAAQ8D,OAAOohD,EAAGnmD,EAAGmmD,EAAGlmD,GAG1B,IAAK,IAAI3E,EAAI,EAAGA,EAAI4qD,EAAU/rD,OAAQmB,IAAK,CACzC,IAAIurC,EAAKqf,EAAU5qD,GAAGurC,GACtB5lC,EAAQsN,OAAOs4B,EAAG7mC,EAAG6mC,EAAG5mC,GAG1BgB,EAAQkL,QAAQ,YAAa3S,KAAKyoD,YAClChhD,EAAQkL,QAAQ,cAAe3S,KAAKga,UACpCvS,EAAQ4N,UAGV+8B,EAAS3xC,UAAU2pD,aAAe,WAChC,OAAOpqD,KAAKqqD,WAGdjY,EAAS3xC,UAAU6pD,cAAgB,WAEjC,OADAjnD,EAAOyC,KAAKkB,KAAK,6HACVhH,KAAKuqD,YAGdnY,EAAS3xC,UAAU0pD,QAAU,SAAUt1C,GACrC,OAAOk7B,EAAOoC,KAAK1xC,UAAU0pD,QAAQjoD,KAAKlC,KAAM6U,IAGlDu9B,EAAS3xC,UAAUgpD,gBAAkB,WACnC,OAAO1Z,EAAOoC,KAAK1xC,UAAUgpD,gBAAgBvnD,KAAKlC,OAGpDoyC,EAAS3xC,UAAUmsD,aAAe,SAAU/3C,GAC1C,IAEIhO,EAFc7G,KAAKusD,YAEI9nD,WAAW,MAEtCoC,EAAS6G,OAET7G,EAAS4jD,KAAOzqD,KAAKypD,kBAErB,IAAIe,EAAU3jD,EAAS+N,YAAYC,GAInC,OAFAhO,EAAS+G,UAEF,CACLzH,MAAOqkD,EAAQrkD,MACfC,OAAQiY,SAASre,KAAKwP,MAAMi5C,SAAU,MAI1CrW,EAAS3xC,UAAU+nD,aAAe,WAChC,IAAIv4C,EAAOjQ,KAEPisB,EAAOjsB,KAAK4sD,aAAa5sD,KAAKwP,MAAMqF,MAEpCq0C,EAAgBlpD,KAAKkpD,gBACrBF,EAAQhpD,KAAKgpD,QACbwD,EAAcxsD,KAAKwsD,cACvBxsD,KAAKqqD,UAAYp+B,EAAK9lB,MACtBnG,KAAKuqD,WAAat+B,EAAK7lB,OACvB,IAAIymD,EAAgBz8C,KAAKE,IAAItQ,KAAKqqD,YAAcrqD,KAAKwP,MAAMqF,MAAQ,IAAIlU,OAAS,GAAKuoD,EAAe,GACpGlpD,KAAK0sD,UAAY,GAGjB,IAFA,IAAII,EAAgB,EAEXvT,EAAI,EAAGA,EAAItpC,EAAKiyC,UAAUvhD,OAAQ44C,IACrCtpC,EAAKiyC,UAAU3I,GAAG4I,WAAa,IACjC2K,GAAiB78C,EAAKiyC,UAAU3I,GAAG4I,YAIvC,IAAI1oC,EAAS,EAEC,WAAVuvC,IACFvvC,EAASrJ,KAAKE,IAAI,EAAGw8C,EAAgB,EAAID,EAAgB,IAG7C,UAAV7D,IACFvvC,EAASrJ,KAAKE,IAAI,EAAGw8C,EAAgBD,IA8IvC,IA3IA,IAEIF,EAAItf,EAAI0f,EAFRC,EAAUhtD,KAAK6U,OAAO6Q,MAAM,IAC5BgkC,EAAe1pD,KAAK6U,OAAO6Q,MAAM,KAAK/kB,OAAS,EAE/CssD,GAAU,EACVC,EAAW,EAEXC,EAAqB,WACvBD,EAAW,EAGX,IAFA,IAAIE,EAAWn9C,EAAKiyC,UAEXiD,EAAI8H,EAAS,EAAG9H,EAAIiI,EAASzsD,OAAQwkD,IAAK,CACjD,GAAIiI,EAASjI,GAAGhD,WAAa,EAE3B,OADA8K,EAAS9H,EACFiI,EAASjI,GACiB,MAAxBiI,EAASjI,GAAG7C,UACrBqK,EAAK,CACHnmD,EAAG4mD,EAASjI,GAAG3gC,OAAO,GACtB/d,EAAG2mD,EAASjI,GAAG3gC,OAAO,KAK5B,MAAO,IAGL6oC,EAA4B,SAAmC/wB,GACjE,IAAIgxB,EAAar9C,EAAK28C,aAAatwB,GAAGn2B,MAAQ+iD,EAEpC,MAAN5sB,GAAuB,YAAV0sB,IACfsE,IAAeR,EAAgBD,GAAiBnD,GAGlD,IAAI6D,EAAU,EACVC,EAAW,EAGf,IAFAngB,OAAKlrC,EAEEiO,KAAK2J,IAAIuzC,EAAaC,GAAWD,EAAa,KAAQE,EAAW,IAAI,CAC1EA,IAGA,IAFA,IAAIC,EAAuBF,OAERprD,IAAZ4qD,IACLA,EAAUI,MAEKM,EAAuBV,EAAQ5K,WAAamL,IACzDG,GAAwBV,EAAQ5K,WAChC4K,OAAU5qD,GAId,GAAI4qD,IAAY,SAAa5qD,IAAPwqD,EACpB,OAGF,IAAIe,GAAiB,EAErB,OAAQX,EAAQzK,SACd,IAAK,IACC7S,EAAOoC,KAAKoR,cAAc0J,EAAGnmD,EAAGmmD,EAAGlmD,EAAGsmD,EAAQvoC,OAAO,GAAIuoC,EAAQvoC,OAAO,IAAM8oC,EAChFjgB,EAAKoC,EAAOoC,KAAKgR,eAAeyK,EAAYX,EAAGnmD,EAAGmmD,EAAGlmD,EAAGsmD,EAAQvoC,OAAO,GAAIuoC,EAAQvoC,OAAO,GAAImoC,EAAGnmD,EAAGmmD,EAAGlmD,GAEvGsmD,OAAU5qD,EAGZ,MAEF,IAAK,IACH,IAAId,EAAQ0rD,EAAQvoC,OAAO,GACvB+9B,EAASwK,EAAQvoC,OAAO,GACxBnM,EAAM00C,EAAQvoC,OAAO,GAAK+9B,EAEb,IAAb2K,EACFA,EAAW7rD,EAAQ,KACVisD,EAAaC,EACtBL,GAAY98C,KAAK6N,GAAK,IAAQskC,EAASnyC,KAAK2J,IAAIwoC,GAEhD2K,GAAY98C,KAAK6N,GAAK,IAAQskC,EAASnyC,KAAK2J,IAAIwoC,IAG9CA,EAAS,GAAK2K,EAAW70C,GAAOkqC,GAAU,GAAK2K,EAAW70C,KAC5D60C,EAAW70C,EACXq1C,GAAiB,GAGnBrgB,EAAKoC,EAAOoC,KAAKmR,wBAAwB+J,EAAQvoC,OAAO,GAAIuoC,EAAQvoC,OAAO,GAAIuoC,EAAQvoC,OAAO,GAAIuoC,EAAQvoC,OAAO,GAAI0oC,EAAUH,EAAQvoC,OAAO,IAC9I,MAEF,IAAK,IACc,IAAb0oC,EAEAA,EADEI,EAAaP,EAAQ5K,WACZ,KAEAmL,EAAaP,EAAQ5K,WAEzBmL,EAAaC,EACtBL,IAAaI,EAAaC,GAAWR,EAAQ5K,WAE7C+K,IAAaK,EAAUD,GAAcP,EAAQ5K,WAG3C+K,EAAW,IACbA,EAAW,EACXQ,GAAiB,GAGnBrgB,EAAKoC,EAAOoC,KAAKiR,sBAAsBoK,EAAUH,EAAQ1rD,MAAMmF,EAAGumD,EAAQ1rD,MAAMoF,EAAGsmD,EAAQvoC,OAAO,GAAIuoC,EAAQvoC,OAAO,GAAIuoC,EAAQvoC,OAAO,GAAIuoC,EAAQvoC,OAAO,GAAIuoC,EAAQvoC,OAAO,GAAIuoC,EAAQvoC,OAAO,IACjM,MAEF,IAAK,IACc,IAAb0oC,EACFA,EAAWI,EAAaP,EAAQ5K,WACvBmL,EAAaC,EACtBL,IAAaI,EAAaC,GAAWR,EAAQ5K,WAE7C+K,IAAaK,EAAUD,GAAcP,EAAQ5K,WAG3C+K,EAAW,IACbA,EAAW,EACXQ,GAAiB,GAGnBrgB,EAAKoC,EAAOoC,KAAKkR,0BAA0BmK,EAAUH,EAAQ1rD,MAAMmF,EAAGumD,EAAQ1rD,MAAMoF,EAAGsmD,EAAQvoC,OAAO,GAAIuoC,EAAQvoC,OAAO,GAAIuoC,EAAQvoC,OAAO,GAAIuoC,EAAQvoC,OAAO,SAIxJriB,IAAPkrC,IACFkgB,EAAU9d,EAAOoC,KAAKoR,cAAc0J,EAAGnmD,EAAGmmD,EAAGlmD,EAAG4mC,EAAG7mC,EAAG6mC,EAAG5mC,IAGvDinD,IACFA,GAAiB,EACjBX,OAAU5qD,KAMZmrD,EAAar9C,EAAK28C,aADP,KAC8BzmD,MAAQ+iD,EAE5CyE,EAAI,EAAGA,EAAIl0C,EAAS6zC,IAC3BD,EAJa,UAMFlrD,IAAPwqD,QAA2BxqD,IAAPkrC,GAHesgB,IAOvChB,EAAKtf,EAGP,IAAK,IAAIvrC,EAAI,EAAGA,EAAIkrD,EAAQrsD,SAC1B0sD,EAA0BL,EAAQlrD,SAEvBK,IAAPwqD,QAA2BxqD,IAAPkrC,GAHUvrC,IAAK,CAOvC,IAAIqE,EAAQspC,EAAOoC,KAAKoR,cAAc0J,EAAGnmD,EAAGmmD,EAAGlmD,EAAG4mC,EAAG7mC,EAAG6mC,EAAG5mC,GACvDmnD,EAAO,EAEX,GAAIpB,EACF,IACEoB,EAAOpB,EAAYQ,EAAQlrD,EAAI,GAAIkrD,EAAQlrD,IAAM9B,KAAKyoD,WACtD,MAAOv+C,GACP0jD,EAAO,EAIXjB,EAAGnmD,GAAKonD,EACRvgB,EAAG7mC,GAAKonD,EACR5tD,KAAKqqD,WAAauD,EAClB,IAAIC,EAAWpe,EAAOoC,KAAKgR,eAAe+K,EAAOznD,EAAQ,EAAKwmD,EAAGnmD,EAAGmmD,EAAGlmD,EAAG4mC,EAAG7mC,EAAG6mC,EAAG5mC,GAC/E6hB,EAAWlY,KAAK+rC,MAAM9O,EAAG5mC,EAAIkmD,EAAGlmD,EAAG4mC,EAAG7mC,EAAImmD,EAAGnmD,GACjDxG,KAAK0sD,UAAUxrD,KAAK,CAClB4sD,WAAYD,EAASrnD,EACrBunD,WAAYF,EAASpnD,EACrBoO,KAAMm4C,EAAQlrD,GACdwmB,SAAUA,EACVqkC,GAAIA,EACJtf,GAAIA,IAENsf,EAAKtf,IAIT+E,EAAS3xC,UAAUgyB,YAAc,WAC/B,IAAIjO,EAAS,GACbxkB,KAAK0sD,UAAU12C,SAAQ,SAAUg4C,GAC/BxpC,EAAOtjB,KAAK8sD,EAAKrB,GAAGnmD,GACpBge,EAAOtjB,KAAK8sD,EAAKrB,GAAGlmD,GACpB+d,EAAOtjB,KAAK8sD,EAAK3gB,GAAG7mC,GACpBge,EAAOtjB,KAAK8sD,EAAK3gB,GAAG5mC,MAQtB,IANA,IAIID,EAAGC,EAJHgJ,EAAO+U,EAAO,GACd7U,EAAO6U,EAAO,GACd9U,EAAO8U,EAAO,GACd5U,EAAO4U,EAAO,GAGT1iB,EAAI,EAAGA,EAAI0iB,EAAO7jB,OAAS,EAAGmB,IACrC0E,EAAIge,EAAW,EAAJ1iB,GACX2E,EAAI+d,EAAW,EAAJ1iB,EAAQ,GACnB2N,EAAOW,KAAKC,IAAIZ,EAAMjJ,GACtBmJ,EAAOS,KAAKE,IAAIX,EAAMnJ,GACtBkJ,EAAOU,KAAKC,IAAIX,EAAMjJ,GACtBmJ,EAAOQ,KAAKE,IAAIV,EAAMnJ,GAGxB,IAAIgiD,EAAWzoD,KAAKyoD,WACpB,MAAO,CACLjiD,EAAG4J,KAAKgR,MAAM3R,GAAQg5C,EAAW,EACjChiD,EAAG2J,KAAKgR,MAAM1R,GAAQ+4C,EAAW,EACjCtiD,MAAOiK,KAAKgR,MAAMzR,EAAOF,GAAQg5C,EACjCriD,OAAQgK,KAAKgR,MAAMxR,EAAOF,GAAQ+4C,IAI/BrW,EApXM,CAqXb1xB,EAAQuP,OAEV5wB,EAAQ+yC,SAAWA,EACnBA,EAAS3xC,UAAU0V,UAAYA,EAC/Bi8B,EAAS3xC,UAAUyY,YAAcA,EACjCk5B,EAAS3xC,UAAUwZ,aAAe9D,EAClCi8B,EAAS3xC,UAAU0Z,eAAiBjB,EACpCk5B,EAAS3xC,UAAUipB,UAAY,WAC/B0oB,EAAS3xC,UAAU6tB,oBAAsB,CAAC,OAAQ,WAAY,QAE9D/uB,EAASwe,cAAcq0B,GAEvB5uC,EAAUyE,QAAQC,gBAAgBkqC,EAAU,QAC5C5uC,EAAUyE,QAAQC,gBAAgBkqC,EAAU,aAAc,SAC1D5uC,EAAUyE,QAAQC,gBAAgBkqC,EAAU,WAAY,GAAI7pC,EAAa+B,sBACzE9G,EAAUyE,QAAQC,gBAAgBkqC,EAAU,YAAagW,GACzD5kD,EAAUyE,QAAQC,gBAAgBkqC,EAAU,QAAS,QACrD5uC,EAAUyE,QAAQC,gBAAgBkqC,EAAU,gBAAiB,EAAG7pC,EAAa+B,sBAC7E9G,EAAUyE,QAAQC,gBAAgBkqC,EAAU,eAAgB,UAC5D5uC,EAAUyE,QAAQC,gBAAgBkqC,EAAU,cAAegW,GAC3D5kD,EAAUyE,QAAQC,gBAAgBkqC,EAAU,OApZzB,IAqZnB5uC,EAAUyE,QAAQC,gBAAgBkqC,EAAU,iBAAkB,MAC9D5uC,EAAUyE,QAAQC,gBAAgBkqC,EAAU,cAAe,MAC3D/uC,EAAO8E,WAAWC,WAAWgqC,sCCnc7B,IACM1vC,EADFC,EAAY3C,MAAQA,KAAK2C,YACvBD,EAAiB,SAAuBE,EAAGC,GAW7C,OAVAH,EAAiBvD,OAAO2D,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAET,eAAea,KAAIL,EAAEK,GAAKJ,EAAEI,KAI/BP,EAAeE,EAAGC,IAGpB,SAAUD,EAAGC,GAGlB,SAASK,IACPlD,KAAKmD,YAAcP,EAHrBF,EAAeE,EAAGC,GAMlBD,EAAEnC,UAAkB,OAANoC,EAAa1D,OAAOiE,OAAOP,IAAMK,EAAGzC,UAAYoC,EAAEpC,UAAW,IAAIyC,KAInF/D,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAAI+D,EAAS,EAAQ,MAEjBG,EAAY,EAAQ,MAEpBD,EAAS,EAAQ,MAEjBmd,EAAU,EAAQ,MAElBgvB,EAAS,EAAQ,MAEjBX,EAAU,EAAQ,MAElBxvC,EAAW,EAAQ,MAEnBgJ,EAAe,EAAQ,MAEvBisB,EAAW,EAAQ,MAEnBusB,EAAmB,CAAC,sBAAuB,2BAA4B,sBAAuB,uBAAwB,mBAAoB,sBAAuB,qBAAsB,0BAA2B,mBAAoB,qBAAsB,0BAA2B,mBAAoB,2BAA4B,sBAAsBhvC,KAAK,KAClWk8C,EAAY,WACZjrC,EAAuB,CAAC,iBAAkB,kBAAmB,kBAAmB,kBAAmB,iBAAkB,iBAAkB,oBAAqB,mBAAoB,mBAAoB,6BAA8B,wBAAwBjR,KAAK,KAC/Pm8C,EAAS,CACX,YAAa,GACb,aAAc,EACd,YAAa,GACb,gBAAiB,GACjB,cAAe,GACf,eAAgB,IAChB,gBAAiB,IACjB,eAAgB,KAsClB,IAAIC,EAAgB,CAAC,WAAY,aAAc,YAAa,eAAgB,cAAe,cAAe,gBAAiB,gBAGvH9b,EAAc,SAAU1uC,GAG1B,SAAS0uC,EAAYzuC,GACnB,IAAIC,EAAQF,EAAOzB,KAAKlC,KAAM4D,IAAW5D,KAgBzC,OAdA6D,EAAMuqD,eAAgB,EAEtBvqD,EAAMwqD,kBAENxqD,EAAMyqD,iBAAmBzqD,EAAMyqD,iBAAiBC,KAAK1qD,GACrDA,EAAM2qD,eAAiB3qD,EAAM2qD,eAAeD,KAAK1qD,GACjDA,EAAM22B,OAAS32B,EAAM22B,OAAO+zB,KAAK1qD,GAEjCA,EAAMI,GAAG88C,EAAkBl9C,EAAM22B,QAE7B32B,EAAM4qD,WACR5qD,EAAM22B,SAGD32B,EAslBT,OAzmBAlB,EAAU0vC,EAAa1uC,GAsBvB0uC,EAAY5xC,UAAUiuD,SAAW,SAAUviD,GAEzC,OADAnM,KAAK2uD,QAAQxiD,GACNnM,MAGTqyC,EAAY5xC,UAAUkuD,QAAU,SAAUxiD,GACxC,IAAItI,EAAQ7D,KAERA,KAAK4uD,OACP5uD,KAAK6uD,SAGP7uD,KAAK4uD,MAAQziD,EAEbnM,KAAK8uD,uBAEL,IAAIC,EAAmB5iD,EAAKmiB,oBAAoBic,KAAI,SAAUz0B,GAC5D,OAAOA,EAAO,eACb/D,KAAK,KAEJi9C,EAAW,WACbnrD,EAAMirD,uBAEDjrD,EAAMuqD,eACTvqD,EAAM22B,UAeV,OAXAruB,EAAKlI,GAAG8qD,EAAkBC,GAC1B7iD,EAAKlI,GAAG+e,EAAsBgsC,GAC9B7iD,EAAKlI,GAAG,yBAAyB,WAC/B,OAAOJ,EAAMirD,4BAES9uD,KAAK+L,QAAQ,cAGnC/L,KAAKw6B,SAGAx6B,MAGTqyC,EAAY5xC,UAAUguD,QAAU,WAC9B,OAAOzuD,KAAK4uD,OAGdvc,EAAY5xC,UAAUouD,OAAS,WACzB7uD,KAAKyuD,YACPzuD,KAAKyuD,UAAU9oC,IAAI,OACnB3lB,KAAK4uD,WAAQzsD,GAGfnC,KAAK8uD,wBAGPzc,EAAY5xC,UAAUquD,qBAAuB,WAC3C9uD,KAAK0jB,YAAYuqC,GAEjBjuD,KAAK0jB,YAAY,aAEjB1jB,KAAK2jB,6BAA6B,sBAGpC0uB,EAAY5xC,UAAUwuD,aAAe,WACnC,OAAOjvD,KAAK6jB,UAAUoqC,EAAWjuD,KAAKkvD,gBAGxC7c,EAAY5xC,UAAUyuD,cAAgB,WACpC,IAAI/iD,EAAOnM,KAAKyuD,UAEhB,IAAKtiD,EACH,MAAO,CACL3F,GAAG,IACHC,GAAG,IACHN,MAAO,EACPC,OAAQ,EACRkiB,SAAU,GAIVnc,EAAKnG,QAAUhG,KAAKgG,QAAUmG,EAAKnG,SAAWhG,KAAKgG,QACrD3C,EAAOyC,KAAKkB,KAAK,8JAGnB,IAAI6H,EAAO1C,EAAKoD,cAAc,CAC5BM,eAAe,EACfK,YAAY,EACZC,WAAYnQ,KAAKmvD,iBAEf7mC,EAAW/oB,EAASoJ,MAAMmO,SAAS3K,EAAKmc,YACxC+V,EAAKxvB,EAAKrI,EAAI2F,EAAK0N,SAAW1N,EAAKoc,UAAYpc,EAAK0N,SACpDykB,EAAKzvB,EAAKpI,EAAI0F,EAAK2N,SAAW3N,EAAKqc,UAAYrc,EAAK2N,SACxD,MAAO,CACLtT,EAAG2F,EAAK3F,IAAM63B,EAAKjuB,KAAK2tB,IAAIzV,GAAYgW,EAAKluB,KAAKysB,KAAKvU,GACvD7hB,EAAG0F,EAAK1F,IAAM63B,EAAKluB,KAAK2tB,IAAIzV,GAAY+V,EAAKjuB,KAAKysB,IAAIvU,GACtDniB,MAAO0I,EAAK1I,MAAQgG,EAAK0N,SACzBzT,OAAQyI,EAAKzI,OAAS+F,EAAK2N,SAC3BwO,SAAUnc,EAAKmc,aAInB+pB,EAAY5xC,UAAUyqB,KAAO,WAC3B,OAAOlrB,KAAKivD,eAAezoD,GAG7B6rC,EAAY5xC,UAAU2qB,KAAO,WAC3B,OAAOprB,KAAKivD,eAAexoD,GAG7B4rC,EAAY5xC,UAAU2uD,YAAc,WAClC,OAAOpvD,KAAKivD,eAAe3mC,UAG7B+pB,EAAY5xC,UAAU6F,SAAW,WAC/B,OAAOtG,KAAKivD,eAAe9oD,OAG7BksC,EAAY5xC,UAAU8F,UAAY,WAChC,OAAOvG,KAAKivD,eAAe7oD,QAG7BisC,EAAY5xC,UAAU4tD,gBAAkB,WACtCruD,KAAKqvD,cAELlB,EAAcn4C,QAAQ,SAAUgM,GAC9BhiB,KAAKsvD,cAActtC,IACnBusC,KAAKvuD,OAEPA,KAAKsvD,cAAc,YAGrBjd,EAAY5xC,UAAU6uD,cAAgB,SAAUttC,GAC9C,IAAIne,EAAQ7D,KAERuvD,EAAS,IAAI7f,EAAOoC,KAAK,CAC3Bz8B,OAAQ,mBACRb,KAAM,QACNwE,YAAa,EACbgJ,KAAMA,EAAO,WACbpH,aAAc,EACdgT,WAAW,IAETvO,EAAOrf,KACXuvD,EAAOtrD,GAAG,wBAAwB,SAAUiG,GAC1CmV,EAAKmwC,iBAAiBtlD,MAExBqlD,EAAOtrD,GAAG,aAAa,SAAUiG,GAC/BA,EAAEmjB,cAAe,KAEnBkiC,EAAOtrD,GAAG,YAAY,SAAUiG,GAC9BA,EAAEmjB,cAAe,KAEnBkiC,EAAOtrD,GAAG,WAAW,SAAUiG,GAC7BA,EAAEmjB,cAAe,KAEnBkiC,EAAOtrD,GAAG,cAAc,WACtB,IAAI65B,EAAMv+B,EAASoJ,MAAMmO,SAASjT,EAAMykB,YAEpCxe,EAAQjG,EAAM4qD,UAAU90C,mBAExB81C,EAAa3lD,EAAMrD,EAAIqD,EAAMtD,EAAI,EACjCkpD,EA9NV,SAAmBC,EAAY7xB,EAAK2xB,GAClC,GAAmB,YAAfE,EACF,MAAO,YAGT7xB,GAAOz6B,EAAOyC,KAAKglC,UAAUojB,EAAOyB,IAAe,GAE/CF,IACF3xB,IAAQ,GAGV,IAAIne,GAAStc,EAAOyC,KAAKklC,UAAUlN,GAAO,IAAM,KAAO,IAEvD,OAAIz6B,EAAOyC,KAAKymC,SAAS5sB,EAAO,MAAY,MAAQtc,EAAOyC,KAAKymC,SAAS5sB,EAAO,EAAG,MAC1E,YACEtc,EAAOyC,KAAKymC,SAAS5sB,EAAO,KAAW,MACzC,cACEtc,EAAOyC,KAAKymC,SAAS5sB,EAAO,KAAW,OACzC,YACEtc,EAAOyC,KAAKymC,SAAS5sB,EAAO,MAAY,OAC1C,cACEtc,EAAOyC,KAAKymC,SAAS5sB,EAAO,MAAY,OAC1C,YACEtc,EAAOyC,KAAKymC,SAAS5sB,EAAO,MAAY,OAC1C,cACEtc,EAAOyC,KAAKymC,SAAS5sB,EAAO,MAAY,OAC1C,YACEtc,EAAOyC,KAAKymC,SAAS5sB,EAAO,MAAY,OAC1C,eAEPtc,EAAOyC,KAAKsE,MAAM,uDAAyDuV,GACpE,WA+LQiwC,CAAU5tC,EAAM8b,EAAK2xB,GAClCF,EAAOxqD,WAAWC,QAAQ2B,MAAM+oD,OAASA,EACzC7rD,EAAMgsD,eAAgB,KAExBN,EAAOtrD,GAAG,YAAY,WACfsrD,EAAOxqD,YAAewqD,EAAOjkD,cAIlCikD,EAAOxqD,WAAWC,QAAQ2B,MAAM+oD,OAAS,GACzC7rD,EAAMgsD,eAAgB,MAExB7vD,KAAKqL,IAAIkkD,IAGXld,EAAY5xC,UAAU4uD,YAAc,WAClC,IAAIS,EAAO,IAAIpvC,EAAQuP,MAAM,CAC3BjO,KAAM,OACN7b,MAAO,EACPC,OAAQ,EACR4gB,WAAW,EACXoJ,UAAW,SAAmBgB,GAC5B,IAAI2+B,EAAK/vD,KAAKsL,YACVjC,EAAU0mD,EAAG1mD,UACjB+nB,EAAIxiB,YACJwiB,EAAIviB,MAAMxF,GAAUA,EAASrJ,KAAKmG,QAAoB,EAAVkD,EAAarJ,KAAKoG,SAAqB,EAAViD,GACzE+nB,EAAI7lB,OAAOvL,KAAKmG,QAAU,GAAIkD,GAE1B0mD,EAAGC,iBACL5+B,EAAIrc,OAAO/U,KAAKmG,QAAU,GAAI4pD,EAAGE,qBAAuB5sD,EAAOyC,KAAKmjC,MAAMjpC,KAAKoG,WAGjFgrB,EAAI7f,gBAAgBvR,SAGxBA,KAAKqL,IAAIykD,IAGXzd,EAAY5xC,UAAU+uD,iBAAmB,SAAUtlD,GACjDlK,KAAKkwD,cAAgBhmD,EAAE6Q,OAAOiH,OAAO0D,MAAM,KAAK,GAEhD,IAAIlW,EAAQxP,KAAKivD,eAEb9oD,EAAQqJ,EAAMrJ,MACdC,EAASoJ,EAAMpJ,OACf+pD,EAAa//C,KAAK27B,KAAK37B,KAAKwsB,IAAIz2B,EAAO,GAAKiK,KAAKwsB,IAAIx2B,EAAQ,IACjEpG,KAAK68B,IAAMzsB,KAAK2J,IAAI3T,EAAS+pD,GAC7BnwD,KAAK+9B,IAAM3tB,KAAK2J,IAAI5T,EAAQgqD,GAC5B50C,OAAOC,iBAAiB,YAAaxb,KAAKsuD,kBAC1C/yC,OAAOC,iBAAiB,YAAaxb,KAAKsuD,kBAC1C/yC,OAAOC,iBAAiB,UAAWxb,KAAKwuD,gBAAgB,GACxDjzC,OAAOC,iBAAiB,WAAYxb,KAAKwuD,gBAAgB,GACzDxuD,KAAKouD,eAAgB,EAErBpuD,KAAKyL,MAAM,iBAAkB,CAC3BgP,IAAKvQ,IAGPlK,KAAKyuD,UAAUhjD,MAAM,iBAAkB,CACrCgP,IAAKvQ,KAITmoC,EAAY5xC,UAAU6tD,iBAAmB,SAAUpkD,GACjD,IAAI1D,EAAGC,EAAG2pD,EACNC,EAAcrwD,KAAK+L,QAAQ,IAAM/L,KAAKkwD,eAEtCvkC,EADQ0kC,EAAYtrD,WACR4xB,aAAaoC,wBACzBu3B,EACC3kC,EAAIjiB,KADL4mD,EAEC3kC,EAAIjkB,IAML6oD,EAAY,CACd/pD,QAJoBrE,IAAd+H,EAAE0uB,QAAwB1uB,EAAE0uB,QAAU1uB,EAAEwuB,QAAQ,GAAGE,SAIpC03B,EACrB7pD,QAJmBtE,IAAd+H,EAAE0uB,QAAwB1uB,EAAE2uB,QAAU3uB,EAAEwuB,QAAQ,GAAGG,SAIpCy3B,GAEtBD,EAAYpoC,oBAAoBsoC,GAChC,IAAIC,EAAiBxwD,KAAKywD,aAAevmD,EAAEwmD,SAE3C,GAA2B,aAAvB1wD,KAAKkwD,eACP,GAAIM,EAAgB,CAClBJ,EAAgBhgD,KAAK27B,KAAK37B,KAAKwsB,IAAI58B,KAAK+L,QAAQ,iBAAiBvF,IAAM6pD,EAAY7pD,IAAK,GAAK4J,KAAKwsB,IAAI58B,KAAK+L,QAAQ,iBAAiBtF,IAAM4pD,EAAY5pD,IAAK,IAC3J,IAAI6zB,EAAUt6B,KAAK+L,QAAQ,aAAavF,IAAMxG,KAAK+L,QAAQ,iBAAiBvF,KAAO,EAAI,EACvFA,EAAI4pD,EAAgBpwD,KAAK+9B,IAAMzD,EAC/B7zB,EAAI2pD,EAAgBpwD,KAAK68B,IAAMvC,EAC/Bt6B,KAAK+L,QAAQ,aAAavF,EAAExG,KAAK+L,QAAQ,iBAAiBvF,IAAMA,GAChExG,KAAK+L,QAAQ,aAAatF,EAAEzG,KAAK+L,QAAQ,iBAAiBtF,IAAMA,SAE7D,GAA2B,eAAvBzG,KAAKkwD,cACdlwD,KAAK+L,QAAQ,aAAatF,EAAE4pD,EAAY5pD,UACnC,GAA2B,cAAvBzG,KAAKkwD,cAA+B,CAC7C,GAAIM,EAAgB,CAClBJ,EAAgBhgD,KAAK27B,KAAK37B,KAAKwsB,IAAI58B,KAAK+L,QAAQ,gBAAgBvF,IAAM6pD,EAAY7pD,IAAK,GAAK4J,KAAKwsB,IAAI58B,KAAK+L,QAAQ,gBAAgBtF,IAAM4pD,EAAY5pD,IAAK,IACrJ6zB,EAAUt6B,KAAK+L,QAAQ,cAAcvF,IAAMxG,KAAK+L,QAAQ,aAAavF,KAAO,EAAI,EACpFA,EAAI4pD,EAAgBpwD,KAAK+9B,IAAMzD,EAC/B7zB,EAAI2pD,EAAgBpwD,KAAK68B,IAAMvC,EAC/Bt6B,KAAK+L,QAAQ,cAAcvF,EAAEA,GAC7BxG,KAAK+L,QAAQ,cAActF,EAAEzG,KAAK+L,QAAQ,gBAAgBtF,IAAMA,GAGlE,IAAIU,EAAMkpD,EAAY5mD,WACtBzJ,KAAK+L,QAAQ,aAAatF,EAAEU,EAAIV,GAChCzG,KAAK+L,QAAQ,iBAAiBvF,EAAEW,EAAIX,QAC/B,GAA2B,gBAAvBxG,KAAKkwD,cACdlwD,KAAK+L,QAAQ,aAAavF,EAAE6pD,EAAY7pD,UACnC,GAA2B,iBAAvBxG,KAAKkwD,cACdlwD,KAAK+L,QAAQ,iBAAiBvF,EAAE6pD,EAAY7pD,UACvC,GAA2B,gBAAvBxG,KAAKkwD,cAAiC,CAC/C,GAAIM,EAAgB,CAClBJ,EAAgBhgD,KAAK27B,KAAK37B,KAAKwsB,IAAI58B,KAAK+L,QAAQ,cAAcvF,IAAM6pD,EAAY7pD,IAAK,GAAK4J,KAAKwsB,IAAI58B,KAAK+L,QAAQ,cAActF,IAAM4pD,EAAY5pD,IAAK,IACjJ6zB,EAAUt6B,KAAK+L,QAAQ,cAAcvF,IAAMxG,KAAK+L,QAAQ,gBAAgBvF,KAAO,EAAI,EACvFA,EAAI4pD,EAAgBpwD,KAAK+9B,IAAMzD,EAC/B7zB,EAAI2pD,EAAgBpwD,KAAK68B,IAAMvC,EAC/Bt6B,KAAK+L,QAAQ,gBAAgBvF,EAAExG,KAAK+L,QAAQ,cAAcvF,IAAMA,GAChExG,KAAK+L,QAAQ,gBAAgBtF,EAAEA,GAGjCU,EAAMkpD,EAAY5mD,WAClBzJ,KAAK+L,QAAQ,aAAavF,EAAEW,EAAIX,GAChCxG,KAAK+L,QAAQ,iBAAiBtF,EAAEU,EAAIV,QAC/B,GAA2B,kBAAvBzG,KAAKkwD,cACdlwD,KAAK+L,QAAQ,iBAAiBtF,EAAE4pD,EAAY5pD,UACvC,GAA2B,iBAAvBzG,KAAKkwD,eACd,GAAIM,EAAgB,CAClBJ,EAAgBhgD,KAAK27B,KAAK37B,KAAKwsB,IAAI58B,KAAK+L,QAAQ,iBAAiBvF,IAAK,GAAK4J,KAAKwsB,IAAI58B,KAAK+L,QAAQ,iBAAiBtF,IAAK,IACnH6zB,EAAUt6B,KAAK+L,QAAQ,aAAavF,IAAMxG,KAAK+L,QAAQ,iBAAiBvF,KAAO,EAAI,EACvFA,EAAI4pD,EAAgBpwD,KAAK+9B,IAAMzD,EAC/B7zB,EAAI2pD,EAAgBpwD,KAAK68B,IAAMvC,EAC/Bt6B,KAAK+L,QAAQ,iBAAiBvF,EAAEA,GAChCxG,KAAK+L,QAAQ,iBAAiBtF,EAAEA,SAE7B,GAA2B,YAAvBzG,KAAKkwD,cAA6B,CAC3C,IAAI7mD,EAAUrJ,KAAKqJ,UAEfmG,EAAQxP,KAAKivD,eAEjBzoD,EAAI6pD,EAAY7pD,IAAMgJ,EAAMrJ,MAAQ,EACpCM,GAAK4pD,EAAY5pD,IAAM+I,EAAMpJ,OAAS,EACtC,IAAIuqD,EAASvgD,KAAK+rC,OAAO11C,EAAGD,GAAK4J,KAAK6N,GAAK,EAEvCzO,EAAMpJ,OAAS,IACjBuqD,GAAUvgD,KAAK6N,IAcjB,IAXA,IAAI2yC,EAAMrxD,EAASoJ,MAAMmO,SAAS9W,KAAKsoB,YAEnCuoC,EAAcxtD,EAAOyC,KAAKklC,UAAU4lB,GAAOvtD,EAAOyC,KAAKklC,UAAU2lB,GAEjEpS,EAAQh/C,EAASoJ,MAAMmO,SAAS9W,KAAKyuD,UAAUnmC,YAE/CwoC,EAAWztD,EAAOyC,KAAKglC,UAAU+lB,GAEjCE,EAAQ/wD,KAAKgxD,gBAGRlvD,EAAI,EAAGA,EAAIivD,EAAMpwD,OAAQmB,IAAK,CACrC,IAAI6d,EAAQpgB,EAASoJ,MAAMmO,SAASi6C,EAAMjvD,IAChCsO,KAAK2J,IAAI4F,EAAQtc,EAAOyC,KAAKglC,UAAU+lB,KAA2B,EAAVzgD,KAAK6N,IAJ5D,KAOT4yC,EAAcxtD,EAAOyC,KAAKklC,UAAUrrB,GACpCmxC,EAAWztD,EAAOyC,KAAKglC,UAAU+lB,IAIrC,IAAIxyB,EAAKh1B,EACLi1B,EAAKj1B,EAETrJ,KAAKixD,aAAa,CAChB3oC,SAAU/oB,EAASoJ,MAAMiX,SAAWixC,EAAcxtD,EAAOyC,KAAKglC,UAAU+lB,GACxErqD,EAAGgJ,EAAMhJ,GAAKgJ,EAAMrJ,MAAQ,EAAIkD,IAAY+G,KAAK2tB,IAAIwgB,GAASnuC,KAAK2tB,IAAI+yB,KAActhD,EAAMpJ,OAAS,EAAIiD,IAAY+G,KAAKysB,KAAK0hB,GAASnuC,KAAKysB,KAAKi0B,KAAczyB,EAAKjuB,KAAK2tB,IAAI6yB,GAAOtyB,EAAKluB,KAAKysB,KAAK+zB,IACnMnqD,EAAG+I,EAAM/I,GAAK+I,EAAMpJ,OAAS,EAAIiD,IAAY+G,KAAK2tB,IAAIwgB,GAASnuC,KAAK2tB,IAAI+yB,KAActhD,EAAMrJ,MAAQ,EAAIkD,IAAY+G,KAAKysB,IAAI0hB,GAASnuC,KAAKysB,IAAIi0B,KAAcxyB,EAAKluB,KAAK2tB,IAAI6yB,GAAOvyB,EAAKjuB,KAAKysB,IAAI+zB,IAChMzqD,MAAOqJ,EAAMrJ,MAAkB,EAAVkD,EACrBjD,OAAQoJ,EAAMpJ,OAAmB,EAAViD,GACtBa,QAEH+gC,QAAQ7gC,MAAM,IAAIma,MAAM,iDAAmDvkB,KAAKkwD,gBAGlF,GAA2B,YAAvBlwD,KAAKkwD,cAAT,CAIA,IAAIgB,EAASlxD,KAAK+L,QAAQ,aAAa6b,oBAAoB5nB,KAAKsL,aAGhE,GAFsBtL,KAAKmxD,mBAAqBjnD,EAAEknD,OAE7B,CACnB,IAAIzK,EAAU3mD,KAAK+L,QAAQ,aACvB+6C,EAAc9mD,KAAK+L,QAAQ,iBAC3BslD,EAAa1K,EAAQngD,IACrB8qD,EAAa3K,EAAQlgD,IACrB8qD,EAAgBvxD,KAAKsG,WAAawgD,EAAYtgD,IAC9CgrD,EAAgBxxD,KAAKuG,YAAcugD,EAAYrgD,IACnDqgD,EAAYn+B,KAAK,CACfniB,GAAI6qD,EACJ5qD,GAAI6qD,IAEN3K,EAAQh+B,KAAK,CACXniB,EAAG+qD,EACH9qD,EAAG+qD,IAELN,EAASvK,EAAQ/+B,oBAAoB5nB,KAAKsL,aAG5C9E,EAAI0qD,EAAO1qD,EACXC,EAAIyqD,EAAOzqD,EACX,IAAIN,EAAQnG,KAAK+L,QAAQ,iBAAiBvF,IAAMxG,KAAK+L,QAAQ,aAAavF,IACtEJ,EAASpG,KAAK+L,QAAQ,iBAAiBtF,IAAMzG,KAAK+L,QAAQ,aAAatF,IAE3EzG,KAAKixD,aAAa,CAChBzqD,EAAGA,EAAIxG,KAAKuoB,UACZ9hB,EAAGA,EAAIzG,KAAKwoB,UACZriB,MAAOA,EACPC,OAAQA,GACP8D,KAGLmoC,EAAY5xC,UAAU+tD,eAAiB,SAAUtkD,GAC/ClK,KAAKyxD,cAAcvnD,IAGrBmoC,EAAY5xC,UAAUgxD,cAAgB,SAAUvnD,GAC9C,GAAIlK,KAAKouD,cAAe,CACtBpuD,KAAKouD,eAAgB,EACrB7yC,OAAOyK,oBAAoB,YAAahmB,KAAKsuD,kBAC7C/yC,OAAOyK,oBAAoB,YAAahmB,KAAKsuD,kBAC7C/yC,OAAOyK,oBAAoB,UAAWhmB,KAAKwuD,gBAAgB,GAC3DjzC,OAAOyK,oBAAoB,WAAYhmB,KAAKwuD,gBAAgB,GAE5DxuD,KAAKyL,MAAM,eAAgB,CACzBgP,IAAKvQ,IAGP,IAAIiC,EAAOnM,KAAKyuD,UAEZtiD,GACFA,EAAK0O,KAAK,eAAgB,CACxBJ,IAAKvQ,MAMbmoC,EAAY5xC,UAAUwwD,aAAe,SAAUS,EAAUj3C,GACvD,IAAIk3C,EAAe3xD,KAAK2xD,eAExB,GAAIA,EAAc,CAChB,IAAIC,EAAW5xD,KAAKivD,eAEpByC,EAAWC,EAAazvD,KAAKlC,KAAM4xD,EAAUF,GAG/C,IAAIvlD,EAAOnM,KAAKyuD,eAEUtsD,IAAtBuvD,EAASppC,UACXtoB,KAAKyuD,UAAUnmC,SAASopC,EAASppC,UAGnC,IAAIupC,EAAO1lD,EAAKoD,cAAc,CAC5BM,eAAe,EACfK,YAAY,EACZC,WAAYnQ,KAAKmvD,iBAEf9lD,EAAUrJ,KAAKqJ,UACfwQ,GAAU63C,EAASvrD,MAAkB,EAAVkD,GAAewoD,EAAK1rD,MAC/C2T,GAAU43C,EAAStrD,OAAmB,EAAViD,GAAewoD,EAAKzrD,OAChDkiB,EAAW/oB,EAASoJ,MAAMmO,SAAS3K,EAAKmc,YACxC+V,EAAKwzB,EAAKrrD,EAAIqT,EAASxQ,EAAU8C,EAAKoc,UAAY1O,EAClDykB,EAAKuzB,EAAKprD,EAAIqT,EAASzQ,EAAU8C,EAAKqc,UAAY1O,EACtD9Z,KAAKyuD,UAAUhrC,SAAS,CACtB5J,OAAQA,EACRC,OAAQA,EACRtT,EAAGkrD,EAASlrD,GAAK63B,EAAKjuB,KAAK2tB,IAAIzV,GAAYgW,EAAKluB,KAAKysB,KAAKvU,IAC1D7hB,EAAGirD,EAASjrD,GAAK63B,EAAKluB,KAAK2tB,IAAIzV,GAAY+V,EAAKjuB,KAAKysB,IAAIvU,MAG3DtoB,KAAKyL,MAAM,YAAa,CACtBgP,IAAKA,IAGPza,KAAKyuD,UAAUhjD,MAAM,YAAa,CAChCgP,IAAKA,IAGPza,KAAKw6B,SACLx6B,KAAK2F,WAAW0B,aAGlBgrC,EAAY5xC,UAAUqxD,YAAc,WAClC9xD,KAAK8uD,uBAEL9uD,KAAKw6B,UAGP6X,EAAY5xC,UAAU+5B,OAAS,WAC7B,IAAI32B,EAAQ7D,KAERwP,EAAQxP,KAAKivD,eAEb9iD,EAAOnM,KAAKyuD,UACZ3kD,EAAQ,CACVtD,EAAG,EACHC,EAAG,GAGD0F,GAAQA,EAAKb,cACfxB,EAAQqC,EAAKb,YAAYqO,oBAG3B,IAAIo4C,EAAgB,CAClBvrD,EAAG,EAAIsD,EAAMtD,EACbC,EAAG,EAAIqD,EAAMrD,GAEXN,EAAQqJ,EAAMrJ,MACdC,EAASoJ,EAAMpJ,OACf4rD,EAAiBhyD,KAAKgyD,iBACtBC,EAAgBjyD,KAAKiyD,gBACrB5oD,EAAUrJ,KAAKqJ,UACf6oD,EAAalyD,KAAKkyD,aACtBlyD,KAAK4L,KAAK,YAAYb,MAAK,SAAUoB,GACnC,OAAOA,EAAKsX,SAAS,CACnBtd,MAAO+rD,EACP9rD,OAAQ8rD,EACR3pC,QAAS2pC,EAAa,EACtB1pC,QAAS0pC,EAAa,EACtB78C,OAAQxR,EAAMsuD,eACdn5C,YAAanV,EAAMuuD,oBACnB59C,KAAM3Q,EAAMwuD,aACZ1Q,aAAc99C,EAAMyuD,0BAGxBtyD,KAAK+L,QAAQ,aAAa0X,SAAS,CACjCjd,GAAI6C,EACJ5C,GAAI4C,EACJS,MAAOioD,EACPrrD,QAASurD,GAAiBD,EAAe3iD,QAAQ,aAAe,IAElErP,KAAK+L,QAAQ,eAAe0X,SAAS,CACnCjd,EAAGL,EAAQ,EACXM,GAAI4C,EACJS,MAAOioD,EACPrrD,QAASurD,GAAiBD,EAAe3iD,QAAQ,eAAiB,IAEpErP,KAAK+L,QAAQ,cAAc0X,SAAS,CAClCjd,EAAGL,EAAQkD,EACX5C,GAAI4C,EACJS,MAAOioD,EACPrrD,QAASurD,GAAiBD,EAAe3iD,QAAQ,cAAgB,IAEnErP,KAAK+L,QAAQ,gBAAgB0X,SAAS,CACpCjd,GAAI6C,EACJ5C,EAAGL,EAAS,EACZ0D,MAAOioD,EACPrrD,QAASurD,GAAiBD,EAAe3iD,QAAQ,gBAAkB,IAErErP,KAAK+L,QAAQ,iBAAiB0X,SAAS,CACrCjd,EAAGL,EAAQkD,EACX5C,EAAGL,EAAS,EACZ0D,MAAOioD,EACPrrD,QAASurD,GAAiBD,EAAe3iD,QAAQ,iBAAmB,IAEtErP,KAAK+L,QAAQ,gBAAgB0X,SAAS,CACpCjd,GAAI6C,EACJ5C,EAAGL,EAASiD,EACZS,MAAOioD,EACPrrD,QAASurD,GAAiBD,EAAe3iD,QAAQ,gBAAkB,IAErErP,KAAK+L,QAAQ,kBAAkB0X,SAAS,CACtCjd,EAAGL,EAAQ,EACXM,EAAGL,EAASiD,EACZS,MAAOioD,EACPrrD,QAASurD,GAAiBD,EAAe3iD,QAAQ,kBAAoB,IAEvErP,KAAK+L,QAAQ,iBAAiB0X,SAAS,CACrCjd,EAAGL,EAAQkD,EACX5C,EAAGL,EAASiD,EACZS,MAAOioD,EACPrrD,QAASurD,GAAiBD,EAAe3iD,QAAQ,iBAAmB,IAEtE,IAAIkjD,GAA4BvyD,KAAKiwD,qBAAuB7/C,KAAK2J,IAAIg4C,EAActrD,GACnFzG,KAAK+L,QAAQ,YAAY0X,SAAS,CAChCjd,EAAGL,EAAQ,EACXM,EAAG8rD,EAA2BlvD,EAAOyC,KAAKmjC,MAAM7iC,GAChD0D,MAAOioD,EACPrrD,QAAS1G,KAAKgwD,kBAEhBhwD,KAAK+L,QAAQ,SAAS0X,SAAS,CAC7Btd,MAAOA,EAAQ2D,EAAMtD,EACrBJ,OAAQA,EAAS0D,EAAMrD,EACvBqD,MAAOioD,EACPrrD,QAAS1G,KAAKwyD,gBACdn9C,OAAQrV,KAAKyyD,eACbz5C,YAAahZ,KAAK0yD,oBAClBh6C,KAAM1Y,KAAK2yD,gBAIftgB,EAAY5xC,UAAUmyD,eAAiB,WACrC,OAAO5yD,KAAKouD,eAGd/b,EAAY5xC,UAAUoyD,cAAgB,WACpC,GAAI7yD,KAAKouD,cAAe,CACtBpuD,KAAKyxD,gBAEL,IAAIpB,EAAcrwD,KAAK+L,QAAQ,IAAM/L,KAAKkwD,eAEtCG,GACFA,EAAY9pC,aAKlB8rB,EAAY5xC,UAAU2K,QAAU,WAU9B,OATIpL,KAAK+E,YAAc/E,KAAK6vD,gBAC1B7vD,KAAK+E,WAAWC,QAAQ2B,MAAM+oD,OAAS,IAGzC3gB,EAAQtuB,MAAMhgB,UAAU2K,QAAQlJ,KAAKlC,MACrCA,KAAK6uD,SAEL7uD,KAAKyxD,gBAEEzxD,MAGTqyC,EAAY5xC,UAAU+L,SAAW,WAC/B,OAAOjJ,EAAO+B,KAAK7E,UAAU+L,SAAStK,KAAKlC,OAGtCqyC,EA1mBS,CA2mBhBtD,EAAQtuB,OAEVphB,EAAQgzC,YAAcA,EAkBtBA,EAAY5xC,UAAUipB,UAAY,cAElC8K,EAASzW,cAAcs0B,GAEvB7uC,EAAUyE,QAAQC,gBAAgBmqC,EAAa,iBAAkB8b,GApBjE,SAAyBl8C,GAavB,OAZMA,aAAejP,OACnBK,EAAOyC,KAAKkB,KAAK,2CAGfiL,aAAejP,OACjBiP,EAAI+D,SAAQ,SAAUgM,IACiB,IAAjCmsC,EAAc9+C,QAAQ2S,IACxB3e,EAAOyC,KAAKkB,KAAK,wBAA0Bgb,EAAO,0BAA4BmsC,EAAcp8C,KAAK,UAKhGE,GAAO,MAQhBzO,EAAUyE,QAAQC,gBAAgBmqC,EAAa,iBAAiB,GAChE7uC,EAAUyE,QAAQC,gBAAgBmqC,EAAa,aAAc,GAAI9pC,EAAa+B,sBAC9E9G,EAAUyE,QAAQC,gBAAgBmqC,EAAa,iBAAiB,GAChE7uC,EAAUyE,QAAQC,gBAAgBmqC,EAAa,gBAAiB,IAChE7uC,EAAUyE,QAAQC,gBAAgBmqC,EAAa,qBAAsB,GAAI9pC,EAAa+B,sBACtF9G,EAAUyE,QAAQC,gBAAgBmqC,EAAa,iBAAiB,GAChE7uC,EAAUyE,QAAQC,gBAAgBmqC,EAAa,eAAgB,oBAC/D7uC,EAAUyE,QAAQC,gBAAgBmqC,EAAa,oBAAqB,EAAG9pC,EAAa+B,sBACpF9G,EAAUyE,QAAQC,gBAAgBmqC,EAAa,aAAc,SAC7D7uC,EAAUyE,QAAQC,gBAAgBmqC,EAAa,qBAAsB,EAAG9pC,EAAa+B,sBACrF9G,EAAUyE,QAAQC,gBAAgBmqC,EAAa,eAAgB,oBAC/D7uC,EAAUyE,QAAQC,gBAAgBmqC,EAAa,oBAAqB,EAAG9pC,EAAa+B,sBACpF9G,EAAUyE,QAAQC,gBAAgBmqC,EAAa,cAC/C7uC,EAAUyE,QAAQC,gBAAgBmqC,EAAa,aAAa,GAC5D7uC,EAAUyE,QAAQC,gBAAgBmqC,EAAa,mBAAmB,GAClE7uC,EAAUyE,QAAQC,gBAAgBmqC,EAAa,gBAAgB,GAC/D7uC,EAAUyE,QAAQC,gBAAgBmqC,EAAa,UAAW,EAAG9pC,EAAa+B,sBAC1E9G,EAAUyE,QAAQC,gBAAgBmqC,EAAa,QAC/C7uC,EAAUyE,QAAQC,gBAAgBmqC,EAAa,gBAC/C7uC,EAAUyE,QAAQ+U,WAAWq1B,EAAa,CACxCygB,YAAa,gBACbC,oBAAqB,qBACrBC,gBAAiB,mBAEnB3vD,EAAO8E,WAAWC,WAAWiqC,sCChwB7B,IACM3vC,EADFC,EAAY3C,MAAQA,KAAK2C,YACvBD,EAAiB,SAAuBE,EAAGC,GAW7C,OAVAH,EAAiBvD,OAAO2D,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUJ,EAAGC,GACjCD,EAAEG,UAAYF,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAII,KAAKJ,EACRA,EAAET,eAAea,KAAIL,EAAEK,GAAKJ,EAAEI,KAI/BP,EAAeE,EAAGC,IAGpB,SAAUD,EAAGC,GAGlB,SAASK,IACPlD,KAAKmD,YAAcP,EAHrBF,EAAeE,EAAGC,GAMlBD,EAAEnC,UAAkB,OAANoC,EAAa1D,OAAOiE,OAAOP,IAAMK,EAAGzC,UAAYoC,EAAEpC,UAAW,IAAIyC,KAInF/D,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAAI+D,EAAS,EAAQ,MAEjBG,EAAY,EAAQ,MAEpBkd,EAAU,EAAQ,MAElBnhB,EAAW,EAAQ,MAEnBgJ,EAAe,EAAQ,MAEvBisB,EAAW,EAAQ,MAEnB8d,EAAQ,SAAU3uC,GAGpB,SAAS2uC,IACP,OAAkB,OAAX3uC,GAAmBA,EAAOgH,MAAM3K,KAAM4K,YAAc5K,KA2B7D,OA9BA2C,EAAU2vC,EAAO3uC,GAMjB2uC,EAAM7xC,UAAU6+C,WAAa,SAAU73C,GACrCA,EAAQmH,YACRnH,EAAQ0L,IAAI,EAAG,EAAGnT,KAAK+zC,SAAU,EAAGx0C,EAASoJ,MAAMmO,SAAS9W,KAAK2f,SAAU3f,KAAKu/C,aAChF93C,EAAQsN,OAAO,EAAG,GAClBtN,EAAQmM,YACRnM,EAAQ8J,gBAAgBvR,OAG1BsyC,EAAM7xC,UAAU6F,SAAW,WACzB,OAAuB,EAAhBtG,KAAK+zC,UAGdzB,EAAM7xC,UAAU8F,UAAY,WAC1B,OAAuB,EAAhBvG,KAAK+zC,UAGdzB,EAAM7xC,UAAUsG,SAAW,SAAUZ,GACnCnG,KAAK+zC,OAAO5tC,EAAQ,IAGtBmsC,EAAM7xC,UAAUwG,UAAY,SAAUb,GACpCpG,KAAK+zC,OAAO3tC,EAAS,IAGhBksC,EA/BG,CAgCV5xB,EAAQuP,OAEV5wB,EAAQizC,MAAQA,EAChBA,EAAM7xC,UAAUipB,UAAY,QAC5B4oB,EAAM7xC,UAAUiyB,WAAY,EAC5B4f,EAAM7xC,UAAU6tB,oBAAsB,CAAC,UAEvCkG,EAASzW,cAAcu0B,GAEvB9uC,EAAUyE,QAAQC,gBAAgBoqC,EAAO,SAAU,EAAG/pC,EAAa+B,sBACnE9G,EAAUyE,QAAQC,gBAAgBoqC,EAAO,QAAS,EAAG/pC,EAAa+B,sBAClE9G,EAAUyE,QAAQC,gBAAgBoqC,EAAO,aAAa,GACtD9uC,EAAUyE,QAAQ+U,WAAWs1B,EAAO,CAClC1yB,SAAU,QACVqzC,YAAa,WACbC,YAAa,aAEf7vD,EAAO8E,WAAWC,WAAWkqC,yBCzF7B,IAAiD6gB,EAAAA,EAExC,SAAUC,EAAgCC,GACjD,OAEE,SAAUC,GAOR,IAAIC,EAAmB,GAQvB,SAAS,EAAoBC,GAO3B,GAAID,EAAiBC,GAEnB,OAAOD,EAAiBC,GAAUn0D,QASpC,IAAIggD,EAASkU,EAAiBC,GAAY,CAExC1xD,EAAG0xD,EAGHja,GAAG,EAGHl6C,QAAS,IA2BX,OAhBAi0D,EAAQE,GAAUtxD,KAAKm9C,EAAOhgD,QAASggD,EAAQA,EAAOhgD,QAAS,GAQ/DggD,EAAO9F,GAAI,EAQJ8F,EAAOhgD,QAkLhB,OArKA,EAAoBsI,EAAI2rD,EAQxB,EAAoBh3B,EAAIi3B,EAQxB,EAAoB3wD,EAAI,SAAUvD,EAAS2iB,EAAMzF,GAE1C,EAAoB8W,EAAEh0B,EAAS2iB,IAElC7iB,OAAOC,eAAeC,EAAS2iB,EAAM,CACnCyxC,YAAY,EACZ3nD,IAAKyQ,KAeX,EAAoByV,EAAI,SAAU3yB,GAEV,oBAAXq0D,QAA0BA,OAAOC,aAE1Cx0D,OAAOC,eAAeC,EAASq0D,OAAOC,YAAa,CACjDr0D,MAAO,WAOXH,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,KAwBX,EAAoBumB,EAAI,SAAUvmB,EAAOs0D,GAKvC,GAHW,EAAPA,IAAUt0D,EAAQ,EAAoBA,IAG/B,EAAPs0D,EAAU,OAAOt0D,EAGrB,GAAW,EAAPs0D,GAA6B,iBAAVt0D,GAAsBA,GAASA,EAAMu0D,WAAY,OAAOv0D,EAG/E,IAAIw0D,EAAK30D,OAAOiE,OAAO,MAavB,GAVA,EAAoB4uB,EAAE8hC,GAItB30D,OAAOC,eAAe00D,EAAI,UAAW,CACnCL,YAAY,EACZn0D,MAAOA,IAIE,EAAPs0D,GAA4B,iBAATt0D,EAAmB,IAAK,IAAI0C,KAAO1C,EACxD,EAAoBsD,EAAEkxD,EAAI9xD,EAAK,SAAUA,GACvC,OAAO1C,EAAM0C,IACbusD,KAAK,KAAMvsD,IAIf,OAAO8xD,GAWT,EAAoB/yD,EAAI,SAAUs+C,GAEhC,IAAI9iC,EAAS8iC,GAAUA,EAAOwU,WAE9B,WACE,OAAOxU,EAAgB,SAGzB,WACE,OAAOA,GAQT,OAJA,EAAoBz8C,EAAE2Z,EAAQ,IAAKA,GAI5BA,GAWT,EAAoB8W,EAAI,SAAU0gC,EAAQ/hD,GACxC,OAAO7S,OAAOsB,UAAU2B,eAAeF,KAAK6xD,EAAQ/hD,IAUtD,EAAoB/O,EAAI,GAUjB,EAAoB,EAAoBs5B,EAAI,GAtPrD,CA4PC,CAID,SAAU8iB,EAAQhgD,GAChBggD,EAAOhgD,QAAU+zD,GAMnB,SAAU/T,EAAQhgD,EAAS,GACzBggD,EAAOhgD,QAAU,EAAoB,IAMvC,SAAUggD,EAAQhgD,GAChBggD,EAAOhgD,QAAUg0D,GAMnB,SAAUhU,EAAQ2U,EAAqB,GACrC,aAEA,EAAoBhiC,EAAEgiC,GAGtB,IAAIC,EAAwD,EAAoB,GAMhF,SAASC,EAAc/nD,GACrB,IAAIgoD,EAAchoD,EAAKxG,YAAcwG,EAAKpH,WAC1CovD,GAAeA,EAAY9sD,YAK7B,IAAI+sD,EAAc,CAChBpyD,KAAK,EACL2E,OAAO,EACP0tD,KAAK,EACLC,cAAc,GAEZC,EAAmB,mBAEvB,SAASC,EAAeC,EAAcC,EAAOC,EAAUC,QACvC,IAAVF,IACFA,EAAQ,SAGO,IAAbC,IACFA,EAAW,IAGb,IAAIE,EAAWJ,EAAaK,WACxBC,EAAe,GACfC,GAAa,EAEjB,IAAK,IAAIhzD,KAAO2yD,EACd,IAAIP,EAAYpyD,GAAhB,CAIA,IAAIizD,EAA8B,OAApBjzD,EAAI6T,MAAM,EAAG,GACvBq/C,EAAcP,EAAS3yD,KAAS0yD,EAAM1yD,GAE1C,GAAIizD,GAAWC,EAAa,CAC1B,IAAIt/B,EAAY5zB,EAAIioC,OAAO,GAAGtrB,cAEC,YAA3BiX,EAAUqU,OAAO,EAAG,KACtBrU,EAAY,UAAYA,EAAUqU,OAAO,EAAG,GAAGjB,cAAgBpT,EAAUqU,OAAO,IAGlF4qB,EAASlvC,IAAIiQ,EAAY2+B,EAAkBI,EAAS3yD,KAGtC0yD,EAAMtyD,eAAeJ,IAGnC6yD,EAASliD,QAAQ3Q,OAAKG,GAI1B,IAAK,IAAIgzD,KAAQT,EACf,IAAIN,EAAYe,GAAhB,CAIA,IAAIC,EAAgC,OAArBD,EAAKt/C,MAAM,EAAG,GAEzBw/C,EAAQV,EAASQ,KAAUT,EAAMS,GAErC,GAAIC,GAAYC,EAAO,CACrB,IAAIC,EAAaH,EAAKlrB,OAAO,GAAGtrB,cAEA,YAA5B22C,EAAWrrB,OAAO,EAAG,KACvBqrB,EAAa,UAAYA,EAAWrrB,OAAO,EAAG,GAAGjB,cAAgBssB,EAAWrrB,OAAO,IAGjFyqB,EAAMS,KACRN,EAASlvC,IAAI2vC,EAAaf,GAC1BM,EAAS5wD,GAAGqxD,EAAaf,EAAkBG,EAAMS,MAIhDC,IAAaV,EAAMS,KAAUR,EAASQ,IAASP,GAAaF,EAAMS,KAAUN,EAASp4C,QAAQ04C,MAChGH,GAAa,EACbD,EAAaI,GAAQT,EAAMS,IAI3BH,IACFH,EAASpxC,SAASsxC,GAClBb,EAAcW,IAYlB,SAASU,EAAe9oD,GACtB,IAAI+oD,EAAS,GAIb,OAHAr2D,OAAOs2D,KAAKhpD,GAAKuJ,SAAQ,SAAU4f,GACjC4/B,EAAO,KAAO5/B,GAAanpB,EAAImpB,MAE1B4/B,EAmBT,SAASE,EAAcb,GACrB,OAAKA,EAIDA,EAASc,SAAwB,WAC5Bd,EAASpG,UAGgB,IAA9BoG,EAASe,UAAUj1D,OACd,KAGF+0D,EAAcb,EAASe,UAAU,IAX/B,KAcX,SAASC,EAAWC,EAAQC,GAC1B,IAAIC,GAAa,EAKbvwD,EAAWqwD,EAAOG,iBAAiBxwD,UAAY,GAC/Cyc,EAAQ,GACZzc,EAASuQ,SAAQ,SAAU8/C,GACzB,IAAIC,EAAYL,EAAcI,EAAOI,mBAEjCH,GACF7zC,EAAMhhB,KAAK60D,GAGb,IAAI1B,EAAMyB,EAAOzB,IACb6B,EAAoBJ,EAAOI,kBAE/B,GAAI7B,GAAOA,EAAI8B,SAAWD,IAAsBH,EAAW,CACzD,IAAI/zC,EAAOqyC,GAAOA,EAAI8B,QAAQx3C,cAC9BssB,QAAQ7gC,MAAM,8CAAiD4X,EAAO,+HAG1EE,EAAMlM,SAAQ,SAAU+/C,EAAWlxD,GAC7BkxD,EAAU5uC,cAAgBtiB,IAC5BkxD,EAAUnxD,UAAUC,GACpBmxD,GAAa,MAIbA,GACF9B,EAAc6B,GAKlB,SAASK,IAeP,OAdAA,EAAWj3D,OAAOk3D,QAAU,SAAUt7C,GACpC,IAAK,IAAIjZ,EAAI,EAAGA,EAAI8I,UAAUjK,OAAQmB,IAAK,CACzC,IAAIusC,EAASzjC,UAAU9I,GAEvB,IAAK,IAAIE,KAAOqsC,EACVlvC,OAAOsB,UAAU2B,eAAeF,KAAKmsC,EAAQrsC,KAC/C+Y,EAAO/Y,GAAOqsC,EAAOrsC,IAK3B,OAAO+Y,GAGFq7C,EAASzrD,MAAM3K,KAAM4K,WAK9B,IAAImrB,EAnM4E,EAAoBh1B,EAAEkzD,GAmM7BngD,EAAEuI,UAAU,UAAW,CAC9Fi6C,OAAQ,SAAgB7/B,GACtB,OAAOA,EAAc,MAAOz2B,KAAKu2D,OAAOC,UAE1CC,MAAO,CACL7yD,OAAQ,CACNyhB,QAAS,SAAiBpT,GACxBjS,KAAK02D,eAEPC,MAAM,IAGVjC,MAAO,CACL9wD,OAAQ,CACNkX,KAAM3b,OACNq3D,QAAS,WACP,MAAO,KAGXI,gBAAiB,CACf97C,KAAM+7C,UAGVC,QAAS,WACP92D,KAAK80D,WAAa,IAAIv5C,OAAO5S,MAAMotB,MAAM,CACvC5vB,MAAOnG,KAAK4D,OAAOuC,MACnBC,OAAQpG,KAAK4D,OAAOwC,OAEpB6nB,UAAW7N,SAASqW,cAAc,UAGtCsgC,QAAS,WACP/2D,KAAKg3D,IAAIh+B,UAAY,GAErBh5B,KAAK80D,WAAW7mC,UAAUjuB,KAAKg3D,KAE/Bh3D,KAAK02D,cACL12D,KAAKi3D,oBAEP/P,QAAS,WACPlnD,KAAK02D,cACL12D,KAAK02D,cACLb,EAAW71D,KAAK81D,OAAQ91D,KAAK80D,aAE/BoC,cAAe,WACbl3D,KAAK80D,WAAW1pD,WAElB6R,QAAS,CACPwxC,QAAS,WACP,OAAOzuD,KAAK80D,YAEd/vD,SAAU,WACR,OAAO/E,KAAK80D,YAEd4B,YAAa,WACX,IAAI/B,EAAW30D,KAAK20D,UAAY,GAE5BD,EAAQ0B,EAAS,GAAIp2D,KAAKm3D,OAAQn3D,KAAK4D,OAAQ2xD,EAAev1D,KAAKo3D,aAEvE5C,EAAex0D,KAAM00D,EAAOC,EAAU30D,KAAK42D,iBAC3C52D,KAAK20D,SAAWD,GAElBuC,iBAAkB,gBAQtB,SAASI,IAeP,OAdAA,EAAoBl4D,OAAOk3D,QAAU,SAAUt7C,GAC7C,IAAK,IAAIjZ,EAAI,EAAGA,EAAI8I,UAAUjK,OAAQmB,IAAK,CACzC,IAAIusC,EAASzjC,UAAU9I,GAEvB,IAAK,IAAIE,KAAOqsC,EACVlvC,OAAOsB,UAAU2B,eAAeF,KAAKmsC,EAAQrsC,KAC/C+Y,EAAO/Y,GAAOqsC,EAAOrsC,IAK3B,OAAO+Y,GAGFs8C,EAAkB1sD,MAAM3K,KAAM4K,WAGvC,IACI0sD,EAAa,CACf72C,OAAO,EACPI,OAAO,EACPnD,WAAW,EACXg0B,OAAO,GA+Ea,oBAAXn2B,QAA2BA,OAAO5S,OAC3C,EAAoB,GAGtB,IACIyT,EAAa,CAAC,CAChB4F,KAAM,QACN3F,UAAW0Z,IACVvO,OAJe,CAAC,QAAS,YAAa,QAAS,QAAS,OAAQ,SAAU,UAAW,QAAS,OAAQ,SAAU,QAAS,OAAQ,WAAY,OAAQ,OAAQ,MAAO,MAAO,OAAQ,iBAAkB,QAAS,QAAS,eAIpM+iB,KAAI,SAAUvoB,GAClC,MAAO,CACLA,KAAMA,EACN3F,WAtF+Bk7C,EAsFVv1C,GAnFhBw1C,EAAO,IAAwB,YAAI,EAAMA,EAAKlB,OAAS,SAAgB7/B,GAI5E,OAFkB6gC,EAAWC,GAGpB9gC,EAAc,WAAYz2B,KAAKu2D,OAAOC,SAIxC,MACNgB,EAAKf,MAAQ,CACd7yD,OAAQ,CACNyhB,QAAS,SAAiBpT,GACxBjS,KAAK02D,eAEPC,MAAM,IAEPa,EAAK9C,MAAQ,CACd9wD,OAAQ,CACNkX,KAAM3b,OACNq3D,QAAS,WACP,MAAO,KAGXI,gBAAiB,CACf97C,KAAM+7C,UAEPW,EAAKV,QAAU,WAChB92D,KAAKy3D,aACJD,EAAKT,QAAU,YAxNlB,SAAS7R,EAAG2P,GACV,OAAIA,EAASC,WACJD,EAGLA,EAAS6C,QACJxS,EAAG2P,EAAS6C,SAGd,IAGFxS,CA6MmCllD,KA7MvB03D,SA8MuB5C,WACxBzpD,IAAIrL,KAAK80D,YACzBZ,EAAcl0D,KAAK80D,aAClB0C,EAAKtQ,QAAU,WAChBlnD,KAAK02D,cACLb,EAAW71D,KAAK81D,OAAQ91D,KAAK80D,aAC5B0C,EAAKG,UAAY,WAClBzD,EAAcl0D,KAAK80D,YAEnB90D,KAAK80D,WAAW1pD,UAEhBpL,KAAK80D,WAAWnvC,IAtDa,qBAuD5B6xC,EAAKv6C,QAAU,CAChBwxC,QAAS,WACP,OAAOzuD,KAAK80D,YAEd/vD,SAAU,WACR,OAAO/E,KAAK80D,YAEd2C,UAAW,WACT,IAAIl3C,EAAYhF,OAAO5S,MAAM4uD,GAExBh3C,GAKLvgB,KAAK80D,WAAa,IAAIv0C,EACtBvgB,KAAK80D,WAAW8C,aAAe53D,KAC/BA,KAAK02D,eANHzrB,QAAQ7gC,MAAM,sCAAwCmtD,IAQ1Db,YAAa,WACX,IAAI/B,EAAW30D,KAAK20D,UAAY,GAC5BD,EAAQ2C,EAAkB,GAAIr3D,KAAKm3D,OAAQn3D,KAAK4D,OAAQ2xD,EAAev1D,KAAKo3D,aAChF5C,EAAex0D,KAAM00D,EAAOC,EAAU30D,KAAK42D,iBAC3C52D,KAAK20D,SAAWD,IAEjB8C,IAvEW,IAAmBD,EAC7BC,MAwFFK,EAAW,CACbC,QAAS,SAAiBC,EAAKC,GAC7B,IAAIC,EAnSc,IAqSdD,GAAWA,EAAQE,SACrBD,EAAcD,EAAQE,QAGxB97C,EAAWpG,SAAQ,SAAU23C,GAC3BoK,EAAI17C,UAAU,GAAK47C,EAActK,EAAE3rC,KAAM2rC,EAAEtxC,gBAMvC23C,EAA6B,QAAI6D,EAErB,oBAAXt8C,QAA0BA,OAAOw8C,KAC1Cx8C,OAAOw8C,IAAII,IAAIN,MAOrB,SAvrB+DxY,EAAOhgD,QAAU8zD,EAAQ,EAAQ,MAAQ,EAAQ,0CCClH,SAASiF,EAAgBC,GACvB,OAAOA,GAAoB,iBAAPA,GAAmB,YAAaA,EAAKA,EAAY,QAAIA,EAG3E,IAAIC,EAAQF,EAAgB,EAAQ,OAEhCG,EAAWH,EAAgB,EAAQ,OAEnCL,EAAMK,EAAgB,EAAQ,OAE9BI,EAA4B,mBAAX9E,QAAoD,iBAApBA,OAAO+E,SAAwB,SAAUhsD,GAC5F,cAAcA,GACZ,SAAUA,GACZ,OAAOA,GAAyB,mBAAXinD,QAAyBjnD,EAAItJ,cAAgBuwD,QAAUjnD,IAAQinD,OAAOjzD,UAAY,gBAAkBgM,GAGvHisD,EAAiB,SAAwB7D,EAAU8D,GACrD,KAAM9D,aAAoB8D,GACxB,MAAM,IAAIC,UAAU,sCAIpBC,EAAc,WAChB,SAASC,EAAiB/9C,EAAQ25C,GAChC,IAAK,IAAI5yD,EAAI,EAAGA,EAAI4yD,EAAM/zD,OAAQmB,IAAK,CACrC,IAAIi3D,EAAarE,EAAM5yD,GACvBi3D,EAAWtF,WAAasF,EAAWtF,aAAc,EACjDsF,EAAW5qB,cAAe,EACtB,UAAW4qB,IAAYA,EAAWC,UAAW,GACjD75D,OAAOC,eAAe2b,EAAQg+C,EAAW/2D,IAAK+2D,IAIlD,OAAO,SAAUJ,EAAaM,EAAYC,GAGxC,OAFID,GAAYH,EAAiBH,EAAYl4D,UAAWw4D,GACpDC,GAAaJ,EAAiBH,EAAaO,GACxCP,GAdO,GAkBdv5D,EAAiB,SAAwBqN,EAAKzK,EAAK1C,GAYrD,OAXI0C,KAAOyK,EACTtN,OAAOC,eAAeqN,EAAKzK,EAAK,CAC9B1C,MAAOA,EACPm0D,YAAY,EACZtlB,cAAc,EACd6qB,UAAU,IAGZvsD,EAAIzK,GAAO1C,EAGNmN,GAGL2pD,EAAWj3D,OAAOk3D,QAAU,SAAUt7C,GACxC,IAAK,IAAIjZ,EAAI,EAAGA,EAAI8I,UAAUjK,OAAQmB,IAAK,CACzC,IAAIusC,EAASzjC,UAAU9I,GAEvB,IAAK,IAAIE,KAAOqsC,EACVlvC,OAAOsB,UAAU2B,eAAeF,KAAKmsC,EAAQrsC,KAC/C+Y,EAAO/Y,GAAOqsC,EAAOrsC,IAK3B,OAAO+Y,GAGLo+C,EAAW,SAAkBC,EAAUC,GACzC,GAA0B,mBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAIT,UAAU,kEAAoES,GAG1FD,EAAS34D,UAAYtB,OAAOiE,OAAOi2D,GAAcA,EAAW54D,UAAW,CACrE0C,YAAa,CACX7D,MAAO85D,EACP3F,YAAY,EACZuF,UAAU,EACV7qB,cAAc,KAGdkrB,IAAYl6D,OAAO2D,eAAiB3D,OAAO2D,eAAes2D,EAAUC,GAAcD,EAASr2D,UAAYs2D,IAGzGC,EAA0B,SAAiC7sD,EAAKgpD,GAClE,IAAI16C,EAAS,GAEb,IAAK,IAAIjZ,KAAK2K,EACRgpD,EAAKpmD,QAAQvN,IAAM,GAClB3C,OAAOsB,UAAU2B,eAAeF,KAAKuK,EAAK3K,KAC/CiZ,EAAOjZ,GAAK2K,EAAI3K,IAGlB,OAAOiZ,GAGLw+C,EAA4B,SAAmCl6C,EAAMnd,GACvE,IAAKmd,EACH,MAAM,IAAIm6C,eAAe,6DAG3B,OAAOt3D,GAAyB,iBAATA,GAAqC,mBAATA,EAA8Bmd,EAAPnd,GAGxEu3D,EA2BK,SAAU9sD,EAAK7K,GACpB,GAAIkB,MAAM02D,QAAQ/sD,GAChB,OAAOA,EACF,GAAI+mD,OAAO+E,YAAYt5D,OAAOwN,GACnC,OA9BJ,SAAuBA,EAAK7K,GAC1B,IAAI63D,EAAO,GACPC,GAAK,EACLC,GAAK,EACLC,OAAK33D,EAET,IACE,IAAK,IAAiC43D,EAA7BC,EAAKrtD,EAAI+mD,OAAO+E,cAAmBmB,GAAMG,EAAKC,EAAGpmB,QAAQqmB,QAChEN,EAAKz4D,KAAK64D,EAAGz6D,QAETwC,GAAK63D,EAAKh5D,SAAWmB,GAH8C83D,GAAK,IAK9E,MAAOzvD,GACP0vD,GAAK,EACLC,EAAK3vD,EACL,QACA,KACOyvD,GAAMI,EAAW,QAAGA,EAAW,SACpC,QACA,GAAIH,EAAI,MAAMC,GAIlB,OAAOH,EAOEO,CAAcvtD,EAAK7K,GAE1B,MAAM,IAAI82D,UAAU,yDAKtBuB,EAAqB,gCAErBC,EAAoB,SAA2B3jC,EAAehxB,GAChE,OAAOgxB,EAAc,+BAAgC,CACnDi+B,MAAO,CACLr4C,UAAW,WACT,OAAOi8C,EAAM7hC,cAAc,MAAO,KAAMhxB,QAM5C40D,EAAe,SAAUC,GAG3B,SAASD,EAAa3F,GACpBgE,EAAe14D,KAAMq6D,GAMrB,IAAIx2D,EAAQ01D,EAA0Bv5D,MAAOq6D,EAAat3D,WAAa5D,OAAOo7D,eAAeF,IAAen4D,KAAKlC,KAAM00D,IAEvH7wD,EAAM22D,oBAAsB9F,EAAMr4C,UAMlC,IAAIo+C,EAAoB52D,EAAM42D,kBAC1Bp7C,EAAOxb,EAMX,OAJAA,EAAM42D,kBAAoB,SAAUC,EAASr+C,EAAWs+C,GACtDF,EAAkBC,EAASr7C,EAAMhD,EAAWs+C,IAGvC92D,EA6ET,OArGAs1D,EAASkB,EAAcC,GA2BvBzB,EAAYwB,EAAc,CAAC,CACzBr4D,IAAK,4BACL1C,MAAO,SAAmCs7D,GACxC,IAAIv+C,EAAYu+C,EAAUv+C,UACtBq4C,EAAQ4E,EAAwBsB,EAAW,CAAC,cAE5C56D,KAAKw6D,sBAAwBn+C,GAC/Brc,KAAK66D,mBAAmB76D,KAAK00D,MAAMr4C,UAAWA,GAShDld,OAAOk3D,OAAOr2D,KAAK86D,YAAYC,MAAOrG,KAEvC,CACD1yD,IAAK,uBACL1C,MAAO,WACLU,KAAK86D,YAAYE,aAWlB,CACDh5D,IAAK,oBACL1C,MAAO,SAA2B27D,EAAeC,GAC/C,IAAIC,EAEAC,EAAwBF,EAAiBxG,MACzCr4C,EAAY++C,EAAsB/+C,UAClCpY,EAAKm3D,EAAsBn3D,GAC3BywD,EAAQ4E,EAAwB8B,EAAuB,CAAC,YAAa,OAEzEF,EAAiBJ,YAAc,IAAI/C,EAAI3B,EAAS,CAC9C9sB,GAAI2xB,EACJ55C,KAAMqzC,GACL9wD,EAAOy3D,mBAAoB,CAC5B/E,OAAQ,SAAgB7/B,GACtB,OAAOA,EAAc0jC,EAAoB,CACvCzF,MAAO10D,KAAK+6D,MACZ92D,GAAIA,GACH,CAACm2D,EAAkB3jC,EAAez2B,KAAKyF,aAE5C2W,YAAa++C,EAAc,GAAI/7D,EAAe+7D,EAAahB,EAAoB99C,GAAYjd,EAAe+7D,EAAa,+BAAgCG,GAAeH,QAGzK,CACDn5D,IAAK,qBACL1C,MAAO,SAA4Bq7D,EAAeY,GAChDv7D,KAAKw6D,oBAAsBe,EAK3Bv7D,KAAK86D,YAAYnF,SAASv5C,WAAW+9C,GAAsBoB,EAC3Dv7D,KAAK86D,YAAYU,iBAElB,CACDx5D,IAAK,SACL1C,MAAO,WACL,OAAOg5D,EAAM7hC,cAAc,MAAO,CAChCglC,IAAKz7D,KAAKy6D,wBAITJ,EAtGU,CAuGjB/B,EAAMoD,WAgDJJ,EAAe,CACjB5G,MAAO,CAAC,YAAa,eACrB4B,OAAQ,SAAgB7/B,GACtB,OAAOA,EAAc,MAAO,CAC1BglC,IAAK,WAGTx+C,QAAS,CACP0+C,oBAAqB,SAA6Bt/C,GAChD,IAAIu/C,EAAS57D,KAET07D,EAzDe,SAA4BA,GACnD,IAAIG,EAAQC,EAEZ,OAAOA,EAAQD,EAAS,SAAUvB,GAGhC,SAASyB,EAAWrH,GAClBgE,EAAe14D,KAAM+7D,GAOrB,IAAIl4D,EAAQ01D,EAA0Bv5D,MAAO+7D,EAAWh5D,WAAa5D,OAAOo7D,eAAewB,IAAa75D,KAAKlC,KAAM00D,IAGnH,OADA7wD,EAAM42B,MAAQ27B,EAAS,GAAI1B,GACpB7wD,EAyBT,OAtCAs1D,EAAS4C,EAAYzB,GAgBrBzB,EAAYkD,EAAY,CAAC,CACvB/5D,IAAK,kBACL1C,MAAO,SAAyBmG,GAC9B,MAAO,CACL6wD,OAAQ,SAAgB7/B,GACtB,OAAOA,EAAc,MAAOhxB,OAIjC,CACDzD,IAAK,SACL1C,MAAO,WACL,IAAI08D,EAASh8D,KAAKy6B,MACdh1B,EAAWu2D,EAAOv2D,SAElBw2D,GADWD,EAAO,IACX1C,EAAwB0C,EAAQ,CAAC,WAAY,MACpDE,EAAkBl8D,KAAKm8D,gBAAgB12D,GAC3C,OAAO6yD,EAAM7hC,cAAcilC,EAAWO,EAAMx2D,GAAY6yD,EAAM7hC,cAAc4jC,EAAc,CACxFh+C,UAAW6/C,SAIVH,EAvCe,CAwCtBzD,EAAMoD,WAAYG,EAAOO,YAAc,cAAgBV,EAAUU,aAAeV,EAAU15C,MAAQ,aAAc85C,EAc9FO,CAAmBhgD,GAC/B5W,OAAmCtD,IAAxBnC,KAAKu2D,OAAOC,QAAwB,CACjD/wD,SAAUzF,KAAKu2D,OAAOC,SACpB,GACJ+B,EAASjC,OAAOgC,EAAM7hC,cAAcilC,EAAWtF,EAAS,GAAIp2D,KAAKs8D,OAAOC,YAAav8D,KAAKm3D,OAAQn3D,KAAKo3D,WAAY3xD,EAAU,CAC3Hg2D,IAAK,SAAajE,GAChB,OAAOoE,EAAOY,kBAAoBhF,MAEjCx3D,KAAKy8D,MAAMC,SAGpB3F,QAAS,WACP/2D,KAAK27D,oBAAoB37D,KAAKs8D,OAAOjgD,YAEvC66C,cAAe,WACbqB,EAASoE,uBAAuB38D,KAAKy8D,MAAMC,QAE7CxV,QAAS,gBAKqB/kD,IAAxBnC,KAAKu2D,OAAOC,QACdx2D,KAAKw8D,kBAAkBI,SAAS,CAC9Bn3D,SAAUzF,KAAKu2D,OAAOC,UAGxBx2D,KAAKw8D,kBAAkBI,SAAS,CAC9Bn3D,SAAU,QAIhBo3D,cAAc,EACdpG,MAAO,CACLU,OAAQ,CACN9xC,QAAS,WACPrlB,KAAKw8D,kBAAkBI,SAASxG,EAAS,GAAIp2D,KAAKm3D,UAEpDR,MAAM,GAER,mBAAoB,CAClBtxC,QAAS,SAAiBy3C,GACxB98D,KAAK27D,oBAAoBmB,KAG7B1F,WAAY,CACV/xC,QAAS,WACPrlB,KAAKw8D,kBAAkBI,SAASxG,EAAS,GAAIp2D,KAAKo3D,cAEpDT,MAAM,GAER,qBAAsB,CACpBtxC,QAAS,WACPrlB,KAAKw8D,kBAAkBI,SAASxG,EAAS,GAAIp2D,KAAKs8D,OAAOC,eAE3D5F,MAAM,KAKZ,SAASoG,EAAiB1gD,GACxB,QAA8E,iBAApD,IAAdA,EAA4B,YAAcm8C,EAAQn8C,MAOhE,SAAiCA,GAC/B,OAAOA,EAAU2gD,UAA8C,8BAAlC3gD,EAAU2gD,SAAS19C,WAR2C29C,CAAwB5gD,OAIrF,mBAAdA,GAA4BA,EAAU5b,YAAc4b,EAAU5b,UAAU0C,YAAYmoC,OAASjvB,EAAU5b,UAAU0C,YAAYmoC,MAAM4xB,OAAS7gD,EAAU5b,qBAAqBs3D,IAO7L,SAASoF,EAAe9gD,GACtB,MAAO,CACLD,WAAY,CACVk/C,aAAcA,GAEhB5G,MAAO,CAAC,eACRmI,cAAc,EACdvG,OAAQ,SAAgB7/B,GACtB,OAAOA,EAAc,gBAAiB,CACpCi+B,MAAO,CACLr4C,UAAWA,EACXkgD,YAAav8D,KAAKs8D,OAAOC,aAE3B/sD,MAAOxP,KAAKm3D,OACZlzD,GAAIjE,KAAKo3D,YACRp3D,KAAKu2D,OAAOC,WASrB,IAAI4G,EAAY,CACdtF,QAAS,SAAiBuF,EAAQrF,GAKhC,IAAIsF,EAAkCD,EAAOz5D,OAAO25D,sBAAsBnhD,WAE1EihD,EAAOz5D,OAAO25D,sBAAsBnhD,WAAa,SAAUpW,GACzD,IAAK,IAAIw3D,EAAO5yD,UAAUjK,OAAQiR,EAAO5O,MAAMw6D,EAAO,EAAIA,EAAO,EAAI,GAAIrI,EAAO,EAAGA,EAAOqI,EAAMrI,IAC9FvjD,EAAKujD,EAAO,GAAKvqD,UAAUuqD,GAG7B,IAAIsI,EAAcH,EAAgC3yD,WAAMxI,EAAW,CAAC6D,GAAQwhB,OAAO5V,IAC/E8rD,EAAoBD,EAAct+D,OAAOw+D,QAAQF,GAAaG,QAAO,SAAUC,EAAKrG,GACtF,IAAIsG,EAAQrE,EAAcjC,EAAM,GAC5B7J,EAAImQ,EAAM,GACV1jB,EAAI0jB,EAAM,GAEd,OAAO1H,EAAS,GAAIyH,EAAKz+D,EAAe,GAAIuuD,EAAGoP,EAAiB3iB,GAAK+iB,EAAe/iB,GAAKA,MACxF,IAAMqjB,EACT,OAAOt+D,OAAOk3D,OAAOoH,EAAaC,IAGpCL,EAAO58D,UAAU0C,YAAY+5D,OAAQ,IA8BzC,IAAIt5D,EALK,CACLy3D,mBAAoB,IAMxBh8D,EAAQ,GAAag7D,uBC3drB,IAAI0D,EAAS,EAAQ,MACjBC,EAAwB,EAAQ,MAChCC,EAAa,EAAQ,KACrBC,EAAa,EAAQ,MAGrBC,EAFkB,EAAQ,KAEVC,CAAgB,eAChCj/D,EAAS4+D,EAAO5+D,OAGhBk/D,EAAuE,aAAnDH,EAAW,WAAc,OAAOtzD,UAArB,IAUnCy0C,EAAOhgD,QAAU2+D,EAAwBE,EAAa,SAAUh2C,GAC9D,IAAIo2C,EAAG5c,EAAK11C,EACZ,YAAc7J,IAAP+lB,EAAmB,YAAqB,OAAPA,EAAc,OAEM,iBAAhDw5B,EAXD,SAAUx5B,EAAIlmB,GACzB,IACE,OAAOkmB,EAAGlmB,GACV,MAAOoI,KAQSm0D,CAAOD,EAAIn/D,EAAO+oB,GAAKi2C,IAA8Bzc,EAEnE2c,EAAoBH,EAAWI,GAEH,WAA3BtyD,EAASkyD,EAAWI,KAAmBL,EAAWK,EAAEE,QAAU,YAAcxyD,yBC5BnF,IAAIyyD,EAAuB,eACvBC,EAAQ,EAAQ,MAChBC,EAAc,EAAQ,MAM1Btf,EAAOhgD,QAAU,SAAUu/D,GACzB,OAAOF,GAAM,WACX,QAASC,EAAYC,MANf,cAOGA,MACHH,GAAwBE,EAAYC,GAAa58C,OAAS48C,4BCZpE,IAAIC,EAAc,EAAQ,MACtBC,EAAyB,EAAQ,MACjCx/C,EAAW,EAAQ,MACnBq/C,EAAc,EAAQ,MAEtBv0C,EAAUy0C,EAAY,GAAGz0C,SACzB20C,EAAa,IAAMJ,EAAc,IACjCK,EAAQla,OAAO,IAAMia,EAAaA,EAAa,KAC/CE,EAAQna,OAAOia,EAAaA,EAAa,MAGzCG,EAAe,SAAUC,GAC3B,OAAO,SAAUC,GACf,IAAIC,EAAS//C,EAASw/C,EAAuBM,IAG7C,OAFW,EAAPD,IAAUE,EAASj1C,EAAQi1C,EAAQL,EAAO,KACnC,EAAPG,IAAUE,EAASj1C,EAAQi1C,EAAQJ,EAAO,KACvCI,IAIXhgB,EAAOhgD,QAAU,CAGfgC,MAAO69D,EAAa,GAGpB7mD,IAAK6mD,EAAa,GAGlBpU,KAAMoU,EAAa,0BC7BrB,IAGI1/C,EAAO,GAEXA,EALsB,EAAQ,KAEV4+C,CAAgB,gBAGd,IAEtB/e,EAAOhgD,QAA2B,eAAjBigE,OAAO9/C,yBCPxB,IAAIu+C,EAAS,EAAQ,MACjBwB,EAAU,EAAQ,KAElBD,EAASvB,EAAOuB,OAEpBjgB,EAAOhgD,QAAU,SAAUmgE,GACzB,GAA0B,WAAtBD,EAAQC,GAAwB,MAAM5G,UAAU,6CACpD,OAAO0G,EAAOE,sBCNhBngB,EAAOhgD,QAAU,mFCAjB,IAAIogE,EAAI,EAAQ,MACZC,EAAW,YAGXC,EAFyB,EAAQ,KAExBC,CAAuB,WAEhCC,EAAUF,EAAS,WACrB,OAAOD,EAAS1/D,OAEd,GAAG6/D,QAKPJ,EAAE,CAAE1kD,OAAQ,SAAU+kD,OAAO,EAAM99C,KAAM,UAAW+9C,OAAQJ,GAAU,CACpEE,QAASA,EACTzT,UAAWyT,uCChBb,IAAIJ,EAAI,EAAQ,MACZO,EAAa,cAGbL,EAFyB,EAAQ,KAExBC,CAAuB,aAEhCK,EAAYN,EAAS,WACvB,OAAOK,EAAWhgE,OAEhB,GAAGigE,UAKPR,EAAE,CAAE1kD,OAAQ,SAAU+kD,OAAO,EAAM99C,KAAM,YAAa+9C,OAAQJ,GAAU,CACtEM,UAAWA,EACX5T,SAAU4T,kDCZRC,8DAcEC,EAAAA,SAAAA,GACJ,WAAYzL,GAAyB,IAAD,SAClC,cAAMA,IAAN,MAGKj6B,MAAQ,CAAE2lC,OAAO,GAJY,GADhCD,EAAAA,EAAAA,GAAAA,EAAAA,GAMH,kBAsBA,OAtBA,EAEDE,kBAAA,WACE,IAAQC,EAAYtgE,KAAK00D,MAAjB4L,QACO,MAAXA,GAAiBA,IAIrBJ,EAAcK,EAAAA,MAAAA,EAKdvgE,KAAK48D,SAAS,CAAEwD,OAAO,KACvBI,EAAAA,EAAAA,GAAI,6CACL,EAEDlK,OAAA,WACE,IAAQmK,EAAqBzgE,KAAK00D,MAA1B+L,iBACR,OAAkB,MAAdP,GAA2B,qBAExB,QAAC,MAAD,QAAY7jD,UAAW6jD,GAAgBO,KAC/C,EA5BGN,CAAmB7H,EAAAA,WA+BzB,+EClDA,cCEaoI,EAAiB,SAAC/2B,EAAKg3B,IAElCh3B,EAAM21B,OAAO31B,GAAKvf,QAAQ,cAAe,KACjCzpB,OAAS,IACfgpC,EAAMA,EAAI,GAAKA,EAAI,GAAKA,EAAI,GAAKA,EAAI,GAAKA,EAAI,GAAKA,EAAI,IAEzDg3B,EAAMA,GAAO,EAEb,IACErkC,EACAx6B,EAFEkoC,EAAM,IAGV,IAAKloC,EAAI,EAAGA,EAAI,EAAGA,IACjBw6B,EAAIje,SAASsrB,EAAIM,OAAW,EAAJnoC,EAAO,GAAI,IAEnCkoC,IAAQ,MADR1N,EAAIlsB,KAAKgR,MAAMhR,KAAKC,IAAID,KAAKE,IAAI,EAAGgsB,EAAIA,EAAIqkC,GAAM,MAAMrhD,SAAS,MAC/C2qB,OAAO3N,EAAE37B,QAE7B,OAAOqpC,GA8EH42B,EAAiB,SAACtkC,GACtB,IAAIqN,EAAMrN,EAAEhd,SAAS,IACrB,OAAsB,IAAfqqB,EAAIhpC,OAAe,IAAMgpC,EAAMA,GAYlCk3B,EAAW,SAACl3B,GAChB,IAAI39B,EAAS,4CAA4C6S,KAAK8qB,GAC9D,OAAO39B,EACH,CACEgmB,EAAG3T,SAASrS,EAAO,GAAI,IACvBmT,EAAGd,SAASrS,EAAO,GAAI,IACvBnJ,EAAGwb,SAASrS,EAAO,GAAI,KAEzB,MAQO80D,EAAkB,SAACn3B,EAAKo3B,GACnC,IA1BgB1nD,EA0BZ2wB,EAAM62B,EAASl3B,GAEfq3B,EArEW,SAAC3nD,GAChB,IAME29B,EANEhlB,EAAI3Y,EAAM2Y,EACV7S,EAAI9F,EAAM8F,EACVtc,EAAIwW,EAAMxW,EACVyN,EAAMF,KAAKE,IAAI0hB,EAAG7S,EAAGtc,GACvBwN,EAAMD,KAAKC,IAAI2hB,EAAG7S,EAAGtc,GACrBD,EAAI0N,EAAMD,EAEVksB,EAAY,IAARjsB,EAAY,EAAI1N,EAAI0N,EACxB8pC,EAAI9pC,EAAM,IAEZ,OAAQA,GACN,KAAKD,EACH2mC,EAAI,EACJ,MACF,KAAKhlB,EACHglB,EAAI73B,EAAItc,EAAID,GAAKuc,EAAItc,EAAI,EAAI,GAC7Bm0C,GAAK,EAAIp0C,EACT,MACF,KAAKuc,EACH63B,EAAIn0C,EAAImvB,EAAQ,EAAJpvB,EACZo0C,GAAK,EAAIp0C,EACT,MACF,KAAKC,EACHm0C,EAAIhlB,EAAI7S,EAAQ,EAAJvc,EACZo0C,GAAK,EAAIp0C,EAIb,MAAO,CACLo0C,EAAGA,EACHza,EAAGA,EACH6d,EAAGA,GAqCK6mB,CAASj3B,GACbiM,EAAa+qB,EAAI5mB,GAAK,GAAM,IAAO,EAKzC,OAJA4mB,EAAIzkC,GAAKwkC,EACTC,EAAI5mB,GAAKnE,EACTjM,EA/Ge,SAAC3wB,GAChB,IAAI2Y,EAAG7S,EAAGtc,EAAGf,EAAGskD,EAAGnjD,EAAGi+D,EAAGr7C,EACrBmxB,EAAI39B,EAAM29B,EACVza,EAAIljB,EAAMkjB,EACV6d,EAAI/gC,EAAM+gC,EAMd,OAHAn3C,EAAIm3C,GAAK,EAAI7d,GACb2kC,EAAI9mB,GAAK,GAFTgM,EAAQ,EAAJpP,GADJl1C,EAAIsO,KAAKwqC,MAAU,EAAJ5D,KAGEza,GACjB1W,EAAIu0B,GAAK,GAAK,EAAIgM,GAAK7pB,GACfz6B,EAAI,GACV,KAAK,EACFkwB,EAAIooB,EAAKj7B,EAAI0G,EAAKhjB,EAAII,EACvB,MACF,KAAK,EACF+uB,EAAIkvC,EAAK/hD,EAAIi7B,EAAKv3C,EAAII,EACvB,MACF,KAAK,EACF+uB,EAAI/uB,EAAKkc,EAAIi7B,EAAKv3C,EAAIgjB,EACvB,MACF,KAAK,EACFmM,EAAI/uB,EAAKkc,EAAI+hD,EAAKr+D,EAAIu3C,EACvB,MACF,KAAK,EACFpoB,EAAInM,EAAK1G,EAAIlc,EAAKJ,EAAIu3C,EACvB,MACF,KAAK,EACFpoB,EAAIooB,EAAKj7B,EAAIlc,EAAKJ,EAAIq+D,EAG3B,MAAO,CACLlvC,EAAG5hB,KAAKgR,MAAU,IAAJ4Q,GACd7S,EAAG/O,KAAKgR,MAAU,IAAJjC,GACdtc,EAAGuN,KAAKgR,MAAU,IAAJve,IA8EVs+D,CAASH,GACfr3B,EA/BE,IACAi3B,GAHcvnD,EAiCD2wB,GA9BQhY,GACrB4uC,EAAevnD,EAAM8F,GACrByhD,EAAevnD,EAAMxW,IAoCZu+D,EAAQ,SAACC,EAAKhxD,EAAKC,GAC9B,OAAO+wD,GAAOhxD,EAAMA,EAAMgxD,GAAO/wD,EAAMA,EAAM+wD,GA2BlCC,EAAS,SAACvN,GAAD,QACnB,MAAQA,IAGEwN,EAAW,SAACl3D,GAAD,OAAam2D,EAAAA,EAAAA,GAAIn2D,EAAS,MAAO,o8pBCxK1C,SAASm3D,EACtBC,EACAnL,EACAoL,EACAC,EACAC,EACAC,EACAC,EACAC,GAGA,IAqBIC,EArBAhK,EAAmC,mBAAlByJ,EACjBA,EAAczJ,QACdyJ,EAsDJ,GAnDInL,IACF0B,EAAQ1B,OAASA,EACjB0B,EAAQ0J,gBAAkBA,EAC1B1J,EAAQiK,WAAY,GAIlBN,IACF3J,EAAQkK,YAAa,GAInBL,IACF7J,EAAQmK,SAAW,UAAYN,GAI7BC,GACFE,EAAO,SAAUv6D,IAEfA,EACEA,GACCzH,KAAK81D,QAAU91D,KAAK81D,OAAOsM,YAC3BpiE,KAAKgG,QAAUhG,KAAKgG,OAAO8vD,QAAU91D,KAAKgG,OAAO8vD,OAAOsM,aAEZ,oBAAxBC,sBACrB56D,EAAU46D,qBAGRT,GACFA,EAAa1/D,KAAKlC,KAAMyH,GAGtBA,GAAWA,EAAQ66D,uBACrB76D,EAAQ66D,sBAAsBj3D,IAAIy2D,IAKtC9J,EAAQuK,aAAeP,GACdJ,IACTI,EAAOD,EACH,WACAH,EAAa1/D,KACXlC,MACCg4D,EAAQkK,WAAaliE,KAAKgG,OAAShG,MAAMwiE,MAAM7M,SAAS8M,aAG3Db,GAGFI,EACF,GAAIhK,EAAQkK,WAAY,CAGtBlK,EAAQ0K,cAAgBV,EAExB,IAAIW,EAAiB3K,EAAQ1B,OAC7B0B,EAAQ1B,OAAS,SAAmCtf,EAAGvvC,GAErD,OADAu6D,EAAK9/D,KAAKuF,GACHk7D,EAAe3rB,EAAGvvC,QAEtB,CAEL,IAAIm7D,EAAW5K,EAAQ6K,aACvB7K,EAAQ6K,aAAeD,EACnB,GAAGp7C,OAAOo7C,EAAUZ,GACpB,CAACA,GAIT,MAAO,CACL3iE,QAASoiE,EACTzJ,QAASA,GCxFb,IAWA,EAXgB,ECFhB,CACA,OACA,aACA,YACA,SACA,UAEA,UACA,kBACA,gBACA,aACA,kBAEA,8BAEA,GACA,SACA,UAEA,OACA,MACA,MACA,QACA,SACA,aACA,sBACA,YACA,cAEA,QACA,SAEA,cACA,YArBA,EAqBA,aACA,cACA,cACA,SAGA,cACA,4BACA,cACA,cACA,cACC,GAAD,MAEA,cACA,SACA,EApBA,EAqBA,EACA,EAtCA,EAuCA,WACA,aAEA,QACA,EA3BA,EA4BA,EACA,EA7CA,EA8CA,YACA,YACA,GAEA,cACA,cACA,SAGA,cACA,SAxCA,EAwCA,oBACA,WAzCA,EAyCA,GACA,QA1CA,EA0CA,oBACA,cACA,cACA,cACC,GAAD,OAIA,cACA,SACA,EApDA,EAqDA,EArDA,EAsDA,EAtEA,EAuEA,eACA,eACA,GAEA,QACA,EA5DA,EA6DA,EA7DA,EA8DA,EA9EA,EA+EA,cACA,gBACA,GAEA,QACA,GACA,EArEA,EA+CA,EAuBA,EAtFA,EAuFA,EACA,SACA,GAEA,cACA,cACA,SAGA,cACA,OACA,EAlFA,EAmFA,EAnFA,EAoFA,EACA,EACA,WACA,GAEA,WAzFA,EAyFA,EAzFA,GA0FA,MACA,EA3FA,EA4FA,EA5FA,EA6FA,EACA,EACA,WACA,GAEA,cAlGA,EA+CA,GAoDA,MACA,GACA,EArGA,EA+CA,EAuDA,EACA,EACA,WACA,GAEA,cACA,cACA,cAGA,cACA,SACA,EAlHA,GAmHA,EAnHA,EAoHA,EApIA,EAqIA,YACA,cACA,GAEA,QACA,EA1HA,GA2HA,EA3HA,EA4HA,EA5IA,EA6IA,aACA,aACA,GAEA,QACA,EAlIA,EAmIA,EAnIA,EAoIA,EApJA,EAqJA,aACA,aACA,GAEA,SACA,EA1IA,EA2IA,EA3IA,EA4IA,EA5JA,EA6JA,YACA,cACA,GAEA,cACA,cACA,SAGA,cACA,OACA,EAxJA,GAyJA,EAzJA,EA0JA,EACA,EACA,WACA,GAEA,WA/JA,GA+JA,EA/JA,GAgKA,MACA,EAjKA,GAkKA,EAlKA,EAmKA,EACA,EACA,WACA,GAEA,YAxKA,EAwKA,EAxKA,GAyKA,OACA,EA1KA,EA2KA,EA3KA,EA4KA,EACA,EACA,WACA,GAEA,WAjLA,EAiLA,EAjLA,GAkLA,MACA,EAnLA,EAoLA,EApLA,EAqLA,EACA,EACA,WACA,GAEA,cACA,cACA,cAIA,cACA,4BACA,cACA,cACA,SAGA,YArNA,qBAsNA,0BACA,eACA,mBACA,wBACA,qBACA,yBC9Oa,WAAa,IAAI8K,EAAI9iE,KAAS+iE,EAAGD,EAAIE,eAAuC,OAAjBF,EAAIG,MAAMC,IAAIH,GAAa,UAAU,CAACvzD,MAAM,CAAC,OAASszD,EAAIl/D,YAC5G,IFUpB,EACA,KACA,KACA,MAI8B,QGXhC,gCAGA,UACA,qBACA,0DACA,sCAEA,4CAEA,ICCA,EAXgB,EDehB,CACA,OACA,SACA,SACA,iBAEA,UACA,kBAKA,OACA,EAJA,OAIA,EACA,EAJA,OAIA,EACA,QACA,MA9BA,GA+BA,OA9BA,GA+BA,gBAIA,QAtBA,WAuBA,sBE7Ca,WAAa,IAAIk/D,EAAI9iE,KAAS+iE,EAAGD,EAAIE,eAAuC,OAAjBF,EAAIG,MAAMC,IAAIH,GAAa,UAAU,CAACvzD,MAAM,CAAC,OAASszD,EAAIl/D,YAC5G,IDUpB,EACA,KACA,KACA,MAI8B,wDEAhC,EAXgB,ECahB,CACA,OAEA,cAEA,iBAEA,iBAEA,aAGA,KAZA,WAaA,OACA,eAIA,SAEA,gBAFA,WAGA,mBAIA,eAPA,WAQA,mBAIA,cAZA,WAYA,sBACA,MADA,MACA,MACA,cACA,4CAIA,UAEA,WAFA,WAGA,OACA,IACA,IACA,OACA,IACA,KAEA,eACA,gBACA,gBAKA,gBAjBA,WAkBA,OACA,IACA,IACA,OACA,IACA,KAEA,eACA,sBACA,eACA,WACA,iBACA,MTkC6B+lC,ESlC7B,WTkCkC4U,ESlClC,GTmCQvU,EAAM62B,EAASl3B,GACd,QAAUK,EAAIhY,EAAI,IAAMgY,EAAI7qB,EAAI,IAAM6qB,EAAInnC,EAAI,IAAM07C,EAAQ,KSnCrE,cTiC4B,IAAC5U,EAAK4U,EAC1BvU,GS9BR,WAnCA,WAoCA,wCACA,OACA,SADA,SACA,GAEA,cACA,4BACA,mBACA,cACA,UACA,QACA,oBACA,MACA,QACA,oBACA,MACA,QACA,+CACA,MACA,QACA,wCACA,MACA,QACA,WACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,UACA,YACA,YACA,iBACA,YACA,aACA,uBACA,iBACA,aACA,mBACA,MACA,QACA,mBASA,MAvFA,WAwFA,qBAGA,0CACA,IAHA,KAIA,mBACA,MALA,MACA,KAKA,mBALA,KAMA,OAIA,cApGA,WAqGA,6BC9Ja,WAAa,IAAI84B,EAAI9iE,KAAS+iE,EAAGD,EAAIE,eAAmBE,EAAGJ,EAAIG,MAAMC,IAAIH,EAAG,OAAOG,EAAG,UAAU,CAACA,EAAG,SAAS,CAAC1zD,MAAM,CAAC,OAASszD,EAAIK,YAAYl/D,GAAG,CAAC,UAAY6+D,EAAIM,gBAAgB,SAAWN,EAAIO,eAAe,QAAUP,EAAIQ,cAAc,IAAM,SAASC,GAAQ,OAAOT,EAAIQ,cAAc,CAAC7oD,IAAK,CAAC+oD,MAAO,KAAK,OAAUV,EAAIW,GAAG,KAAMX,EAAiB,cAAEI,EAAG,UAAU,CAAC1zD,MAAM,CAAC,OAASszD,EAAIY,aAAa,CAACR,EAAG,SAAS,CAAC1zD,MAAM,CAAC,OAASszD,EAAIa,oBAAoB,GAAGb,EAAIhJ,MAAM,KAClc,IFUpB,EACA,KACA,KACA,MAI8B,QGsChC,mBAEA,ICxCA,EAXgB,EDmDhB,CACA,OAEA,oBAEA,eAGA,YACA,iBACA,gBACA,mBAGA,KAdA,WAeA,OAEA,gBAEA,iBACA,MACA,eAGA,YACA,WACA,cAGA,aACA,OACA,OAGA,aACA,cAEA,cACA,IACA,OAKA,UAEA,YAFA,WAEA,WACA,OAEA,6BACA,8BACA,aAEA,uDASA,cAlBA,WAmBA,aAIA,uBAvBA,WAwBA,aAIA,WA5BA,WA6BA,aAIA,cAjCA,WAkCA,cAIA,SAMA,0BANA,WAOA,IAKA,EALA,uBACA,MACA,MACA,qBAGA,wBAEA,qBACA,0DACA,CAEA,sBACA,cACA,cACA,iBACA,4DAEA,OACA,cACA,cACA,UAKA,gBAjCA,SAiCA,OACA,OACA,8BACA,+BAKA,WAzCA,SAyCA,GACA,uDAIA,cA9CA,SA8CA,GACA,qCACA,OACA,yBACA,2BAKA,wBAvDA,WAwDA,qBACA,4BACA,uBACA,qBACA,OACA,+BACA,gCAKA,OAFA,mDAEA,CACA,GACA,MACA,OAEA,GACA,MACA,SAOA,WAjFA,SAiFA,KACA,WACA,CACA,SACA,WAEA,CACA,UACA,UASA,qBAlGA,WAmGA,0CACA,+CACA,iEAEA,0DAKA,uBA5GA,SA4GA,OACA,qBACA,OAEA,yCAIA,GAFA,6CACA,2BACA,WAGA,IACA,sBACA,2BACA,2BAGA,sDAKA,gBAlIA,WAmIA,iBACA,qDAEA,wDAKA,aA3IA,WA4IA,0CACA,sBACA,sCACA,wCAGA,oDAKA,aAvJA,SAuJA,GACA,oBACA,SACA,mBACA,iBAEA,yBACA,GACA,gBACA,iBAUA,QANA,WAIA,mBAHA,+CAKA,GACA,IAEA,EADA,WACA,IAEA,IAEA,qBACA,mBAEA,OACA,gBACA,iBAEA,kCACA,mBAEA,sDAKA,gBAhMA,SAgMA,GACA,iBACA,IXpMyBzsB,EAAIC,EWoM7B,eACA,eACA,SACA,mBACA,oBACA,oBACA,kBACA,SACA,iBACA,GX7MyBD,EW8MzB,0BX9M6BC,EW+M7B,0BX9MSl9B,KAAK27B,KAAK37B,KAAKwsB,IAAI0Q,EAAG9mC,EAAI6mC,EAAG7mC,EAAG,GAAK4J,KAAKwsB,IAAI0Q,EAAG7mC,EAAI4mC,EAAG5mC,EAAG,KWgNpE,2BACA,mBACA,0BACA,0BACA,UACA,aACA,8BACA,WAEA,UAEA,OACA,gBACA,iBAEA,uBACA,kBACA,aAEA,mBACA,OACA,gBACA,iBAEA,kCACA,cAEA,kBAEA,uDAMA,eAlPA,WAoPA,2BACA,8BAIA,wBAzPA,SAyPA,GACA,2CAIA,sBA9PA,SA8PA,GACA,6BAIA,qBAnQA,SAmQA,GACA,oDACA,oEACA,gEAEA,MACA,8CACA,qDACA,oDAEA,sDAKA,qBAlRA,SAkRA,GACA,uDACA,uEACA,mEACA,OACA,iDACA,wDACA,wDASA,qBAlSA,WAmSA,6BAIA,qBAvSA,WAwSA,MACA,oCADA,EAEA,sCAEA,qDACA,EADA,QACA,EADA,KAEA,OAEA,oBACA,mCACA,mBACA,MAEA,SACA,UACA,YAGA,SACA,SAEA,8BACA,+BAEA,yDAMA,QAxZA,WAyZA,2BAEA,oBACA,sBAEA,0CACA,sDACA,iCAMA,cAtaA,WAuaA,yDZjea,WAAa,IAAIq8D,EAAI9iE,KAAS+iE,EAAGD,EAAIE,eAAmBE,EAAGJ,EAAIG,MAAMC,IAAIH,EAAG,OAAOG,EAAG,MAAM,CAACzH,IAAI,eAAemI,YAAY,gBAAgB3/D,GAAG,CAAC,YAAc,SAASs/D,GAAQA,EAAOlsC,oBAA2B,CAAC6rC,EAAG,UAAU,CAACzH,IAAI,QAAQmI,YAAY,QAAQp0D,MAAM,CAAC,OAASszD,EAAIe,aAAa5/D,GAAG,CAAC,UAAY6+D,EAAIgB,kBAAkB,CAACZ,EAAG,UAAU,CAACA,EAAG,SAAS,CAAC1zD,MAAM,CAAC,OAAS,CACxXhJ,GAAI,IACJC,GAAI,IACJN,MAAO,IACPC,OAAQ,IACRoO,KAAM,cAAcsuD,EAAIW,GAAG,KAAKX,EAAIiB,GAAIjB,EAA0B,wBAAE,SAASkB,GAAiB,OAAOd,EAAG,SAAS,CAAClhE,IAAIgiE,EAAgB3C,IAAI7xD,MAAM,CAAC,OAASw0D,SAAsB,GAAGlB,EAAIW,GAAG,KAAKP,EAAG,UAAUJ,EAAIiB,GAAIjB,EAAiB,eAAE,SAASmB,EAAUp/D,GAAO,OAAOq+D,EAAG,cAAc,CAAClhE,IAAI6C,EAAM2K,MAAM,CAAC,OAASy0D,EAAUC,OAAO,UAAYD,EAAUE,UAAU,UAAYF,EAAUG,UAAU,KAAOH,EAAUle,MAAM9hD,GAAG,CAAC,sBAAsB,SAAUyF,EAAM26D,GAAW,OAAOvB,EAAIwB,uBAAuBz/D,EAAO6E,EAAM26D,UAAiB,GAAGvB,EAAIW,GAAG,KAAKP,EAAG,UAAU,CAACzH,IAAI,eAAe,CAACqH,EAAIiB,GAAIjB,EAAc,YAAE,SAASoB,GAAQ,OAAOhB,EAAG,gBAAgBJ,EAAIyB,GAAG,CAACviE,IAAIkiE,EAAO7C,IAAI7xD,MAAM,CAAC,OAASszD,EAAI0B,uBAAuB,gBAAgBN,GAAO,OAAUpB,EAAIW,GAAG,KAAKX,EAAIiB,GAAIjB,EAAY,UAAE,SAAS2B,GAAM,OAAOvB,EAAG,eAAeJ,EAAIyB,GAAG,CAACviE,IAAIyiE,EAAKpD,KAAK,eAAeoD,GAAK,QAAW,IAAI,GAAG3B,EAAIW,GAAG,KAAKP,EAAG,MAAM,CAACU,YAAY,gBAAgB,KACl5B,IaKpB,EACA,KACA,KACA,MAI8B","sources":["webpack://jazevedo.me/./node_modules/konva/lib/Animation.js","webpack://jazevedo.me/./node_modules/konva/lib/BaseLayer.js","webpack://jazevedo.me/./node_modules/konva/lib/Canvas.js","webpack://jazevedo.me/./node_modules/konva/lib/Container.js","webpack://jazevedo.me/./node_modules/konva/lib/Context.js","webpack://jazevedo.me/./node_modules/konva/lib/DragAndDrop.js","webpack://jazevedo.me/./node_modules/konva/lib/Factory.js","webpack://jazevedo.me/./node_modules/konva/lib/FastLayer.js","webpack://jazevedo.me/./node_modules/konva/lib/Global.js","webpack://jazevedo.me/./node_modules/konva/lib/Group.js","webpack://jazevedo.me/./node_modules/konva/lib/Layer.js","webpack://jazevedo.me/./node_modules/konva/lib/Node.js","webpack://jazevedo.me/./node_modules/konva/lib/PointerEvents.js","webpack://jazevedo.me/./node_modules/konva/lib/Shape.js","webpack://jazevedo.me/./node_modules/konva/lib/Stage.js","webpack://jazevedo.me/./node_modules/konva/lib/Tween.js","webpack://jazevedo.me/./node_modules/konva/lib/Util.js","webpack://jazevedo.me/./node_modules/konva/lib/Validators.js","webpack://jazevedo.me/./node_modules/konva/lib/_CoreInternals.js","webpack://jazevedo.me/./node_modules/konva/lib/_FullInternals.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/Blur.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/Brighten.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/Contrast.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/Emboss.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/Enhance.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/Grayscale.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/HSL.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/HSV.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/Invert.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/Kaleidoscope.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/Mask.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/Noise.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/Pixelate.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/Posterize.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/RGB.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/RGBA.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/Sepia.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/Solarize.js","webpack://jazevedo.me/./node_modules/konva/lib/filters/Threshold.js","webpack://jazevedo.me/./node_modules/konva/lib/index.js","webpack://jazevedo.me/./node_modules/konva/lib/shapes/Arc.js","webpack://jazevedo.me/./node_modules/konva/lib/shapes/Arrow.js","webpack://jazevedo.me/./node_modules/konva/lib/shapes/Circle.js","webpack://jazevedo.me/./node_modules/konva/lib/shapes/Ellipse.js","webpack://jazevedo.me/./node_modules/konva/lib/shapes/Image.js","webpack://jazevedo.me/./node_modules/konva/lib/shapes/Label.js","webpack://jazevedo.me/./node_modules/konva/lib/shapes/Line.js","webpack://jazevedo.me/./node_modules/konva/lib/shapes/Path.js","webpack://jazevedo.me/./node_modules/konva/lib/shapes/Rect.js","webpack://jazevedo.me/./node_modules/konva/lib/shapes/RegularPolygon.js","webpack://jazevedo.me/./node_modules/konva/lib/shapes/Ring.js","webpack://jazevedo.me/./node_modules/konva/lib/shapes/Sprite.js","webpack://jazevedo.me/./node_modules/konva/lib/shapes/Star.js","webpack://jazevedo.me/./node_modules/konva/lib/shapes/Text.js","webpack://jazevedo.me/./node_modules/konva/lib/shapes/TextPath.js","webpack://jazevedo.me/./node_modules/konva/lib/shapes/Transformer.js","webpack://jazevedo.me/./node_modules/konva/lib/shapes/Wedge.js","webpack://jazevedo.me/./node_modules/vue-konva/umd/vue-konva.js","webpack://jazevedo.me/./node_modules/vuera/dist/vuera.cjs.js","webpack://jazevedo.me/./node_modules/core-js/internals/classof.js","webpack://jazevedo.me/./node_modules/core-js/internals/string-trim-forced.js","webpack://jazevedo.me/./node_modules/core-js/internals/string-trim.js","webpack://jazevedo.me/./node_modules/core-js/internals/to-string-tag-support.js","webpack://jazevedo.me/./node_modules/core-js/internals/to-string.js","webpack://jazevedo.me/./node_modules/core-js/internals/whitespaces.js","webpack://jazevedo.me/./node_modules/core-js/modules/es.string.trim-end.js","webpack://jazevedo.me/./node_modules/core-js/modules/es.string.trim-start.js","webpack://jazevedo.me/./content/projects/risk-game/local/demo/vue-interop.tsx","webpack://jazevedo.me/./content/projects/risk-game/local/demo/vue/GameCanvas.vue?eb48","webpack://jazevedo.me/./content/projects/risk-game/local/demo/vue/util.js","webpack://jazevedo.me/./node_modules/vue-loader/lib/runtime/componentNormalizer.js","webpack://jazevedo.me/./content/projects/risk-game/local/demo/vue/ArmyShape.vue","webpack://jazevedo.me/content/projects/risk-game/local/demo/vue/ArmyShape.vue","webpack://jazevedo.me/./content/projects/risk-game/local/demo/vue/ArmyShape.vue?7f11","webpack://jazevedo.me/content/projects/risk-game/local/demo/vue/CastleIcon.vue","webpack://jazevedo.me/./content/projects/risk-game/local/demo/vue/CastleIcon.vue","webpack://jazevedo.me/./content/projects/risk-game/local/demo/vue/CastleIcon.vue?d22a","webpack://jazevedo.me/./content/projects/risk-game/local/demo/vue/Territory.vue","webpack://jazevedo.me/content/projects/risk-game/local/demo/vue/Territory.vue","webpack://jazevedo.me/./content/projects/risk-game/local/demo/vue/Territory.vue?36bd","webpack://jazevedo.me/content/projects/risk-game/local/demo/vue/GameCanvas.vue","webpack://jazevedo.me/./content/projects/risk-game/local/demo/vue/GameCanvas.vue"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Global_1 = require(\"./Global\");\n\nvar now = function () {\n  if (Global_1.glob.performance && Global_1.glob.performance.now) {\n    return function () {\n      return Global_1.glob.performance.now();\n    };\n  }\n\n  return function () {\n    return new Date().getTime();\n  };\n}();\n\nvar Animation = function () {\n  function Animation(func, layers) {\n    this.id = Animation.animIdCounter++;\n    this.frame = {\n      time: 0,\n      timeDiff: 0,\n      lastTime: now(),\n      frameRate: 0\n    };\n    this.func = func;\n    this.setLayers(layers);\n  }\n\n  Animation.prototype.setLayers = function (layers) {\n    var lays = [];\n\n    if (!layers) {\n      lays = [];\n    } else if (layers.length > 0) {\n      lays = layers;\n    } else {\n      lays = [layers];\n    }\n\n    this.layers = lays;\n    return this;\n  };\n\n  Animation.prototype.getLayers = function () {\n    return this.layers;\n  };\n\n  Animation.prototype.addLayer = function (layer) {\n    var layers = this.layers,\n        len = layers.length,\n        n;\n\n    for (n = 0; n < len; n++) {\n      if (layers[n]._id === layer._id) {\n        return false;\n      }\n    }\n\n    this.layers.push(layer);\n    return true;\n  };\n\n  Animation.prototype.isRunning = function () {\n    var a = Animation,\n        animations = a.animations,\n        len = animations.length,\n        n;\n\n    for (n = 0; n < len; n++) {\n      if (animations[n].id === this.id) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  Animation.prototype.start = function () {\n    this.stop();\n    this.frame.timeDiff = 0;\n    this.frame.lastTime = now();\n\n    Animation._addAnimation(this);\n\n    return this;\n  };\n\n  Animation.prototype.stop = function () {\n    Animation._removeAnimation(this);\n\n    return this;\n  };\n\n  Animation.prototype._updateFrameObject = function (time) {\n    this.frame.timeDiff = time - this.frame.lastTime;\n    this.frame.lastTime = time;\n    this.frame.time += this.frame.timeDiff;\n    this.frame.frameRate = 1000 / this.frame.timeDiff;\n  };\n\n  Animation._addAnimation = function (anim) {\n    this.animations.push(anim);\n\n    this._handleAnimation();\n  };\n\n  Animation._removeAnimation = function (anim) {\n    var id = anim.id,\n        animations = this.animations,\n        len = animations.length,\n        n;\n\n    for (n = 0; n < len; n++) {\n      if (animations[n].id === id) {\n        this.animations.splice(n, 1);\n        break;\n      }\n    }\n  };\n\n  Animation._runFrames = function () {\n    var layerHash = {},\n        animations = this.animations,\n        anim,\n        layers,\n        func,\n        n,\n        i,\n        layersLen,\n        layer,\n        key,\n        needRedraw;\n\n    for (n = 0; n < animations.length; n++) {\n      anim = animations[n];\n      layers = anim.layers;\n      func = anim.func;\n\n      anim._updateFrameObject(now());\n\n      layersLen = layers.length;\n\n      if (func) {\n        needRedraw = func.call(anim, anim.frame) !== false;\n      } else {\n        needRedraw = true;\n      }\n\n      if (!needRedraw) {\n        continue;\n      }\n\n      for (i = 0; i < layersLen; i++) {\n        layer = layers[i];\n\n        if (layer._id !== undefined) {\n          layerHash[layer._id] = layer;\n        }\n      }\n    }\n\n    for (key in layerHash) {\n      if (!layerHash.hasOwnProperty(key)) {\n        continue;\n      }\n\n      layerHash[key].draw();\n    }\n  };\n\n  Animation._animationLoop = function () {\n    var Anim = Animation;\n\n    if (Anim.animations.length) {\n      Anim._runFrames();\n\n      requestAnimationFrame(Anim._animationLoop);\n    } else {\n      Anim.animRunning = false;\n    }\n  };\n\n  Animation._handleAnimation = function () {\n    if (!this.animRunning) {\n      this.animRunning = true;\n      requestAnimationFrame(this._animationLoop);\n    }\n  };\n\n  Animation.animations = [];\n  Animation.animIdCounter = 0;\n  Animation.animRunning = false;\n  return Animation;\n}();\n\nexports.Animation = Animation;","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"./Util\");\n\nvar Container_1 = require(\"./Container\");\n\nvar Node_1 = require(\"./Node\");\n\nvar Factory_1 = require(\"./Factory\");\n\nvar Canvas_1 = require(\"./Canvas\");\n\nvar BaseLayer = function (_super) {\n  __extends(BaseLayer, _super);\n\n  function BaseLayer(config) {\n    var _this = _super.call(this, config) || this;\n\n    _this.canvas = new Canvas_1.SceneCanvas();\n    _this._waitingForDraw = false;\n\n    _this.on('visibleChange', _this._checkVisibility);\n\n    _this._checkVisibility();\n\n    _this.on('imageSmoothingEnabledChange', _this._checkSmooth);\n\n    _this._checkSmooth();\n\n    return _this;\n  }\n\n  BaseLayer.prototype.createPNGStream = function () {\n    var c = this.canvas._canvas;\n    return c.createPNGStream();\n  };\n\n  BaseLayer.prototype.getCanvas = function () {\n    return this.canvas;\n  };\n\n  BaseLayer.prototype.getHitCanvas = function () {\n    return this.hitCanvas;\n  };\n\n  BaseLayer.prototype.getContext = function () {\n    return this.getCanvas().getContext();\n  };\n\n  BaseLayer.prototype.clear = function (bounds) {\n    this.getContext().clear(bounds);\n    return this;\n  };\n\n  BaseLayer.prototype.setZIndex = function (index) {\n    _super.prototype.setZIndex.call(this, index);\n\n    var stage = this.getStage();\n\n    if (stage) {\n      stage.content.removeChild(this.getCanvas()._canvas);\n\n      if (index < stage.getChildren().length - 1) {\n        stage.content.insertBefore(this.getCanvas()._canvas, stage.getChildren()[index + 1].getCanvas()._canvas);\n      } else {\n        stage.content.appendChild(this.getCanvas()._canvas);\n      }\n    }\n\n    return this;\n  };\n\n  BaseLayer.prototype.moveToTop = function () {\n    Node_1.Node.prototype.moveToTop.call(this);\n    var stage = this.getStage();\n\n    if (stage) {\n      stage.content.removeChild(this.getCanvas()._canvas);\n      stage.content.appendChild(this.getCanvas()._canvas);\n    }\n\n    return true;\n  };\n\n  BaseLayer.prototype.moveUp = function () {\n    var moved = Node_1.Node.prototype.moveUp.call(this);\n\n    if (!moved) {\n      return false;\n    }\n\n    var stage = this.getStage();\n\n    if (!stage) {\n      return false;\n    }\n\n    stage.content.removeChild(this.getCanvas()._canvas);\n\n    if (this.index < stage.getChildren().length - 1) {\n      stage.content.insertBefore(this.getCanvas()._canvas, stage.getChildren()[this.index + 1].getCanvas()._canvas);\n    } else {\n      stage.content.appendChild(this.getCanvas()._canvas);\n    }\n\n    return true;\n  };\n\n  BaseLayer.prototype.moveDown = function () {\n    if (Node_1.Node.prototype.moveDown.call(this)) {\n      var stage = this.getStage();\n\n      if (stage) {\n        var children = stage.getChildren();\n        stage.content.removeChild(this.getCanvas()._canvas);\n        stage.content.insertBefore(this.getCanvas()._canvas, children[this.index + 1].getCanvas()._canvas);\n      }\n\n      return true;\n    }\n\n    return false;\n  };\n\n  BaseLayer.prototype.moveToBottom = function () {\n    if (Node_1.Node.prototype.moveToBottom.call(this)) {\n      var stage = this.getStage();\n\n      if (stage) {\n        var children = stage.getChildren();\n        stage.content.removeChild(this.getCanvas()._canvas);\n        stage.content.insertBefore(this.getCanvas()._canvas, children[1].getCanvas()._canvas);\n      }\n\n      return true;\n    }\n\n    return false;\n  };\n\n  BaseLayer.prototype.getLayer = function () {\n    return this;\n  };\n\n  BaseLayer.prototype.remove = function () {\n    var _canvas = this.getCanvas()._canvas;\n\n    Node_1.Node.prototype.remove.call(this);\n\n    if (_canvas && _canvas.parentNode && Util_1.Util._isInDocument(_canvas)) {\n      _canvas.parentNode.removeChild(_canvas);\n    }\n\n    return this;\n  };\n\n  BaseLayer.prototype.getStage = function () {\n    return this.parent;\n  };\n\n  BaseLayer.prototype.setSize = function (_a) {\n    var width = _a.width,\n        height = _a.height;\n    this.canvas.setSize(width, height);\n    return this;\n  };\n\n  BaseLayer.prototype._toKonvaCanvas = function (config) {\n    config = config || {};\n    config.width = config.width || this.getWidth();\n    config.height = config.height || this.getHeight();\n    config.x = config.x !== undefined ? config.x : this.x();\n    config.y = config.y !== undefined ? config.y : this.y();\n    return Node_1.Node.prototype._toKonvaCanvas.call(this, config);\n  };\n\n  BaseLayer.prototype._checkVisibility = function () {\n    var visible = this.visible();\n\n    if (visible) {\n      this.canvas._canvas.style.display = 'block';\n    } else {\n      this.canvas._canvas.style.display = 'none';\n    }\n  };\n\n  BaseLayer.prototype._checkSmooth = function () {\n    this.getContext()._context.imageSmoothingEnabled = this.imageSmoothingEnabled();\n  };\n\n  BaseLayer.prototype.getWidth = function () {\n    if (this.parent) {\n      return this.parent.width();\n    }\n  };\n\n  BaseLayer.prototype.setWidth = function () {\n    Util_1.Util.warn('Can not change width of layer. Use \"stage.width(value)\" function instead.');\n  };\n\n  BaseLayer.prototype.getHeight = function () {\n    if (this.parent) {\n      return this.parent.height();\n    }\n  };\n\n  BaseLayer.prototype.setHeight = function () {\n    Util_1.Util.warn('Can not change height of layer. Use \"stage.height(value)\" function instead.');\n  };\n\n  BaseLayer.prototype.getIntersection = function (pos, selector) {\n    return null;\n  };\n\n  BaseLayer.prototype.batchDraw = function () {\n    var _this = this;\n\n    if (!this._waitingForDraw) {\n      this._waitingForDraw = true;\n      Util_1.Util.requestAnimFrame(function () {\n        _this.draw();\n\n        _this._waitingForDraw = false;\n      });\n    }\n\n    return this;\n  };\n\n  BaseLayer.prototype._applyTransform = function (shape, context, top) {\n    var m = shape.getAbsoluteTransform(top).getMatrix();\n    context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n  };\n\n  return BaseLayer;\n}(Container_1.Container);\n\nexports.BaseLayer = BaseLayer;\nBaseLayer.prototype.nodeType = 'BaseLayer';\nFactory_1.Factory.addGetterSetter(BaseLayer, 'imageSmoothingEnabled', true);\nFactory_1.Factory.addGetterSetter(BaseLayer, 'clearBeforeDraw', true);\nUtil_1.Collection.mapMethods(BaseLayer);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"./Util\");\n\nvar Context_1 = require(\"./Context\");\n\nvar Global_1 = require(\"./Global\");\n\nvar Factory_1 = require(\"./Factory\");\n\nvar Validators_1 = require(\"./Validators\");\n\nvar _pixelRatio;\n\nfunction getDevicePixelRatio() {\n  if (_pixelRatio) {\n    return _pixelRatio;\n  }\n\n  var canvas = Util_1.Util.createCanvasElement();\n  var context = canvas.getContext('2d');\n\n  _pixelRatio = function () {\n    var devicePixelRatio = Global_1.Konva._global.devicePixelRatio || 1,\n        backingStoreRatio = context.webkitBackingStorePixelRatio || context.mozBackingStorePixelRatio || context.msBackingStorePixelRatio || context.oBackingStorePixelRatio || context.backingStorePixelRatio || 1;\n    return devicePixelRatio / backingStoreRatio;\n  }();\n\n  return _pixelRatio;\n}\n\nvar Canvas = function () {\n  function Canvas(config) {\n    this.pixelRatio = 1;\n    this.width = 0;\n    this.height = 0;\n    this.isCache = false;\n    var conf = config || {};\n    var pixelRatio = conf.pixelRatio || Global_1.Konva.pixelRatio || getDevicePixelRatio();\n    this.pixelRatio = pixelRatio;\n    this._canvas = Util_1.Util.createCanvasElement();\n    this._canvas.style.padding = '0';\n    this._canvas.style.margin = '0';\n    this._canvas.style.border = '0';\n    this._canvas.style.background = 'transparent';\n    this._canvas.style.position = 'absolute';\n    this._canvas.style.top = '0';\n    this._canvas.style.left = '0';\n  }\n\n  Canvas.prototype.getContext = function () {\n    return this.context;\n  };\n\n  Canvas.prototype.getPixelRatio = function () {\n    return this.pixelRatio;\n  };\n\n  Canvas.prototype.setPixelRatio = function (pixelRatio) {\n    var previousRatio = this.pixelRatio;\n    this.pixelRatio = pixelRatio;\n    this.setSize(this.getWidth() / previousRatio, this.getHeight() / previousRatio);\n  };\n\n  Canvas.prototype.setWidth = function (width) {\n    this.width = this._canvas.width = width * this.pixelRatio;\n    this._canvas.style.width = width + 'px';\n\n    var pixelRatio = this.pixelRatio,\n        _context = this.getContext()._context;\n\n    _context.scale(pixelRatio, pixelRatio);\n  };\n\n  Canvas.prototype.setHeight = function (height) {\n    this.height = this._canvas.height = height * this.pixelRatio;\n    this._canvas.style.height = height + 'px';\n\n    var pixelRatio = this.pixelRatio,\n        _context = this.getContext()._context;\n\n    _context.scale(pixelRatio, pixelRatio);\n  };\n\n  Canvas.prototype.getWidth = function () {\n    return this.width;\n  };\n\n  Canvas.prototype.getHeight = function () {\n    return this.height;\n  };\n\n  Canvas.prototype.setSize = function (width, height) {\n    this.setWidth(width);\n    this.setHeight(height);\n  };\n\n  Canvas.prototype.toDataURL = function (mimeType, quality) {\n    try {\n      return this._canvas.toDataURL(mimeType, quality);\n    } catch (e) {\n      try {\n        return this._canvas.toDataURL();\n      } catch (err) {\n        Util_1.Util.error('Unable to get data URL. ' + err.message);\n        return '';\n      }\n    }\n  };\n\n  return Canvas;\n}();\n\nexports.Canvas = Canvas;\nFactory_1.Factory.addGetterSetter(Canvas, 'pixelRatio', undefined, Validators_1.getNumberValidator());\n\nvar SceneCanvas = function (_super) {\n  __extends(SceneCanvas, _super);\n\n  function SceneCanvas(config) {\n    if (config === void 0) {\n      config = {\n        width: 0,\n        height: 0\n      };\n    }\n\n    var _this = _super.call(this, config) || this;\n\n    _this.context = new Context_1.SceneContext(_this);\n\n    _this.setSize(config.width, config.height);\n\n    return _this;\n  }\n\n  return SceneCanvas;\n}(Canvas);\n\nexports.SceneCanvas = SceneCanvas;\n\nvar HitCanvas = function (_super) {\n  __extends(HitCanvas, _super);\n\n  function HitCanvas(config) {\n    if (config === void 0) {\n      config = {\n        width: 0,\n        height: 0\n      };\n    }\n\n    var _this = _super.call(this, config) || this;\n\n    _this.hitCanvas = true;\n    _this.context = new Context_1.HitContext(_this);\n\n    _this.setSize(config.width, config.height);\n\n    return _this;\n  }\n\n  return HitCanvas;\n}(Canvas);\n\nexports.HitCanvas = HitCanvas;","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"./Util\");\n\nvar Factory_1 = require(\"./Factory\");\n\nvar Node_1 = require(\"./Node\");\n\nvar DragAndDrop_1 = require(\"./DragAndDrop\");\n\nvar Validators_1 = require(\"./Validators\");\n\nvar Container = function (_super) {\n  __extends(Container, _super);\n\n  function Container() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.children = new Util_1.Collection();\n    return _this;\n  }\n\n  Container.prototype.getChildren = function (filterFunc) {\n    if (!filterFunc) {\n      return this.children;\n    }\n\n    var results = new Util_1.Collection();\n    this.children.each(function (child) {\n      if (filterFunc(child)) {\n        results.push(child);\n      }\n    });\n    return results;\n  };\n\n  Container.prototype.hasChildren = function () {\n    return this.getChildren().length > 0;\n  };\n\n  Container.prototype.removeChildren = function () {\n    var child;\n\n    for (var i = 0; i < this.children.length; i++) {\n      child = this.children[i];\n      child.parent = null;\n      child.index = 0;\n      child.remove();\n    }\n\n    this.children = new Util_1.Collection();\n    return this;\n  };\n\n  Container.prototype.destroyChildren = function () {\n    var child;\n\n    for (var i = 0; i < this.children.length; i++) {\n      child = this.children[i];\n      child.parent = null;\n      child.index = 0;\n      child.destroy();\n    }\n\n    this.children = new Util_1.Collection();\n    return this;\n  };\n\n  Container.prototype.add = function (child) {\n    if (arguments.length > 1) {\n      for (var i = 0; i < arguments.length; i++) {\n        this.add(arguments[i]);\n      }\n\n      return this;\n    }\n\n    if (child.getParent()) {\n      child.moveTo(this);\n      return this;\n    }\n\n    var children = this.children;\n\n    this._validateAdd(child);\n\n    child.index = children.length;\n    child.parent = this;\n    children.push(child);\n\n    this._fire('add', {\n      child: child\n    });\n\n    if (child.isDragging()) {\n      DragAndDrop_1.DD.anim.setLayers(child.getLayer());\n    }\n\n    return this;\n  };\n\n  Container.prototype.destroy = function () {\n    if (this.hasChildren()) {\n      this.destroyChildren();\n    }\n\n    _super.prototype.destroy.call(this);\n\n    return this;\n  };\n\n  Container.prototype.find = function (selector) {\n    return this._generalFind(selector, false);\n  };\n\n  Container.prototype.get = function (selector) {\n    Util_1.Util.warn('collection.get() method is deprecated. Please use collection.find() instead.');\n    return this.find(selector);\n  };\n\n  Container.prototype.findOne = function (selector) {\n    var result = this._generalFind(selector, true);\n\n    return result.length > 0 ? result[0] : undefined;\n  };\n\n  Container.prototype._generalFind = function (selector, findOne) {\n    var retArr = [];\n\n    this._descendants(function (node) {\n      var valid = node._isMatch(selector);\n\n      if (valid) {\n        retArr.push(node);\n      }\n\n      if (valid && findOne) {\n        return true;\n      }\n\n      return false;\n    });\n\n    return Util_1.Collection.toCollection(retArr);\n  };\n\n  Container.prototype._descendants = function (fn) {\n    var shouldStop = false;\n\n    for (var i = 0; i < this.children.length; i++) {\n      var child = this.children[i];\n      shouldStop = fn(child);\n\n      if (shouldStop) {\n        return true;\n      }\n\n      if (!child.hasChildren()) {\n        continue;\n      }\n\n      shouldStop = child._descendants(fn);\n\n      if (shouldStop) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  Container.prototype.toObject = function () {\n    var obj = Node_1.Node.prototype.toObject.call(this);\n    obj.children = [];\n    var children = this.getChildren();\n    var len = children.length;\n\n    for (var n = 0; n < len; n++) {\n      var child = children[n];\n      obj.children.push(child.toObject());\n    }\n\n    return obj;\n  };\n\n  Container.prototype._getDescendants = function (arr) {\n    var retArr = [];\n    var len = arr.length;\n\n    for (var n = 0; n < len; n++) {\n      var node = arr[n];\n\n      if (this.isAncestorOf(node)) {\n        retArr.push(node);\n      }\n    }\n\n    return retArr;\n  };\n\n  Container.prototype.isAncestorOf = function (node) {\n    var parent = node.getParent();\n\n    while (parent) {\n      if (parent._id === this._id) {\n        return true;\n      }\n\n      parent = parent.getParent();\n    }\n\n    return false;\n  };\n\n  Container.prototype.clone = function (obj) {\n    var node = Node_1.Node.prototype.clone.call(this, obj);\n    this.getChildren().each(function (no) {\n      node.add(no.clone());\n    });\n    return node;\n  };\n\n  Container.prototype.getAllIntersections = function (pos) {\n    var arr = [];\n    this.find('Shape').each(function (shape) {\n      if (shape.isVisible() && shape.intersects(pos)) {\n        arr.push(shape);\n      }\n    });\n    return arr;\n  };\n\n  Container.prototype._setChildrenIndices = function () {\n    this.children.each(function (child, n) {\n      child.index = n;\n    });\n  };\n\n  Container.prototype.drawScene = function (can, top, caching) {\n    var layer = this.getLayer(),\n        canvas = can || layer && layer.getCanvas(),\n        context = canvas && canvas.getContext(),\n        cachedCanvas = this._getCanvasCache(),\n        cachedSceneCanvas = cachedCanvas && cachedCanvas.scene;\n\n    if (this.isVisible() || caching) {\n      if (!caching && cachedSceneCanvas) {\n        context.save();\n\n        layer._applyTransform(this, context, top);\n\n        this._drawCachedSceneCanvas(context);\n\n        context.restore();\n      } else {\n        this._drawChildren(canvas, 'drawScene', top, false, caching, caching);\n      }\n    }\n\n    return this;\n  };\n\n  Container.prototype.drawHit = function (can, top, caching) {\n    var layer = this.getLayer(),\n        canvas = can || layer && layer.hitCanvas,\n        context = canvas && canvas.getContext(),\n        cachedCanvas = this._getCanvasCache(),\n        cachedHitCanvas = cachedCanvas && cachedCanvas.hit;\n\n    if (this.shouldDrawHit(canvas) || caching) {\n      if (!caching && cachedHitCanvas) {\n        context.save();\n\n        layer._applyTransform(this, context, top);\n\n        this._drawCachedHitCanvas(context);\n\n        context.restore();\n      } else {\n        this._drawChildren(canvas, 'drawHit', top, false, caching, caching);\n      }\n    }\n\n    return this;\n  };\n\n  Container.prototype._drawChildren = function (canvas, drawMethod, top, caching, skipBuffer, skipComposition) {\n    var layer = this.getLayer(),\n        context = canvas && canvas.getContext(),\n        clipWidth = this.clipWidth(),\n        clipHeight = this.clipHeight(),\n        clipFunc = this.clipFunc(),\n        hasClip = clipWidth && clipHeight || clipFunc,\n        clipX,\n        clipY;\n\n    if (hasClip && layer) {\n      context.save();\n      var transform = this.getAbsoluteTransform(top);\n      var m = transform.getMatrix();\n      context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n      context.beginPath();\n\n      if (clipFunc) {\n        clipFunc.call(this, context, this);\n      } else {\n        clipX = this.clipX();\n        clipY = this.clipY();\n        context.rect(clipX, clipY, clipWidth, clipHeight);\n      }\n\n      context.clip();\n      m = transform.copy().invert().getMatrix();\n      context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n    }\n\n    var hasComposition = this.globalCompositeOperation() !== 'source-over' && !skipComposition;\n\n    if (hasComposition && layer) {\n      context.save();\n\n      context._applyGlobalCompositeOperation(this);\n    }\n\n    this.children.each(function (child) {\n      child[drawMethod](canvas, top, caching, skipBuffer);\n    });\n\n    if (hasComposition && layer) {\n      context.restore();\n    }\n\n    if (hasClip && layer) {\n      context.restore();\n    }\n  };\n\n  Container.prototype.shouldDrawHit = function (canvas) {\n    var layer = this.getLayer();\n    var layerUnderDrag = DragAndDrop_1.DD.isDragging && DragAndDrop_1.DD.anim.getLayers().indexOf(layer) !== -1;\n    return canvas && canvas.isCache || layer && layer.hitGraphEnabled() && this.isVisible() && !layerUnderDrag;\n  };\n\n  Container.prototype.getClientRect = function (attrs) {\n    attrs = attrs || {};\n    var skipTransform = attrs.skipTransform;\n    var relativeTo = attrs.relativeTo;\n    var minX, minY, maxX, maxY;\n    var selfRect = {\n      x: Infinity,\n      y: Infinity,\n      width: 0,\n      height: 0\n    };\n    var that = this;\n    this.children.each(function (child) {\n      if (!child.visible()) {\n        return;\n      }\n\n      var rect = child.getClientRect({\n        relativeTo: that,\n        skipShadow: attrs.skipShadow,\n        skipStroke: attrs.skipStroke\n      });\n\n      if (rect.width === 0 && rect.height === 0) {\n        return;\n      }\n\n      if (minX === undefined) {\n        minX = rect.x;\n        minY = rect.y;\n        maxX = rect.x + rect.width;\n        maxY = rect.y + rect.height;\n      } else {\n        minX = Math.min(minX, rect.x);\n        minY = Math.min(minY, rect.y);\n        maxX = Math.max(maxX, rect.x + rect.width);\n        maxY = Math.max(maxY, rect.y + rect.height);\n      }\n    });\n    var shapes = this.find('Shape');\n    var hasVisible = false;\n\n    for (var i = 0; i < shapes.length; i++) {\n      var shape = shapes[i];\n\n      if (shape._isVisible(this)) {\n        hasVisible = true;\n        break;\n      }\n    }\n\n    if (hasVisible) {\n      selfRect = {\n        x: minX,\n        y: minY,\n        width: maxX - minX,\n        height: maxY - minY\n      };\n    } else {\n      selfRect = {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0\n      };\n    }\n\n    if (!skipTransform) {\n      return this._transformedRect(selfRect, relativeTo);\n    }\n\n    return selfRect;\n  };\n\n  return Container;\n}(Node_1.Node);\n\nexports.Container = Container;\nFactory_1.Factory.addComponentsGetterSetter(Container, 'clip', ['x', 'y', 'width', 'height']);\nFactory_1.Factory.addGetterSetter(Container, 'clipX', undefined, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Container, 'clipY', undefined, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Container, 'clipWidth', undefined, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Container, 'clipHeight', undefined, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Container, 'clipFunc');\nUtil_1.Collection.mapMethods(Container);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"./Util\");\n\nvar Global_1 = require(\"./Global\");\n\nvar COMMA = ',',\n    OPEN_PAREN = '(',\n    CLOSE_PAREN = ')',\n    OPEN_PAREN_BRACKET = '([',\n    CLOSE_BRACKET_PAREN = '])',\n    SEMICOLON = ';',\n    DOUBLE_PAREN = '()',\n    EQUALS = '=',\n    CONTEXT_METHODS = ['arc', 'arcTo', 'beginPath', 'bezierCurveTo', 'clearRect', 'clip', 'closePath', 'createLinearGradient', 'createPattern', 'createRadialGradient', 'drawImage', 'ellipse', 'fill', 'fillText', 'getImageData', 'createImageData', 'lineTo', 'moveTo', 'putImageData', 'quadraticCurveTo', 'rect', 'restore', 'rotate', 'save', 'scale', 'setLineDash', 'setTransform', 'stroke', 'strokeText', 'transform', 'translate'];\nvar CONTEXT_PROPERTIES = ['fillStyle', 'strokeStyle', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY', 'lineCap', 'lineDashOffset', 'lineJoin', 'lineWidth', 'miterLimit', 'font', 'textAlign', 'textBaseline', 'globalAlpha', 'globalCompositeOperation', 'imageSmoothingEnabled'];\nvar traceArrMax = 100;\n\nvar Context = function () {\n  function Context(canvas) {\n    this.canvas = canvas;\n    this._context = canvas._canvas.getContext('2d');\n\n    if (Global_1.Konva.enableTrace) {\n      this.traceArr = [];\n\n      this._enableTrace();\n    }\n  }\n\n  Context.prototype.fillShape = function (shape) {\n    if (shape.getFillEnabled()) {\n      this._fill(shape);\n    }\n  };\n\n  Context.prototype._fill = function (shape) {};\n\n  Context.prototype.strokeShape = function (shape) {\n    if (shape.getStrokeEnabled()) {\n      this._stroke(shape);\n    }\n  };\n\n  Context.prototype._stroke = function (shape) {};\n\n  Context.prototype.fillStrokeShape = function (shape) {\n    if (shape.getFillEnabled()) {\n      this._fill(shape);\n    }\n\n    if (shape.getStrokeEnabled()) {\n      this._stroke(shape);\n    }\n  };\n\n  Context.prototype.getTrace = function (relaxed) {\n    var traceArr = this.traceArr,\n        len = traceArr.length,\n        str = '',\n        n,\n        trace,\n        method,\n        args;\n\n    for (n = 0; n < len; n++) {\n      trace = traceArr[n];\n      method = trace.method;\n\n      if (method) {\n        args = trace.args;\n        str += method;\n\n        if (relaxed) {\n          str += DOUBLE_PAREN;\n        } else {\n          if (Util_1.Util._isArray(args[0])) {\n            str += OPEN_PAREN_BRACKET + args.join(COMMA) + CLOSE_BRACKET_PAREN;\n          } else {\n            str += OPEN_PAREN + args.join(COMMA) + CLOSE_PAREN;\n          }\n        }\n      } else {\n        str += trace.property;\n\n        if (!relaxed) {\n          str += EQUALS + trace.val;\n        }\n      }\n\n      str += SEMICOLON;\n    }\n\n    return str;\n  };\n\n  Context.prototype.clearTrace = function () {\n    this.traceArr = [];\n  };\n\n  Context.prototype._trace = function (str) {\n    var traceArr = this.traceArr,\n        len;\n    traceArr.push(str);\n    len = traceArr.length;\n\n    if (len >= traceArrMax) {\n      traceArr.shift();\n    }\n  };\n\n  Context.prototype.reset = function () {\n    var pixelRatio = this.getCanvas().getPixelRatio();\n    this.setTransform(1 * pixelRatio, 0, 0, 1 * pixelRatio, 0, 0);\n  };\n\n  Context.prototype.getCanvas = function () {\n    return this.canvas;\n  };\n\n  Context.prototype.clear = function (bounds) {\n    var canvas = this.getCanvas();\n\n    if (bounds) {\n      this.clearRect(bounds.x || 0, bounds.y || 0, bounds.width || 0, bounds.height || 0);\n    } else {\n      this.clearRect(0, 0, canvas.getWidth() / canvas.pixelRatio, canvas.getHeight() / canvas.pixelRatio);\n    }\n  };\n\n  Context.prototype._applyLineCap = function (shape) {\n    var lineCap = shape.getLineCap();\n\n    if (lineCap) {\n      this.setAttr('lineCap', lineCap);\n    }\n  };\n\n  Context.prototype._applyOpacity = function (shape) {\n    var absOpacity = shape.getAbsoluteOpacity();\n\n    if (absOpacity !== 1) {\n      this.setAttr('globalAlpha', absOpacity);\n    }\n  };\n\n  Context.prototype._applyLineJoin = function (shape) {\n    var lineJoin = shape.getLineJoin();\n\n    if (lineJoin) {\n      this.setAttr('lineJoin', lineJoin);\n    }\n  };\n\n  Context.prototype.setAttr = function (attr, val) {\n    this._context[attr] = val;\n  };\n\n  Context.prototype.arc = function (a0, a1, a2, a3, a4, a5) {\n    this._context.arc(a0, a1, a2, a3, a4, a5);\n  };\n\n  Context.prototype.arcTo = function (a0, a1, a2, a3, a4, a5) {\n    this._context.arc(a0, a1, a2, a3, a4, a5);\n  };\n\n  Context.prototype.beginPath = function () {\n    this._context.beginPath();\n  };\n\n  Context.prototype.bezierCurveTo = function (a0, a1, a2, a3, a4, a5) {\n    this._context.bezierCurveTo(a0, a1, a2, a3, a4, a5);\n  };\n\n  Context.prototype.clearRect = function (a0, a1, a2, a3) {\n    this._context.clearRect(a0, a1, a2, a3);\n  };\n\n  Context.prototype.clip = function () {\n    this._context.clip();\n  };\n\n  Context.prototype.closePath = function () {\n    this._context.closePath();\n  };\n\n  Context.prototype.createImageData = function (a0, a1) {\n    var a = arguments;\n\n    if (a.length === 2) {\n      return this._context.createImageData(a0, a1);\n    } else if (a.length === 1) {\n      return this._context.createImageData(a0);\n    }\n  };\n\n  Context.prototype.createLinearGradient = function (a0, a1, a2, a3) {\n    return this._context.createLinearGradient(a0, a1, a2, a3);\n  };\n\n  Context.prototype.createPattern = function (a0, a1) {\n    return this._context.createPattern(a0, a1);\n  };\n\n  Context.prototype.createRadialGradient = function (a0, a1, a2, a3, a4, a5) {\n    return this._context.createRadialGradient(a0, a1, a2, a3, a4, a5);\n  };\n\n  Context.prototype.drawImage = function (a0, a1, a2, a3, a4, a5, a6, a7, a8) {\n    var a = arguments,\n        _context = this._context;\n\n    if (a.length === 3) {\n      _context.drawImage(a0, a1, a2);\n    } else if (a.length === 5) {\n      _context.drawImage(a0, a1, a2, a3, a4);\n    } else if (a.length === 9) {\n      _context.drawImage(a0, a1, a2, a3, a4, a5, a6, a7, a8);\n    }\n  };\n\n  Context.prototype.ellipse = function (a0, a1, a2, a3, a4, a5, a6, a7) {\n    this._context.ellipse(a0, a1, a2, a3, a4, a5, a6, a7);\n  };\n\n  Context.prototype.isPointInPath = function (x, y) {\n    return this._context.isPointInPath(x, y);\n  };\n\n  Context.prototype.fill = function () {\n    this._context.fill();\n  };\n\n  Context.prototype.fillRect = function (x, y, width, height) {\n    this._context.fillRect(x, y, width, height);\n  };\n\n  Context.prototype.strokeRect = function (x, y, width, height) {\n    this._context.strokeRect(x, y, width, height);\n  };\n\n  Context.prototype.fillText = function (a0, a1, a2) {\n    this._context.fillText(a0, a1, a2);\n  };\n\n  Context.prototype.measureText = function (text) {\n    return this._context.measureText(text);\n  };\n\n  Context.prototype.getImageData = function (a0, a1, a2, a3) {\n    return this._context.getImageData(a0, a1, a2, a3);\n  };\n\n  Context.prototype.lineTo = function (a0, a1) {\n    this._context.lineTo(a0, a1);\n  };\n\n  Context.prototype.moveTo = function (a0, a1) {\n    this._context.moveTo(a0, a1);\n  };\n\n  Context.prototype.rect = function (a0, a1, a2, a3) {\n    this._context.rect(a0, a1, a2, a3);\n  };\n\n  Context.prototype.putImageData = function (a0, a1, a2) {\n    this._context.putImageData(a0, a1, a2);\n  };\n\n  Context.prototype.quadraticCurveTo = function (a0, a1, a2, a3) {\n    this._context.quadraticCurveTo(a0, a1, a2, a3);\n  };\n\n  Context.prototype.restore = function () {\n    this._context.restore();\n  };\n\n  Context.prototype.rotate = function (a0) {\n    this._context.rotate(a0);\n  };\n\n  Context.prototype.save = function () {\n    this._context.save();\n  };\n\n  Context.prototype.scale = function (a0, a1) {\n    this._context.scale(a0, a1);\n  };\n\n  Context.prototype.setLineDash = function (a0) {\n    if (this._context.setLineDash) {\n      this._context.setLineDash(a0);\n    } else if ('mozDash' in this._context) {\n      this._context['mozDash'] = a0;\n    } else if ('webkitLineDash' in this._context) {\n      this._context['webkitLineDash'] = a0;\n    }\n  };\n\n  Context.prototype.getLineDash = function () {\n    return this._context.getLineDash();\n  };\n\n  Context.prototype.setTransform = function (a0, a1, a2, a3, a4, a5) {\n    this._context.setTransform(a0, a1, a2, a3, a4, a5);\n  };\n\n  Context.prototype.stroke = function () {\n    this._context.stroke();\n  };\n\n  Context.prototype.strokeText = function (a0, a1, a2, a3) {\n    this._context.strokeText(a0, a1, a2, a3);\n  };\n\n  Context.prototype.transform = function (a0, a1, a2, a3, a4, a5) {\n    this._context.transform(a0, a1, a2, a3, a4, a5);\n  };\n\n  Context.prototype.translate = function (a0, a1) {\n    this._context.translate(a0, a1);\n  };\n\n  Context.prototype._enableTrace = function () {\n    var that = this,\n        len = CONTEXT_METHODS.length,\n        _simplifyArray = Util_1.Util._simplifyArray,\n        origSetter = this.setAttr,\n        n,\n        args;\n\n    var func = function func(methodName) {\n      var origMethod = that[methodName],\n          ret;\n\n      that[methodName] = function () {\n        args = _simplifyArray(Array.prototype.slice.call(arguments, 0));\n        ret = origMethod.apply(that, arguments);\n\n        that._trace({\n          method: methodName,\n          args: args\n        });\n\n        return ret;\n      };\n    };\n\n    for (n = 0; n < len; n++) {\n      func(CONTEXT_METHODS[n]);\n    }\n\n    that.setAttr = function () {\n      origSetter.apply(that, arguments);\n      var prop = arguments[0];\n      var val = arguments[1];\n\n      if (prop === 'shadowOffsetX' || prop === 'shadowOffsetY' || prop === 'shadowBlur') {\n        val = val / this.canvas.getPixelRatio();\n      }\n\n      that._trace({\n        property: prop,\n        val: val\n      });\n    };\n  };\n\n  Context.prototype._applyGlobalCompositeOperation = function (node) {\n    var globalCompositeOperation = node.getGlobalCompositeOperation();\n\n    if (globalCompositeOperation !== 'source-over') {\n      this.setAttr('globalCompositeOperation', globalCompositeOperation);\n    }\n  };\n\n  return Context;\n}();\n\nexports.Context = Context;\nCONTEXT_PROPERTIES.forEach(function (prop) {\n  Object.defineProperty(Context.prototype, prop, {\n    get: function get() {\n      return this._context[prop];\n    },\n    set: function set(val) {\n      this._context[prop] = val;\n    }\n  });\n});\n\nvar SceneContext = function (_super) {\n  __extends(SceneContext, _super);\n\n  function SceneContext() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  SceneContext.prototype._fillColor = function (shape) {\n    var fill = shape.fill();\n    this.setAttr('fillStyle', fill);\n\n    shape._fillFunc(this);\n  };\n\n  SceneContext.prototype._fillPattern = function (shape) {\n    var fillPatternX = shape.getFillPatternX(),\n        fillPatternY = shape.getFillPatternY(),\n        fillPatternScaleX = shape.getFillPatternScaleX(),\n        fillPatternScaleY = shape.getFillPatternScaleY(),\n        fillPatternRotation = Global_1.Konva.getAngle(shape.getFillPatternRotation()),\n        fillPatternOffsetX = shape.getFillPatternOffsetX(),\n        fillPatternOffsetY = shape.getFillPatternOffsetY();\n\n    if (fillPatternX || fillPatternY) {\n      this.translate(fillPatternX || 0, fillPatternY || 0);\n    }\n\n    if (fillPatternRotation) {\n      this.rotate(fillPatternRotation);\n    }\n\n    if (fillPatternScaleX || fillPatternScaleY) {\n      this.scale(fillPatternScaleX, fillPatternScaleY);\n    }\n\n    if (fillPatternOffsetX || fillPatternOffsetY) {\n      this.translate(-1 * fillPatternOffsetX, -1 * fillPatternOffsetY);\n    }\n\n    this.setAttr('fillStyle', shape._getFillPattern());\n\n    shape._fillFunc(this);\n  };\n\n  SceneContext.prototype._fillLinearGradient = function (shape) {\n    var grd = shape._getLinearGradient();\n\n    if (grd) {\n      this.setAttr('fillStyle', grd);\n\n      shape._fillFunc(this);\n    }\n  };\n\n  SceneContext.prototype._fillRadialGradient = function (shape) {\n    var grd = shape._getRadialGradient();\n\n    if (grd) {\n      this.setAttr('fillStyle', grd);\n\n      shape._fillFunc(this);\n    }\n  };\n\n  SceneContext.prototype._fill = function (shape) {\n    var hasColor = shape.fill(),\n        fillPriority = shape.getFillPriority();\n\n    if (hasColor && fillPriority === 'color') {\n      this._fillColor(shape);\n\n      return;\n    }\n\n    var hasPattern = shape.getFillPatternImage();\n\n    if (hasPattern && fillPriority === 'pattern') {\n      this._fillPattern(shape);\n\n      return;\n    }\n\n    var hasLinearGradient = shape.getFillLinearGradientColorStops();\n\n    if (hasLinearGradient && fillPriority === 'linear-gradient') {\n      this._fillLinearGradient(shape);\n\n      return;\n    }\n\n    var hasRadialGradient = shape.getFillRadialGradientColorStops();\n\n    if (hasRadialGradient && fillPriority === 'radial-gradient') {\n      this._fillRadialGradient(shape);\n\n      return;\n    }\n\n    if (hasColor) {\n      this._fillColor(shape);\n    } else if (hasPattern) {\n      this._fillPattern(shape);\n    } else if (hasLinearGradient) {\n      this._fillLinearGradient(shape);\n    } else if (hasRadialGradient) {\n      this._fillRadialGradient(shape);\n    }\n  };\n\n  SceneContext.prototype._strokeLinearGradient = function (shape) {\n    var start = shape.getStrokeLinearGradientStartPoint(),\n        end = shape.getStrokeLinearGradientEndPoint(),\n        colorStops = shape.getStrokeLinearGradientColorStops(),\n        grd = this.createLinearGradient(start.x, start.y, end.x, end.y);\n\n    if (colorStops) {\n      for (var n = 0; n < colorStops.length; n += 2) {\n        grd.addColorStop(colorStops[n], colorStops[n + 1]);\n      }\n\n      this.setAttr('strokeStyle', grd);\n    }\n  };\n\n  SceneContext.prototype._stroke = function (shape) {\n    var dash = shape.dash(),\n        strokeScaleEnabled = shape.getStrokeScaleEnabled();\n\n    if (shape.hasStroke()) {\n      if (!strokeScaleEnabled) {\n        this.save();\n        var pixelRatio = this.getCanvas().getPixelRatio();\n        this.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n      }\n\n      this._applyLineCap(shape);\n\n      if (dash && shape.dashEnabled()) {\n        this.setLineDash(dash);\n        this.setAttr('lineDashOffset', shape.dashOffset());\n      }\n\n      this.setAttr('lineWidth', shape.strokeWidth());\n\n      if (!shape.getShadowForStrokeEnabled()) {\n        this.setAttr('shadowColor', 'rgba(0,0,0,0)');\n      }\n\n      var hasLinearGradient = shape.getStrokeLinearGradientColorStops();\n\n      if (hasLinearGradient) {\n        this._strokeLinearGradient(shape);\n      } else {\n        this.setAttr('strokeStyle', shape.stroke());\n      }\n\n      shape._strokeFunc(this);\n\n      if (!strokeScaleEnabled) {\n        this.restore();\n      }\n    }\n  };\n\n  SceneContext.prototype._applyShadow = function (shape) {\n    var util = Util_1.Util,\n        color = util.get(shape.getShadowRGBA(), 'black'),\n        blur = util.get(shape.getShadowBlur(), 5),\n        offset = util.get(shape.getShadowOffset(), {\n      x: 0,\n      y: 0\n    }),\n        scale = shape.getAbsoluteScale(),\n        ratio = this.canvas.getPixelRatio(),\n        scaleX = scale.x * ratio,\n        scaleY = scale.y * ratio;\n    this.setAttr('shadowColor', color);\n    this.setAttr('shadowBlur', blur * Math.min(Math.abs(scaleX), Math.abs(scaleY)));\n    this.setAttr('shadowOffsetX', offset.x * scaleX);\n    this.setAttr('shadowOffsetY', offset.y * scaleY);\n  };\n\n  return SceneContext;\n}(Context);\n\nexports.SceneContext = SceneContext;\n\nvar HitContext = function (_super) {\n  __extends(HitContext, _super);\n\n  function HitContext() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  HitContext.prototype._fill = function (shape) {\n    this.save();\n    this.setAttr('fillStyle', shape.colorKey);\n\n    shape._fillFuncHit(this);\n\n    this.restore();\n  };\n\n  HitContext.prototype._stroke = function (shape) {\n    if (shape.hasStroke() && shape.hitStrokeWidth()) {\n      var strokeScaleEnabled = shape.getStrokeScaleEnabled();\n\n      if (!strokeScaleEnabled) {\n        this.save();\n        var pixelRatio = this.getCanvas().getPixelRatio();\n        this.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n      }\n\n      this._applyLineCap(shape);\n\n      var hitStrokeWidth = shape.hitStrokeWidth();\n      var strokeWidth = hitStrokeWidth === 'auto' ? shape.strokeWidth() : hitStrokeWidth;\n      this.setAttr('lineWidth', strokeWidth);\n      this.setAttr('strokeStyle', shape.colorKey);\n\n      shape._strokeFuncHit(this);\n\n      if (!strokeScaleEnabled) {\n        this.restore();\n      }\n    }\n  };\n\n  return HitContext;\n}(Context);\n\nexports.HitContext = HitContext;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Animation_1 = require(\"./Animation\");\n\nvar Global_1 = require(\"./Global\");\n\nexports.DD = {\n  startPointerPos: {\n    x: 0,\n    y: 0\n  },\n  anim: new Animation_1.Animation(function () {\n    var b = this.dirty;\n    this.dirty = false;\n    return b;\n  }),\n  isDragging: false,\n  justDragged: false,\n  offset: {\n    x: 0,\n    y: 0\n  },\n  node: null,\n  _drag: function _drag(evt) {\n    var node = exports.DD.node;\n\n    if (node) {\n      if (!exports.DD.isDragging) {\n        var pos = node.getStage().getPointerPosition();\n\n        if (!pos) {\n          node.getStage().setPointersPositions(evt);\n          pos = node.getStage().getPointerPosition();\n        }\n\n        var dragDistance = node.dragDistance();\n        var distance = Math.max(Math.abs(pos.x - exports.DD.startPointerPos.x), Math.abs(pos.y - exports.DD.startPointerPos.y));\n\n        if (distance < dragDistance) {\n          return;\n        }\n      }\n\n      node.getStage().setPointersPositions(evt);\n\n      if (!exports.DD.isDragging) {\n        exports.DD.isDragging = true;\n        node.fire('dragstart', {\n          type: 'dragstart',\n          target: node,\n          evt: evt\n        }, true);\n\n        if (!node.isDragging()) {\n          return;\n        }\n      }\n\n      node._setDragPosition(evt);\n\n      node.fire('dragmove', {\n        type: 'dragmove',\n        target: node,\n        evt: evt\n      }, true);\n    }\n  },\n  _endDragBefore: function _endDragBefore(evt) {\n    var node = exports.DD.node;\n\n    if (node) {\n      exports.DD.anim.stop();\n\n      if (exports.DD.isDragging) {\n        exports.DD.isDragging = false;\n        exports.DD.justDragged = true;\n        Global_1.Konva.listenClickTap = false;\n\n        if (evt) {\n          evt.dragEndNode = node;\n        }\n      }\n\n      exports.DD.node = null;\n      var drawNode = node.getLayer() || node instanceof Global_1.Konva['Stage'] && node;\n\n      if (drawNode) {\n        drawNode.draw();\n      }\n    }\n  },\n  _endDragAfter: function _endDragAfter(evt) {\n    evt = evt || {};\n    var dragEndNode = evt.dragEndNode;\n\n    if (evt && dragEndNode) {\n      dragEndNode.fire('dragend', {\n        type: 'dragend',\n        target: dragEndNode,\n        evt: evt\n      }, true);\n    }\n  }\n};\n\nif (Global_1.Konva.isBrowser) {\n  window.addEventListener('mouseup', exports.DD._endDragBefore, true);\n  window.addEventListener('touchend', exports.DD._endDragBefore, true);\n  window.addEventListener('mousemove', exports.DD._drag);\n  window.addEventListener('touchmove', exports.DD._drag);\n  window.addEventListener('mouseup', exports.DD._endDragAfter, false);\n  window.addEventListener('touchend', exports.DD._endDragAfter, false);\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"./Util\");\n\nvar Validators_1 = require(\"./Validators\");\n\nvar GET = 'get',\n    SET = 'set';\nexports.Factory = {\n  addGetterSetter: function addGetterSetter(constructor, attr, def, validator, after) {\n    this.addGetter(constructor, attr, def);\n    this.addSetter(constructor, attr, validator, after);\n    this.addOverloadedGetterSetter(constructor, attr);\n  },\n  addGetter: function addGetter(constructor, attr, def) {\n    var method = GET + Util_1.Util._capitalize(attr);\n\n    constructor.prototype[method] = constructor.prototype[method] || function () {\n      var val = this.attrs[attr];\n      return val === undefined ? def : val;\n    };\n  },\n  addSetter: function addSetter(constructor, attr, validator, after) {\n    var method = SET + Util_1.Util._capitalize(attr);\n\n    if (!constructor.prototype[method]) {\n      exports.Factory.overWriteSetter(constructor, attr, validator, after);\n    }\n  },\n  overWriteSetter: function overWriteSetter(constructor, attr, validator, after) {\n    var method = SET + Util_1.Util._capitalize(attr);\n\n    constructor.prototype[method] = function (val) {\n      if (validator && val !== undefined && val !== null) {\n        val = validator.call(this, val, attr);\n      }\n\n      this._setAttr(attr, val);\n\n      if (after) {\n        after.call(this);\n      }\n\n      return this;\n    };\n  },\n  addComponentsGetterSetter: function addComponentsGetterSetter(constructor, attr, components, validator, after) {\n    var len = components.length,\n        capitalize = Util_1.Util._capitalize,\n        getter = GET + capitalize(attr),\n        setter = SET + capitalize(attr),\n        n,\n        component;\n\n    constructor.prototype[getter] = function () {\n      var ret = {};\n\n      for (n = 0; n < len; n++) {\n        component = components[n];\n        ret[component] = this.getAttr(attr + capitalize(component));\n      }\n\n      return ret;\n    };\n\n    var basicValidator = Validators_1.getComponentValidator(components);\n\n    constructor.prototype[setter] = function (val) {\n      var oldVal = this.attrs[attr],\n          key;\n\n      if (validator) {\n        val = validator.call(this, val);\n      }\n\n      if (basicValidator) {\n        basicValidator.call(this, val, attr);\n      }\n\n      for (key in val) {\n        if (!val.hasOwnProperty(key)) {\n          continue;\n        }\n\n        this._setAttr(attr + capitalize(key), val[key]);\n      }\n\n      this._fireChangeEvent(attr, oldVal, val);\n\n      if (after) {\n        after.call(this);\n      }\n\n      return this;\n    };\n\n    this.addOverloadedGetterSetter(constructor, attr);\n  },\n  addOverloadedGetterSetter: function addOverloadedGetterSetter(constructor, attr) {\n    var capitalizedAttr = Util_1.Util._capitalize(attr),\n        setter = SET + capitalizedAttr,\n        getter = GET + capitalizedAttr;\n\n    constructor.prototype[attr] = function () {\n      if (arguments.length) {\n        this[setter](arguments[0]);\n        return this;\n      }\n\n      return this[getter]();\n    };\n  },\n  addDeprecatedGetterSetter: function addDeprecatedGetterSetter(constructor, attr, def, validator) {\n    Util_1.Util.error('Adding deprecated ' + attr);\n\n    var method = GET + Util_1.Util._capitalize(attr);\n\n    var message = attr + ' property is deprecated and will be removed soon. Look at Konva change log for more information.';\n\n    constructor.prototype[method] = function () {\n      Util_1.Util.error(message);\n      var val = this.attrs[attr];\n      return val === undefined ? def : val;\n    };\n\n    this.addSetter(constructor, attr, validator, function () {\n      Util_1.Util.error(message);\n    });\n    this.addOverloadedGetterSetter(constructor, attr);\n  },\n  backCompat: function backCompat(constructor, methods) {\n    Util_1.Util.each(methods, function (oldMethodName, newMethodName) {\n      var method = constructor.prototype[newMethodName];\n\n      var oldGetter = GET + Util_1.Util._capitalize(oldMethodName);\n\n      var oldSetter = SET + Util_1.Util._capitalize(oldMethodName);\n\n      function deprecated() {\n        method.apply(this, arguments);\n        Util_1.Util.error('\"' + oldMethodName + '\" method is deprecated and will be removed soon. Use \"\"' + newMethodName + '\" instead.');\n      }\n\n      constructor.prototype[oldMethodName] = deprecated;\n      constructor.prototype[oldGetter] = deprecated;\n      constructor.prototype[oldSetter] = deprecated;\n    });\n  },\n  afterSetFilter: function afterSetFilter() {\n    this._filterUpToDate = false;\n  }\n};","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"./Util\");\n\nvar Container_1 = require(\"./Container\");\n\nvar BaseLayer_1 = require(\"./BaseLayer\");\n\nvar Global_1 = require(\"./Global\");\n\nvar FastLayer = function (_super) {\n  __extends(FastLayer, _super);\n\n  function FastLayer() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  FastLayer.prototype._validateAdd = function (child) {\n    var type = child.getType();\n\n    if (type !== 'Shape') {\n      Util_1.Util.throw('You may only add shapes to a fast layer.');\n    }\n  };\n\n  FastLayer.prototype._setCanvasSize = function (width, height) {\n    this.canvas.setSize(width, height);\n\n    this._checkSmooth();\n  };\n\n  FastLayer.prototype.hitGraphEnabled = function () {\n    return false;\n  };\n\n  FastLayer.prototype.drawScene = function (can) {\n    var layer = this.getLayer(),\n        canvas = can || layer && layer.getCanvas();\n\n    if (this.clearBeforeDraw()) {\n      canvas.getContext().clear();\n    }\n\n    Container_1.Container.prototype.drawScene.call(this, canvas);\n    return this;\n  };\n\n  FastLayer.prototype.draw = function () {\n    this.drawScene();\n    return this;\n  };\n\n  return FastLayer;\n}(BaseLayer_1.BaseLayer);\n\nexports.FastLayer = FastLayer;\nFastLayer.prototype.nodeType = 'FastLayer';\n\nGlobal_1._registerNode(FastLayer);\n\nUtil_1.Collection.mapMethods(FastLayer);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar PI_OVER_180 = Math.PI / 180;\n\nfunction detectBrowser() {\n  return typeof window !== 'undefined' && ({}.toString.call(window) === '[object Window]' || {}.toString.call(window) === '[object global]');\n}\n\nvar _detectIE = function _detectIE(ua) {\n  var msie = ua.indexOf('msie ');\n\n  if (msie > 0) {\n    return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\n  }\n\n  var trident = ua.indexOf('trident/');\n\n  if (trident > 0) {\n    var rv = ua.indexOf('rv:');\n    return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);\n  }\n\n  var edge = ua.indexOf('edge/');\n\n  if (edge > 0) {\n    return parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);\n  }\n\n  return false;\n};\n\nexports._parseUA = function (userAgent) {\n  var ua = userAgent.toLowerCase(),\n      match = /(chrome)[ /]([\\w.]+)/.exec(ua) || /(webkit)[ /]([\\w.]+)/.exec(ua) || /(opera)(?:.*version|)[ /]([\\w.]+)/.exec(ua) || /(msie) ([\\w.]+)/.exec(ua) || ua.indexOf('compatible') < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(ua) || [],\n      mobile = !!userAgent.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i),\n      ieMobile = !!userAgent.match(/IEMobile/i);\n  return {\n    browser: match[1] || '',\n    version: match[2] || '0',\n    isIE: _detectIE(ua),\n    mobile: mobile,\n    ieMobile: ieMobile\n  };\n};\n\nexports.glob = typeof global !== 'undefined' ? global : typeof window !== 'undefined' ? window : typeof WorkerGlobalScope !== 'undefined' ? self : {};\nexports.Konva = {\n  _global: exports.glob,\n  version: '3.4.1',\n  isBrowser: detectBrowser(),\n  isUnminified: /param/.test(function (param) {}.toString()),\n  dblClickWindow: 400,\n  getAngle: function getAngle(angle) {\n    return exports.Konva.angleDeg ? angle * PI_OVER_180 : angle;\n  },\n  enableTrace: false,\n  _pointerEventsEnabled: false,\n  listenClickTap: false,\n  inDblClickWindow: false,\n  pixelRatio: undefined,\n  dragDistance: 3,\n  angleDeg: true,\n  showWarnings: true,\n  dragButtons: [0, 1],\n  isDragging: function isDragging() {\n    return exports.Konva['DD'].isDragging;\n  },\n  isDragReady: function isDragReady() {\n    return !!exports.Konva['DD'].node;\n  },\n  UA: exports._parseUA(exports.glob.navigator && exports.glob.navigator.userAgent || ''),\n  document: exports.glob.document,\n  _injectGlobal: function _injectGlobal(Konva) {\n    exports.glob.Konva = Konva;\n  },\n  _parseUA: exports._parseUA\n};\nexports._NODES_REGISTRY = {};\n\nexports._registerNode = function (NodeClass) {\n  exports._NODES_REGISTRY[NodeClass.prototype.getClassName()] = NodeClass;\n  exports.Konva[NodeClass.prototype.getClassName()] = NodeClass;\n};","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"./Util\");\n\nvar Container_1 = require(\"./Container\");\n\nvar Global_1 = require(\"./Global\");\n\nvar Group = function (_super) {\n  __extends(Group, _super);\n\n  function Group() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Group.prototype._validateAdd = function (child) {\n    var type = child.getType();\n\n    if (type !== 'Group' && type !== 'Shape') {\n      Util_1.Util.throw('You may only add groups and shapes to groups.');\n    }\n  };\n\n  return Group;\n}(Container_1.Container);\n\nexports.Group = Group;\nGroup.prototype.nodeType = 'Group';\n\nGlobal_1._registerNode(Group);\n\nUtil_1.Collection.mapMethods(Group);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"./Util\");\n\nvar Container_1 = require(\"./Container\");\n\nvar Factory_1 = require(\"./Factory\");\n\nvar BaseLayer_1 = require(\"./BaseLayer\");\n\nvar Canvas_1 = require(\"./Canvas\");\n\nvar Shape_1 = require(\"./Shape\");\n\nvar Validators_1 = require(\"./Validators\");\n\nvar Global_1 = require(\"./Global\");\n\nvar HASH = '#',\n    BEFORE_DRAW = 'beforeDraw',\n    DRAW = 'draw',\n    INTERSECTION_OFFSETS = [{\n  x: 0,\n  y: 0\n}, {\n  x: -1,\n  y: -1\n}, {\n  x: 1,\n  y: -1\n}, {\n  x: 1,\n  y: 1\n}, {\n  x: -1,\n  y: 1\n}],\n    INTERSECTION_OFFSETS_LEN = INTERSECTION_OFFSETS.length;\n\nvar Layer = function (_super) {\n  __extends(Layer, _super);\n\n  function Layer() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.hitCanvas = new Canvas_1.HitCanvas({\n      pixelRatio: 1\n    });\n    return _this;\n  }\n\n  Layer.prototype._setCanvasSize = function (width, height) {\n    this.canvas.setSize(width, height);\n    this.hitCanvas.setSize(width, height);\n\n    this._checkSmooth();\n  };\n\n  Layer.prototype._validateAdd = function (child) {\n    var type = child.getType();\n\n    if (type !== 'Group' && type !== 'Shape') {\n      Util_1.Util.throw('You may only add groups and shapes to a layer.');\n    }\n  };\n\n  Layer.prototype.getIntersection = function (pos, selector) {\n    var obj, i, intersectionOffset, shape;\n\n    if (!this.hitGraphEnabled() || !this.isVisible()) {\n      return null;\n    }\n\n    var spiralSearchDistance = 1;\n    var continueSearch = false;\n\n    while (true) {\n      for (i = 0; i < INTERSECTION_OFFSETS_LEN; i++) {\n        intersectionOffset = INTERSECTION_OFFSETS[i];\n        obj = this._getIntersection({\n          x: pos.x + intersectionOffset.x * spiralSearchDistance,\n          y: pos.y + intersectionOffset.y * spiralSearchDistance\n        });\n        shape = obj.shape;\n\n        if (shape && selector) {\n          return shape.findAncestor(selector, true);\n        } else if (shape) {\n          return shape;\n        }\n\n        continueSearch = !!obj.antialiased;\n\n        if (!obj.antialiased) {\n          break;\n        }\n      }\n\n      if (continueSearch) {\n        spiralSearchDistance += 1;\n      } else {\n        return null;\n      }\n    }\n  };\n\n  Layer.prototype._getIntersection = function (pos) {\n    var ratio = this.hitCanvas.pixelRatio;\n    var p = this.hitCanvas.context.getImageData(Math.round(pos.x * ratio), Math.round(pos.y * ratio), 1, 1).data,\n        p3 = p[3],\n        colorKey,\n        shape;\n\n    if (p3 === 255) {\n      colorKey = Util_1.Util._rgbToHex(p[0], p[1], p[2]);\n      shape = Shape_1.shapes[HASH + colorKey];\n\n      if (shape) {\n        return {\n          shape: shape\n        };\n      }\n\n      return {\n        antialiased: true\n      };\n    } else if (p3 > 0) {\n      return {\n        antialiased: true\n      };\n    }\n\n    return {};\n  };\n\n  Layer.prototype.drawScene = function (can, top) {\n    var layer = this.getLayer(),\n        canvas = can || layer && layer.getCanvas();\n\n    this._fire(BEFORE_DRAW, {\n      node: this\n    });\n\n    if (this.clearBeforeDraw()) {\n      canvas.getContext().clear();\n    }\n\n    Container_1.Container.prototype.drawScene.call(this, canvas, top);\n\n    this._fire(DRAW, {\n      node: this\n    });\n\n    return this;\n  };\n\n  Layer.prototype.drawHit = function (can, top) {\n    var layer = this.getLayer(),\n        canvas = can || layer && layer.hitCanvas;\n\n    if (layer && layer.clearBeforeDraw()) {\n      layer.getHitCanvas().getContext().clear();\n    }\n\n    Container_1.Container.prototype.drawHit.call(this, canvas, top);\n    return this;\n  };\n\n  Layer.prototype.clear = function (bounds) {\n    BaseLayer_1.BaseLayer.prototype.clear.call(this, bounds);\n    this.getHitCanvas().getContext().clear(bounds);\n    return this;\n  };\n\n  Layer.prototype.enableHitGraph = function () {\n    this.hitGraphEnabled(true);\n    return this;\n  };\n\n  Layer.prototype.disableHitGraph = function () {\n    this.hitGraphEnabled(false);\n    return this;\n  };\n\n  Layer.prototype.toggleHitCanvas = function () {\n    if (!this.parent) {\n      return;\n    }\n\n    var parent = this.parent;\n    var added = !!this.hitCanvas._canvas.parentNode;\n\n    if (added) {\n      parent.content.removeChild(this.hitCanvas._canvas);\n    } else {\n      parent.content.appendChild(this.hitCanvas._canvas);\n    }\n  };\n\n  Layer.prototype.setSize = function (_a) {\n    var width = _a.width,\n        height = _a.height;\n\n    _super.prototype.setSize.call(this, {\n      width: width,\n      height: height\n    });\n\n    this.hitCanvas.setSize(width, height);\n    return this;\n  };\n\n  return Layer;\n}(BaseLayer_1.BaseLayer);\n\nexports.Layer = Layer;\nLayer.prototype.nodeType = 'Layer';\n\nGlobal_1._registerNode(Layer);\n\nFactory_1.Factory.addGetterSetter(Layer, 'hitGraphEnabled', true, Validators_1.getBooleanValidator());\nUtil_1.Collection.mapMethods(Layer);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"./Util\");\n\nvar Factory_1 = require(\"./Factory\");\n\nvar Canvas_1 = require(\"./Canvas\");\n\nvar Global_1 = require(\"./Global\");\n\nvar DragAndDrop_1 = require(\"./DragAndDrop\");\n\nvar Validators_1 = require(\"./Validators\");\n\nexports.ids = {};\nexports.names = {};\n\nvar _addId = function _addId(node, id) {\n  if (!id) {\n    return;\n  }\n\n  exports.ids[id] = node;\n};\n\nexports._removeId = function (id, node) {\n  if (!id) {\n    return;\n  }\n\n  if (exports.ids[id] !== node) {\n    return;\n  }\n\n  delete exports.ids[id];\n};\n\nexports._addName = function (node, name) {\n  if (name) {\n    if (!exports.names[name]) {\n      exports.names[name] = [];\n    }\n\n    exports.names[name].push(node);\n  }\n};\n\nexports._removeName = function (name, _id) {\n  if (!name) {\n    return;\n  }\n\n  var nodes = exports.names[name];\n\n  if (!nodes) {\n    return;\n  }\n\n  for (var n = 0; n < nodes.length; n++) {\n    var no = nodes[n];\n\n    if (no._id === _id) {\n      nodes.splice(n, 1);\n    }\n  }\n\n  if (nodes.length === 0) {\n    delete exports.names[name];\n  }\n};\n\nvar ABSOLUTE_OPACITY = 'absoluteOpacity',\n    ABSOLUTE_TRANSFORM = 'absoluteTransform',\n    ABSOLUTE_SCALE = 'absoluteScale',\n    CANVAS = 'canvas',\n    CHANGE = 'Change',\n    CHILDREN = 'children',\n    KONVA = 'konva',\n    LISTENING = 'listening',\n    MOUSEENTER = 'mouseenter',\n    MOUSELEAVE = 'mouseleave',\n    NAME = 'name',\n    SET = 'set',\n    SHAPE = 'Shape',\n    SPACE = ' ',\n    STAGE = 'stage',\n    TRANSFORM = 'transform',\n    UPPER_STAGE = 'Stage',\n    VISIBLE = 'visible',\n    CLONE_BLACK_LIST = ['id'],\n    TRANSFORM_CHANGE_STR = ['xChange.konva', 'yChange.konva', 'scaleXChange.konva', 'scaleYChange.konva', 'skewXChange.konva', 'skewYChange.konva', 'rotationChange.konva', 'offsetXChange.konva', 'offsetYChange.konva', 'transformsEnabledChange.konva'].join(SPACE),\n    SCALE_CHANGE_STR = ['scaleXChange.konva', 'scaleYChange.konva'].join(SPACE);\nvar emptyChildren = new Util_1.Collection();\nvar idCounter = 1;\n\nvar Node = function () {\n  function Node(config) {\n    var _this = this;\n\n    this._id = idCounter++;\n    this.eventListeners = {};\n    this.attrs = {};\n    this.index = 0;\n    this.parent = null;\n    this._cache = new Map();\n    this._lastPos = null;\n    this._filterUpToDate = false;\n    this._isUnderCache = false;\n    this.children = emptyChildren;\n    this.setAttrs(config);\n    this.on(TRANSFORM_CHANGE_STR, function () {\n      _this._clearCache(TRANSFORM);\n\n      _this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);\n    });\n    this.on(SCALE_CHANGE_STR, function () {\n      _this._clearSelfAndDescendantCache(ABSOLUTE_SCALE);\n    });\n    this.on('visibleChange.konva', function () {\n      _this._clearSelfAndDescendantCache(VISIBLE);\n    });\n    this.on('listeningChange.konva', function () {\n      _this._clearSelfAndDescendantCache(LISTENING);\n    });\n    this.on('opacityChange.konva', function () {\n      _this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY);\n    });\n  }\n\n  Node.prototype.hasChildren = function () {\n    return false;\n  };\n\n  Node.prototype.getChildren = function () {\n    return emptyChildren;\n  };\n\n  Node.prototype._clearCache = function (attr) {\n    if (attr) {\n      this._cache.delete(attr);\n    } else {\n      this._cache.clear();\n    }\n  };\n\n  Node.prototype._getCache = function (attr, privateGetter) {\n    var cache = this._cache.get(attr);\n\n    if (cache === undefined) {\n      cache = privateGetter.call(this);\n\n      this._cache.set(attr, cache);\n    }\n\n    return cache;\n  };\n\n  Node.prototype._getCanvasCache = function () {\n    return this._cache.get(CANVAS);\n  };\n\n  Node.prototype._clearSelfAndDescendantCache = function (attr) {\n    this._clearCache(attr);\n\n    if (this._getCanvasCache()) {\n      return;\n    }\n\n    if (this.children) {\n      this.children.each(function (node) {\n        node._clearSelfAndDescendantCache(attr);\n      });\n    }\n  };\n\n  Node.prototype.clearCache = function () {\n    this._cache.delete(CANVAS);\n\n    this._clearSelfAndDescendantCache();\n\n    return this;\n  };\n\n  Node.prototype.cache = function (config) {\n    var conf = config || {};\n    var rect = {};\n\n    if (conf.x === undefined || conf.y === undefined || conf.width === undefined || conf.height === undefined) {\n      rect = this.getClientRect({\n        skipTransform: true,\n        relativeTo: this.getParent()\n      });\n    }\n\n    var width = conf.width || rect.width,\n        height = conf.height || rect.height,\n        pixelRatio = conf.pixelRatio,\n        x = conf.x === undefined ? rect.x : conf.x,\n        y = conf.y === undefined ? rect.y : conf.y,\n        offset = conf.offset || 0,\n        drawBorder = conf.drawBorder || false;\n\n    if (!width || !height) {\n      Util_1.Util.error('Can not cache the node. Width or height of the node equals 0. Caching is skipped.');\n      return;\n    }\n\n    width += offset * 2;\n    height += offset * 2;\n    x -= offset;\n    y -= offset;\n    var cachedSceneCanvas = new Canvas_1.SceneCanvas({\n      pixelRatio: pixelRatio,\n      width: width,\n      height: height\n    }),\n        cachedFilterCanvas = new Canvas_1.SceneCanvas({\n      pixelRatio: pixelRatio,\n      width: width,\n      height: height\n    }),\n        cachedHitCanvas = new Canvas_1.HitCanvas({\n      pixelRatio: 1,\n      width: width,\n      height: height\n    }),\n        sceneContext = cachedSceneCanvas.getContext(),\n        hitContext = cachedHitCanvas.getContext();\n    cachedHitCanvas.isCache = true;\n\n    this._cache.delete('canvas');\n\n    this._filterUpToDate = false;\n\n    if (conf.imageSmoothingEnabled === false) {\n      cachedSceneCanvas.getContext()._context.imageSmoothingEnabled = false;\n      cachedFilterCanvas.getContext()._context.imageSmoothingEnabled = false;\n      cachedHitCanvas.getContext()._context.imageSmoothingEnabled = false;\n    }\n\n    sceneContext.save();\n    hitContext.save();\n    sceneContext.translate(-x, -y);\n    hitContext.translate(-x, -y);\n    this._isUnderCache = true;\n\n    this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY);\n\n    this._clearSelfAndDescendantCache(ABSOLUTE_SCALE);\n\n    this.drawScene(cachedSceneCanvas, this, true);\n    this.drawHit(cachedHitCanvas, this, true);\n    this._isUnderCache = false;\n    sceneContext.restore();\n    hitContext.restore();\n\n    if (drawBorder) {\n      sceneContext.save();\n      sceneContext.beginPath();\n      sceneContext.rect(0, 0, width, height);\n      sceneContext.closePath();\n      sceneContext.setAttr('strokeStyle', 'red');\n      sceneContext.setAttr('lineWidth', 5);\n      sceneContext.stroke();\n      sceneContext.restore();\n    }\n\n    this._cache.set(CANVAS, {\n      scene: cachedSceneCanvas,\n      filter: cachedFilterCanvas,\n      hit: cachedHitCanvas,\n      x: x,\n      y: y\n    });\n\n    return this;\n  };\n\n  Node.prototype.getClientRect = function (config) {\n    throw new Error('abstract \"getClientRect\" method call');\n  };\n\n  Node.prototype._transformedRect = function (rect, top) {\n    var points = [{\n      x: rect.x,\n      y: rect.y\n    }, {\n      x: rect.x + rect.width,\n      y: rect.y\n    }, {\n      x: rect.x + rect.width,\n      y: rect.y + rect.height\n    }, {\n      x: rect.x,\n      y: rect.y + rect.height\n    }];\n    var minX, minY, maxX, maxY;\n    var trans = this.getAbsoluteTransform(top);\n    points.forEach(function (point) {\n      var transformed = trans.point(point);\n\n      if (minX === undefined) {\n        minX = maxX = transformed.x;\n        minY = maxY = transformed.y;\n      }\n\n      minX = Math.min(minX, transformed.x);\n      minY = Math.min(minY, transformed.y);\n      maxX = Math.max(maxX, transformed.x);\n      maxY = Math.max(maxY, transformed.y);\n    });\n    return {\n      x: minX,\n      y: minY,\n      width: maxX - minX,\n      height: maxY - minY\n    };\n  };\n\n  Node.prototype._drawCachedSceneCanvas = function (context) {\n    context.save();\n\n    context._applyOpacity(this);\n\n    context._applyGlobalCompositeOperation(this);\n\n    var canvasCache = this._getCanvasCache();\n\n    context.translate(canvasCache.x, canvasCache.y);\n\n    var cacheCanvas = this._getCachedSceneCanvas();\n\n    var ratio = cacheCanvas.pixelRatio;\n    context.drawImage(cacheCanvas._canvas, 0, 0, cacheCanvas.width / ratio, cacheCanvas.height / ratio);\n    context.restore();\n  };\n\n  Node.prototype._drawCachedHitCanvas = function (context) {\n    var canvasCache = this._getCanvasCache(),\n        hitCanvas = canvasCache.hit;\n\n    context.save();\n\n    context._applyGlobalCompositeOperation(this);\n\n    context.translate(canvasCache.x, canvasCache.y);\n    context.drawImage(hitCanvas._canvas, 0, 0);\n    context.restore();\n  };\n\n  Node.prototype._getCachedSceneCanvas = function () {\n    var filters = this.filters(),\n        cachedCanvas = this._getCanvasCache(),\n        sceneCanvas = cachedCanvas.scene,\n        filterCanvas = cachedCanvas.filter,\n        filterContext = filterCanvas.getContext(),\n        len,\n        imageData,\n        n,\n        filter;\n\n    if (filters) {\n      if (!this._filterUpToDate) {\n        var ratio = sceneCanvas.pixelRatio;\n\n        try {\n          len = filters.length;\n          filterContext.clear();\n          filterContext.drawImage(sceneCanvas._canvas, 0, 0, sceneCanvas.getWidth() / ratio, sceneCanvas.getHeight() / ratio);\n          imageData = filterContext.getImageData(0, 0, filterCanvas.getWidth(), filterCanvas.getHeight());\n\n          for (n = 0; n < len; n++) {\n            filter = filters[n];\n\n            if (typeof filter !== 'function') {\n              Util_1.Util.error('Filter should be type of function, but got ' + typeof filter + ' insted. Please check correct filters');\n              continue;\n            }\n\n            filter.call(this, imageData);\n            filterContext.putImageData(imageData, 0, 0);\n          }\n        } catch (e) {\n          Util_1.Util.error('Unable to apply filter. ' + e.message);\n        }\n\n        this._filterUpToDate = true;\n      }\n\n      return filterCanvas;\n    }\n\n    return sceneCanvas;\n  };\n\n  Node.prototype.on = function (evtStr, handler) {\n    if (arguments.length === 3) {\n      return this._delegate.apply(this, arguments);\n    }\n\n    var events = evtStr.split(SPACE),\n        len = events.length,\n        n,\n        event,\n        parts,\n        baseEvent,\n        name;\n\n    for (n = 0; n < len; n++) {\n      event = events[n];\n      parts = event.split('.');\n      baseEvent = parts[0];\n      name = parts[1] || '';\n\n      if (!this.eventListeners[baseEvent]) {\n        this.eventListeners[baseEvent] = [];\n      }\n\n      this.eventListeners[baseEvent].push({\n        name: name,\n        handler: handler\n      });\n    }\n\n    return this;\n  };\n\n  Node.prototype.off = function (evtStr, callback) {\n    var events = (evtStr || '').split(SPACE),\n        len = events.length,\n        n,\n        t,\n        event,\n        parts,\n        baseEvent,\n        name;\n\n    if (!evtStr) {\n      for (t in this.eventListeners) {\n        this._off(t);\n      }\n    }\n\n    for (n = 0; n < len; n++) {\n      event = events[n];\n      parts = event.split('.');\n      baseEvent = parts[0];\n      name = parts[1];\n\n      if (baseEvent) {\n        if (this.eventListeners[baseEvent]) {\n          this._off(baseEvent, name, callback);\n        }\n      } else {\n        for (t in this.eventListeners) {\n          this._off(t, name, callback);\n        }\n      }\n    }\n\n    return this;\n  };\n\n  Node.prototype.dispatchEvent = function (evt) {\n    var e = {\n      target: this,\n      type: evt.type,\n      evt: evt\n    };\n    this.fire(evt.type, e);\n    return this;\n  };\n\n  Node.prototype.addEventListener = function (type, handler) {\n    this.on(type, function (evt) {\n      handler.call(this, evt.evt);\n    });\n    return this;\n  };\n\n  Node.prototype.removeEventListener = function (type) {\n    this.off(type);\n    return this;\n  };\n\n  Node.prototype._delegate = function (event, selector, handler) {\n    var stopNode = this;\n    this.on(event, function (evt) {\n      var targets = evt.target.findAncestors(selector, true, stopNode);\n\n      for (var i = 0; i < targets.length; i++) {\n        evt = Util_1.Util.cloneObject(evt);\n        evt.currentTarget = targets[i];\n        handler.call(targets[i], evt);\n      }\n    });\n  };\n\n  Node.prototype.remove = function () {\n    if (DragAndDrop_1.DD.node && DragAndDrop_1.DD.node === this) {\n      this.stopDrag();\n    }\n\n    this._remove();\n\n    return this;\n  };\n\n  Node.prototype._remove = function () {\n    this._clearSelfAndDescendantCache(STAGE);\n\n    this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);\n\n    this._clearSelfAndDescendantCache(VISIBLE);\n\n    this._clearSelfAndDescendantCache(LISTENING);\n\n    this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY);\n\n    var parent = this.getParent();\n\n    if (parent && parent.children) {\n      parent.children.splice(this.index, 1);\n\n      parent._setChildrenIndices();\n\n      this.parent = null;\n    }\n  };\n\n  Node.prototype.destroy = function () {\n    exports._removeId(this.id(), this);\n\n    var names = (this.name() || '').split(/\\s/g);\n\n    for (var i = 0; i < names.length; i++) {\n      var subname = names[i];\n\n      exports._removeName(subname, this._id);\n    }\n\n    this.remove();\n    return this;\n  };\n\n  Node.prototype.getAttr = function (attr) {\n    var method = 'get' + Util_1.Util._capitalize(attr);\n\n    if (Util_1.Util._isFunction(this[method])) {\n      return this[method]();\n    }\n\n    return this.attrs[attr];\n  };\n\n  Node.prototype.getAncestors = function () {\n    var parent = this.getParent(),\n        ancestors = new Util_1.Collection();\n\n    while (parent) {\n      ancestors.push(parent);\n      parent = parent.getParent();\n    }\n\n    return ancestors;\n  };\n\n  Node.prototype.getAttrs = function () {\n    return this.attrs || {};\n  };\n\n  Node.prototype.setAttrs = function (config) {\n    var key, method;\n\n    if (!config) {\n      return this;\n    }\n\n    for (key in config) {\n      if (key === CHILDREN) {\n        continue;\n      }\n\n      method = SET + Util_1.Util._capitalize(key);\n\n      if (Util_1.Util._isFunction(this[method])) {\n        this[method](config[key]);\n      } else {\n        this._setAttr(key, config[key]);\n      }\n    }\n\n    return this;\n  };\n\n  Node.prototype.isListening = function () {\n    return this._getCache(LISTENING, this._isListening);\n  };\n\n  Node.prototype._isListening = function () {\n    var listening = this.listening(),\n        parent = this.getParent();\n\n    if (listening === 'inherit') {\n      if (parent) {\n        return parent.isListening();\n      } else {\n        return true;\n      }\n    } else {\n      return listening;\n    }\n  };\n\n  Node.prototype.isVisible = function () {\n    return this._getCache(VISIBLE, this._isVisible);\n  };\n\n  Node.prototype._isVisible = function (relativeTo) {\n    var visible = this.visible(),\n        parent = this.getParent();\n\n    if (visible === 'inherit') {\n      if (parent && parent !== relativeTo) {\n        return parent._isVisible(relativeTo);\n      } else {\n        return true;\n      }\n    } else {\n      return visible;\n    }\n  };\n\n  Node.prototype.shouldDrawHit = function () {\n    var layer = this.getLayer();\n    return !layer && this.isListening() && this.isVisible() || layer && layer.hitGraphEnabled() && this.isListening() && this.isVisible();\n  };\n\n  Node.prototype.show = function () {\n    this.visible(true);\n    return this;\n  };\n\n  Node.prototype.hide = function () {\n    this.visible(false);\n    return this;\n  };\n\n  Node.prototype.getZIndex = function () {\n    return this.index || 0;\n  };\n\n  Node.prototype.getAbsoluteZIndex = function () {\n    var depth = this.getDepth(),\n        that = this,\n        index = 0,\n        nodes,\n        len,\n        n,\n        child;\n\n    function addChildren(children) {\n      nodes = [];\n      len = children.length;\n\n      for (n = 0; n < len; n++) {\n        child = children[n];\n        index++;\n\n        if (child.nodeType !== SHAPE) {\n          nodes = nodes.concat(child.getChildren().toArray());\n        }\n\n        if (child._id === that._id) {\n          n = len;\n        }\n      }\n\n      if (nodes.length > 0 && nodes[0].getDepth() <= depth) {\n        addChildren(nodes);\n      }\n    }\n\n    if (that.nodeType !== UPPER_STAGE) {\n      addChildren(that.getStage().getChildren());\n    }\n\n    return index;\n  };\n\n  Node.prototype.getDepth = function () {\n    var depth = 0,\n        parent = this.parent;\n\n    while (parent) {\n      depth++;\n      parent = parent.parent;\n    }\n\n    return depth;\n  };\n\n  Node.prototype.setPosition = function (pos) {\n    this.x(pos.x);\n    this.y(pos.y);\n    return this;\n  };\n\n  Node.prototype.getPosition = function () {\n    return {\n      x: this.x(),\n      y: this.y()\n    };\n  };\n\n  Node.prototype.getAbsolutePosition = function (top) {\n    var absoluteMatrix = this.getAbsoluteTransform(top).getMatrix(),\n        absoluteTransform = new Util_1.Transform(),\n        offset = this.offset();\n    absoluteTransform.m = absoluteMatrix.slice();\n    absoluteTransform.translate(offset.x, offset.y);\n    return absoluteTransform.getTranslation();\n  };\n\n  Node.prototype.setAbsolutePosition = function (pos) {\n    var origTrans = this._clearTransform(),\n        it;\n\n    this.attrs.x = origTrans.x;\n    this.attrs.y = origTrans.y;\n    delete origTrans.x;\n    delete origTrans.y;\n    it = this.getAbsoluteTransform();\n    it.invert();\n    it.translate(pos.x, pos.y);\n    pos = {\n      x: this.attrs.x + it.getTranslation().x,\n      y: this.attrs.y + it.getTranslation().y\n    };\n    this.setPosition({\n      x: pos.x,\n      y: pos.y\n    });\n\n    this._setTransform(origTrans);\n\n    return this;\n  };\n\n  Node.prototype._setTransform = function (trans) {\n    var key;\n\n    for (key in trans) {\n      this.attrs[key] = trans[key];\n    }\n\n    this._clearCache(TRANSFORM);\n\n    this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);\n  };\n\n  Node.prototype._clearTransform = function () {\n    var trans = {\n      x: this.x(),\n      y: this.y(),\n      rotation: this.rotation(),\n      scaleX: this.scaleX(),\n      scaleY: this.scaleY(),\n      offsetX: this.offsetX(),\n      offsetY: this.offsetY(),\n      skewX: this.skewX(),\n      skewY: this.skewY()\n    };\n    this.attrs.x = 0;\n    this.attrs.y = 0;\n    this.attrs.rotation = 0;\n    this.attrs.scaleX = 1;\n    this.attrs.scaleY = 1;\n    this.attrs.offsetX = 0;\n    this.attrs.offsetY = 0;\n    this.attrs.skewX = 0;\n    this.attrs.skewY = 0;\n\n    this._clearCache(TRANSFORM);\n\n    this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);\n\n    return trans;\n  };\n\n  Node.prototype.move = function (change) {\n    var changeX = change.x,\n        changeY = change.y,\n        x = this.x(),\n        y = this.y();\n\n    if (changeX !== undefined) {\n      x += changeX;\n    }\n\n    if (changeY !== undefined) {\n      y += changeY;\n    }\n\n    this.setPosition({\n      x: x,\n      y: y\n    });\n    return this;\n  };\n\n  Node.prototype._eachAncestorReverse = function (func, top) {\n    var family = [],\n        parent = this.getParent(),\n        len,\n        n;\n\n    if (top && top._id === this._id) {\n      func(this);\n      return;\n    }\n\n    family.unshift(this);\n\n    while (parent && (!top || parent._id !== top._id)) {\n      family.unshift(parent);\n      parent = parent.parent;\n    }\n\n    len = family.length;\n\n    for (n = 0; n < len; n++) {\n      func(family[n]);\n    }\n  };\n\n  Node.prototype.rotate = function (theta) {\n    this.rotation(this.rotation() + theta);\n    return this;\n  };\n\n  Node.prototype.moveToTop = function () {\n    if (!this.parent) {\n      Util_1.Util.warn('Node has no parent. moveToTop function is ignored.');\n      return false;\n    }\n\n    var index = this.index;\n    this.parent.children.splice(index, 1);\n    this.parent.children.push(this);\n\n    this.parent._setChildrenIndices();\n\n    return true;\n  };\n\n  Node.prototype.moveUp = function () {\n    if (!this.parent) {\n      Util_1.Util.warn('Node has no parent. moveUp function is ignored.');\n      return false;\n    }\n\n    var index = this.index,\n        len = this.parent.getChildren().length;\n\n    if (index < len - 1) {\n      this.parent.children.splice(index, 1);\n      this.parent.children.splice(index + 1, 0, this);\n\n      this.parent._setChildrenIndices();\n\n      return true;\n    }\n\n    return false;\n  };\n\n  Node.prototype.moveDown = function () {\n    if (!this.parent) {\n      Util_1.Util.warn('Node has no parent. moveDown function is ignored.');\n      return false;\n    }\n\n    var index = this.index;\n\n    if (index > 0) {\n      this.parent.children.splice(index, 1);\n      this.parent.children.splice(index - 1, 0, this);\n\n      this.parent._setChildrenIndices();\n\n      return true;\n    }\n\n    return false;\n  };\n\n  Node.prototype.moveToBottom = function () {\n    if (!this.parent) {\n      Util_1.Util.warn('Node has no parent. moveToBottom function is ignored.');\n      return false;\n    }\n\n    var index = this.index;\n\n    if (index > 0) {\n      this.parent.children.splice(index, 1);\n      this.parent.children.unshift(this);\n\n      this.parent._setChildrenIndices();\n\n      return true;\n    }\n\n    return false;\n  };\n\n  Node.prototype.setZIndex = function (zIndex) {\n    if (!this.parent) {\n      Util_1.Util.warn('Node has no parent. zIndex parameter is ignored.');\n      return this;\n    }\n\n    if (zIndex < 0 || zIndex >= this.parent.children.length) {\n      Util_1.Util.warn('Unexpected value ' + zIndex + ' for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to ' + (this.parent.children.length - 1) + '.');\n    }\n\n    var index = this.index;\n    this.parent.children.splice(index, 1);\n    this.parent.children.splice(zIndex, 0, this);\n\n    this.parent._setChildrenIndices();\n\n    return this;\n  };\n\n  Node.prototype.getAbsoluteOpacity = function () {\n    return this._getCache(ABSOLUTE_OPACITY, this._getAbsoluteOpacity);\n  };\n\n  Node.prototype._getAbsoluteOpacity = function () {\n    var absOpacity = this.opacity();\n    var parent = this.getParent();\n\n    if (parent && !parent._isUnderCache) {\n      absOpacity *= parent.getAbsoluteOpacity();\n    }\n\n    return absOpacity;\n  };\n\n  Node.prototype.moveTo = function (newContainer) {\n    if (this.getParent() !== newContainer) {\n      this._remove();\n\n      newContainer.add(this);\n    }\n\n    return this;\n  };\n\n  Node.prototype.toObject = function () {\n    var obj = {},\n        attrs = this.getAttrs(),\n        key,\n        val,\n        getter,\n        defaultValue,\n        nonPlainObject;\n    obj.attrs = {};\n\n    for (key in attrs) {\n      val = attrs[key];\n      nonPlainObject = Util_1.Util.isObject(val) && !Util_1.Util._isPlainObject(val) && !Util_1.Util._isArray(val);\n\n      if (nonPlainObject) {\n        continue;\n      }\n\n      getter = typeof this[key] === 'function' && this[key];\n      delete attrs[key];\n      defaultValue = getter ? getter.call(this) : null;\n      attrs[key] = val;\n\n      if (defaultValue !== val) {\n        obj.attrs[key] = val;\n      }\n    }\n\n    obj.className = this.getClassName();\n    return Util_1.Util._prepareToStringify(obj);\n  };\n\n  Node.prototype.toJSON = function () {\n    return JSON.stringify(this.toObject());\n  };\n\n  Node.prototype.getParent = function () {\n    return this.parent;\n  };\n\n  Node.prototype.findAncestors = function (selector, includeSelf, stopNode) {\n    var res = [];\n\n    if (includeSelf && this._isMatch(selector)) {\n      res.push(this);\n    }\n\n    var ancestor = this.parent;\n\n    while (ancestor) {\n      if (ancestor === stopNode) {\n        return res;\n      }\n\n      if (ancestor._isMatch(selector)) {\n        res.push(ancestor);\n      }\n\n      ancestor = ancestor.parent;\n    }\n\n    return res;\n  };\n\n  Node.prototype.isAncestorOf = function (node) {\n    return false;\n  };\n\n  Node.prototype.findAncestor = function (selector, includeSelf, stopNode) {\n    return this.findAncestors(selector, includeSelf, stopNode)[0];\n  };\n\n  Node.prototype._isMatch = function (selector) {\n    if (!selector) {\n      return false;\n    }\n\n    if (typeof selector === 'function') {\n      return selector(this);\n    }\n\n    var selectorArr = selector.replace(/ /g, '').split(','),\n        len = selectorArr.length,\n        n,\n        sel;\n\n    for (n = 0; n < len; n++) {\n      sel = selectorArr[n];\n\n      if (!Util_1.Util.isValidSelector(sel)) {\n        Util_1.Util.warn('Selector \"' + sel + '\" is invalid. Allowed selectors examples are \"#foo\", \".bar\" or \"Group\".');\n        Util_1.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like \"Triangle\".');\n        Util_1.Util.warn('Konva is awesome, right?');\n      }\n\n      if (sel.charAt(0) === '#') {\n        if (this.id() === sel.slice(1)) {\n          return true;\n        }\n      } else if (sel.charAt(0) === '.') {\n        if (this.hasName(sel.slice(1))) {\n          return true;\n        }\n      } else if (this.className === selector || this.nodeType === selector) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  Node.prototype.getLayer = function () {\n    var parent = this.getParent();\n    return parent ? parent.getLayer() : null;\n  };\n\n  Node.prototype.getStage = function () {\n    return this._getCache(STAGE, this._getStage);\n  };\n\n  Node.prototype._getStage = function () {\n    var parent = this.getParent();\n\n    if (parent) {\n      return parent.getStage();\n    } else {\n      return undefined;\n    }\n  };\n\n  Node.prototype.fire = function (eventType, evt, bubble) {\n    evt = evt || {};\n    evt.target = evt.target || this;\n\n    if (bubble) {\n      this._fireAndBubble(eventType, evt);\n    } else {\n      this._fire(eventType, evt);\n    }\n\n    return this;\n  };\n\n  Node.prototype.getAbsoluteTransform = function (top) {\n    if (top) {\n      return this._getAbsoluteTransform(top);\n    } else {\n      return this._getCache(ABSOLUTE_TRANSFORM, this._getAbsoluteTransform);\n    }\n  };\n\n  Node.prototype._getAbsoluteTransform = function (top) {\n    var at = new Util_1.Transform();\n\n    this._eachAncestorReverse(function (node) {\n      var transformsEnabled = node.getTransformsEnabled();\n\n      if (transformsEnabled === 'all') {\n        at.multiply(node.getTransform());\n      } else if (transformsEnabled === 'position') {\n        at.translate(node.getX() - node.getOffsetX(), node.getY() - node.getOffsetY());\n      }\n    }, top);\n\n    return at;\n  };\n\n  Node.prototype.getAbsoluteScale = function (top) {\n    if (top) {\n      return this._getAbsoluteScale(top);\n    } else {\n      return this._getCache(ABSOLUTE_SCALE, this._getAbsoluteScale);\n    }\n  };\n\n  Node.prototype._getAbsoluteScale = function (top) {\n    var parent = this;\n\n    while (parent) {\n      if (parent._isUnderCache) {\n        top = parent;\n      }\n\n      parent = parent.getParent();\n    }\n\n    var scaleX = 1,\n        scaleY = 1;\n\n    this._eachAncestorReverse(function (node) {\n      scaleX *= node.scaleX();\n      scaleY *= node.scaleY();\n    }, top);\n\n    return {\n      x: scaleX,\n      y: scaleY\n    };\n  };\n\n  Node.prototype.getTransform = function () {\n    return this._getCache(TRANSFORM, this._getTransform);\n  };\n\n  Node.prototype._getTransform = function () {\n    var m = new Util_1.Transform(),\n        x = this.x(),\n        y = this.y(),\n        rotation = Global_1.Konva.getAngle(this.rotation()),\n        scaleX = this.scaleX(),\n        scaleY = this.scaleY(),\n        skewX = this.skewX(),\n        skewY = this.skewY(),\n        offsetX = this.offsetX(),\n        offsetY = this.offsetY();\n\n    if (x !== 0 || y !== 0) {\n      m.translate(x, y);\n    }\n\n    if (rotation !== 0) {\n      m.rotate(rotation);\n    }\n\n    if (skewX !== 0 || skewY !== 0) {\n      m.skew(skewX, skewY);\n    }\n\n    if (scaleX !== 1 || scaleY !== 1) {\n      m.scale(scaleX, scaleY);\n    }\n\n    if (offsetX !== 0 || offsetY !== 0) {\n      m.translate(-1 * offsetX, -1 * offsetY);\n    }\n\n    return m;\n  };\n\n  Node.prototype.clone = function (obj) {\n    var attrs = Util_1.Util.cloneObject(this.attrs),\n        key,\n        allListeners,\n        len,\n        n,\n        listener;\n\n    for (var i in CLONE_BLACK_LIST) {\n      var blockAttr = CLONE_BLACK_LIST[i];\n      delete attrs[blockAttr];\n    }\n\n    for (key in obj) {\n      attrs[key] = obj[key];\n    }\n\n    var node = new this.constructor(attrs);\n\n    for (key in this.eventListeners) {\n      allListeners = this.eventListeners[key];\n      len = allListeners.length;\n\n      for (n = 0; n < len; n++) {\n        listener = allListeners[n];\n\n        if (listener.name.indexOf(KONVA) < 0) {\n          if (!node.eventListeners[key]) {\n            node.eventListeners[key] = [];\n          }\n\n          node.eventListeners[key].push(listener);\n        }\n      }\n    }\n\n    return node;\n  };\n\n  Node.prototype._toKonvaCanvas = function (config) {\n    config = config || {};\n    var box = this.getClientRect();\n    var stage = this.getStage(),\n        x = config.x !== undefined ? config.x : box.x,\n        y = config.y !== undefined ? config.y : box.y,\n        pixelRatio = config.pixelRatio || 1,\n        canvas = new Canvas_1.SceneCanvas({\n      width: config.width || box.width || (stage ? stage.getWidth() : 0),\n      height: config.height || box.height || (stage ? stage.getHeight() : 0),\n      pixelRatio: pixelRatio\n    }),\n        context = canvas.getContext();\n    context.save();\n\n    if (x || y) {\n      context.translate(-1 * x, -1 * y);\n    }\n\n    this.drawScene(canvas);\n    context.restore();\n    return canvas;\n  };\n\n  Node.prototype.toCanvas = function (config) {\n    return this._toKonvaCanvas(config)._canvas;\n  };\n\n  Node.prototype.toDataURL = function (config) {\n    config = config || {};\n    var mimeType = config.mimeType || null,\n        quality = config.quality || null;\n\n    var url = this._toKonvaCanvas(config).toDataURL(mimeType, quality);\n\n    if (config.callback) {\n      config.callback(url);\n    }\n\n    return url;\n  };\n\n  Node.prototype.toImage = function (config) {\n    if (!config || !config.callback) {\n      throw 'callback required for toImage method config argument';\n    }\n\n    var callback = config.callback;\n    delete config.callback;\n\n    Util_1.Util._urlToImage(this.toDataURL(config), function (img) {\n      callback(img);\n    });\n  };\n\n  Node.prototype.setSize = function (size) {\n    this.width(size.width);\n    this.height(size.height);\n    return this;\n  };\n\n  Node.prototype.getSize = function () {\n    return {\n      width: this.width(),\n      height: this.height()\n    };\n  };\n\n  Node.prototype.getClassName = function () {\n    return this.className || this.nodeType;\n  };\n\n  Node.prototype.getType = function () {\n    return this.nodeType;\n  };\n\n  Node.prototype.getDragDistance = function () {\n    if (this.attrs.dragDistance !== undefined) {\n      return this.attrs.dragDistance;\n    } else if (this.parent) {\n      return this.parent.getDragDistance();\n    } else {\n      return Global_1.Konva.dragDistance;\n    }\n  };\n\n  Node.prototype._off = function (type, name, callback) {\n    var evtListeners = this.eventListeners[type],\n        i,\n        evtName,\n        handler;\n\n    for (i = 0; i < evtListeners.length; i++) {\n      evtName = evtListeners[i].name;\n      handler = evtListeners[i].handler;\n\n      if ((evtName !== 'konva' || name === 'konva') && (!name || evtName === name) && (!callback || callback === handler)) {\n        evtListeners.splice(i, 1);\n\n        if (evtListeners.length === 0) {\n          delete this.eventListeners[type];\n          break;\n        }\n\n        i--;\n      }\n    }\n  };\n\n  Node.prototype._fireChangeEvent = function (attr, oldVal, newVal) {\n    this._fire(attr + CHANGE, {\n      oldVal: oldVal,\n      newVal: newVal\n    });\n  };\n\n  Node.prototype.setId = function (id) {\n    var oldId = this.id();\n\n    exports._removeId(oldId, this);\n\n    _addId(this, id);\n\n    this._setAttr('id', id);\n\n    return this;\n  };\n\n  Node.prototype.setName = function (name) {\n    var oldNames = (this.name() || '').split(/\\s/g);\n    var newNames = (name || '').split(/\\s/g);\n    var subname, i;\n\n    for (i = 0; i < oldNames.length; i++) {\n      subname = oldNames[i];\n\n      if (newNames.indexOf(subname) === -1 && subname) {\n        exports._removeName(subname, this._id);\n      }\n    }\n\n    for (i = 0; i < newNames.length; i++) {\n      subname = newNames[i];\n\n      if (oldNames.indexOf(subname) === -1 && subname) {\n        exports._addName(this, subname);\n      }\n    }\n\n    this._setAttr(NAME, name);\n\n    return this;\n  };\n\n  Node.prototype.addName = function (name) {\n    if (!this.hasName(name)) {\n      var oldName = this.name();\n      var newName = oldName ? oldName + ' ' + name : name;\n      this.setName(newName);\n    }\n\n    return this;\n  };\n\n  Node.prototype.hasName = function (name) {\n    if (!name) {\n      return false;\n    }\n\n    var fullName = this.name();\n\n    if (!fullName) {\n      return false;\n    }\n\n    var names = (fullName || '').split(/\\s/g);\n    return names.indexOf(name) !== -1;\n  };\n\n  Node.prototype.removeName = function (name) {\n    var names = (this.name() || '').split(/\\s/g);\n    var index = names.indexOf(name);\n\n    if (index !== -1) {\n      names.splice(index, 1);\n      this.setName(names.join(' '));\n    }\n\n    return this;\n  };\n\n  Node.prototype.setAttr = function (attr, val) {\n    var func = this[SET + Util_1.Util._capitalize(attr)];\n\n    if (Util_1.Util._isFunction(func)) {\n      func.call(this, val);\n    } else {\n      this._setAttr(attr, val);\n    }\n\n    return this;\n  };\n\n  Node.prototype._setAttr = function (key, val) {\n    var oldVal = this.attrs[key];\n\n    if (oldVal === val && !Util_1.Util.isObject(val)) {\n      return;\n    }\n\n    if (val === undefined || val === null) {\n      delete this.attrs[key];\n    } else {\n      this.attrs[key] = val;\n    }\n\n    this._fireChangeEvent(key, oldVal, val);\n  };\n\n  Node.prototype._setComponentAttr = function (key, component, val) {\n    var oldVal;\n\n    if (val !== undefined) {\n      oldVal = this.attrs[key];\n\n      if (!oldVal) {\n        this.attrs[key] = this.getAttr(key);\n      }\n\n      this.attrs[key][component] = val;\n\n      this._fireChangeEvent(key, oldVal, val);\n    }\n  };\n\n  Node.prototype._fireAndBubble = function (eventType, evt, compareShape) {\n    if (evt && this.nodeType === SHAPE) {\n      evt.target = this;\n    }\n\n    var shouldStop = (eventType === MOUSEENTER || eventType === MOUSELEAVE) && (compareShape && (this === compareShape || this.isAncestorOf && this.isAncestorOf(compareShape)) || this.nodeType === 'Stage' && !compareShape);\n\n    if (!shouldStop) {\n      this._fire(eventType, evt);\n\n      var stopBubble = (eventType === MOUSEENTER || eventType === MOUSELEAVE) && compareShape && compareShape.isAncestorOf && compareShape.isAncestorOf(this) && !compareShape.isAncestorOf(this.parent);\n\n      if ((evt && !evt.cancelBubble || !evt) && this.parent && this.parent.isListening() && !stopBubble) {\n        if (compareShape && compareShape.parent) {\n          this._fireAndBubble.call(this.parent, eventType, evt, compareShape.parent);\n        } else {\n          this._fireAndBubble.call(this.parent, eventType, evt);\n        }\n      }\n    }\n  };\n\n  Node.prototype._fire = function (eventType, evt) {\n    var events = this.eventListeners[eventType],\n        i;\n\n    if (events) {\n      evt = evt || {};\n      evt.currentTarget = this;\n      evt.type = eventType;\n\n      for (i = 0; i < events.length; i++) {\n        events[i].handler.call(this, evt);\n      }\n    }\n  };\n\n  Node.prototype.draw = function () {\n    this.drawScene();\n    this.drawHit();\n    return this;\n  };\n\n  Node.prototype.startDrag = function () {\n    var stage = this.getStage(),\n        layer = this.getLayer(),\n        pos = stage.getPointerPosition(),\n        ap = this.getAbsolutePosition();\n\n    if (pos) {\n      if (DragAndDrop_1.DD.node) {\n        DragAndDrop_1.DD.node.stopDrag();\n      }\n\n      DragAndDrop_1.DD.node = this;\n      DragAndDrop_1.DD.startPointerPos = pos;\n      DragAndDrop_1.DD.offset.x = pos.x - ap.x;\n      DragAndDrop_1.DD.offset.y = pos.y - ap.y;\n      DragAndDrop_1.DD.anim.setLayers(layer || this['getLayers']());\n      DragAndDrop_1.DD.anim.start();\n\n      this._setDragPosition();\n    }\n  };\n\n  Node.prototype._setDragPosition = function (evt) {\n    var pos = this.getStage().getPointerPosition(),\n        dbf = this.dragBoundFunc();\n\n    if (!pos) {\n      return;\n    }\n\n    var newNodePos = {\n      x: pos.x - DragAndDrop_1.DD.offset.x,\n      y: pos.y - DragAndDrop_1.DD.offset.y\n    };\n\n    if (dbf !== undefined) {\n      newNodePos = dbf.call(this, newNodePos, evt);\n    }\n\n    this.setAbsolutePosition(newNodePos);\n\n    if (!this._lastPos || this._lastPos.x !== newNodePos.x || this._lastPos.y !== newNodePos.y) {\n      DragAndDrop_1.DD.anim['dirty'] = true;\n    }\n\n    this._lastPos = newNodePos;\n  };\n\n  Node.prototype.stopDrag = function () {\n    var evt = {};\n\n    DragAndDrop_1.DD._endDragBefore(evt);\n\n    DragAndDrop_1.DD._endDragAfter(evt);\n  };\n\n  Node.prototype.setDraggable = function (draggable) {\n    this._setAttr('draggable', draggable);\n\n    this._dragChange();\n  };\n\n  Node.prototype.isDragging = function () {\n    return !!(DragAndDrop_1.DD.node && DragAndDrop_1.DD.node === this && DragAndDrop_1.DD.isDragging);\n  };\n\n  Node.prototype._listenDrag = function () {\n    this._dragCleanup();\n\n    this.on('mousedown.konva touchstart.konva', function (evt) {\n      var shouldCheckButton = evt.evt['button'] !== undefined;\n      var canDrag = !shouldCheckButton || Global_1.Konva.dragButtons.indexOf(evt.evt['button']) >= 0;\n\n      if (!canDrag) {\n        return;\n      }\n\n      if (!DragAndDrop_1.DD.node) {\n        this.startDrag();\n      }\n    });\n  };\n\n  Node.prototype._dragChange = function () {\n    if (this.attrs.draggable) {\n      this._listenDrag();\n    } else {\n      this._dragCleanup();\n\n      var stage = this.getStage();\n      var dd = DragAndDrop_1.DD;\n\n      if (stage && dd.node && dd.node._id === this._id) {\n        dd.node.stopDrag();\n      }\n    }\n  };\n\n  Node.prototype._dragCleanup = function () {\n    this.off('mousedown.konva');\n    this.off('touchstart.konva');\n  };\n\n  Node.create = function (data, container) {\n    if (Util_1.Util._isString(data)) {\n      data = JSON.parse(data);\n    }\n\n    return this._createNode(data, container);\n  };\n\n  Node._createNode = function (obj, container) {\n    var className = Node.prototype.getClassName.call(obj),\n        children = obj.children,\n        no,\n        len,\n        n;\n\n    if (container) {\n      obj.attrs.container = container;\n    }\n\n    if (!Global_1._NODES_REGISTRY[className]) {\n      Util_1.Util.warn('Can not find a node with class name \"' + className + '\". Fallback to \"Shape\".');\n      className = 'Shape';\n    }\n\n    var Class = Global_1._NODES_REGISTRY[className];\n    no = new Class(obj.attrs);\n\n    if (children) {\n      len = children.length;\n\n      for (n = 0; n < len; n++) {\n        no.add(Node._createNode(children[n]));\n      }\n    }\n\n    return no;\n  };\n\n  return Node;\n}();\n\nexports.Node = Node;\nNode.prototype.nodeType = 'Node';\nNode.prototype._attrsAffectingSize = [];\nFactory_1.Factory.addGetterSetter(Node, 'zIndex');\nFactory_1.Factory.addGetterSetter(Node, 'absolutePosition');\nFactory_1.Factory.addGetterSetter(Node, 'position');\nFactory_1.Factory.addGetterSetter(Node, 'x', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'y', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'globalCompositeOperation', 'source-over', Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Node, 'opacity', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'name', '', Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Node, 'id', '', Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Node, 'rotation', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addComponentsGetterSetter(Node, 'scale', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Node, 'scaleX', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'scaleY', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addComponentsGetterSetter(Node, 'skew', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Node, 'skewX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'skewY', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addComponentsGetterSetter(Node, 'offset', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Node, 'offsetX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'offsetY', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'dragDistance', null, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'width', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'height', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Node, 'listening', 'inherit', function (val) {\n  var isValid = val === true || val === false || val === 'inherit';\n\n  if (!isValid) {\n    Util_1.Util.warn(val + ' is a not valid value for \"listening\" attribute. The value may be true, false or \"inherit\".');\n  }\n\n  return val;\n});\nFactory_1.Factory.addGetterSetter(Node, 'preventDefault', true, Validators_1.getBooleanValidator());\nFactory_1.Factory.addGetterSetter(Node, 'filters', null, function (val) {\n  this._filterUpToDate = false;\n  return val;\n});\nFactory_1.Factory.addGetterSetter(Node, 'visible', 'inherit', function (val) {\n  var isValid = val === true || val === false || val === 'inherit';\n\n  if (!isValid) {\n    Util_1.Util.warn(val + ' is a not valid value for \"visible\" attribute. The value may be true, false or \"inherit\".');\n  }\n\n  return val;\n});\nFactory_1.Factory.addGetterSetter(Node, 'transformsEnabled', 'all', Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Node, 'size');\nFactory_1.Factory.addGetterSetter(Node, 'dragBoundFunc');\nFactory_1.Factory.addGetterSetter(Node, 'draggable', false, Validators_1.getBooleanValidator());\nFactory_1.Factory.backCompat(Node, {\n  rotateDeg: 'rotate',\n  setRotationDeg: 'setRotation',\n  getRotationDeg: 'getRotation'\n});\nUtil_1.Collection.mapMethods(Node);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar Captures = new Map();\n\nfunction getCapturedShape(pointerId) {\n  return Captures.get(pointerId);\n}\n\nexports.getCapturedShape = getCapturedShape;\n\nfunction createEvent(evt) {\n  return {\n    evt: evt,\n    pointerId: evt.pointerId\n  };\n}\n\nexports.createEvent = createEvent;\n\nfunction hasPointerCapture(pointerId, shape) {\n  return Captures.get(pointerId) === shape;\n}\n\nexports.hasPointerCapture = hasPointerCapture;\n\nfunction setPointerCapture(pointerId, shape) {\n  releaseCapture(pointerId);\n  var stage = shape.getStage();\n  if (!stage) return;\n  Captures.set(pointerId, shape);\n\n  shape._fire('gotpointercapture', createEvent(new PointerEvent('gotpointercapture')));\n}\n\nexports.setPointerCapture = setPointerCapture;\n\nfunction releaseCapture(pointerId, target) {\n  var shape = Captures.get(pointerId);\n  if (!shape) return;\n  var stage = shape.getStage();\n\n  if (stage && stage.content) {\n    stage.content.releasePointerCapture(pointerId);\n  }\n\n  Captures.delete(pointerId);\n\n  shape._fire('lostpointercapture', createEvent(new PointerEvent('lostpointercapture')));\n}\n\nexports.releaseCapture = releaseCapture;","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"./Util\");\n\nvar Factory_1 = require(\"./Factory\");\n\nvar Node_1 = require(\"./Node\");\n\nvar Validators_1 = require(\"./Validators\");\n\nvar Global_1 = require(\"./Global\");\n\nvar PointerEvents = require(\"./PointerEvents\");\n\nvar HAS_SHADOW = 'hasShadow';\nvar SHADOW_RGBA = 'shadowRGBA';\nvar patternImage = 'patternImage';\nvar linearGradient = 'linearGradient';\nvar radialGradient = 'radialGradient';\nvar dummyContext;\n\nfunction getDummyContext() {\n  if (dummyContext) {\n    return dummyContext;\n  }\n\n  dummyContext = Util_1.Util.createCanvasElement().getContext('2d');\n  return dummyContext;\n}\n\nexports.shapes = {};\n\nfunction _fillFunc(context) {\n  context.fill();\n}\n\nfunction _strokeFunc(context) {\n  context.stroke();\n}\n\nfunction _fillFuncHit(context) {\n  context.fill();\n}\n\nfunction _strokeFuncHit(context) {\n  context.stroke();\n}\n\nfunction _clearHasShadowCache() {\n  this._clearCache(HAS_SHADOW);\n}\n\nfunction _clearGetShadowRGBACache() {\n  this._clearCache(SHADOW_RGBA);\n}\n\nfunction _clearFillPatternCache() {\n  this._clearCache(patternImage);\n}\n\nfunction _clearLinearGradientCache() {\n  this._clearCache(linearGradient);\n}\n\nfunction _clearRadialGradientCache() {\n  this._clearCache(radialGradient);\n}\n\nvar Shape = function (_super) {\n  __extends(Shape, _super);\n\n  function Shape(config) {\n    var _this = _super.call(this, config) || this;\n\n    var key;\n\n    while (true) {\n      key = Util_1.Util.getRandomColor();\n\n      if (key && !(key in exports.shapes)) {\n        break;\n      }\n    }\n\n    _this.colorKey = key;\n    exports.shapes[key] = _this;\n\n    _this.on('shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva', _clearHasShadowCache);\n\n    _this.on('shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva', _clearGetShadowRGBACache);\n\n    _this.on('fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva', _clearFillPatternCache);\n\n    _this.on('fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva', _clearLinearGradientCache);\n\n    _this.on('fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva', _clearRadialGradientCache);\n\n    return _this;\n  }\n\n  Shape.prototype.getContext = function () {\n    return this.getLayer().getContext();\n  };\n\n  Shape.prototype.getCanvas = function () {\n    return this.getLayer().getCanvas();\n  };\n\n  Shape.prototype.getSceneFunc = function () {\n    return this.attrs.sceneFunc || this['_sceneFunc'];\n  };\n\n  Shape.prototype.getHitFunc = function () {\n    return this.attrs.hitFunc || this['_hitFunc'];\n  };\n\n  Shape.prototype.hasShadow = function () {\n    return this._getCache(HAS_SHADOW, this._hasShadow);\n  };\n\n  Shape.prototype._hasShadow = function () {\n    return this.shadowEnabled() && this.shadowOpacity() !== 0 && !!(this.shadowColor() || this.shadowBlur() || this.shadowOffsetX() || this.shadowOffsetY());\n  };\n\n  Shape.prototype._getFillPattern = function () {\n    return this._getCache(patternImage, this.__getFillPattern);\n  };\n\n  Shape.prototype.__getFillPattern = function () {\n    if (this.fillPatternImage()) {\n      var ctx = getDummyContext();\n      return ctx.createPattern(this.fillPatternImage(), this.fillPatternRepeat() || 'repeat');\n    }\n  };\n\n  Shape.prototype._getLinearGradient = function () {\n    return this._getCache(linearGradient, this.__getLinearGradient);\n  };\n\n  Shape.prototype.__getLinearGradient = function () {\n    var colorStops = this.fillLinearGradientColorStops();\n\n    if (colorStops) {\n      var ctx = getDummyContext();\n      var start = this.fillLinearGradientStartPoint();\n      var end = this.fillLinearGradientEndPoint();\n      var grd = ctx.createLinearGradient(start.x, start.y, end.x, end.y);\n\n      for (var n = 0; n < colorStops.length; n += 2) {\n        grd.addColorStop(colorStops[n], colorStops[n + 1]);\n      }\n\n      return grd;\n    }\n  };\n\n  Shape.prototype._getRadialGradient = function () {\n    return this._getCache(radialGradient, this.__getRadialGradient);\n  };\n\n  Shape.prototype.__getRadialGradient = function () {\n    var colorStops = this.fillRadialGradientColorStops();\n\n    if (colorStops) {\n      var ctx = getDummyContext();\n      var start = this.fillRadialGradientStartPoint();\n      var end = this.fillRadialGradientEndPoint();\n      var grd = ctx.createRadialGradient(start.x, start.y, this.fillRadialGradientStartRadius(), end.x, end.y, this.fillRadialGradientEndRadius());\n\n      for (var n = 0; n < colorStops.length; n += 2) {\n        grd.addColorStop(colorStops[n], colorStops[n + 1]);\n      }\n\n      return grd;\n    }\n  };\n\n  Shape.prototype.getShadowRGBA = function () {\n    return this._getCache(SHADOW_RGBA, this._getShadowRGBA);\n  };\n\n  Shape.prototype._getShadowRGBA = function () {\n    if (this.hasShadow()) {\n      var rgba = Util_1.Util.colorToRGBA(this.shadowColor());\n      return 'rgba(' + rgba.r + ',' + rgba.g + ',' + rgba.b + ',' + rgba.a * (this.shadowOpacity() || 1) + ')';\n    }\n  };\n\n  Shape.prototype.hasFill = function () {\n    return !!(this.fill() || this.fillPatternImage() || this.fillLinearGradientColorStops() || this.fillRadialGradientColorStops());\n  };\n\n  Shape.prototype.hasStroke = function () {\n    return this.strokeEnabled() && this.strokeWidth() && !!(this.stroke() || this.strokeLinearGradientColorStops());\n  };\n\n  Shape.prototype.intersects = function (point) {\n    var stage = this.getStage(),\n        bufferHitCanvas = stage.bufferHitCanvas,\n        p;\n    bufferHitCanvas.getContext().clear();\n    this.drawHit(bufferHitCanvas);\n    p = bufferHitCanvas.context.getImageData(Math.round(point.x), Math.round(point.y), 1, 1).data;\n    return p[3] > 0;\n  };\n\n  Shape.prototype.destroy = function () {\n    Node_1.Node.prototype.destroy.call(this);\n    delete exports.shapes[this.colorKey];\n    delete this.colorKey;\n    return this;\n  };\n\n  Shape.prototype._useBufferCanvas = function (caching) {\n    return !!((!caching || this.hasShadow()) && this.perfectDrawEnabled() && this.getAbsoluteOpacity() !== 1 && this.hasFill() && this.hasStroke() && this.getStage());\n  };\n\n  Shape.prototype.setStrokeHitEnabled = function (val) {\n    if (val) {\n      this.hitStrokeWidth('auto');\n    } else {\n      this.hitStrokeWidth(0);\n    }\n  };\n\n  Shape.prototype.getStrokeHitEnabled = function () {\n    if (this.hitStrokeWidth() === 0) {\n      return false;\n    } else {\n      return true;\n    }\n  };\n\n  Shape.prototype.getSelfRect = function () {\n    var size = this.size();\n    return {\n      x: this._centroid ? Math.round(-size.width / 2) : 0,\n      y: this._centroid ? Math.round(-size.height / 2) : 0,\n      width: size.width,\n      height: size.height\n    };\n  };\n\n  Shape.prototype.getClientRect = function (attrs) {\n    attrs = attrs || {};\n    var skipTransform = attrs.skipTransform;\n    var relativeTo = attrs.relativeTo;\n    var fillRect = this.getSelfRect();\n    var applyStroke = !attrs.skipStroke && this.hasStroke();\n    var strokeWidth = applyStroke && this.strokeWidth() || 0;\n    var fillAndStrokeWidth = fillRect.width + strokeWidth;\n    var fillAndStrokeHeight = fillRect.height + strokeWidth;\n    var applyShadow = !attrs.skipShadow && this.hasShadow();\n    var shadowOffsetX = applyShadow ? this.shadowOffsetX() : 0;\n    var shadowOffsetY = applyShadow ? this.shadowOffsetY() : 0;\n    var preWidth = fillAndStrokeWidth + Math.abs(shadowOffsetX);\n    var preHeight = fillAndStrokeHeight + Math.abs(shadowOffsetY);\n    var blurRadius = applyShadow && this.shadowBlur() || 0;\n    var width = preWidth + blurRadius * 2;\n    var height = preHeight + blurRadius * 2;\n    var roundingOffset = 0;\n\n    if (Math.round(strokeWidth / 2) !== strokeWidth / 2) {\n      roundingOffset = 1;\n    }\n\n    var rect = {\n      width: width + roundingOffset,\n      height: height + roundingOffset,\n      x: -Math.round(strokeWidth / 2 + blurRadius) + Math.min(shadowOffsetX, 0) + fillRect.x,\n      y: -Math.round(strokeWidth / 2 + blurRadius) + Math.min(shadowOffsetY, 0) + fillRect.y\n    };\n\n    if (!skipTransform) {\n      return this._transformedRect(rect, relativeTo);\n    }\n\n    return rect;\n  };\n\n  Shape.prototype.drawScene = function (can, top, caching, skipBuffer) {\n    var layer = this.getLayer(),\n        canvas = can || layer.getCanvas(),\n        context = canvas.getContext(),\n        cachedCanvas = this._getCanvasCache(),\n        drawFunc = this.sceneFunc(),\n        hasShadow = this.hasShadow(),\n        hasStroke = this.hasStroke(),\n        stage,\n        bufferCanvas,\n        bufferContext;\n\n    if (!this.isVisible() && !caching) {\n      return this;\n    }\n\n    if (cachedCanvas) {\n      context.save();\n\n      layer._applyTransform(this, context, top);\n\n      this._drawCachedSceneCanvas(context);\n\n      context.restore();\n      return this;\n    }\n\n    if (!drawFunc) {\n      return this;\n    }\n\n    context.save();\n\n    if (this._useBufferCanvas(caching) && !skipBuffer) {\n      stage = this.getStage();\n      bufferCanvas = stage.bufferCanvas;\n      bufferContext = bufferCanvas.getContext();\n      bufferContext.clear();\n      bufferContext.save();\n\n      bufferContext._applyLineJoin(this);\n\n      if (!caching) {\n        if (layer) {\n          layer._applyTransform(this, bufferContext, top);\n        } else {\n          var m = this.getAbsoluteTransform(top).getMatrix();\n          context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n        }\n      }\n\n      drawFunc.call(this, bufferContext, this);\n      bufferContext.restore();\n      var ratio = bufferCanvas.pixelRatio;\n\n      if (hasShadow && !canvas.hitCanvas) {\n        context.save();\n\n        context._applyShadow(this);\n\n        context._applyOpacity(this);\n\n        context._applyGlobalCompositeOperation(this);\n\n        context.drawImage(bufferCanvas._canvas, 0, 0, bufferCanvas.width / ratio, bufferCanvas.height / ratio);\n        context.restore();\n      } else {\n        context._applyOpacity(this);\n\n        context._applyGlobalCompositeOperation(this);\n\n        context.drawImage(bufferCanvas._canvas, 0, 0, bufferCanvas.width / ratio, bufferCanvas.height / ratio);\n      }\n    } else {\n      context._applyLineJoin(this);\n\n      if (!caching) {\n        if (layer) {\n          layer._applyTransform(this, context, top);\n        } else {\n          var o = this.getAbsoluteTransform(top).getMatrix();\n          context.transform(o[0], o[1], o[2], o[3], o[4], o[5]);\n        }\n      }\n\n      if (hasShadow && hasStroke && !canvas.hitCanvas) {\n        context.save();\n\n        if (!caching) {\n          context._applyOpacity(this);\n\n          context._applyGlobalCompositeOperation(this);\n        }\n\n        context._applyShadow(this);\n\n        drawFunc.call(this, context, this);\n        context.restore();\n\n        if (this.hasFill() && this.shadowForStrokeEnabled()) {\n          drawFunc.call(this, context, this);\n        }\n      } else if (hasShadow && !canvas.hitCanvas) {\n        context.save();\n\n        if (!caching) {\n          context._applyOpacity(this);\n\n          context._applyGlobalCompositeOperation(this);\n        }\n\n        context._applyShadow(this);\n\n        drawFunc.call(this, context, this);\n        context.restore();\n      } else {\n        if (!caching) {\n          context._applyOpacity(this);\n\n          context._applyGlobalCompositeOperation(this);\n        }\n\n        drawFunc.call(this, context, this);\n      }\n    }\n\n    context.restore();\n    return this;\n  };\n\n  Shape.prototype.drawHit = function (can, top, caching) {\n    var layer = this.getLayer(),\n        canvas = can || layer.hitCanvas,\n        context = canvas && canvas.getContext(),\n        drawFunc = this.hitFunc() || this.sceneFunc(),\n        cachedCanvas = this._getCanvasCache(),\n        cachedHitCanvas = cachedCanvas && cachedCanvas.hit;\n\n    if (!this.colorKey) {\n      Util_1.Util.warn('Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. See the shape in logs above. If you want to reuse shape you should call remove() instead of destroy()');\n    }\n\n    if (!this.shouldDrawHit() && !caching) {\n      return this;\n    }\n\n    if (cachedHitCanvas) {\n      context.save();\n\n      layer._applyTransform(this, context, top);\n\n      this._drawCachedHitCanvas(context);\n\n      context.restore();\n      return this;\n    }\n\n    if (!drawFunc) {\n      return this;\n    }\n\n    context.save();\n\n    context._applyLineJoin(this);\n\n    if (!caching) {\n      if (layer) {\n        layer._applyTransform(this, context, top);\n      } else {\n        var o = this.getAbsoluteTransform(top).getMatrix();\n        context.transform(o[0], o[1], o[2], o[3], o[4], o[5]);\n      }\n    }\n\n    drawFunc.call(this, context, this);\n    context.restore();\n    return this;\n  };\n\n  Shape.prototype.drawHitFromCache = function (alphaThreshold) {\n    if (alphaThreshold === void 0) {\n      alphaThreshold = 0;\n    }\n\n    var cachedCanvas = this._getCanvasCache(),\n        sceneCanvas = this._getCachedSceneCanvas(),\n        hitCanvas = cachedCanvas.hit,\n        hitContext = hitCanvas.getContext(),\n        hitWidth = hitCanvas.getWidth(),\n        hitHeight = hitCanvas.getHeight(),\n        hitImageData,\n        hitData,\n        len,\n        rgbColorKey,\n        i,\n        alpha;\n\n    hitContext.clear();\n    hitContext.drawImage(sceneCanvas._canvas, 0, 0, hitWidth, hitHeight);\n\n    try {\n      hitImageData = hitContext.getImageData(0, 0, hitWidth, hitHeight);\n      hitData = hitImageData.data;\n      len = hitData.length;\n      rgbColorKey = Util_1.Util._hexToRgb(this.colorKey);\n\n      for (i = 0; i < len; i += 4) {\n        alpha = hitData[i + 3];\n\n        if (alpha > alphaThreshold) {\n          hitData[i] = rgbColorKey.r;\n          hitData[i + 1] = rgbColorKey.g;\n          hitData[i + 2] = rgbColorKey.b;\n          hitData[i + 3] = 255;\n        } else {\n          hitData[i + 3] = 0;\n        }\n      }\n\n      hitContext.putImageData(hitImageData, 0, 0);\n    } catch (e) {\n      Util_1.Util.error('Unable to draw hit graph from cached scene canvas. ' + e.message);\n    }\n\n    return this;\n  };\n\n  Shape.prototype.hasPointerCapture = function (pointerId) {\n    return PointerEvents.hasPointerCapture(pointerId, this);\n  };\n\n  Shape.prototype.setPointerCapture = function (pointerId) {\n    PointerEvents.setPointerCapture(pointerId, this);\n  };\n\n  Shape.prototype.releaseCapture = function (pointerId) {\n    PointerEvents.releaseCapture(pointerId, this);\n  };\n\n  return Shape;\n}(Node_1.Node);\n\nexports.Shape = Shape;\nShape.prototype._fillFunc = _fillFunc;\nShape.prototype._strokeFunc = _strokeFunc;\nShape.prototype._fillFuncHit = _fillFuncHit;\nShape.prototype._strokeFuncHit = _strokeFuncHit;\nShape.prototype._centroid = false;\nShape.prototype.nodeType = 'Shape';\n\nGlobal_1._registerNode(Shape);\n\nFactory_1.Factory.addGetterSetter(Shape, 'stroke', undefined, Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'strokeWidth', 2, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'hitStrokeWidth', 'auto', Validators_1.getNumberOrAutoValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'strokeHitEnabled', true, Validators_1.getBooleanValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'perfectDrawEnabled', true, Validators_1.getBooleanValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'shadowForStrokeEnabled', true, Validators_1.getBooleanValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'lineJoin');\nFactory_1.Factory.addGetterSetter(Shape, 'lineCap');\nFactory_1.Factory.addGetterSetter(Shape, 'sceneFunc');\nFactory_1.Factory.addGetterSetter(Shape, 'hitFunc');\nFactory_1.Factory.addGetterSetter(Shape, 'dash');\nFactory_1.Factory.addGetterSetter(Shape, 'dashOffset', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'shadowColor', undefined, Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'shadowBlur', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'shadowOpacity', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'shadowOffset', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Shape, 'shadowOffsetX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'shadowOffsetY', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternImage');\nFactory_1.Factory.addGetterSetter(Shape, 'fill', undefined, Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternY', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'fillLinearGradientColorStops');\nFactory_1.Factory.addGetterSetter(Shape, 'strokeLinearGradientColorStops');\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientStartRadius', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientEndRadius', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientColorStops');\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternRepeat', 'repeat');\nFactory_1.Factory.addGetterSetter(Shape, 'fillEnabled', true);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeEnabled', true);\nFactory_1.Factory.addGetterSetter(Shape, 'shadowEnabled', true);\nFactory_1.Factory.addGetterSetter(Shape, 'dashEnabled', true);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeScaleEnabled', true);\nFactory_1.Factory.addGetterSetter(Shape, 'fillPriority', 'color');\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillPatternOffset', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternOffsetX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternOffsetY', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillPatternScale', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternScaleX', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternScaleY', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillLinearGradientStartPoint', ['x', 'y']);\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'strokeLinearGradientStartPoint', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Shape, 'fillLinearGradientStartPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeLinearGradientStartPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillLinearGradientStartPointY', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeLinearGradientStartPointY', 0);\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillLinearGradientEndPoint', ['x', 'y']);\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'strokeLinearGradientEndPoint', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Shape, 'fillLinearGradientEndPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeLinearGradientEndPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillLinearGradientEndPointY', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'strokeLinearGradientEndPointY', 0);\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillRadialGradientStartPoint', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientStartPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientStartPointY', 0);\nFactory_1.Factory.addComponentsGetterSetter(Shape, 'fillRadialGradientEndPoint', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientEndPointX', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillRadialGradientEndPointY', 0);\nFactory_1.Factory.addGetterSetter(Shape, 'fillPatternRotation', 0);\nFactory_1.Factory.backCompat(Shape, {\n  dashArray: 'dash',\n  getDashArray: 'getDash',\n  setDashArray: 'getDash',\n  drawFunc: 'sceneFunc',\n  getDrawFunc: 'getSceneFunc',\n  setDrawFunc: 'setSceneFunc',\n  drawHitFunc: 'hitFunc',\n  getDrawHitFunc: 'getHitFunc',\n  setDrawHitFunc: 'setHitFunc'\n});\nUtil_1.Collection.mapMethods(Shape);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"./Util\");\n\nvar Factory_1 = require(\"./Factory\");\n\nvar Container_1 = require(\"./Container\");\n\nvar Global_1 = require(\"./Global\");\n\nvar Canvas_1 = require(\"./Canvas\");\n\nvar DragAndDrop_1 = require(\"./DragAndDrop\");\n\nvar Global_2 = require(\"./Global\");\n\nvar PointerEvents = require(\"./PointerEvents\");\n\nvar STAGE = 'Stage',\n    STRING = 'string',\n    PX = 'px',\n    MOUSEOUT = 'mouseout',\n    MOUSELEAVE = 'mouseleave',\n    MOUSEOVER = 'mouseover',\n    MOUSEENTER = 'mouseenter',\n    MOUSEMOVE = 'mousemove',\n    MOUSEDOWN = 'mousedown',\n    MOUSEUP = 'mouseup',\n    POINTERMOVE = 'pointermove',\n    POINTERDOWN = 'pointerdown',\n    POINTERUP = 'pointerup',\n    POINTERCANCEL = 'pointercancel',\n    LOSTPOINTERCAPTURE = 'lostpointercapture',\n    CONTEXTMENU = 'contextmenu',\n    CLICK = 'click',\n    DBL_CLICK = 'dblclick',\n    TOUCHSTART = 'touchstart',\n    TOUCHEND = 'touchend',\n    TAP = 'tap',\n    DBL_TAP = 'dbltap',\n    TOUCHMOVE = 'touchmove',\n    WHEEL = 'wheel',\n    CONTENT_MOUSEOUT = 'contentMouseout',\n    CONTENT_MOUSEOVER = 'contentMouseover',\n    CONTENT_MOUSEMOVE = 'contentMousemove',\n    CONTENT_MOUSEDOWN = 'contentMousedown',\n    CONTENT_MOUSEUP = 'contentMouseup',\n    CONTENT_CONTEXTMENU = 'contentContextmenu',\n    CONTENT_CLICK = 'contentClick',\n    CONTENT_DBL_CLICK = 'contentDblclick',\n    CONTENT_TOUCHSTART = 'contentTouchstart',\n    CONTENT_TOUCHEND = 'contentTouchend',\n    CONTENT_DBL_TAP = 'contentDbltap',\n    CONTENT_TAP = 'contentTap',\n    CONTENT_TOUCHMOVE = 'contentTouchmove',\n    CONTENT_POINTERMOVE = 'contentPointermove',\n    CONTENT_POINTERDOWN = 'contentPointerdown',\n    CONTENT_POINTERUP = 'contentPointerup',\n    CONTENT_WHEEL = 'contentWheel',\n    RELATIVE = 'relative',\n    KONVA_CONTENT = 'konvajs-content',\n    SPACE = ' ',\n    UNDERSCORE = '_',\n    CONTAINER = 'container',\n    MAX_LAYERS_NUMBER = 5,\n    EMPTY_STRING = '',\n    EVENTS = [MOUSEENTER, MOUSEDOWN, MOUSEMOVE, MOUSEUP, MOUSEOUT, TOUCHSTART, TOUCHMOVE, TOUCHEND, MOUSEOVER, WHEEL, CONTEXTMENU, POINTERDOWN, POINTERMOVE, POINTERUP, POINTERCANCEL, LOSTPOINTERCAPTURE],\n    eventsLength = EVENTS.length;\n\nfunction addEvent(ctx, eventName) {\n  ctx.content.addEventListener(eventName, function (evt) {\n    ctx[UNDERSCORE + eventName](evt);\n  }, false);\n}\n\nvar NO_POINTERS_MESSAGE = \"Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);\";\nexports.stages = [];\n\nfunction checkNoClip(attrs) {\n  if (attrs === void 0) {\n    attrs = {};\n  }\n\n  if (attrs.clipFunc || attrs.clipWidth || attrs.clipHeight) {\n    Util_1.Util.warn('Stage does not support clipping. Please use clip for Layers or Groups.');\n  }\n\n  return attrs;\n}\n\nvar Stage = function (_super) {\n  __extends(Stage, _super);\n\n  function Stage(config) {\n    var _this = _super.call(this, checkNoClip(config)) || this;\n\n    _this._buildDOM();\n\n    _this._bindContentEvents();\n\n    exports.stages.push(_this);\n\n    _this.on('widthChange.konva heightChange.konva', _this._resizeDOM);\n\n    _this.on('visibleChange.konva', _this._checkVisibility);\n\n    _this.on('clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva', function () {\n      checkNoClip(_this.attrs);\n    });\n\n    _this._checkVisibility();\n\n    return _this;\n  }\n\n  Stage.prototype._validateAdd = function (child) {\n    var isLayer = child.getType() === 'Layer';\n    var isFastLayer = child.getType() === 'FastLayer';\n    var valid = isLayer || isFastLayer;\n\n    if (!valid) {\n      Util_1.Util.throw('You may only add layers to the stage.');\n    }\n  };\n\n  Stage.prototype._checkVisibility = function () {\n    var style = this.visible() ? '' : 'none';\n    this.content.style.display = style;\n  };\n\n  Stage.prototype.setContainer = function (container) {\n    if (typeof container === STRING) {\n      if (container.charAt(0) === '.') {\n        var className = container.slice(1);\n        container = document.getElementsByClassName(className)[0];\n      } else {\n        var id;\n\n        if (container.charAt(0) !== '#') {\n          id = container;\n        } else {\n          id = container.slice(1);\n        }\n\n        container = document.getElementById(id);\n      }\n\n      if (!container) {\n        throw 'Can not find container in document with id ' + id;\n      }\n    }\n\n    this._setAttr(CONTAINER, container);\n\n    if (this.content) {\n      if (this.content.parentElement) {\n        this.content.parentElement.removeChild(this.content);\n      }\n\n      container.appendChild(this.content);\n    }\n\n    return this;\n  };\n\n  Stage.prototype.shouldDrawHit = function () {\n    return true;\n  };\n\n  Stage.prototype.clear = function () {\n    var layers = this.children,\n        len = layers.length,\n        n;\n\n    for (n = 0; n < len; n++) {\n      layers[n].clear();\n    }\n\n    return this;\n  };\n\n  Stage.prototype.clone = function (obj) {\n    if (!obj) {\n      obj = {};\n    }\n\n    obj.container = document.createElement('div');\n    return Container_1.Container.prototype.clone.call(this, obj);\n  };\n\n  Stage.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n\n    var content = this.content;\n\n    if (content && Util_1.Util._isInDocument(content)) {\n      this.container().removeChild(content);\n    }\n\n    var index = exports.stages.indexOf(this);\n\n    if (index > -1) {\n      exports.stages.splice(index, 1);\n    }\n\n    return this;\n  };\n\n  Stage.prototype.getPointerPosition = function () {\n    if (!this.pointerPos) {\n      Util_1.Util.warn(NO_POINTERS_MESSAGE);\n    }\n\n    return this.pointerPos;\n  };\n\n  Stage.prototype.getStage = function () {\n    return this;\n  };\n\n  Stage.prototype.getContent = function () {\n    return this.content;\n  };\n\n  Stage.prototype._toKonvaCanvas = function (config) {\n    config = config || {};\n\n    var x = config.x || 0,\n        y = config.y || 0,\n        canvas = new Canvas_1.SceneCanvas({\n      width: config.width || this.width(),\n      height: config.height || this.height(),\n      pixelRatio: config.pixelRatio || 1\n    }),\n        _context = canvas.getContext()._context,\n        layers = this.children;\n\n    if (x || y) {\n      _context.translate(-1 * x, -1 * y);\n    }\n\n    layers.each(function (layer) {\n      if (!layer.isVisible()) {\n        return;\n      }\n\n      var layerCanvas = layer._toKonvaCanvas(config);\n\n      _context.drawImage(layerCanvas._canvas, x, y, layerCanvas.getWidth() / layerCanvas.getPixelRatio(), layerCanvas.getHeight() / layerCanvas.getPixelRatio());\n    });\n    return canvas;\n  };\n\n  Stage.prototype.getIntersection = function (pos, selector) {\n    var layers = this.children,\n        len = layers.length,\n        end = len - 1,\n        n,\n        shape;\n\n    for (n = end; n >= 0; n--) {\n      shape = layers[n].getIntersection(pos, selector);\n\n      if (shape) {\n        return shape;\n      }\n    }\n\n    return null;\n  };\n\n  Stage.prototype._resizeDOM = function () {\n    if (this.content) {\n      var width = this.width(),\n          height = this.height(),\n          layers = this.getChildren(),\n          len = layers.length,\n          n,\n          layer;\n      this.content.style.width = width + PX;\n      this.content.style.height = height + PX;\n      this.bufferCanvas.setSize(width, height);\n      this.bufferHitCanvas.setSize(width, height);\n\n      for (n = 0; n < len; n++) {\n        layer = layers[n];\n        layer.setSize({\n          width: width,\n          height: height\n        });\n        layer.draw();\n      }\n    }\n  };\n\n  Stage.prototype.add = function (layer) {\n    if (arguments.length > 1) {\n      for (var i = 0; i < arguments.length; i++) {\n        this.add(arguments[i]);\n      }\n\n      return this;\n    }\n\n    _super.prototype.add.call(this, layer);\n\n    var length = this.children.length;\n\n    if (length > MAX_LAYERS_NUMBER) {\n      Util_1.Util.warn('The stage has ' + length + ' layers. Recommended maximin number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group.');\n    }\n\n    layer._setCanvasSize(this.width(), this.height());\n\n    layer.draw();\n\n    if (Global_1.Konva.isBrowser) {\n      this.content.appendChild(layer.canvas._canvas);\n    }\n\n    return this;\n  };\n\n  Stage.prototype.getParent = function () {\n    return null;\n  };\n\n  Stage.prototype.getLayer = function () {\n    return null;\n  };\n\n  Stage.prototype.hasPointerCapture = function (pointerId) {\n    return PointerEvents.hasPointerCapture(pointerId, this);\n  };\n\n  Stage.prototype.setPointerCapture = function (pointerId) {\n    PointerEvents.setPointerCapture(pointerId, this);\n  };\n\n  Stage.prototype.releaseCapture = function (pointerId) {\n    PointerEvents.releaseCapture(pointerId, this);\n  };\n\n  Stage.prototype.getLayers = function () {\n    return this.getChildren();\n  };\n\n  Stage.prototype._bindContentEvents = function () {\n    if (!Global_1.Konva.isBrowser) {\n      return;\n    }\n\n    for (var n = 0; n < eventsLength; n++) {\n      addEvent(this, EVENTS[n]);\n    }\n  };\n\n  Stage.prototype._mouseenter = function (evt) {\n    this.setPointersPositions(evt);\n\n    this._fire(MOUSEENTER, {\n      evt: evt,\n      target: this,\n      currentTarget: this\n    });\n  };\n\n  Stage.prototype._mouseover = function (evt) {\n    this.setPointersPositions(evt);\n\n    this._fire(CONTENT_MOUSEOVER, {\n      evt: evt\n    });\n\n    this._fire(MOUSEOVER, {\n      evt: evt,\n      target: this,\n      currentTarget: this\n    });\n  };\n\n  Stage.prototype._mouseout = function (evt) {\n    this.setPointersPositions(evt);\n    var targetShape = this.targetShape;\n\n    if (targetShape && !DragAndDrop_1.DD.isDragging) {\n      targetShape._fireAndBubble(MOUSEOUT, {\n        evt: evt\n      });\n\n      targetShape._fireAndBubble(MOUSELEAVE, {\n        evt: evt\n      });\n\n      this.targetShape = null;\n    } else if (!DragAndDrop_1.DD.isDragging) {\n      this._fire(MOUSELEAVE, {\n        evt: evt,\n        target: this,\n        currentTarget: this\n      });\n\n      this._fire(MOUSEOUT, {\n        evt: evt,\n        target: this,\n        currentTarget: this\n      });\n    }\n\n    this.pointerPos = undefined;\n\n    this._fire(CONTENT_MOUSEOUT, {\n      evt: evt\n    });\n  };\n\n  Stage.prototype._mousemove = function (evt) {\n    if (Global_1.Konva.UA.ieMobile) {\n      return this._touchmove(evt);\n    }\n\n    this.setPointersPositions(evt);\n    var shape;\n\n    if (!DragAndDrop_1.DD.isDragging) {\n      shape = this.getIntersection(this.getPointerPosition());\n\n      if (shape && shape.isListening()) {\n        var differentTarget = !this.targetShape || this.targetShape !== shape;\n\n        if (!DragAndDrop_1.DD.isDragging && differentTarget) {\n          if (this.targetShape) {\n            this.targetShape._fireAndBubble(MOUSEOUT, {\n              evt: evt\n            }, shape);\n\n            this.targetShape._fireAndBubble(MOUSELEAVE, {\n              evt: evt\n            }, shape);\n          }\n\n          shape._fireAndBubble(MOUSEOVER, {\n            evt: evt\n          }, this.targetShape);\n\n          shape._fireAndBubble(MOUSEENTER, {\n            evt: evt\n          }, this.targetShape);\n\n          this.targetShape = shape;\n        } else {\n          shape._fireAndBubble(MOUSEMOVE, {\n            evt: evt\n          });\n        }\n      } else {\n        if (this.targetShape && !DragAndDrop_1.DD.isDragging) {\n          this.targetShape._fireAndBubble(MOUSEOUT, {\n            evt: evt\n          });\n\n          this.targetShape._fireAndBubble(MOUSELEAVE, {\n            evt: evt\n          });\n\n          this._fire(MOUSEOVER, {\n            evt: evt,\n            target: this,\n            currentTarget: this\n          });\n\n          this.targetShape = null;\n        }\n\n        this._fire(MOUSEMOVE, {\n          evt: evt,\n          target: this,\n          currentTarget: this\n        });\n      }\n\n      this._fire(CONTENT_MOUSEMOVE, {\n        evt: evt\n      });\n    }\n\n    if (evt.cancelable) {\n      evt.preventDefault();\n    }\n  };\n\n  Stage.prototype._mousedown = function (evt) {\n    if (Global_1.Konva.UA.ieMobile) {\n      return this._touchstart(evt);\n    }\n\n    this.setPointersPositions(evt);\n    var shape = this.getIntersection(this.getPointerPosition());\n    Global_1.Konva.listenClickTap = true;\n\n    if (shape && shape.isListening()) {\n      this.clickStartShape = shape;\n\n      shape._fireAndBubble(MOUSEDOWN, {\n        evt: evt\n      });\n    } else {\n      this._fire(MOUSEDOWN, {\n        evt: evt,\n        target: this,\n        currentTarget: this\n      });\n    }\n\n    this._fire(CONTENT_MOUSEDOWN, {\n      evt: evt\n    });\n  };\n\n  Stage.prototype._mouseup = function (evt) {\n    if (Global_1.Konva.UA.ieMobile) {\n      return this._touchend(evt);\n    }\n\n    this.setPointersPositions(evt);\n    var shape = this.getIntersection(this.getPointerPosition()),\n        clickStartShape = this.clickStartShape,\n        clickEndShape = this.clickEndShape,\n        fireDblClick = false;\n\n    if (Global_1.Konva.inDblClickWindow) {\n      fireDblClick = true;\n      clearTimeout(this.dblTimeout);\n    } else if (!DragAndDrop_1.DD.justDragged) {\n      Global_1.Konva.inDblClickWindow = true;\n      clearTimeout(this.dblTimeout);\n    } else if (DragAndDrop_1.DD) {\n      DragAndDrop_1.DD.justDragged = false;\n    }\n\n    this.dblTimeout = setTimeout(function () {\n      Global_1.Konva.inDblClickWindow = false;\n    }, Global_1.Konva.dblClickWindow);\n\n    if (shape && shape.isListening()) {\n      this.clickEndShape = shape;\n\n      shape._fireAndBubble(MOUSEUP, {\n        evt: evt\n      });\n\n      if (Global_1.Konva.listenClickTap && clickStartShape && clickStartShape._id === shape._id) {\n        shape._fireAndBubble(CLICK, {\n          evt: evt\n        });\n\n        if (fireDblClick && clickEndShape && clickEndShape === shape) {\n          shape._fireAndBubble(DBL_CLICK, {\n            evt: evt\n          });\n        }\n      }\n    } else {\n      this._fire(MOUSEUP, {\n        evt: evt,\n        target: this,\n        currentTarget: this\n      });\n\n      if (Global_1.Konva.listenClickTap) {\n        this._fire(CLICK, {\n          evt: evt,\n          target: this,\n          currentTarget: this\n        });\n      }\n\n      if (fireDblClick) {\n        this._fire(DBL_CLICK, {\n          evt: evt,\n          target: this,\n          currentTarget: this\n        });\n      }\n    }\n\n    this._fire(CONTENT_MOUSEUP, {\n      evt: evt\n    });\n\n    if (Global_1.Konva.listenClickTap) {\n      this._fire(CONTENT_CLICK, {\n        evt: evt\n      });\n\n      if (fireDblClick) {\n        this._fire(CONTENT_DBL_CLICK, {\n          evt: evt\n        });\n      }\n    }\n\n    Global_1.Konva.listenClickTap = false;\n\n    if (evt.cancelable) {\n      evt.preventDefault();\n    }\n  };\n\n  Stage.prototype._contextmenu = function (evt) {\n    this.setPointersPositions(evt);\n    var shape = this.getIntersection(this.getPointerPosition());\n\n    if (shape && shape.isListening()) {\n      shape._fireAndBubble(CONTEXTMENU, {\n        evt: evt\n      });\n    } else {\n      this._fire(CONTEXTMENU, {\n        evt: evt,\n        target: this,\n        currentTarget: this\n      });\n    }\n\n    this._fire(CONTENT_CONTEXTMENU, {\n      evt: evt\n    });\n  };\n\n  Stage.prototype._touchstart = function (evt) {\n    this.setPointersPositions(evt);\n    var shape = this.getIntersection(this.getPointerPosition());\n    Global_1.Konva.listenClickTap = true;\n\n    if (shape && shape.isListening()) {\n      this.tapStartShape = shape;\n\n      shape._fireAndBubble(TOUCHSTART, {\n        evt: evt\n      });\n\n      if (shape.isListening() && shape.preventDefault() && evt.cancelable) {\n        evt.preventDefault();\n      }\n    } else {\n      this._fire(TOUCHSTART, {\n        evt: evt,\n        target: this,\n        currentTarget: this\n      });\n    }\n\n    this._fire(CONTENT_TOUCHSTART, {\n      evt: evt\n    });\n  };\n\n  Stage.prototype._touchend = function (evt) {\n    this.setPointersPositions(evt);\n    var shape = this.getIntersection(this.getPointerPosition()),\n        clickEndShape = this.clickEndShape,\n        fireDblClick = false;\n\n    if (Global_1.Konva.inDblClickWindow) {\n      fireDblClick = true;\n      clearTimeout(this.dblTimeout);\n    } else {\n      Global_1.Konva.inDblClickWindow = true;\n      clearTimeout(this.dblTimeout);\n    }\n\n    this.dblTimeout = setTimeout(function () {\n      Global_1.Konva.inDblClickWindow = false;\n    }, Global_1.Konva.dblClickWindow);\n\n    if (shape && shape.isListening()) {\n      this.clickEndShape = shape;\n\n      shape._fireAndBubble(TOUCHEND, {\n        evt: evt\n      });\n\n      if (Global_1.Konva.listenClickTap && this.tapStartShape && shape._id === this.tapStartShape._id) {\n        shape._fireAndBubble(TAP, {\n          evt: evt\n        });\n\n        if (fireDblClick && clickEndShape && clickEndShape === shape) {\n          shape._fireAndBubble(DBL_TAP, {\n            evt: evt\n          });\n        }\n      }\n\n      if (shape.isListening() && shape.preventDefault() && evt.cancelable) {\n        evt.preventDefault();\n      }\n    } else {\n      this._fire(TOUCHEND, {\n        evt: evt,\n        target: this,\n        currentTarget: this\n      });\n\n      if (Global_1.Konva.listenClickTap) {\n        this._fire(TAP, {\n          evt: evt,\n          target: this,\n          currentTarget: this\n        });\n      }\n\n      if (fireDblClick) {\n        this._fire(DBL_TAP, {\n          evt: evt,\n          target: this,\n          currentTarget: this\n        });\n      }\n    }\n\n    this._fire(CONTENT_TOUCHEND, {\n      evt: evt\n    });\n\n    if (Global_1.Konva.listenClickTap) {\n      this._fire(CONTENT_TAP, {\n        evt: evt\n      });\n\n      if (fireDblClick) {\n        this._fire(CONTENT_DBL_TAP, {\n          evt: evt\n        });\n      }\n    }\n\n    Global_1.Konva.listenClickTap = false;\n  };\n\n  Stage.prototype._touchmove = function (evt) {\n    this.setPointersPositions(evt);\n    var shape;\n\n    if (!DragAndDrop_1.DD.isDragging) {\n      shape = this.getIntersection(this.getPointerPosition());\n\n      if (shape && shape.isListening()) {\n        shape._fireAndBubble(TOUCHMOVE, {\n          evt: evt\n        });\n\n        if (shape.isListening() && shape.preventDefault() && evt.cancelable) {\n          evt.preventDefault();\n        }\n      } else {\n        this._fire(TOUCHMOVE, {\n          evt: evt,\n          target: this,\n          currentTarget: this\n        });\n      }\n\n      this._fire(CONTENT_TOUCHMOVE, {\n        evt: evt\n      });\n    }\n\n    if (DragAndDrop_1.DD.isDragging && DragAndDrop_1.DD.node.preventDefault() && evt.cancelable) {\n      evt.preventDefault();\n    }\n  };\n\n  Stage.prototype._wheel = function (evt) {\n    this.setPointersPositions(evt);\n    var shape = this.getIntersection(this.getPointerPosition());\n\n    if (shape && shape.isListening()) {\n      shape._fireAndBubble(WHEEL, {\n        evt: evt\n      });\n    } else {\n      this._fire(WHEEL, {\n        evt: evt,\n        target: this,\n        currentTarget: this\n      });\n    }\n\n    this._fire(CONTENT_WHEEL, {\n      evt: evt\n    });\n  };\n\n  Stage.prototype._pointerdown = function (evt) {\n    if (!Global_1.Konva._pointerEventsEnabled) {\n      return;\n    }\n\n    this.setPointersPositions(evt);\n    var shape = PointerEvents.getCapturedShape(evt.pointerId) || this.getIntersection(this.getPointerPosition());\n\n    if (shape) {\n      shape._fireAndBubble(POINTERDOWN, PointerEvents.createEvent(evt));\n    }\n  };\n\n  Stage.prototype._pointermove = function (evt) {\n    if (!Global_1.Konva._pointerEventsEnabled) {\n      return;\n    }\n\n    this.setPointersPositions(evt);\n    var shape = PointerEvents.getCapturedShape(evt.pointerId) || this.getIntersection(this.getPointerPosition());\n\n    if (shape) {\n      shape._fireAndBubble(POINTERMOVE, PointerEvents.createEvent(evt));\n    }\n  };\n\n  Stage.prototype._pointerup = function (evt) {\n    if (!Global_1.Konva._pointerEventsEnabled) {\n      return;\n    }\n\n    this.setPointersPositions(evt);\n    var shape = PointerEvents.getCapturedShape(evt.pointerId) || this.getIntersection(this.getPointerPosition());\n\n    if (shape) {\n      shape._fireAndBubble(POINTERUP, PointerEvents.createEvent(evt));\n    }\n\n    PointerEvents.releaseCapture(evt.pointerId);\n  };\n\n  Stage.prototype._pointercancel = function (evt) {\n    if (!Global_1.Konva._pointerEventsEnabled) {\n      return;\n    }\n\n    this.setPointersPositions(evt);\n    var shape = PointerEvents.getCapturedShape(evt.pointerId) || this.getIntersection(this.getPointerPosition());\n\n    if (shape) {\n      shape._fireAndBubble(POINTERUP, PointerEvents.createEvent(evt));\n    }\n\n    PointerEvents.releaseCapture(evt.pointerId);\n  };\n\n  Stage.prototype._lostpointercapture = function (evt) {\n    PointerEvents.releaseCapture(evt.pointerId);\n  };\n\n  Stage.prototype.setPointersPositions = function (evt) {\n    var contentPosition = this._getContentPosition(),\n        x = null,\n        y = null;\n\n    evt = evt ? evt : window.event;\n\n    if (evt.touches !== undefined) {\n      if (evt.touches.length > 0) {\n        var touch = evt.touches[0];\n        x = touch.clientX - contentPosition.left;\n        y = touch.clientY - contentPosition.top;\n      }\n    } else {\n      x = evt.clientX - contentPosition.left;\n      y = evt.clientY - contentPosition.top;\n    }\n\n    if (x !== null && y !== null) {\n      this.pointerPos = {\n        x: x,\n        y: y\n      };\n    }\n  };\n\n  Stage.prototype._setPointerPosition = function (evt) {\n    Util_1.Util.warn('Method _setPointerPosition is deprecated. Use \"stage.setPointersPositions(event)\" instead.');\n    this.setPointersPositions(evt);\n  };\n\n  Stage.prototype._getContentPosition = function () {\n    var rect = this.content.getBoundingClientRect ? this.content.getBoundingClientRect() : {\n      top: 0,\n      left: 0\n    };\n    return {\n      top: rect.top,\n      left: rect.left\n    };\n  };\n\n  Stage.prototype._buildDOM = function () {\n    this.bufferCanvas = new Canvas_1.SceneCanvas();\n    this.bufferHitCanvas = new Canvas_1.HitCanvas({\n      pixelRatio: 1\n    });\n\n    if (!Global_1.Konva.isBrowser) {\n      return;\n    }\n\n    var container = this.container();\n\n    if (!container) {\n      throw 'Stage has no container. A container is required.';\n    }\n\n    container.innerHTML = EMPTY_STRING;\n    this.content = document.createElement('div');\n    this.content.style.position = RELATIVE;\n    this.content.style.userSelect = 'none';\n    this.content.className = KONVA_CONTENT;\n    this.content.setAttribute('role', 'presentation');\n    container.appendChild(this.content);\n\n    this._resizeDOM();\n  };\n\n  Stage.prototype.cache = function () {\n    Util_1.Util.warn('Cache function is not allowed for stage. You may use cache only for layers, groups and shapes.');\n    return this;\n  };\n\n  Stage.prototype.clearCache = function () {\n    return this;\n  };\n\n  Stage.prototype.batchDraw = function () {\n    this.children.each(function (layer) {\n      layer.batchDraw();\n    });\n    return this;\n  };\n\n  return Stage;\n}(Container_1.Container);\n\nexports.Stage = Stage;\nStage.prototype.nodeType = STAGE;\n\nGlobal_2._registerNode(Stage);\n\nFactory_1.Factory.addGetterSetter(Stage, 'container');","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"./Util\");\n\nvar Animation_1 = require(\"./Animation\");\n\nvar Node_1 = require(\"./Node\");\n\nvar Global_1 = require(\"./Global\");\n\nvar blacklist = {\n  node: 1,\n  duration: 1,\n  easing: 1,\n  onFinish: 1,\n  yoyo: 1\n},\n    PAUSED = 1,\n    PLAYING = 2,\n    REVERSING = 3,\n    idCounter = 0,\n    colorAttrs = ['fill', 'stroke', 'shadowColor'];\n\nvar TweenEngine = function () {\n  function TweenEngine(prop, propFunc, func, begin, finish, duration, yoyo) {\n    this.prop = prop;\n    this.propFunc = propFunc;\n    this.begin = begin;\n    this._pos = begin;\n    this.duration = duration;\n    this._change = 0;\n    this.prevPos = 0;\n    this.yoyo = yoyo;\n    this._time = 0;\n    this._position = 0;\n    this._startTime = 0;\n    this._finish = 0;\n    this.func = func;\n    this._change = finish - this.begin;\n    this.pause();\n  }\n\n  TweenEngine.prototype.fire = function (str) {\n    var handler = this[str];\n\n    if (handler) {\n      handler();\n    }\n  };\n\n  TweenEngine.prototype.setTime = function (t) {\n    if (t > this.duration) {\n      if (this.yoyo) {\n        this._time = this.duration;\n        this.reverse();\n      } else {\n        this.finish();\n      }\n    } else if (t < 0) {\n      if (this.yoyo) {\n        this._time = 0;\n        this.play();\n      } else {\n        this.reset();\n      }\n    } else {\n      this._time = t;\n      this.update();\n    }\n  };\n\n  TweenEngine.prototype.getTime = function () {\n    return this._time;\n  };\n\n  TweenEngine.prototype.setPosition = function (p) {\n    this.prevPos = this._pos;\n    this.propFunc(p);\n    this._pos = p;\n  };\n\n  TweenEngine.prototype.getPosition = function (t) {\n    if (t === undefined) {\n      t = this._time;\n    }\n\n    return this.func(t, this.begin, this._change, this.duration);\n  };\n\n  TweenEngine.prototype.play = function () {\n    this.state = PLAYING;\n    this._startTime = this.getTimer() - this._time;\n    this.onEnterFrame();\n    this.fire('onPlay');\n  };\n\n  TweenEngine.prototype.reverse = function () {\n    this.state = REVERSING;\n    this._time = this.duration - this._time;\n    this._startTime = this.getTimer() - this._time;\n    this.onEnterFrame();\n    this.fire('onReverse');\n  };\n\n  TweenEngine.prototype.seek = function (t) {\n    this.pause();\n    this._time = t;\n    this.update();\n    this.fire('onSeek');\n  };\n\n  TweenEngine.prototype.reset = function () {\n    this.pause();\n    this._time = 0;\n    this.update();\n    this.fire('onReset');\n  };\n\n  TweenEngine.prototype.finish = function () {\n    this.pause();\n    this._time = this.duration;\n    this.update();\n    this.fire('onFinish');\n  };\n\n  TweenEngine.prototype.update = function () {\n    this.setPosition(this.getPosition(this._time));\n  };\n\n  TweenEngine.prototype.onEnterFrame = function () {\n    var t = this.getTimer() - this._startTime;\n\n    if (this.state === PLAYING) {\n      this.setTime(t);\n    } else if (this.state === REVERSING) {\n      this.setTime(this.duration - t);\n    }\n  };\n\n  TweenEngine.prototype.pause = function () {\n    this.state = PAUSED;\n    this.fire('onPause');\n  };\n\n  TweenEngine.prototype.getTimer = function () {\n    return new Date().getTime();\n  };\n\n  return TweenEngine;\n}();\n\nvar Tween = function () {\n  function Tween(config) {\n    var that = this,\n        node = config.node,\n        nodeId = node._id,\n        duration,\n        easing = config.easing || exports.Easings.Linear,\n        yoyo = !!config.yoyo,\n        key;\n\n    if (typeof config.duration === 'undefined') {\n      duration = 0.3;\n    } else if (config.duration === 0) {\n      duration = 0.001;\n    } else {\n      duration = config.duration;\n    }\n\n    this.node = node;\n    this._id = idCounter++;\n    var layers = node.getLayer() || (node instanceof Global_1.Konva['Stage'] ? node.getLayers() : null);\n\n    if (!layers) {\n      Util_1.Util.error('Tween constructor have `node` that is not in a layer. Please add node into layer first.');\n    }\n\n    this.anim = new Animation_1.Animation(function () {\n      that.tween.onEnterFrame();\n    }, layers);\n    this.tween = new TweenEngine(key, function (i) {\n      that._tweenFunc(i);\n    }, easing, 0, 1, duration * 1000, yoyo);\n\n    this._addListeners();\n\n    if (!Tween.attrs[nodeId]) {\n      Tween.attrs[nodeId] = {};\n    }\n\n    if (!Tween.attrs[nodeId][this._id]) {\n      Tween.attrs[nodeId][this._id] = {};\n    }\n\n    if (!Tween.tweens[nodeId]) {\n      Tween.tweens[nodeId] = {};\n    }\n\n    for (key in config) {\n      if (blacklist[key] === undefined) {\n        this._addAttr(key, config[key]);\n      }\n    }\n\n    this.reset();\n    this.onFinish = config.onFinish;\n    this.onReset = config.onReset;\n  }\n\n  Tween.prototype._addAttr = function (key, end) {\n    var node = this.node,\n        nodeId = node._id,\n        start,\n        diff,\n        tweenId,\n        n,\n        len,\n        trueEnd,\n        trueStart,\n        endRGBA;\n    tweenId = Tween.tweens[nodeId][key];\n\n    if (tweenId) {\n      delete Tween.attrs[nodeId][tweenId][key];\n    }\n\n    start = node.getAttr(key);\n\n    if (Util_1.Util._isArray(end)) {\n      diff = [];\n      len = Math.max(end.length, start.length);\n\n      if (key === 'points' && end.length !== start.length) {\n        if (end.length > start.length) {\n          trueStart = start;\n          start = Util_1.Util._prepareArrayForTween(start, end, node.closed());\n        } else {\n          trueEnd = end;\n          end = Util_1.Util._prepareArrayForTween(end, start, node.closed());\n        }\n      }\n\n      if (key.indexOf('fill') === 0) {\n        for (n = 0; n < len; n++) {\n          if (n % 2 === 0) {\n            diff.push(end[n] - start[n]);\n          } else {\n            var startRGBA = Util_1.Util.colorToRGBA(start[n]);\n            endRGBA = Util_1.Util.colorToRGBA(end[n]);\n            start[n] = startRGBA;\n            diff.push({\n              r: endRGBA.r - startRGBA.r,\n              g: endRGBA.g - startRGBA.g,\n              b: endRGBA.b - startRGBA.b,\n              a: endRGBA.a - startRGBA.a\n            });\n          }\n        }\n      } else {\n        for (n = 0; n < len; n++) {\n          diff.push(end[n] - start[n]);\n        }\n      }\n    } else if (colorAttrs.indexOf(key) !== -1) {\n      start = Util_1.Util.colorToRGBA(start);\n      endRGBA = Util_1.Util.colorToRGBA(end);\n      diff = {\n        r: endRGBA.r - start.r,\n        g: endRGBA.g - start.g,\n        b: endRGBA.b - start.b,\n        a: endRGBA.a - start.a\n      };\n    } else {\n      diff = end - start;\n    }\n\n    Tween.attrs[nodeId][this._id][key] = {\n      start: start,\n      diff: diff,\n      end: end,\n      trueEnd: trueEnd,\n      trueStart: trueStart\n    };\n    Tween.tweens[nodeId][key] = this._id;\n  };\n\n  Tween.prototype._tweenFunc = function (i) {\n    var node = this.node,\n        attrs = Tween.attrs[node._id][this._id],\n        key,\n        attr,\n        start,\n        diff,\n        newVal,\n        n,\n        len,\n        end;\n\n    for (key in attrs) {\n      attr = attrs[key];\n      start = attr.start;\n      diff = attr.diff;\n      end = attr.end;\n\n      if (Util_1.Util._isArray(start)) {\n        newVal = [];\n        len = Math.max(start.length, end.length);\n\n        if (key.indexOf('fill') === 0) {\n          for (n = 0; n < len; n++) {\n            if (n % 2 === 0) {\n              newVal.push((start[n] || 0) + diff[n] * i);\n            } else {\n              newVal.push('rgba(' + Math.round(start[n].r + diff[n].r * i) + ',' + Math.round(start[n].g + diff[n].g * i) + ',' + Math.round(start[n].b + diff[n].b * i) + ',' + (start[n].a + diff[n].a * i) + ')');\n            }\n          }\n        } else {\n          for (n = 0; n < len; n++) {\n            newVal.push((start[n] || 0) + diff[n] * i);\n          }\n        }\n      } else if (colorAttrs.indexOf(key) !== -1) {\n        newVal = 'rgba(' + Math.round(start.r + diff.r * i) + ',' + Math.round(start.g + diff.g * i) + ',' + Math.round(start.b + diff.b * i) + ',' + (start.a + diff.a * i) + ')';\n      } else {\n        newVal = start + diff * i;\n      }\n\n      node.setAttr(key, newVal);\n    }\n  };\n\n  Tween.prototype._addListeners = function () {\n    var _this = this;\n\n    this.tween.onPlay = function () {\n      _this.anim.start();\n    };\n\n    this.tween.onReverse = function () {\n      _this.anim.start();\n    };\n\n    this.tween.onPause = function () {\n      _this.anim.stop();\n    };\n\n    this.tween.onFinish = function () {\n      var node = _this.node;\n      var attrs = Tween.attrs[node._id][_this._id];\n\n      if (attrs.points && attrs.points.trueEnd) {\n        node.setAttr('points', attrs.points.trueEnd);\n      }\n\n      if (_this.onFinish) {\n        _this.onFinish.call(_this);\n      }\n    };\n\n    this.tween.onReset = function () {\n      var node = _this.node;\n      var attrs = Tween.attrs[node._id][_this._id];\n\n      if (attrs.points && attrs.points.trueStart) {\n        node.points(attrs.points.trueStart);\n      }\n\n      if (_this.onReset) {\n        _this.onReset();\n      }\n    };\n  };\n\n  Tween.prototype.play = function () {\n    this.tween.play();\n    return this;\n  };\n\n  Tween.prototype.reverse = function () {\n    this.tween.reverse();\n    return this;\n  };\n\n  Tween.prototype.reset = function () {\n    this.tween.reset();\n    return this;\n  };\n\n  Tween.prototype.seek = function (t) {\n    this.tween.seek(t * 1000);\n    return this;\n  };\n\n  Tween.prototype.pause = function () {\n    this.tween.pause();\n    return this;\n  };\n\n  Tween.prototype.finish = function () {\n    this.tween.finish();\n    return this;\n  };\n\n  Tween.prototype.destroy = function () {\n    var nodeId = this.node._id,\n        thisId = this._id,\n        attrs = Tween.tweens[nodeId],\n        key;\n    this.pause();\n\n    for (key in attrs) {\n      delete Tween.tweens[nodeId][key];\n    }\n\n    delete Tween.attrs[nodeId][thisId];\n  };\n\n  Tween.attrs = {};\n  Tween.tweens = {};\n  return Tween;\n}();\n\nexports.Tween = Tween;\n\nNode_1.Node.prototype.to = function (params) {\n  var onFinish = params.onFinish;\n  params.node = this;\n\n  params.onFinish = function () {\n    this.destroy();\n\n    if (onFinish) {\n      onFinish();\n    }\n  };\n\n  var tween = new Tween(params);\n  tween.play();\n};\n\nexports.Easings = {\n  BackEaseIn: function BackEaseIn(t, b, c, d) {\n    var s = 1.70158;\n    return c * (t /= d) * t * ((s + 1) * t - s) + b;\n  },\n  BackEaseOut: function BackEaseOut(t, b, c, d) {\n    var s = 1.70158;\n    return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\n  },\n  BackEaseInOut: function BackEaseInOut(t, b, c, d) {\n    var s = 1.70158;\n\n    if ((t /= d / 2) < 1) {\n      return c / 2 * (t * t * (((s *= 1.525) + 1) * t - s)) + b;\n    }\n\n    return c / 2 * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2) + b;\n  },\n  ElasticEaseIn: function ElasticEaseIn(t, b, c, d, a, p) {\n    var s = 0;\n\n    if (t === 0) {\n      return b;\n    }\n\n    if ((t /= d) === 1) {\n      return b + c;\n    }\n\n    if (!p) {\n      p = d * 0.3;\n    }\n\n    if (!a || a < Math.abs(c)) {\n      a = c;\n      s = p / 4;\n    } else {\n      s = p / (2 * Math.PI) * Math.asin(c / a);\n    }\n\n    return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\n  },\n  ElasticEaseOut: function ElasticEaseOut(t, b, c, d, a, p) {\n    var s = 0;\n\n    if (t === 0) {\n      return b;\n    }\n\n    if ((t /= d) === 1) {\n      return b + c;\n    }\n\n    if (!p) {\n      p = d * 0.3;\n    }\n\n    if (!a || a < Math.abs(c)) {\n      a = c;\n      s = p / 4;\n    } else {\n      s = p / (2 * Math.PI) * Math.asin(c / a);\n    }\n\n    return a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b;\n  },\n  ElasticEaseInOut: function ElasticEaseInOut(t, b, c, d, a, p) {\n    var s = 0;\n\n    if (t === 0) {\n      return b;\n    }\n\n    if ((t /= d / 2) === 2) {\n      return b + c;\n    }\n\n    if (!p) {\n      p = d * (0.3 * 1.5);\n    }\n\n    if (!a || a < Math.abs(c)) {\n      a = c;\n      s = p / 4;\n    } else {\n      s = p / (2 * Math.PI) * Math.asin(c / a);\n    }\n\n    if (t < 1) {\n      return -0.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\n    }\n\n    return a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p) * 0.5 + c + b;\n  },\n  BounceEaseOut: function BounceEaseOut(t, b, c, d) {\n    if ((t /= d) < 1 / 2.75) {\n      return c * (7.5625 * t * t) + b;\n    } else if (t < 2 / 2.75) {\n      return c * (7.5625 * (t -= 1.5 / 2.75) * t + 0.75) + b;\n    } else if (t < 2.5 / 2.75) {\n      return c * (7.5625 * (t -= 2.25 / 2.75) * t + 0.9375) + b;\n    } else {\n      return c * (7.5625 * (t -= 2.625 / 2.75) * t + 0.984375) + b;\n    }\n  },\n  BounceEaseIn: function BounceEaseIn(t, b, c, d) {\n    return c - exports.Easings.BounceEaseOut(d - t, 0, c, d) + b;\n  },\n  BounceEaseInOut: function BounceEaseInOut(t, b, c, d) {\n    if (t < d / 2) {\n      return exports.Easings.BounceEaseIn(t * 2, 0, c, d) * 0.5 + b;\n    } else {\n      return exports.Easings.BounceEaseOut(t * 2 - d, 0, c, d) * 0.5 + c * 0.5 + b;\n    }\n  },\n  EaseIn: function EaseIn(t, b, c, d) {\n    return c * (t /= d) * t + b;\n  },\n  EaseOut: function EaseOut(t, b, c, d) {\n    return -c * (t /= d) * (t - 2) + b;\n  },\n  EaseInOut: function EaseInOut(t, b, c, d) {\n    if ((t /= d / 2) < 1) {\n      return c / 2 * t * t + b;\n    }\n\n    return -c / 2 * (--t * (t - 2) - 1) + b;\n  },\n  StrongEaseIn: function StrongEaseIn(t, b, c, d) {\n    return c * (t /= d) * t * t * t * t + b;\n  },\n  StrongEaseOut: function StrongEaseOut(t, b, c, d) {\n    return c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n  },\n  StrongEaseInOut: function StrongEaseInOut(t, b, c, d) {\n    if ((t /= d / 2) < 1) {\n      return c / 2 * t * t * t * t * t + b;\n    }\n\n    return c / 2 * ((t -= 2) * t * t * t * t + 2) + b;\n  },\n  Linear: function Linear(t, b, c, d) {\n    return c * t / d + b;\n  }\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Global_1 = require(\"./Global\");\n\nvar Collection = function () {\n  function Collection() {}\n\n  Collection.toCollection = function (arr) {\n    var collection = new Collection(),\n        len = arr.length,\n        n;\n\n    for (n = 0; n < len; n++) {\n      collection.push(arr[n]);\n    }\n\n    return collection;\n  };\n\n  Collection._mapMethod = function (methodName) {\n    Collection.prototype[methodName] = function () {\n      var len = this.length,\n          i;\n      var args = [].slice.call(arguments);\n\n      for (i = 0; i < len; i++) {\n        this[i][methodName].apply(this[i], args);\n      }\n\n      return this;\n    };\n  };\n\n  Collection.mapMethods = function (constructor) {\n    var prot = constructor.prototype;\n\n    for (var methodName in prot) {\n      Collection._mapMethod(methodName);\n    }\n  };\n\n  return Collection;\n}();\n\nexports.Collection = Collection;\nCollection.prototype = [];\n\nCollection.prototype.each = function (func) {\n  for (var n = 0; n < this.length; n++) {\n    func(this[n], n);\n  }\n};\n\nCollection.prototype.toArray = function () {\n  var arr = [],\n      len = this.length,\n      n;\n\n  for (n = 0; n < len; n++) {\n    arr.push(this[n]);\n  }\n\n  return arr;\n};\n\nvar Transform = function () {\n  function Transform(m) {\n    if (m === void 0) {\n      m = [1, 0, 0, 1, 0, 0];\n    }\n\n    this.m = m && m.slice() || [1, 0, 0, 1, 0, 0];\n  }\n\n  Transform.prototype.copy = function () {\n    return new Transform(this.m);\n  };\n\n  Transform.prototype.point = function (point) {\n    var m = this.m;\n    return {\n      x: m[0] * point.x + m[2] * point.y + m[4],\n      y: m[1] * point.x + m[3] * point.y + m[5]\n    };\n  };\n\n  Transform.prototype.translate = function (x, y) {\n    this.m[4] += this.m[0] * x + this.m[2] * y;\n    this.m[5] += this.m[1] * x + this.m[3] * y;\n    return this;\n  };\n\n  Transform.prototype.scale = function (sx, sy) {\n    this.m[0] *= sx;\n    this.m[1] *= sx;\n    this.m[2] *= sy;\n    this.m[3] *= sy;\n    return this;\n  };\n\n  Transform.prototype.rotate = function (rad) {\n    var c = Math.cos(rad);\n    var s = Math.sin(rad);\n    var m11 = this.m[0] * c + this.m[2] * s;\n    var m12 = this.m[1] * c + this.m[3] * s;\n    var m21 = this.m[0] * -s + this.m[2] * c;\n    var m22 = this.m[1] * -s + this.m[3] * c;\n    this.m[0] = m11;\n    this.m[1] = m12;\n    this.m[2] = m21;\n    this.m[3] = m22;\n    return this;\n  };\n\n  Transform.prototype.getTranslation = function () {\n    return {\n      x: this.m[4],\n      y: this.m[5]\n    };\n  };\n\n  Transform.prototype.skew = function (sx, sy) {\n    var m11 = this.m[0] + this.m[2] * sy;\n    var m12 = this.m[1] + this.m[3] * sy;\n    var m21 = this.m[2] + this.m[0] * sx;\n    var m22 = this.m[3] + this.m[1] * sx;\n    this.m[0] = m11;\n    this.m[1] = m12;\n    this.m[2] = m21;\n    this.m[3] = m22;\n    return this;\n  };\n\n  Transform.prototype.multiply = function (matrix) {\n    var m11 = this.m[0] * matrix.m[0] + this.m[2] * matrix.m[1];\n    var m12 = this.m[1] * matrix.m[0] + this.m[3] * matrix.m[1];\n    var m21 = this.m[0] * matrix.m[2] + this.m[2] * matrix.m[3];\n    var m22 = this.m[1] * matrix.m[2] + this.m[3] * matrix.m[3];\n    var dx = this.m[0] * matrix.m[4] + this.m[2] * matrix.m[5] + this.m[4];\n    var dy = this.m[1] * matrix.m[4] + this.m[3] * matrix.m[5] + this.m[5];\n    this.m[0] = m11;\n    this.m[1] = m12;\n    this.m[2] = m21;\n    this.m[3] = m22;\n    this.m[4] = dx;\n    this.m[5] = dy;\n    return this;\n  };\n\n  Transform.prototype.invert = function () {\n    var d = 1 / (this.m[0] * this.m[3] - this.m[1] * this.m[2]);\n    var m0 = this.m[3] * d;\n    var m1 = -this.m[1] * d;\n    var m2 = -this.m[2] * d;\n    var m3 = this.m[0] * d;\n    var m4 = d * (this.m[2] * this.m[5] - this.m[3] * this.m[4]);\n    var m5 = d * (this.m[1] * this.m[4] - this.m[0] * this.m[5]);\n    this.m[0] = m0;\n    this.m[1] = m1;\n    this.m[2] = m2;\n    this.m[3] = m3;\n    this.m[4] = m4;\n    this.m[5] = m5;\n    return this;\n  };\n\n  Transform.prototype.getMatrix = function () {\n    return this.m;\n  };\n\n  Transform.prototype.setAbsolutePosition = function (x, y) {\n    var m0 = this.m[0],\n        m1 = this.m[1],\n        m2 = this.m[2],\n        m3 = this.m[3],\n        m4 = this.m[4],\n        m5 = this.m[5],\n        yt = (m0 * (y - m5) - m1 * (x - m4)) / (m0 * m3 - m1 * m2),\n        xt = (x - m4 - m2 * yt) / m0;\n    return this.translate(xt, yt);\n  };\n\n  return Transform;\n}();\n\nexports.Transform = Transform;\nvar OBJECT_ARRAY = '[object Array]',\n    OBJECT_NUMBER = '[object Number]',\n    OBJECT_STRING = '[object String]',\n    OBJECT_BOOLEAN = '[object Boolean]',\n    PI_OVER_DEG180 = Math.PI / 180,\n    DEG180_OVER_PI = 180 / Math.PI,\n    HASH = '#',\n    EMPTY_STRING = '',\n    ZERO = '0',\n    KONVA_WARNING = 'Konva warning: ',\n    KONVA_ERROR = 'Konva error: ',\n    RGB_PAREN = 'rgb(',\n    COLORS = {\n  aliceblue: [240, 248, 255],\n  antiquewhite: [250, 235, 215],\n  aqua: [0, 255, 255],\n  aquamarine: [127, 255, 212],\n  azure: [240, 255, 255],\n  beige: [245, 245, 220],\n  bisque: [255, 228, 196],\n  black: [0, 0, 0],\n  blanchedalmond: [255, 235, 205],\n  blue: [0, 0, 255],\n  blueviolet: [138, 43, 226],\n  brown: [165, 42, 42],\n  burlywood: [222, 184, 135],\n  cadetblue: [95, 158, 160],\n  chartreuse: [127, 255, 0],\n  chocolate: [210, 105, 30],\n  coral: [255, 127, 80],\n  cornflowerblue: [100, 149, 237],\n  cornsilk: [255, 248, 220],\n  crimson: [220, 20, 60],\n  cyan: [0, 255, 255],\n  darkblue: [0, 0, 139],\n  darkcyan: [0, 139, 139],\n  darkgoldenrod: [184, 132, 11],\n  darkgray: [169, 169, 169],\n  darkgreen: [0, 100, 0],\n  darkgrey: [169, 169, 169],\n  darkkhaki: [189, 183, 107],\n  darkmagenta: [139, 0, 139],\n  darkolivegreen: [85, 107, 47],\n  darkorange: [255, 140, 0],\n  darkorchid: [153, 50, 204],\n  darkred: [139, 0, 0],\n  darksalmon: [233, 150, 122],\n  darkseagreen: [143, 188, 143],\n  darkslateblue: [72, 61, 139],\n  darkslategray: [47, 79, 79],\n  darkslategrey: [47, 79, 79],\n  darkturquoise: [0, 206, 209],\n  darkviolet: [148, 0, 211],\n  deeppink: [255, 20, 147],\n  deepskyblue: [0, 191, 255],\n  dimgray: [105, 105, 105],\n  dimgrey: [105, 105, 105],\n  dodgerblue: [30, 144, 255],\n  firebrick: [178, 34, 34],\n  floralwhite: [255, 255, 240],\n  forestgreen: [34, 139, 34],\n  fuchsia: [255, 0, 255],\n  gainsboro: [220, 220, 220],\n  ghostwhite: [248, 248, 255],\n  gold: [255, 215, 0],\n  goldenrod: [218, 165, 32],\n  gray: [128, 128, 128],\n  green: [0, 128, 0],\n  greenyellow: [173, 255, 47],\n  grey: [128, 128, 128],\n  honeydew: [240, 255, 240],\n  hotpink: [255, 105, 180],\n  indianred: [205, 92, 92],\n  indigo: [75, 0, 130],\n  ivory: [255, 255, 240],\n  khaki: [240, 230, 140],\n  lavender: [230, 230, 250],\n  lavenderblush: [255, 240, 245],\n  lawngreen: [124, 252, 0],\n  lemonchiffon: [255, 250, 205],\n  lightblue: [173, 216, 230],\n  lightcoral: [240, 128, 128],\n  lightcyan: [224, 255, 255],\n  lightgoldenrodyellow: [250, 250, 210],\n  lightgray: [211, 211, 211],\n  lightgreen: [144, 238, 144],\n  lightgrey: [211, 211, 211],\n  lightpink: [255, 182, 193],\n  lightsalmon: [255, 160, 122],\n  lightseagreen: [32, 178, 170],\n  lightskyblue: [135, 206, 250],\n  lightslategray: [119, 136, 153],\n  lightslategrey: [119, 136, 153],\n  lightsteelblue: [176, 196, 222],\n  lightyellow: [255, 255, 224],\n  lime: [0, 255, 0],\n  limegreen: [50, 205, 50],\n  linen: [250, 240, 230],\n  magenta: [255, 0, 255],\n  maroon: [128, 0, 0],\n  mediumaquamarine: [102, 205, 170],\n  mediumblue: [0, 0, 205],\n  mediumorchid: [186, 85, 211],\n  mediumpurple: [147, 112, 219],\n  mediumseagreen: [60, 179, 113],\n  mediumslateblue: [123, 104, 238],\n  mediumspringgreen: [0, 250, 154],\n  mediumturquoise: [72, 209, 204],\n  mediumvioletred: [199, 21, 133],\n  midnightblue: [25, 25, 112],\n  mintcream: [245, 255, 250],\n  mistyrose: [255, 228, 225],\n  moccasin: [255, 228, 181],\n  navajowhite: [255, 222, 173],\n  navy: [0, 0, 128],\n  oldlace: [253, 245, 230],\n  olive: [128, 128, 0],\n  olivedrab: [107, 142, 35],\n  orange: [255, 165, 0],\n  orangered: [255, 69, 0],\n  orchid: [218, 112, 214],\n  palegoldenrod: [238, 232, 170],\n  palegreen: [152, 251, 152],\n  paleturquoise: [175, 238, 238],\n  palevioletred: [219, 112, 147],\n  papayawhip: [255, 239, 213],\n  peachpuff: [255, 218, 185],\n  peru: [205, 133, 63],\n  pink: [255, 192, 203],\n  plum: [221, 160, 203],\n  powderblue: [176, 224, 230],\n  purple: [128, 0, 128],\n  rebeccapurple: [102, 51, 153],\n  red: [255, 0, 0],\n  rosybrown: [188, 143, 143],\n  royalblue: [65, 105, 225],\n  saddlebrown: [139, 69, 19],\n  salmon: [250, 128, 114],\n  sandybrown: [244, 164, 96],\n  seagreen: [46, 139, 87],\n  seashell: [255, 245, 238],\n  sienna: [160, 82, 45],\n  silver: [192, 192, 192],\n  skyblue: [135, 206, 235],\n  slateblue: [106, 90, 205],\n  slategray: [119, 128, 144],\n  slategrey: [119, 128, 144],\n  snow: [255, 255, 250],\n  springgreen: [0, 255, 127],\n  steelblue: [70, 130, 180],\n  tan: [210, 180, 140],\n  teal: [0, 128, 128],\n  thistle: [216, 191, 216],\n  transparent: [255, 255, 255, 0],\n  tomato: [255, 99, 71],\n  turquoise: [64, 224, 208],\n  violet: [238, 130, 238],\n  wheat: [245, 222, 179],\n  white: [255, 255, 255],\n  whitesmoke: [245, 245, 245],\n  yellow: [255, 255, 0],\n  yellowgreen: [154, 205, 5]\n},\n    RGB_REGEX = /rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)/,\n    animQueue = [];\nexports.Util = {\n  _isElement: function _isElement(obj) {\n    return !!(obj && obj.nodeType == 1);\n  },\n  _isFunction: function _isFunction(obj) {\n    return !!(obj && obj.constructor && obj.call && obj.apply);\n  },\n  _isPlainObject: function _isPlainObject(obj) {\n    return !!obj && obj.constructor === Object;\n  },\n  _isArray: function _isArray(obj) {\n    return Object.prototype.toString.call(obj) === OBJECT_ARRAY;\n  },\n  _isNumber: function _isNumber(obj) {\n    return Object.prototype.toString.call(obj) === OBJECT_NUMBER && !isNaN(obj) && isFinite(obj);\n  },\n  _isString: function _isString(obj) {\n    return Object.prototype.toString.call(obj) === OBJECT_STRING;\n  },\n  _isBoolean: function _isBoolean(obj) {\n    return Object.prototype.toString.call(obj) === OBJECT_BOOLEAN;\n  },\n  isObject: function isObject(val) {\n    return val instanceof Object;\n  },\n  isValidSelector: function isValidSelector(selector) {\n    if (typeof selector !== 'string') {\n      return false;\n    }\n\n    var firstChar = selector[0];\n    return firstChar === '#' || firstChar === '.' || firstChar === firstChar.toUpperCase();\n  },\n  _sign: function _sign(number) {\n    if (number === 0) {\n      return 0;\n    }\n\n    if (number > 0) {\n      return 1;\n    } else {\n      return -1;\n    }\n  },\n  requestAnimFrame: function requestAnimFrame(callback) {\n    animQueue.push(callback);\n\n    if (animQueue.length === 1) {\n      requestAnimationFrame(function () {\n        var queue = animQueue;\n        animQueue = [];\n        queue.forEach(function (cb) {\n          cb();\n        });\n      });\n    }\n  },\n  createCanvasElement: function createCanvasElement() {\n    var canvas = document.createElement('canvas');\n\n    try {\n      canvas.style = canvas.style || {};\n    } catch (e) {}\n\n    return canvas;\n  },\n  createImageElement: function createImageElement() {\n    return document.createElement('img');\n  },\n  _isInDocument: function _isInDocument(el) {\n    while (el = el.parentNode) {\n      if (el == document) {\n        return true;\n      }\n    }\n\n    return false;\n  },\n  _simplifyArray: function _simplifyArray(arr) {\n    var retArr = [],\n        len = arr.length,\n        util = exports.Util,\n        n,\n        val;\n\n    for (n = 0; n < len; n++) {\n      val = arr[n];\n\n      if (util._isNumber(val)) {\n        val = Math.round(val * 1000) / 1000;\n      } else if (!util._isString(val)) {\n        val = val.toString();\n      }\n\n      retArr.push(val);\n    }\n\n    return retArr;\n  },\n  _urlToImage: function _urlToImage(url, callback) {\n    var imageObj = new Global_1.glob.Image();\n\n    imageObj.onload = function () {\n      callback(imageObj);\n    };\n\n    imageObj.src = url;\n  },\n  _rgbToHex: function _rgbToHex(r, g, b) {\n    return ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);\n  },\n  _hexToRgb: function _hexToRgb(hex) {\n    hex = hex.replace(HASH, EMPTY_STRING);\n    var bigint = parseInt(hex, 16);\n    return {\n      r: bigint >> 16 & 255,\n      g: bigint >> 8 & 255,\n      b: bigint & 255\n    };\n  },\n  getRandomColor: function getRandomColor() {\n    var randColor = (Math.random() * 0xffffff << 0).toString(16);\n\n    while (randColor.length < 6) {\n      randColor = ZERO + randColor;\n    }\n\n    return HASH + randColor;\n  },\n  get: function get(val, def) {\n    if (val === undefined) {\n      return def;\n    } else {\n      return val;\n    }\n  },\n  getRGB: function getRGB(color) {\n    var rgb;\n\n    if (color in COLORS) {\n      rgb = COLORS[color];\n      return {\n        r: rgb[0],\n        g: rgb[1],\n        b: rgb[2]\n      };\n    } else if (color[0] === HASH) {\n      return this._hexToRgb(color.substring(1));\n    } else if (color.substr(0, 4) === RGB_PAREN) {\n      rgb = RGB_REGEX.exec(color.replace(/ /g, ''));\n      return {\n        r: parseInt(rgb[1], 10),\n        g: parseInt(rgb[2], 10),\n        b: parseInt(rgb[3], 10)\n      };\n    } else {\n      return {\n        r: 0,\n        g: 0,\n        b: 0\n      };\n    }\n  },\n  colorToRGBA: function colorToRGBA(str) {\n    str = str || 'black';\n    return exports.Util._namedColorToRBA(str) || exports.Util._hex3ColorToRGBA(str) || exports.Util._hex6ColorToRGBA(str) || exports.Util._rgbColorToRGBA(str) || exports.Util._rgbaColorToRGBA(str);\n  },\n  _namedColorToRBA: function _namedColorToRBA(str) {\n    var c = COLORS[str.toLowerCase()];\n\n    if (!c) {\n      return null;\n    }\n\n    return {\n      r: c[0],\n      g: c[1],\n      b: c[2],\n      a: 1\n    };\n  },\n  _rgbColorToRGBA: function _rgbColorToRGBA(str) {\n    if (str.indexOf('rgb(') === 0) {\n      str = str.match(/rgb\\(([^)]+)\\)/)[1];\n      var parts = str.split(/ *, */).map(Number);\n      return {\n        r: parts[0],\n        g: parts[1],\n        b: parts[2],\n        a: 1\n      };\n    }\n  },\n  _rgbaColorToRGBA: function _rgbaColorToRGBA(str) {\n    if (str.indexOf('rgba(') === 0) {\n      str = str.match(/rgba\\(([^)]+)\\)/)[1];\n      var parts = str.split(/ *, */).map(Number);\n      return {\n        r: parts[0],\n        g: parts[1],\n        b: parts[2],\n        a: parts[3]\n      };\n    }\n  },\n  _hex6ColorToRGBA: function _hex6ColorToRGBA(str) {\n    if (str[0] === '#' && str.length === 7) {\n      return {\n        r: parseInt(str.slice(1, 3), 16),\n        g: parseInt(str.slice(3, 5), 16),\n        b: parseInt(str.slice(5, 7), 16),\n        a: 1\n      };\n    }\n  },\n  _hex3ColorToRGBA: function _hex3ColorToRGBA(str) {\n    if (str[0] === '#' && str.length === 4) {\n      return {\n        r: parseInt(str[1] + str[1], 16),\n        g: parseInt(str[2] + str[2], 16),\n        b: parseInt(str[3] + str[3], 16),\n        a: 1\n      };\n    }\n  },\n  haveIntersection: function haveIntersection(r1, r2) {\n    return !(r2.x > r1.x + r1.width || r2.x + r2.width < r1.x || r2.y > r1.y + r1.height || r2.y + r2.height < r1.y);\n  },\n  cloneObject: function cloneObject(obj) {\n    var retObj = {};\n\n    for (var key in obj) {\n      if (this._isPlainObject(obj[key])) {\n        retObj[key] = this.cloneObject(obj[key]);\n      } else if (this._isArray(obj[key])) {\n        retObj[key] = this.cloneArray(obj[key]);\n      } else {\n        retObj[key] = obj[key];\n      }\n    }\n\n    return retObj;\n  },\n  cloneArray: function cloneArray(arr) {\n    return arr.slice(0);\n  },\n  _degToRad: function _degToRad(deg) {\n    return deg * PI_OVER_DEG180;\n  },\n  _radToDeg: function _radToDeg(rad) {\n    return rad * DEG180_OVER_PI;\n  },\n  _capitalize: function _capitalize(str) {\n    return str.charAt(0).toUpperCase() + str.slice(1);\n  },\n  throw: function _throw(str) {\n    throw new Error(KONVA_ERROR + str);\n  },\n  error: function error(str) {\n    console.error(KONVA_ERROR + str);\n  },\n  warn: function warn(str) {\n    if (!Global_1.Konva.showWarnings) {\n      return;\n    }\n\n    console.warn(KONVA_WARNING + str);\n  },\n  extend: function extend(child, parent) {\n    function Ctor() {\n      this.constructor = child;\n    }\n\n    Ctor.prototype = parent.prototype;\n    var oldProto = child.prototype;\n    child.prototype = new Ctor();\n\n    for (var key in oldProto) {\n      if (oldProto.hasOwnProperty(key)) {\n        child.prototype[key] = oldProto[key];\n      }\n    }\n\n    child.__super__ = parent.prototype;\n    child.super = parent;\n  },\n  _getControlPoints: function _getControlPoints(x0, y0, x1, y1, x2, y2, t) {\n    var d01 = Math.sqrt(Math.pow(x1 - x0, 2) + Math.pow(y1 - y0, 2)),\n        d12 = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2)),\n        fa = t * d01 / (d01 + d12),\n        fb = t * d12 / (d01 + d12),\n        p1x = x1 - fa * (x2 - x0),\n        p1y = y1 - fa * (y2 - y0),\n        p2x = x1 + fb * (x2 - x0),\n        p2y = y1 + fb * (y2 - y0);\n    return [p1x, p1y, p2x, p2y];\n  },\n  _expandPoints: function _expandPoints(p, tension) {\n    var len = p.length,\n        allPoints = [],\n        n,\n        cp;\n\n    for (n = 2; n < len - 2; n += 2) {\n      cp = exports.Util._getControlPoints(p[n - 2], p[n - 1], p[n], p[n + 1], p[n + 2], p[n + 3], tension);\n      allPoints.push(cp[0]);\n      allPoints.push(cp[1]);\n      allPoints.push(p[n]);\n      allPoints.push(p[n + 1]);\n      allPoints.push(cp[2]);\n      allPoints.push(cp[3]);\n    }\n\n    return allPoints;\n  },\n  each: function each(obj, func) {\n    for (var key in obj) {\n      func(key, obj[key]);\n    }\n  },\n  _inRange: function _inRange(val, left, right) {\n    return left <= val && val < right;\n  },\n  _getProjectionToSegment: function _getProjectionToSegment(x1, y1, x2, y2, x3, y3) {\n    var x, y, dist;\n    var pd2 = (x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2);\n\n    if (pd2 == 0) {\n      x = x1;\n      y = y1;\n      dist = (x3 - x2) * (x3 - x2) + (y3 - y2) * (y3 - y2);\n    } else {\n      var u = ((x3 - x1) * (x2 - x1) + (y3 - y1) * (y2 - y1)) / pd2;\n\n      if (u < 0) {\n        x = x1;\n        y = y1;\n        dist = (x1 - x3) * (x1 - x3) + (y1 - y3) * (y1 - y3);\n      } else if (u > 1.0) {\n        x = x2;\n        y = y2;\n        dist = (x2 - x3) * (x2 - x3) + (y2 - y3) * (y2 - y3);\n      } else {\n        x = x1 + u * (x2 - x1);\n        y = y1 + u * (y2 - y1);\n        dist = (x - x3) * (x - x3) + (y - y3) * (y - y3);\n      }\n    }\n\n    return [x, y, dist];\n  },\n  _getProjectionToLine: function _getProjectionToLine(pt, line, isClosed) {\n    var pc = exports.Util.cloneObject(pt);\n    var dist = Number.MAX_VALUE;\n    line.forEach(function (p1, i) {\n      if (!isClosed && i === line.length - 1) {\n        return;\n      }\n\n      var p2 = line[(i + 1) % line.length];\n\n      var proj = exports.Util._getProjectionToSegment(p1.x, p1.y, p2.x, p2.y, pt.x, pt.y);\n\n      var px = proj[0],\n          py = proj[1],\n          pdist = proj[2];\n\n      if (pdist < dist) {\n        pc.x = px;\n        pc.y = py;\n        dist = pdist;\n      }\n    });\n    return pc;\n  },\n  _prepareArrayForTween: function _prepareArrayForTween(startArray, endArray, isClosed) {\n    var n,\n        start = [],\n        end = [];\n\n    if (startArray.length > endArray.length) {\n      var temp = endArray;\n      endArray = startArray;\n      startArray = temp;\n    }\n\n    for (n = 0; n < startArray.length; n += 2) {\n      start.push({\n        x: startArray[n],\n        y: startArray[n + 1]\n      });\n    }\n\n    for (n = 0; n < endArray.length; n += 2) {\n      end.push({\n        x: endArray[n],\n        y: endArray[n + 1]\n      });\n    }\n\n    var newStart = [];\n    end.forEach(function (point) {\n      var pr = exports.Util._getProjectionToLine(point, start, isClosed);\n\n      newStart.push(pr.x);\n      newStart.push(pr.y);\n    });\n    return newStart;\n  },\n  _prepareToStringify: function _prepareToStringify(obj) {\n    var desc;\n    obj.visitedByCircularReferenceRemoval = true;\n\n    for (var key in obj) {\n      if (!(obj.hasOwnProperty(key) && obj[key] && typeof obj[key] == 'object')) {\n        continue;\n      }\n\n      desc = Object.getOwnPropertyDescriptor(obj, key);\n\n      if (obj[key].visitedByCircularReferenceRemoval || exports.Util._isElement(obj[key])) {\n        if (desc.configurable) {\n          delete obj[key];\n        } else {\n          return null;\n        }\n      } else if (exports.Util._prepareToStringify(obj[key]) === null) {\n        if (desc.configurable) {\n          delete obj[key];\n        } else {\n          return null;\n        }\n      }\n    }\n\n    delete obj.visitedByCircularReferenceRemoval;\n    return obj;\n  },\n  _assign: function _assign(target, source) {\n    for (var key in source) {\n      target[key] = source[key];\n    }\n\n    return target;\n  }\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Global_1 = require(\"./Global\");\n\nvar Util_1 = require(\"./Util\");\n\nfunction _formatValue(val) {\n  if (Util_1.Util._isString(val)) {\n    return '\"' + val + '\"';\n  }\n\n  if (Object.prototype.toString.call(val) === '[object Number]') {\n    return val;\n  }\n\n  if (Util_1.Util._isBoolean(val)) {\n    return val;\n  }\n\n  return Object.prototype.toString.call(val);\n}\n\nfunction RGBComponent(val) {\n  if (val > 255) {\n    return 255;\n  } else if (val < 0) {\n    return 0;\n  }\n\n  return Math.round(val);\n}\n\nexports.RGBComponent = RGBComponent;\n\nfunction alphaComponent(val) {\n  if (val > 1) {\n    return 1;\n  } else if (val < 0.0001) {\n    return 0.0001;\n  }\n\n  return val;\n}\n\nexports.alphaComponent = alphaComponent;\n\nfunction getNumberValidator() {\n  if (Global_1.Konva.isUnminified) {\n    return function (val, attr) {\n      if (!Util_1.Util._isNumber(val)) {\n        Util_1.Util.warn(_formatValue(val) + ' is a not valid value for \"' + attr + '\" attribute. The value should be a number.');\n      }\n\n      return val;\n    };\n  }\n}\n\nexports.getNumberValidator = getNumberValidator;\n\nfunction getNumberOrAutoValidator() {\n  if (Global_1.Konva.isUnminified) {\n    return function (val, attr) {\n      var isNumber = Util_1.Util._isNumber(val);\n\n      var isAuto = val === 'auto';\n\n      if (!(isNumber || isAuto)) {\n        Util_1.Util.warn(_formatValue(val) + ' is a not valid value for \"' + attr + '\" attribute. The value should be a number or \"auto\".');\n      }\n\n      return val;\n    };\n  }\n}\n\nexports.getNumberOrAutoValidator = getNumberOrAutoValidator;\n\nfunction getStringValidator() {\n  if (Global_1.Konva.isUnminified) {\n    return function (val, attr) {\n      if (!Util_1.Util._isString(val)) {\n        Util_1.Util.warn(_formatValue(val) + ' is a not valid value for \"' + attr + '\" attribute. The value should be a string.');\n      }\n\n      return val;\n    };\n  }\n}\n\nexports.getStringValidator = getStringValidator;\n\nfunction getFunctionValidator() {\n  if (Global_1.Konva.isUnminified) {\n    return function (val, attr) {\n      if (!Util_1.Util._isFunction(val)) {\n        Util_1.Util.warn(_formatValue(val) + ' is a not valid value for \"' + attr + '\" attribute. The value should be a function.');\n      }\n\n      return val;\n    };\n  }\n}\n\nexports.getFunctionValidator = getFunctionValidator;\n\nfunction getNumberArrayValidator() {\n  if (Global_1.Konva.isUnminified) {\n    return function (val, attr) {\n      if (!Util_1.Util._isArray(val)) {\n        Util_1.Util.warn(_formatValue(val) + ' is a not valid value for \"' + attr + '\" attribute. The value should be a array of numbers.');\n      } else {\n        val.forEach(function (item) {\n          if (!Util_1.Util._isNumber(item)) {\n            Util_1.Util.warn('\"' + attr + '\" attribute has non numeric element ' + item + '. Make sure that all elements are numbers.');\n          }\n        });\n      }\n\n      return val;\n    };\n  }\n}\n\nexports.getNumberArrayValidator = getNumberArrayValidator;\n\nfunction getBooleanValidator() {\n  if (Global_1.Konva.isUnminified) {\n    return function (val, attr) {\n      var isBool = val === true || val === false;\n\n      if (!isBool) {\n        Util_1.Util.warn(_formatValue(val) + ' is a not valid value for \"' + attr + '\" attribute. The value should be a boolean.');\n      }\n\n      return val;\n    };\n  }\n}\n\nexports.getBooleanValidator = getBooleanValidator;\n\nfunction getComponentValidator(components) {\n  if (Global_1.Konva.isUnminified) {\n    return function (val, attr) {\n      if (!Util_1.Util.isObject(val)) {\n        Util_1.Util.warn(_formatValue(val) + ' is a not valid value for \"' + attr + '\" attribute. The value should be an object with properties ' + components);\n      }\n\n      return val;\n    };\n  }\n}\n\nexports.getComponentValidator = getComponentValidator;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Global_1 = require(\"./Global\");\n\nvar Util_1 = require(\"./Util\");\n\nvar Node_1 = require(\"./Node\");\n\nvar Container_1 = require(\"./Container\");\n\nvar Stage_1 = require(\"./Stage\");\n\nvar Layer_1 = require(\"./Layer\");\n\nvar FastLayer_1 = require(\"./FastLayer\");\n\nvar Group_1 = require(\"./Group\");\n\nvar DragAndDrop_1 = require(\"./DragAndDrop\");\n\nvar Shape_1 = require(\"./Shape\");\n\nvar Animation_1 = require(\"./Animation\");\n\nvar Tween_1 = require(\"./Tween\");\n\nvar Context_1 = require(\"./Context\");\n\nvar Canvas_1 = require(\"./Canvas\");\n\nexports.Konva = Util_1.Util._assign(Global_1.Konva, {\n  Collection: Util_1.Collection,\n  Util: Util_1.Util,\n  Node: Node_1.Node,\n  ids: Node_1.ids,\n  names: Node_1.names,\n  Container: Container_1.Container,\n  Stage: Stage_1.Stage,\n  stages: Stage_1.stages,\n  Layer: Layer_1.Layer,\n  FastLayer: FastLayer_1.FastLayer,\n  Group: Group_1.Group,\n  DD: DragAndDrop_1.DD,\n  Shape: Shape_1.Shape,\n  shapes: Shape_1.shapes,\n  Animation: Animation_1.Animation,\n  Tween: Tween_1.Tween,\n  Easings: Tween_1.Easings,\n  Context: Context_1.Context,\n  Canvas: Canvas_1.Canvas\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _CoreInternals_1 = require(\"./_CoreInternals\");\n\nvar Arc_1 = require(\"./shapes/Arc\");\n\nvar Arrow_1 = require(\"./shapes/Arrow\");\n\nvar Circle_1 = require(\"./shapes/Circle\");\n\nvar Ellipse_1 = require(\"./shapes/Ellipse\");\n\nvar Image_1 = require(\"./shapes/Image\");\n\nvar Label_1 = require(\"./shapes/Label\");\n\nvar Line_1 = require(\"./shapes/Line\");\n\nvar Path_1 = require(\"./shapes/Path\");\n\nvar Rect_1 = require(\"./shapes/Rect\");\n\nvar RegularPolygon_1 = require(\"./shapes/RegularPolygon\");\n\nvar Ring_1 = require(\"./shapes/Ring\");\n\nvar Sprite_1 = require(\"./shapes/Sprite\");\n\nvar Star_1 = require(\"./shapes/Star\");\n\nvar Text_1 = require(\"./shapes/Text\");\n\nvar TextPath_1 = require(\"./shapes/TextPath\");\n\nvar Transformer_1 = require(\"./shapes/Transformer\");\n\nvar Wedge_1 = require(\"./shapes/Wedge\");\n\nvar Blur_1 = require(\"./filters/Blur\");\n\nvar Brighten_1 = require(\"./filters/Brighten\");\n\nvar Contrast_1 = require(\"./filters/Contrast\");\n\nvar Emboss_1 = require(\"./filters/Emboss\");\n\nvar Enhance_1 = require(\"./filters/Enhance\");\n\nvar Grayscale_1 = require(\"./filters/Grayscale\");\n\nvar HSL_1 = require(\"./filters/HSL\");\n\nvar HSV_1 = require(\"./filters/HSV\");\n\nvar Invert_1 = require(\"./filters/Invert\");\n\nvar Kaleidoscope_1 = require(\"./filters/Kaleidoscope\");\n\nvar Mask_1 = require(\"./filters/Mask\");\n\nvar Noise_1 = require(\"./filters/Noise\");\n\nvar Pixelate_1 = require(\"./filters/Pixelate\");\n\nvar Posterize_1 = require(\"./filters/Posterize\");\n\nvar RGB_1 = require(\"./filters/RGB\");\n\nvar RGBA_1 = require(\"./filters/RGBA\");\n\nvar Sepia_1 = require(\"./filters/Sepia\");\n\nvar Solarize_1 = require(\"./filters/Solarize\");\n\nvar Threshold_1 = require(\"./filters/Threshold\");\n\nexports.Konva = _CoreInternals_1.Konva.Util._assign(_CoreInternals_1.Konva, {\n  Arc: Arc_1.Arc,\n  Arrow: Arrow_1.Arrow,\n  Circle: Circle_1.Circle,\n  Ellipse: Ellipse_1.Ellipse,\n  Image: Image_1.Image,\n  Label: Label_1.Label,\n  Tag: Label_1.Tag,\n  Line: Line_1.Line,\n  Path: Path_1.Path,\n  Rect: Rect_1.Rect,\n  RegularPolygon: RegularPolygon_1.RegularPolygon,\n  Ring: Ring_1.Ring,\n  Sprite: Sprite_1.Sprite,\n  Star: Star_1.Star,\n  Text: Text_1.Text,\n  TextPath: TextPath_1.TextPath,\n  Transformer: Transformer_1.Transformer,\n  Wedge: Wedge_1.Wedge,\n  Filters: {\n    Blur: Blur_1.Blur,\n    Brighten: Brighten_1.Brighten,\n    Contrast: Contrast_1.Contrast,\n    Emboss: Emboss_1.Emboss,\n    Enhance: Enhance_1.Enhance,\n    Grayscale: Grayscale_1.Grayscale,\n    HSL: HSL_1.HSL,\n    HSV: HSV_1.HSV,\n    Invert: Invert_1.Invert,\n    Kaleidoscope: Kaleidoscope_1.Kaleidoscope,\n    Mask: Mask_1.Mask,\n    Noise: Noise_1.Noise,\n    Pixelate: Pixelate_1.Pixelate,\n    Posterize: Posterize_1.Posterize,\n    RGB: RGB_1.RGB,\n    RGBA: RGBA_1.RGBA,\n    Sepia: Sepia_1.Sepia,\n    Solarize: Solarize_1.Solarize,\n    Threshold: Threshold_1.Threshold\n  }\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nfunction BlurStack() {\n  this.r = 0;\n  this.g = 0;\n  this.b = 0;\n  this.a = 0;\n  this.next = null;\n}\n\nvar mul_table = [512, 512, 456, 512, 328, 456, 335, 512, 405, 328, 271, 456, 388, 335, 292, 512, 454, 405, 364, 328, 298, 271, 496, 456, 420, 388, 360, 335, 312, 292, 273, 512, 482, 454, 428, 405, 383, 364, 345, 328, 312, 298, 284, 271, 259, 496, 475, 456, 437, 420, 404, 388, 374, 360, 347, 335, 323, 312, 302, 292, 282, 273, 265, 512, 497, 482, 468, 454, 441, 428, 417, 405, 394, 383, 373, 364, 354, 345, 337, 328, 320, 312, 305, 298, 291, 284, 278, 271, 265, 259, 507, 496, 485, 475, 465, 456, 446, 437, 428, 420, 412, 404, 396, 388, 381, 374, 367, 360, 354, 347, 341, 335, 329, 323, 318, 312, 307, 302, 297, 292, 287, 282, 278, 273, 269, 265, 261, 512, 505, 497, 489, 482, 475, 468, 461, 454, 447, 441, 435, 428, 422, 417, 411, 405, 399, 394, 389, 383, 378, 373, 368, 364, 359, 354, 350, 345, 341, 337, 332, 328, 324, 320, 316, 312, 309, 305, 301, 298, 294, 291, 287, 284, 281, 278, 274, 271, 268, 265, 262, 259, 257, 507, 501, 496, 491, 485, 480, 475, 470, 465, 460, 456, 451, 446, 442, 437, 433, 428, 424, 420, 416, 412, 408, 404, 400, 396, 392, 388, 385, 381, 377, 374, 370, 367, 363, 360, 357, 354, 350, 347, 344, 341, 338, 335, 332, 329, 326, 323, 320, 318, 315, 312, 310, 307, 304, 302, 299, 297, 294, 292, 289, 287, 285, 282, 280, 278, 275, 273, 271, 269, 267, 265, 263, 261, 259];\nvar shg_table = [9, 11, 12, 13, 13, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24];\n\nfunction filterGaussBlurRGBA(imageData, radius) {\n  var pixels = imageData.data,\n      width = imageData.width,\n      height = imageData.height;\n  var x, y, i, p, yp, yi, yw, r_sum, g_sum, b_sum, a_sum, r_out_sum, g_out_sum, b_out_sum, a_out_sum, r_in_sum, g_in_sum, b_in_sum, a_in_sum, pr, pg, pb, pa, rbs;\n  var div = radius + radius + 1,\n      widthMinus1 = width - 1,\n      heightMinus1 = height - 1,\n      radiusPlus1 = radius + 1,\n      sumFactor = radiusPlus1 * (radiusPlus1 + 1) / 2,\n      stackStart = new BlurStack(),\n      stackEnd = null,\n      stack = stackStart,\n      stackIn = null,\n      stackOut = null,\n      mul_sum = mul_table[radius],\n      shg_sum = shg_table[radius];\n\n  for (i = 1; i < div; i++) {\n    stack = stack.next = new BlurStack();\n\n    if (i === radiusPlus1) {\n      stackEnd = stack;\n    }\n  }\n\n  stack.next = stackStart;\n  yw = yi = 0;\n\n  for (y = 0; y < height; y++) {\n    r_in_sum = g_in_sum = b_in_sum = a_in_sum = r_sum = g_sum = b_sum = a_sum = 0;\n    r_out_sum = radiusPlus1 * (pr = pixels[yi]);\n    g_out_sum = radiusPlus1 * (pg = pixels[yi + 1]);\n    b_out_sum = radiusPlus1 * (pb = pixels[yi + 2]);\n    a_out_sum = radiusPlus1 * (pa = pixels[yi + 3]);\n    r_sum += sumFactor * pr;\n    g_sum += sumFactor * pg;\n    b_sum += sumFactor * pb;\n    a_sum += sumFactor * pa;\n    stack = stackStart;\n\n    for (i = 0; i < radiusPlus1; i++) {\n      stack.r = pr;\n      stack.g = pg;\n      stack.b = pb;\n      stack.a = pa;\n      stack = stack.next;\n    }\n\n    for (i = 1; i < radiusPlus1; i++) {\n      p = yi + ((widthMinus1 < i ? widthMinus1 : i) << 2);\n      r_sum += (stack.r = pr = pixels[p]) * (rbs = radiusPlus1 - i);\n      g_sum += (stack.g = pg = pixels[p + 1]) * rbs;\n      b_sum += (stack.b = pb = pixels[p + 2]) * rbs;\n      a_sum += (stack.a = pa = pixels[p + 3]) * rbs;\n      r_in_sum += pr;\n      g_in_sum += pg;\n      b_in_sum += pb;\n      a_in_sum += pa;\n      stack = stack.next;\n    }\n\n    stackIn = stackStart;\n    stackOut = stackEnd;\n\n    for (x = 0; x < width; x++) {\n      pixels[yi + 3] = pa = a_sum * mul_sum >> shg_sum;\n\n      if (pa !== 0) {\n        pa = 255 / pa;\n        pixels[yi] = (r_sum * mul_sum >> shg_sum) * pa;\n        pixels[yi + 1] = (g_sum * mul_sum >> shg_sum) * pa;\n        pixels[yi + 2] = (b_sum * mul_sum >> shg_sum) * pa;\n      } else {\n        pixels[yi] = pixels[yi + 1] = pixels[yi + 2] = 0;\n      }\n\n      r_sum -= r_out_sum;\n      g_sum -= g_out_sum;\n      b_sum -= b_out_sum;\n      a_sum -= a_out_sum;\n      r_out_sum -= stackIn.r;\n      g_out_sum -= stackIn.g;\n      b_out_sum -= stackIn.b;\n      a_out_sum -= stackIn.a;\n      p = yw + ((p = x + radius + 1) < widthMinus1 ? p : widthMinus1) << 2;\n      r_in_sum += stackIn.r = pixels[p];\n      g_in_sum += stackIn.g = pixels[p + 1];\n      b_in_sum += stackIn.b = pixels[p + 2];\n      a_in_sum += stackIn.a = pixels[p + 3];\n      r_sum += r_in_sum;\n      g_sum += g_in_sum;\n      b_sum += b_in_sum;\n      a_sum += a_in_sum;\n      stackIn = stackIn.next;\n      r_out_sum += pr = stackOut.r;\n      g_out_sum += pg = stackOut.g;\n      b_out_sum += pb = stackOut.b;\n      a_out_sum += pa = stackOut.a;\n      r_in_sum -= pr;\n      g_in_sum -= pg;\n      b_in_sum -= pb;\n      a_in_sum -= pa;\n      stackOut = stackOut.next;\n      yi += 4;\n    }\n\n    yw += width;\n  }\n\n  for (x = 0; x < width; x++) {\n    g_in_sum = b_in_sum = a_in_sum = r_in_sum = g_sum = b_sum = a_sum = r_sum = 0;\n    yi = x << 2;\n    r_out_sum = radiusPlus1 * (pr = pixels[yi]);\n    g_out_sum = radiusPlus1 * (pg = pixels[yi + 1]);\n    b_out_sum = radiusPlus1 * (pb = pixels[yi + 2]);\n    a_out_sum = radiusPlus1 * (pa = pixels[yi + 3]);\n    r_sum += sumFactor * pr;\n    g_sum += sumFactor * pg;\n    b_sum += sumFactor * pb;\n    a_sum += sumFactor * pa;\n    stack = stackStart;\n\n    for (i = 0; i < radiusPlus1; i++) {\n      stack.r = pr;\n      stack.g = pg;\n      stack.b = pb;\n      stack.a = pa;\n      stack = stack.next;\n    }\n\n    yp = width;\n\n    for (i = 1; i <= radius; i++) {\n      yi = yp + x << 2;\n      r_sum += (stack.r = pr = pixels[yi]) * (rbs = radiusPlus1 - i);\n      g_sum += (stack.g = pg = pixels[yi + 1]) * rbs;\n      b_sum += (stack.b = pb = pixels[yi + 2]) * rbs;\n      a_sum += (stack.a = pa = pixels[yi + 3]) * rbs;\n      r_in_sum += pr;\n      g_in_sum += pg;\n      b_in_sum += pb;\n      a_in_sum += pa;\n      stack = stack.next;\n\n      if (i < heightMinus1) {\n        yp += width;\n      }\n    }\n\n    yi = x;\n    stackIn = stackStart;\n    stackOut = stackEnd;\n\n    for (y = 0; y < height; y++) {\n      p = yi << 2;\n      pixels[p + 3] = pa = a_sum * mul_sum >> shg_sum;\n\n      if (pa > 0) {\n        pa = 255 / pa;\n        pixels[p] = (r_sum * mul_sum >> shg_sum) * pa;\n        pixels[p + 1] = (g_sum * mul_sum >> shg_sum) * pa;\n        pixels[p + 2] = (b_sum * mul_sum >> shg_sum) * pa;\n      } else {\n        pixels[p] = pixels[p + 1] = pixels[p + 2] = 0;\n      }\n\n      r_sum -= r_out_sum;\n      g_sum -= g_out_sum;\n      b_sum -= b_out_sum;\n      a_sum -= a_out_sum;\n      r_out_sum -= stackIn.r;\n      g_out_sum -= stackIn.g;\n      b_out_sum -= stackIn.b;\n      a_out_sum -= stackIn.a;\n      p = x + ((p = y + radiusPlus1) < heightMinus1 ? p : heightMinus1) * width << 2;\n      r_sum += r_in_sum += stackIn.r = pixels[p];\n      g_sum += g_in_sum += stackIn.g = pixels[p + 1];\n      b_sum += b_in_sum += stackIn.b = pixels[p + 2];\n      a_sum += a_in_sum += stackIn.a = pixels[p + 3];\n      stackIn = stackIn.next;\n      r_out_sum += pr = stackOut.r;\n      g_out_sum += pg = stackOut.g;\n      b_out_sum += pb = stackOut.b;\n      a_out_sum += pa = stackOut.a;\n      r_in_sum -= pr;\n      g_in_sum -= pg;\n      b_in_sum -= pb;\n      a_in_sum -= pa;\n      stackOut = stackOut.next;\n      yi += width;\n    }\n  }\n}\n\nexports.Blur = function Blur(imageData) {\n  var radius = Math.round(this.blurRadius());\n\n  if (radius > 0) {\n    filterGaussBlurRGBA(imageData, radius);\n  }\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'blurRadius', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nexports.Brighten = function (imageData) {\n  var brightness = this.brightness() * 255,\n      data = imageData.data,\n      len = data.length,\n      i;\n\n  for (i = 0; i < len; i += 4) {\n    data[i] += brightness;\n    data[i + 1] += brightness;\n    data[i + 2] += brightness;\n  }\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'brightness', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nexports.Contrast = function (imageData) {\n  var adjust = Math.pow((this.contrast() + 100) / 100, 2);\n  var data = imageData.data,\n      nPixels = data.length,\n      red = 150,\n      green = 150,\n      blue = 150,\n      i;\n\n  for (i = 0; i < nPixels; i += 4) {\n    red = data[i];\n    green = data[i + 1];\n    blue = data[i + 2];\n    red /= 255;\n    red -= 0.5;\n    red *= adjust;\n    red += 0.5;\n    red *= 255;\n    green /= 255;\n    green -= 0.5;\n    green *= adjust;\n    green += 0.5;\n    green *= 255;\n    blue /= 255;\n    blue -= 0.5;\n    blue *= adjust;\n    blue += 0.5;\n    blue *= 255;\n    red = red < 0 ? 0 : red > 255 ? 255 : red;\n    green = green < 0 ? 0 : green > 255 ? 255 : green;\n    blue = blue < 0 ? 0 : blue > 255 ? 255 : blue;\n    data[i] = red;\n    data[i + 1] = green;\n    data[i + 2] = blue;\n  }\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'contrast', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Util_1 = require(\"../Util\");\n\nvar Validators_1 = require(\"../Validators\");\n\nexports.Emboss = function (imageData) {\n  var strength = this.embossStrength() * 10,\n      greyLevel = this.embossWhiteLevel() * 255,\n      direction = this.embossDirection(),\n      blend = this.embossBlend(),\n      dirY = 0,\n      dirX = 0,\n      data = imageData.data,\n      w = imageData.width,\n      h = imageData.height,\n      w4 = w * 4,\n      y = h;\n\n  switch (direction) {\n    case 'top-left':\n      dirY = -1;\n      dirX = -1;\n      break;\n\n    case 'top':\n      dirY = -1;\n      dirX = 0;\n      break;\n\n    case 'top-right':\n      dirY = -1;\n      dirX = 1;\n      break;\n\n    case 'right':\n      dirY = 0;\n      dirX = 1;\n      break;\n\n    case 'bottom-right':\n      dirY = 1;\n      dirX = 1;\n      break;\n\n    case 'bottom':\n      dirY = 1;\n      dirX = 0;\n      break;\n\n    case 'bottom-left':\n      dirY = 1;\n      dirX = -1;\n      break;\n\n    case 'left':\n      dirY = 0;\n      dirX = -1;\n      break;\n\n    default:\n      Util_1.Util.error('Unknown emboss direction: ' + direction);\n  }\n\n  do {\n    var offsetY = (y - 1) * w4;\n    var otherY = dirY;\n\n    if (y + otherY < 1) {\n      otherY = 0;\n    }\n\n    if (y + otherY > h) {\n      otherY = 0;\n    }\n\n    var offsetYOther = (y - 1 + otherY) * w * 4;\n    var x = w;\n\n    do {\n      var offset = offsetY + (x - 1) * 4;\n      var otherX = dirX;\n\n      if (x + otherX < 1) {\n        otherX = 0;\n      }\n\n      if (x + otherX > w) {\n        otherX = 0;\n      }\n\n      var offsetOther = offsetYOther + (x - 1 + otherX) * 4;\n      var dR = data[offset] - data[offsetOther];\n      var dG = data[offset + 1] - data[offsetOther + 1];\n      var dB = data[offset + 2] - data[offsetOther + 2];\n      var dif = dR;\n      var absDif = dif > 0 ? dif : -dif;\n      var absG = dG > 0 ? dG : -dG;\n      var absB = dB > 0 ? dB : -dB;\n\n      if (absG > absDif) {\n        dif = dG;\n      }\n\n      if (absB > absDif) {\n        dif = dB;\n      }\n\n      dif *= strength;\n\n      if (blend) {\n        var r = data[offset] + dif;\n        var g = data[offset + 1] + dif;\n        var b = data[offset + 2] + dif;\n        data[offset] = r > 255 ? 255 : r < 0 ? 0 : r;\n        data[offset + 1] = g > 255 ? 255 : g < 0 ? 0 : g;\n        data[offset + 2] = b > 255 ? 255 : b < 0 ? 0 : b;\n      } else {\n        var grey = greyLevel - dif;\n\n        if (grey < 0) {\n          grey = 0;\n        } else if (grey > 255) {\n          grey = 255;\n        }\n\n        data[offset] = data[offset + 1] = data[offset + 2] = grey;\n      }\n    } while (--x);\n  } while (--y);\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'embossStrength', 0.5, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'embossWhiteLevel', 0.5, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'embossDirection', 'top-left', null, Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'embossBlend', false, null, Factory_1.Factory.afterSetFilter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nfunction remap(fromValue, fromMin, fromMax, toMin, toMax) {\n  var fromRange = fromMax - fromMin,\n      toRange = toMax - toMin,\n      toValue;\n\n  if (fromRange === 0) {\n    return toMin + toRange / 2;\n  }\n\n  if (toRange === 0) {\n    return toMin;\n  }\n\n  toValue = (fromValue - fromMin) / fromRange;\n  toValue = toRange * toValue + toMin;\n  return toValue;\n}\n\nexports.Enhance = function (imageData) {\n  var data = imageData.data,\n      nSubPixels = data.length,\n      rMin = data[0],\n      rMax = rMin,\n      r,\n      gMin = data[1],\n      gMax = gMin,\n      g,\n      bMin = data[2],\n      bMax = bMin,\n      b,\n      i;\n  var enhanceAmount = this.enhance();\n\n  if (enhanceAmount === 0) {\n    return;\n  }\n\n  for (i = 0; i < nSubPixels; i += 4) {\n    r = data[i + 0];\n\n    if (r < rMin) {\n      rMin = r;\n    } else if (r > rMax) {\n      rMax = r;\n    }\n\n    g = data[i + 1];\n\n    if (g < gMin) {\n      gMin = g;\n    } else if (g > gMax) {\n      gMax = g;\n    }\n\n    b = data[i + 2];\n\n    if (b < bMin) {\n      bMin = b;\n    } else if (b > bMax) {\n      bMax = b;\n    }\n  }\n\n  if (rMax === rMin) {\n    rMax = 255;\n    rMin = 0;\n  }\n\n  if (gMax === gMin) {\n    gMax = 255;\n    gMin = 0;\n  }\n\n  if (bMax === bMin) {\n    bMax = 255;\n    bMin = 0;\n  }\n\n  var rMid, rGoalMax, rGoalMin, gMid, gGoalMax, gGoalMin, bMid, bGoalMax, bGoalMin;\n\n  if (enhanceAmount > 0) {\n    rGoalMax = rMax + enhanceAmount * (255 - rMax);\n    rGoalMin = rMin - enhanceAmount * (rMin - 0);\n    gGoalMax = gMax + enhanceAmount * (255 - gMax);\n    gGoalMin = gMin - enhanceAmount * (gMin - 0);\n    bGoalMax = bMax + enhanceAmount * (255 - bMax);\n    bGoalMin = bMin - enhanceAmount * (bMin - 0);\n  } else {\n    rMid = (rMax + rMin) * 0.5;\n    rGoalMax = rMax + enhanceAmount * (rMax - rMid);\n    rGoalMin = rMin + enhanceAmount * (rMin - rMid);\n    gMid = (gMax + gMin) * 0.5;\n    gGoalMax = gMax + enhanceAmount * (gMax - gMid);\n    gGoalMin = gMin + enhanceAmount * (gMin - gMid);\n    bMid = (bMax + bMin) * 0.5;\n    bGoalMax = bMax + enhanceAmount * (bMax - bMid);\n    bGoalMin = bMin + enhanceAmount * (bMin - bMid);\n  }\n\n  for (i = 0; i < nSubPixels; i += 4) {\n    data[i + 0] = remap(data[i + 0], rMin, rMax, rGoalMin, rGoalMax);\n    data[i + 1] = remap(data[i + 1], gMin, gMax, gGoalMin, gGoalMax);\n    data[i + 2] = remap(data[i + 2], bMin, bMax, bGoalMin, bGoalMax);\n  }\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'enhance', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.Grayscale = function (imageData) {\n  var data = imageData.data,\n      len = data.length,\n      i,\n      brightness;\n\n  for (i = 0; i < len; i += 4) {\n    brightness = 0.34 * data[i] + 0.5 * data[i + 1] + 0.16 * data[i + 2];\n    data[i] = brightness;\n    data[i + 1] = brightness;\n    data[i + 2] = brightness;\n  }\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'hue', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'saturation', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'luminance', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\n\nexports.HSL = function (imageData) {\n  var data = imageData.data,\n      nPixels = data.length,\n      v = 1,\n      s = Math.pow(2, this.saturation()),\n      h = Math.abs(this.hue() + 360) % 360,\n      l = this.luminance() * 127,\n      i;\n  var vsu = v * s * Math.cos(h * Math.PI / 180),\n      vsw = v * s * Math.sin(h * Math.PI / 180);\n  var rr = 0.299 * v + 0.701 * vsu + 0.167 * vsw,\n      rg = 0.587 * v - 0.587 * vsu + 0.33 * vsw,\n      rb = 0.114 * v - 0.114 * vsu - 0.497 * vsw;\n  var gr = 0.299 * v - 0.299 * vsu - 0.328 * vsw,\n      gg = 0.587 * v + 0.413 * vsu + 0.035 * vsw,\n      gb = 0.114 * v - 0.114 * vsu + 0.293 * vsw;\n  var br = 0.299 * v - 0.3 * vsu + 1.25 * vsw,\n      bg = 0.587 * v - 0.586 * vsu - 1.05 * vsw,\n      bb = 0.114 * v + 0.886 * vsu - 0.2 * vsw;\n  var r, g, b, a;\n\n  for (i = 0; i < nPixels; i += 4) {\n    r = data[i + 0];\n    g = data[i + 1];\n    b = data[i + 2];\n    a = data[i + 3];\n    data[i + 0] = rr * r + rg * g + rb * b + l;\n    data[i + 1] = gr * r + gg * g + gb * b + l;\n    data[i + 2] = br * r + bg * g + bb * b + l;\n    data[i + 3] = a;\n  }\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nexports.HSV = function (imageData) {\n  var data = imageData.data,\n      nPixels = data.length,\n      v = Math.pow(2, this.value()),\n      s = Math.pow(2, this.saturation()),\n      h = Math.abs(this.hue() + 360) % 360,\n      i;\n  var vsu = v * s * Math.cos(h * Math.PI / 180),\n      vsw = v * s * Math.sin(h * Math.PI / 180);\n  var rr = 0.299 * v + 0.701 * vsu + 0.167 * vsw,\n      rg = 0.587 * v - 0.587 * vsu + 0.33 * vsw,\n      rb = 0.114 * v - 0.114 * vsu - 0.497 * vsw;\n  var gr = 0.299 * v - 0.299 * vsu - 0.328 * vsw,\n      gg = 0.587 * v + 0.413 * vsu + 0.035 * vsw,\n      gb = 0.114 * v - 0.114 * vsu + 0.293 * vsw;\n  var br = 0.299 * v - 0.3 * vsu + 1.25 * vsw,\n      bg = 0.587 * v - 0.586 * vsu - 1.05 * vsw,\n      bb = 0.114 * v + 0.886 * vsu - 0.2 * vsw;\n  var r, g, b, a;\n\n  for (i = 0; i < nPixels; i += 4) {\n    r = data[i + 0];\n    g = data[i + 1];\n    b = data[i + 2];\n    a = data[i + 3];\n    data[i + 0] = rr * r + rg * g + rb * b;\n    data[i + 1] = gr * r + gg * g + gb * b;\n    data[i + 2] = br * r + bg * g + bb * b;\n    data[i + 3] = a;\n  }\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'hue', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'saturation', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'value', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.Invert = function (imageData) {\n  var data = imageData.data,\n      len = data.length,\n      i;\n\n  for (i = 0; i < len; i += 4) {\n    data[i] = 255 - data[i];\n    data[i + 1] = 255 - data[i + 1];\n    data[i + 2] = 255 - data[i + 2];\n  }\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Util_1 = require(\"../Util\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar ToPolar = function ToPolar(src, dst, opt) {\n  var srcPixels = src.data,\n      dstPixels = dst.data,\n      xSize = src.width,\n      ySize = src.height,\n      xMid = opt.polarCenterX || xSize / 2,\n      yMid = opt.polarCenterY || ySize / 2,\n      i,\n      x,\n      y,\n      r = 0,\n      g = 0,\n      b = 0,\n      a = 0;\n  var rad,\n      rMax = Math.sqrt(xMid * xMid + yMid * yMid);\n  x = xSize - xMid;\n  y = ySize - yMid;\n  rad = Math.sqrt(x * x + y * y);\n  rMax = rad > rMax ? rad : rMax;\n  var rSize = ySize,\n      tSize = xSize,\n      radius,\n      theta;\n  var conversion = 360 / tSize * Math.PI / 180,\n      sin,\n      cos;\n\n  for (theta = 0; theta < tSize; theta += 1) {\n    sin = Math.sin(theta * conversion);\n    cos = Math.cos(theta * conversion);\n\n    for (radius = 0; radius < rSize; radius += 1) {\n      x = Math.floor(xMid + rMax * radius / rSize * cos);\n      y = Math.floor(yMid + rMax * radius / rSize * sin);\n      i = (y * xSize + x) * 4;\n      r = srcPixels[i + 0];\n      g = srcPixels[i + 1];\n      b = srcPixels[i + 2];\n      a = srcPixels[i + 3];\n      i = (theta + radius * xSize) * 4;\n      dstPixels[i + 0] = r;\n      dstPixels[i + 1] = g;\n      dstPixels[i + 2] = b;\n      dstPixels[i + 3] = a;\n    }\n  }\n};\n\nvar FromPolar = function FromPolar(src, dst, opt) {\n  var srcPixels = src.data,\n      dstPixels = dst.data,\n      xSize = src.width,\n      ySize = src.height,\n      xMid = opt.polarCenterX || xSize / 2,\n      yMid = opt.polarCenterY || ySize / 2,\n      i,\n      x,\n      y,\n      dx,\n      dy,\n      r = 0,\n      g = 0,\n      b = 0,\n      a = 0;\n  var rad,\n      rMax = Math.sqrt(xMid * xMid + yMid * yMid);\n  x = xSize - xMid;\n  y = ySize - yMid;\n  rad = Math.sqrt(x * x + y * y);\n  rMax = rad > rMax ? rad : rMax;\n  var rSize = ySize,\n      tSize = xSize,\n      radius,\n      theta,\n      phaseShift = opt.polarRotation || 0;\n  var x1, y1;\n\n  for (x = 0; x < xSize; x += 1) {\n    for (y = 0; y < ySize; y += 1) {\n      dx = x - xMid;\n      dy = y - yMid;\n      radius = Math.sqrt(dx * dx + dy * dy) * rSize / rMax;\n      theta = (Math.atan2(dy, dx) * 180 / Math.PI + 360 + phaseShift) % 360;\n      theta = theta * tSize / 360;\n      x1 = Math.floor(theta);\n      y1 = Math.floor(radius);\n      i = (y1 * xSize + x1) * 4;\n      r = srcPixels[i + 0];\n      g = srcPixels[i + 1];\n      b = srcPixels[i + 2];\n      a = srcPixels[i + 3];\n      i = (y * xSize + x) * 4;\n      dstPixels[i + 0] = r;\n      dstPixels[i + 1] = g;\n      dstPixels[i + 2] = b;\n      dstPixels[i + 3] = a;\n    }\n  }\n};\n\nexports.Kaleidoscope = function (imageData) {\n  var xSize = imageData.width,\n      ySize = imageData.height;\n  var x, y, xoff, i, r, g, b, a, srcPos, dstPos;\n  var power = Math.round(this.kaleidoscopePower());\n  var angle = Math.round(this.kaleidoscopeAngle());\n  var offset = Math.floor(xSize * (angle % 360) / 360);\n\n  if (power < 1) {\n    return;\n  }\n\n  var tempCanvas = Util_1.Util.createCanvasElement();\n  tempCanvas.width = xSize;\n  tempCanvas.height = ySize;\n  var scratchData = tempCanvas.getContext('2d').getImageData(0, 0, xSize, ySize);\n  ToPolar(imageData, scratchData, {\n    polarCenterX: xSize / 2,\n    polarCenterY: ySize / 2\n  });\n  var minSectionSize = xSize / Math.pow(2, power);\n\n  while (minSectionSize <= 8) {\n    minSectionSize = minSectionSize * 2;\n    power -= 1;\n  }\n\n  minSectionSize = Math.ceil(minSectionSize);\n  var sectionSize = minSectionSize;\n  var xStart = 0,\n      xEnd = sectionSize,\n      xDelta = 1;\n\n  if (offset + minSectionSize > xSize) {\n    xStart = sectionSize;\n    xEnd = 0;\n    xDelta = -1;\n  }\n\n  for (y = 0; y < ySize; y += 1) {\n    for (x = xStart; x !== xEnd; x += xDelta) {\n      xoff = Math.round(x + offset) % xSize;\n      srcPos = (xSize * y + xoff) * 4;\n      r = scratchData.data[srcPos + 0];\n      g = scratchData.data[srcPos + 1];\n      b = scratchData.data[srcPos + 2];\n      a = scratchData.data[srcPos + 3];\n      dstPos = (xSize * y + x) * 4;\n      scratchData.data[dstPos + 0] = r;\n      scratchData.data[dstPos + 1] = g;\n      scratchData.data[dstPos + 2] = b;\n      scratchData.data[dstPos + 3] = a;\n    }\n  }\n\n  for (y = 0; y < ySize; y += 1) {\n    sectionSize = Math.floor(minSectionSize);\n\n    for (i = 0; i < power; i += 1) {\n      for (x = 0; x < sectionSize + 1; x += 1) {\n        srcPos = (xSize * y + x) * 4;\n        r = scratchData.data[srcPos + 0];\n        g = scratchData.data[srcPos + 1];\n        b = scratchData.data[srcPos + 2];\n        a = scratchData.data[srcPos + 3];\n        dstPos = (xSize * y + sectionSize * 2 - x - 1) * 4;\n        scratchData.data[dstPos + 0] = r;\n        scratchData.data[dstPos + 1] = g;\n        scratchData.data[dstPos + 2] = b;\n        scratchData.data[dstPos + 3] = a;\n      }\n\n      sectionSize *= 2;\n    }\n  }\n\n  FromPolar(scratchData, imageData, {\n    polarRotation: 0\n  });\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'kaleidoscopePower', 2, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'kaleidoscopeAngle', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nfunction pixelAt(idata, x, y) {\n  var idx = (y * idata.width + x) * 4;\n  var d = [];\n  d.push(idata.data[idx++], idata.data[idx++], idata.data[idx++], idata.data[idx++]);\n  return d;\n}\n\nfunction rgbDistance(p1, p2) {\n  return Math.sqrt(Math.pow(p1[0] - p2[0], 2) + Math.pow(p1[1] - p2[1], 2) + Math.pow(p1[2] - p2[2], 2));\n}\n\nfunction rgbMean(pTab) {\n  var m = [0, 0, 0];\n\n  for (var i = 0; i < pTab.length; i++) {\n    m[0] += pTab[i][0];\n    m[1] += pTab[i][1];\n    m[2] += pTab[i][2];\n  }\n\n  m[0] /= pTab.length;\n  m[1] /= pTab.length;\n  m[2] /= pTab.length;\n  return m;\n}\n\nfunction backgroundMask(idata, threshold) {\n  var rgbv_no = pixelAt(idata, 0, 0);\n  var rgbv_ne = pixelAt(idata, idata.width - 1, 0);\n  var rgbv_so = pixelAt(idata, 0, idata.height - 1);\n  var rgbv_se = pixelAt(idata, idata.width - 1, idata.height - 1);\n  var thres = threshold || 10;\n\n  if (rgbDistance(rgbv_no, rgbv_ne) < thres && rgbDistance(rgbv_ne, rgbv_se) < thres && rgbDistance(rgbv_se, rgbv_so) < thres && rgbDistance(rgbv_so, rgbv_no) < thres) {\n    var mean = rgbMean([rgbv_ne, rgbv_no, rgbv_se, rgbv_so]);\n    var mask = [];\n\n    for (var i = 0; i < idata.width * idata.height; i++) {\n      var d = rgbDistance(mean, [idata.data[i * 4], idata.data[i * 4 + 1], idata.data[i * 4 + 2]]);\n      mask[i] = d < thres ? 0 : 255;\n    }\n\n    return mask;\n  }\n}\n\nfunction applyMask(idata, mask) {\n  for (var i = 0; i < idata.width * idata.height; i++) {\n    idata.data[4 * i + 3] = mask[i];\n  }\n}\n\nfunction erodeMask(mask, sw, sh) {\n  var weights = [1, 1, 1, 1, 0, 1, 1, 1, 1];\n  var side = Math.round(Math.sqrt(weights.length));\n  var halfSide = Math.floor(side / 2);\n  var maskResult = [];\n\n  for (var y = 0; y < sh; y++) {\n    for (var x = 0; x < sw; x++) {\n      var so = y * sw + x;\n      var a = 0;\n\n      for (var cy = 0; cy < side; cy++) {\n        for (var cx = 0; cx < side; cx++) {\n          var scy = y + cy - halfSide;\n          var scx = x + cx - halfSide;\n\n          if (scy >= 0 && scy < sh && scx >= 0 && scx < sw) {\n            var srcOff = scy * sw + scx;\n            var wt = weights[cy * side + cx];\n            a += mask[srcOff] * wt;\n          }\n        }\n      }\n\n      maskResult[so] = a === 255 * 8 ? 255 : 0;\n    }\n  }\n\n  return maskResult;\n}\n\nfunction dilateMask(mask, sw, sh) {\n  var weights = [1, 1, 1, 1, 1, 1, 1, 1, 1];\n  var side = Math.round(Math.sqrt(weights.length));\n  var halfSide = Math.floor(side / 2);\n  var maskResult = [];\n\n  for (var y = 0; y < sh; y++) {\n    for (var x = 0; x < sw; x++) {\n      var so = y * sw + x;\n      var a = 0;\n\n      for (var cy = 0; cy < side; cy++) {\n        for (var cx = 0; cx < side; cx++) {\n          var scy = y + cy - halfSide;\n          var scx = x + cx - halfSide;\n\n          if (scy >= 0 && scy < sh && scx >= 0 && scx < sw) {\n            var srcOff = scy * sw + scx;\n            var wt = weights[cy * side + cx];\n            a += mask[srcOff] * wt;\n          }\n        }\n      }\n\n      maskResult[so] = a >= 255 * 4 ? 255 : 0;\n    }\n  }\n\n  return maskResult;\n}\n\nfunction smoothEdgeMask(mask, sw, sh) {\n  var weights = [1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9];\n  var side = Math.round(Math.sqrt(weights.length));\n  var halfSide = Math.floor(side / 2);\n  var maskResult = [];\n\n  for (var y = 0; y < sh; y++) {\n    for (var x = 0; x < sw; x++) {\n      var so = y * sw + x;\n      var a = 0;\n\n      for (var cy = 0; cy < side; cy++) {\n        for (var cx = 0; cx < side; cx++) {\n          var scy = y + cy - halfSide;\n          var scx = x + cx - halfSide;\n\n          if (scy >= 0 && scy < sh && scx >= 0 && scx < sw) {\n            var srcOff = scy * sw + scx;\n            var wt = weights[cy * side + cx];\n            a += mask[srcOff] * wt;\n          }\n        }\n      }\n\n      maskResult[so] = a;\n    }\n  }\n\n  return maskResult;\n}\n\nexports.Mask = function (imageData) {\n  var threshold = this.threshold(),\n      mask = backgroundMask(imageData, threshold);\n\n  if (mask) {\n    mask = erodeMask(mask, imageData.width, imageData.height);\n    mask = dilateMask(mask, imageData.width, imageData.height);\n    mask = smoothEdgeMask(mask, imageData.width, imageData.height);\n    applyMask(imageData, mask);\n  }\n\n  return imageData;\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'threshold', 0, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nexports.Noise = function (imageData) {\n  var amount = this.noise() * 255,\n      data = imageData.data,\n      nPixels = data.length,\n      half = amount / 2,\n      i;\n\n  for (i = 0; i < nPixels; i += 4) {\n    data[i + 0] += half - 2 * half * Math.random();\n    data[i + 1] += half - 2 * half * Math.random();\n    data[i + 2] += half - 2 * half * Math.random();\n  }\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'noise', 0.2, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Util_1 = require(\"../Util\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nexports.Pixelate = function (imageData) {\n  var pixelSize = Math.ceil(this.pixelSize()),\n      width = imageData.width,\n      height = imageData.height,\n      x,\n      y,\n      i,\n      red,\n      green,\n      blue,\n      alpha,\n      nBinsX = Math.ceil(width / pixelSize),\n      nBinsY = Math.ceil(height / pixelSize),\n      xBinStart,\n      xBinEnd,\n      yBinStart,\n      yBinEnd,\n      xBin,\n      yBin,\n      pixelsInBin,\n      data = imageData.data;\n\n  if (pixelSize <= 0) {\n    Util_1.Util.error('pixelSize value can not be <= 0');\n    return;\n  }\n\n  for (xBin = 0; xBin < nBinsX; xBin += 1) {\n    for (yBin = 0; yBin < nBinsY; yBin += 1) {\n      red = 0;\n      green = 0;\n      blue = 0;\n      alpha = 0;\n      xBinStart = xBin * pixelSize;\n      xBinEnd = xBinStart + pixelSize;\n      yBinStart = yBin * pixelSize;\n      yBinEnd = yBinStart + pixelSize;\n      pixelsInBin = 0;\n\n      for (x = xBinStart; x < xBinEnd; x += 1) {\n        if (x >= width) {\n          continue;\n        }\n\n        for (y = yBinStart; y < yBinEnd; y += 1) {\n          if (y >= height) {\n            continue;\n          }\n\n          i = (width * y + x) * 4;\n          red += data[i + 0];\n          green += data[i + 1];\n          blue += data[i + 2];\n          alpha += data[i + 3];\n          pixelsInBin += 1;\n        }\n      }\n\n      red = red / pixelsInBin;\n      green = green / pixelsInBin;\n      blue = blue / pixelsInBin;\n      alpha = alpha / pixelsInBin;\n\n      for (x = xBinStart; x < xBinEnd; x += 1) {\n        if (x >= width) {\n          continue;\n        }\n\n        for (y = yBinStart; y < yBinEnd; y += 1) {\n          if (y >= height) {\n            continue;\n          }\n\n          i = (width * y + x) * 4;\n          data[i + 0] = red;\n          data[i + 1] = green;\n          data[i + 2] = blue;\n          data[i + 3] = alpha;\n        }\n      }\n    }\n  }\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'pixelSize', 8, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nexports.Posterize = function (imageData) {\n  var levels = Math.round(this.levels() * 254) + 1,\n      data = imageData.data,\n      len = data.length,\n      scale = 255 / levels,\n      i;\n\n  for (i = 0; i < len; i += 1) {\n    data[i] = Math.floor(data[i] / scale) * scale;\n  }\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'levels', 0.5, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nexports.RGB = function (imageData) {\n  var data = imageData.data,\n      nPixels = data.length,\n      red = this.red(),\n      green = this.green(),\n      blue = this.blue(),\n      i,\n      brightness;\n\n  for (i = 0; i < nPixels; i += 4) {\n    brightness = (0.34 * data[i] + 0.5 * data[i + 1] + 0.16 * data[i + 2]) / 255;\n    data[i] = brightness * red;\n    data[i + 1] = brightness * green;\n    data[i + 2] = brightness * blue;\n    data[i + 3] = data[i + 3];\n  }\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'red', 0, function (val) {\n  this._filterUpToDate = false;\n\n  if (val > 255) {\n    return 255;\n  } else if (val < 0) {\n    return 0;\n  } else {\n    return Math.round(val);\n  }\n});\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'green', 0, function (val) {\n  this._filterUpToDate = false;\n\n  if (val > 255) {\n    return 255;\n  } else if (val < 0) {\n    return 0;\n  } else {\n    return Math.round(val);\n  }\n});\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'blue', 0, Validators_1.RGBComponent, Factory_1.Factory.afterSetFilter);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nexports.RGBA = function (imageData) {\n  var data = imageData.data,\n      nPixels = data.length,\n      red = this.red(),\n      green = this.green(),\n      blue = this.blue(),\n      alpha = this.alpha(),\n      i,\n      ia;\n\n  for (i = 0; i < nPixels; i += 4) {\n    ia = 1 - alpha;\n    data[i] = red * alpha + data[i] * ia;\n    data[i + 1] = green * alpha + data[i + 1] * ia;\n    data[i + 2] = blue * alpha + data[i + 2] * ia;\n  }\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'red', 0, function (val) {\n  this._filterUpToDate = false;\n\n  if (val > 255) {\n    return 255;\n  } else if (val < 0) {\n    return 0;\n  } else {\n    return Math.round(val);\n  }\n});\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'green', 0, function (val) {\n  this._filterUpToDate = false;\n\n  if (val > 255) {\n    return 255;\n  } else if (val < 0) {\n    return 0;\n  } else {\n    return Math.round(val);\n  }\n});\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'blue', 0, Validators_1.RGBComponent, Factory_1.Factory.afterSetFilter);\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'alpha', 1, function (val) {\n  this._filterUpToDate = false;\n\n  if (val > 1) {\n    return 1;\n  } else if (val < 0) {\n    return 0;\n  } else {\n    return val;\n  }\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.Sepia = function (imageData) {\n  var data = imageData.data,\n      nPixels = data.length,\n      i,\n      r,\n      g,\n      b;\n\n  for (i = 0; i < nPixels; i += 4) {\n    r = data[i + 0];\n    g = data[i + 1];\n    b = data[i + 2];\n    data[i + 0] = Math.min(255, r * 0.393 + g * 0.769 + b * 0.189);\n    data[i + 1] = Math.min(255, r * 0.349 + g * 0.686 + b * 0.168);\n    data[i + 2] = Math.min(255, r * 0.272 + g * 0.534 + b * 0.131);\n  }\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.Solarize = function (imageData) {\n  var data = imageData.data,\n      w = imageData.width,\n      h = imageData.height,\n      w4 = w * 4,\n      y = h;\n\n  do {\n    var offsetY = (y - 1) * w4;\n    var x = w;\n\n    do {\n      var offset = offsetY + (x - 1) * 4;\n      var r = data[offset];\n      var g = data[offset + 1];\n      var b = data[offset + 2];\n\n      if (r > 127) {\n        r = 255 - r;\n      }\n\n      if (g > 127) {\n        g = 255 - g;\n      }\n\n      if (b > 127) {\n        b = 255 - b;\n      }\n\n      data[offset] = r;\n      data[offset + 1] = g;\n      data[offset + 2] = b;\n    } while (--x);\n  } while (--y);\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Validators_1 = require(\"../Validators\");\n\nexports.Threshold = function (imageData) {\n  var level = this.threshold() * 255,\n      data = imageData.data,\n      len = data.length,\n      i;\n\n  for (i = 0; i < len; i += 1) {\n    data[i] = data[i] < level ? 0 : 255;\n  }\n};\n\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'threshold', 0.5, Validators_1.getNumberValidator(), Factory_1.Factory.afterSetFilter);","var Konva = require('./_FullInternals').Konva;\n\nKonva._injectGlobal(Konva);\n\nexports['default'] = Konva;\nmodule.exports = exports['default'];","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_2 = require(\"../Global\");\n\nvar Arc = function (_super) {\n  __extends(Arc, _super);\n\n  function Arc() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Arc.prototype._sceneFunc = function (context) {\n    var angle = Global_1.Konva.getAngle(this.angle()),\n        clockwise = this.clockwise();\n    context.beginPath();\n    context.arc(0, 0, this.outerRadius(), 0, angle, clockwise);\n    context.arc(0, 0, this.innerRadius(), angle, 0, !clockwise);\n    context.closePath();\n    context.fillStrokeShape(this);\n  };\n\n  Arc.prototype.getWidth = function () {\n    return this.outerRadius() * 2;\n  };\n\n  Arc.prototype.getHeight = function () {\n    return this.outerRadius() * 2;\n  };\n\n  Arc.prototype.setWidth = function (width) {\n    this.outerRadius(width / 2);\n  };\n\n  Arc.prototype.setHeight = function (height) {\n    this.outerRadius(height / 2);\n  };\n\n  return Arc;\n}(Shape_1.Shape);\n\nexports.Arc = Arc;\nArc.prototype._centroid = true;\nArc.prototype.className = 'Arc';\nArc.prototype._attrsAffectingSize = ['innerRadius', 'outerRadius'];\n\nGlobal_2._registerNode(Arc);\n\nFactory_1.Factory.addGetterSetter(Arc, 'innerRadius', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Arc, 'outerRadius', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Arc, 'angle', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Arc, 'clockwise', false, Validators_1.getBooleanValidator());\nUtil_1.Collection.mapMethods(Arc);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Line_1 = require(\"./Line\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Arrow = function (_super) {\n  __extends(Arrow, _super);\n\n  function Arrow() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Arrow.prototype._sceneFunc = function (ctx) {\n    _super.prototype._sceneFunc.call(this, ctx);\n\n    var PI2 = Math.PI * 2;\n    var points = this.points();\n    var tp = points;\n    var fromTension = this.tension() !== 0 && points.length > 4;\n\n    if (fromTension) {\n      tp = this.getTensionPoints();\n    }\n\n    var n = points.length;\n    var dx, dy;\n\n    if (fromTension) {\n      dx = points[n - 2] - tp[n - 2];\n      dy = points[n - 1] - tp[n - 1];\n    } else {\n      dx = points[n - 2] - points[n - 4];\n      dy = points[n - 1] - points[n - 3];\n    }\n\n    var radians = (Math.atan2(dy, dx) + PI2) % PI2;\n    var length = this.pointerLength();\n    var width = this.pointerWidth();\n    ctx.save();\n    ctx.beginPath();\n    ctx.translate(points[n - 2], points[n - 1]);\n    ctx.rotate(radians);\n    ctx.moveTo(0, 0);\n    ctx.lineTo(-length, width / 2);\n    ctx.lineTo(-length, -width / 2);\n    ctx.closePath();\n    ctx.restore();\n\n    if (this.pointerAtBeginning()) {\n      ctx.save();\n      ctx.translate(points[0], points[1]);\n\n      if (fromTension) {\n        dx = tp[0] - points[0];\n        dy = tp[1] - points[1];\n      } else {\n        dx = points[2] - points[0];\n        dy = points[3] - points[1];\n      }\n\n      ctx.rotate((Math.atan2(-dy, -dx) + PI2) % PI2);\n      ctx.moveTo(0, 0);\n      ctx.lineTo(-length, width / 2);\n      ctx.lineTo(-length, -width / 2);\n      ctx.closePath();\n      ctx.restore();\n    }\n\n    var isDashEnabled = this.dashEnabled();\n\n    if (isDashEnabled) {\n      this.attrs.dashEnabled = false;\n      ctx.setLineDash([]);\n    }\n\n    ctx.fillStrokeShape(this);\n\n    if (isDashEnabled) {\n      this.attrs.dashEnabled = true;\n    }\n  };\n\n  return Arrow;\n}(Line_1.Line);\n\nexports.Arrow = Arrow;\nArrow.prototype.className = 'Arrow';\n\nGlobal_1._registerNode(Arrow);\n\nFactory_1.Factory.addGetterSetter(Arrow, 'pointerLength', 10, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Arrow, 'pointerWidth', 10, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Arrow, 'pointerAtBeginning', false);\nUtil_1.Collection.mapMethods(Arrow);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Circle = function (_super) {\n  __extends(Circle, _super);\n\n  function Circle() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Circle.prototype._sceneFunc = function (context) {\n    context.beginPath();\n    context.arc(0, 0, this.radius(), 0, Math.PI * 2, false);\n    context.closePath();\n    context.fillStrokeShape(this);\n  };\n\n  Circle.prototype.getWidth = function () {\n    return this.radius() * 2;\n  };\n\n  Circle.prototype.getHeight = function () {\n    return this.radius() * 2;\n  };\n\n  Circle.prototype.setWidth = function (width) {\n    if (this.radius() !== width / 2) {\n      this.radius(width / 2);\n    }\n  };\n\n  Circle.prototype.setHeight = function (height) {\n    if (this.radius() !== height / 2) {\n      this.radius(height / 2);\n    }\n  };\n\n  return Circle;\n}(Shape_1.Shape);\n\nexports.Circle = Circle;\nCircle.prototype._centroid = true;\nCircle.prototype.className = 'Circle';\nCircle.prototype._attrsAffectingSize = ['radius'];\n\nGlobal_1._registerNode(Circle);\n\nFactory_1.Factory.addGetterSetter(Circle, 'radius', 0, Validators_1.getNumberValidator());\nUtil_1.Collection.mapMethods(Circle);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Ellipse = function (_super) {\n  __extends(Ellipse, _super);\n\n  function Ellipse() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Ellipse.prototype._sceneFunc = function (context) {\n    var rx = this.radiusX(),\n        ry = this.radiusY();\n    context.beginPath();\n    context.save();\n\n    if (rx !== ry) {\n      context.scale(1, ry / rx);\n    }\n\n    context.arc(0, 0, rx, 0, Math.PI * 2, false);\n    context.restore();\n    context.closePath();\n    context.fillStrokeShape(this);\n  };\n\n  Ellipse.prototype.getWidth = function () {\n    return this.radiusX() * 2;\n  };\n\n  Ellipse.prototype.getHeight = function () {\n    return this.radiusY() * 2;\n  };\n\n  Ellipse.prototype.setWidth = function (width) {\n    this.radiusX(width / 2);\n  };\n\n  Ellipse.prototype.setHeight = function (height) {\n    this.radiusY(height / 2);\n  };\n\n  return Ellipse;\n}(Shape_1.Shape);\n\nexports.Ellipse = Ellipse;\nEllipse.prototype.className = 'Ellipse';\nEllipse.prototype._centroid = true;\nEllipse.prototype._attrsAffectingSize = ['radiusX', 'radiusY'];\n\nGlobal_1._registerNode(Ellipse);\n\nFactory_1.Factory.addComponentsGetterSetter(Ellipse, 'radius', ['x', 'y']);\nFactory_1.Factory.addGetterSetter(Ellipse, 'radiusX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Ellipse, 'radiusY', 0, Validators_1.getNumberValidator());\nUtil_1.Collection.mapMethods(Ellipse);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Image = function (_super) {\n  __extends(Image, _super);\n\n  function Image() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Image.prototype._useBufferCanvas = function () {\n    return !!((this.hasShadow() || this.getAbsoluteOpacity() !== 1) && this.hasStroke() && this.getStage());\n  };\n\n  Image.prototype._sceneFunc = function (context) {\n    var width = this.width(),\n        height = this.height(),\n        image = this.image(),\n        cropWidth,\n        cropHeight,\n        params;\n\n    if (image) {\n      cropWidth = this.cropWidth();\n      cropHeight = this.cropHeight();\n\n      if (cropWidth && cropHeight) {\n        params = [image, this.cropX(), this.cropY(), cropWidth, cropHeight, 0, 0, width, height];\n      } else {\n        params = [image, 0, 0, width, height];\n      }\n    }\n\n    if (this.hasFill() || this.hasStroke()) {\n      context.beginPath();\n      context.rect(0, 0, width, height);\n      context.closePath();\n      context.fillStrokeShape(this);\n    }\n\n    if (image) {\n      context.drawImage.apply(context, params);\n    }\n  };\n\n  Image.prototype._hitFunc = function (context) {\n    var width = this.width(),\n        height = this.height();\n    context.beginPath();\n    context.rect(0, 0, width, height);\n    context.closePath();\n    context.fillStrokeShape(this);\n  };\n\n  Image.prototype.getWidth = function () {\n    var image = this.image();\n    return this.attrs.width || (image ? image.width : 0);\n  };\n\n  Image.prototype.getHeight = function () {\n    var image = this.image();\n    return this.attrs.height || (image ? image.height : 0);\n  };\n\n  Image.fromURL = function (url, callback) {\n    var img = Util_1.Util.createImageElement();\n\n    img.onload = function () {\n      var image = new Image({\n        image: img\n      });\n      callback(image);\n    };\n\n    img.crossOrigin = 'Anonymous';\n    img.src = url;\n  };\n\n  return Image;\n}(Shape_1.Shape);\n\nexports.Image = Image;\nImage.prototype.className = 'Image';\n\nGlobal_1._registerNode(Image);\n\nFactory_1.Factory.addGetterSetter(Image, 'image');\nFactory_1.Factory.addComponentsGetterSetter(Image, 'crop', ['x', 'y', 'width', 'height']);\nFactory_1.Factory.addGetterSetter(Image, 'cropX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Image, 'cropY', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Image, 'cropWidth', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Image, 'cropHeight', 0, Validators_1.getNumberValidator());\nUtil_1.Collection.mapMethods(Image);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Group_1 = require(\"../Group\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_1 = require(\"../Global\");\n\nvar ATTR_CHANGE_LIST = ['fontFamily', 'fontSize', 'fontStyle', 'padding', 'lineHeight', 'text', 'width'],\n    CHANGE_KONVA = 'Change.konva',\n    NONE = 'none',\n    UP = 'up',\n    RIGHT = 'right',\n    DOWN = 'down',\n    LEFT = 'left',\n    attrChangeListLen = ATTR_CHANGE_LIST.length;\n\nvar Label = function (_super) {\n  __extends(Label, _super);\n\n  function Label(config) {\n    var _this = _super.call(this, config) || this;\n\n    _this.on('add.konva', function (evt) {\n      this._addListeners(evt.child);\n\n      this._sync();\n    });\n\n    return _this;\n  }\n\n  Label.prototype.getText = function () {\n    return this.find('Text')[0];\n  };\n\n  Label.prototype.getTag = function () {\n    return this.find('Tag')[0];\n  };\n\n  Label.prototype._addListeners = function (text) {\n    var that = this,\n        n;\n\n    var func = function func() {\n      that._sync();\n    };\n\n    for (n = 0; n < attrChangeListLen; n++) {\n      text.on(ATTR_CHANGE_LIST[n] + CHANGE_KONVA, func);\n    }\n  };\n\n  Label.prototype.getWidth = function () {\n    return this.getText().width();\n  };\n\n  Label.prototype.getHeight = function () {\n    return this.getText().height();\n  };\n\n  Label.prototype._sync = function () {\n    var text = this.getText(),\n        tag = this.getTag(),\n        width,\n        height,\n        pointerDirection,\n        pointerWidth,\n        x,\n        y,\n        pointerHeight;\n\n    if (text && tag) {\n      width = text.width();\n      height = text.height();\n      pointerDirection = tag.pointerDirection();\n      pointerWidth = tag.pointerWidth();\n      pointerHeight = tag.pointerHeight();\n      x = 0;\n      y = 0;\n\n      switch (pointerDirection) {\n        case UP:\n          x = width / 2;\n          y = -1 * pointerHeight;\n          break;\n\n        case RIGHT:\n          x = width + pointerWidth;\n          y = height / 2;\n          break;\n\n        case DOWN:\n          x = width / 2;\n          y = height + pointerHeight;\n          break;\n\n        case LEFT:\n          x = -1 * pointerWidth;\n          y = height / 2;\n          break;\n      }\n\n      tag.setAttrs({\n        x: -1 * x,\n        y: -1 * y,\n        width: width,\n        height: height\n      });\n      text.setAttrs({\n        x: -1 * x,\n        y: -1 * y\n      });\n    }\n  };\n\n  return Label;\n}(Group_1.Group);\n\nexports.Label = Label;\nLabel.prototype.className = 'Label';\n\nGlobal_1._registerNode(Label);\n\nUtil_1.Collection.mapMethods(Label);\n\nvar Tag = function (_super) {\n  __extends(Tag, _super);\n\n  function Tag() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Tag.prototype._sceneFunc = function (context) {\n    var width = this.width(),\n        height = this.height(),\n        pointerDirection = this.pointerDirection(),\n        pointerWidth = this.pointerWidth(),\n        pointerHeight = this.pointerHeight(),\n        cornerRadius = Math.min(this.cornerRadius(), width / 2, height / 2);\n    context.beginPath();\n\n    if (!cornerRadius) {\n      context.moveTo(0, 0);\n    } else {\n      context.moveTo(cornerRadius, 0);\n    }\n\n    if (pointerDirection === UP) {\n      context.lineTo((width - pointerWidth) / 2, 0);\n      context.lineTo(width / 2, -1 * pointerHeight);\n      context.lineTo((width + pointerWidth) / 2, 0);\n    }\n\n    if (!cornerRadius) {\n      context.lineTo(width, 0);\n    } else {\n      context.lineTo(width - cornerRadius, 0);\n      context.arc(width - cornerRadius, cornerRadius, cornerRadius, Math.PI * 3 / 2, 0, false);\n    }\n\n    if (pointerDirection === RIGHT) {\n      context.lineTo(width, (height - pointerHeight) / 2);\n      context.lineTo(width + pointerWidth, height / 2);\n      context.lineTo(width, (height + pointerHeight) / 2);\n    }\n\n    if (!cornerRadius) {\n      context.lineTo(width, height);\n    } else {\n      context.lineTo(width, height - cornerRadius);\n      context.arc(width - cornerRadius, height - cornerRadius, cornerRadius, 0, Math.PI / 2, false);\n    }\n\n    if (pointerDirection === DOWN) {\n      context.lineTo((width + pointerWidth) / 2, height);\n      context.lineTo(width / 2, height + pointerHeight);\n      context.lineTo((width - pointerWidth) / 2, height);\n    }\n\n    if (!cornerRadius) {\n      context.lineTo(0, height);\n    } else {\n      context.lineTo(cornerRadius, height);\n      context.arc(cornerRadius, height - cornerRadius, cornerRadius, Math.PI / 2, Math.PI, false);\n    }\n\n    if (pointerDirection === LEFT) {\n      context.lineTo(0, (height + pointerHeight) / 2);\n      context.lineTo(-1 * pointerWidth, height / 2);\n      context.lineTo(0, (height - pointerHeight) / 2);\n    }\n\n    if (cornerRadius) {\n      context.lineTo(0, cornerRadius);\n      context.arc(cornerRadius, cornerRadius, cornerRadius, Math.PI, Math.PI * 3 / 2, false);\n    }\n\n    context.closePath();\n    context.fillStrokeShape(this);\n  };\n\n  Tag.prototype.getSelfRect = function () {\n    var x = 0,\n        y = 0,\n        pointerWidth = this.pointerWidth(),\n        pointerHeight = this.pointerHeight(),\n        direction = this.pointerDirection(),\n        width = this.width(),\n        height = this.height();\n\n    if (direction === UP) {\n      y -= pointerHeight;\n      height += pointerHeight;\n    } else if (direction === DOWN) {\n      height += pointerHeight;\n    } else if (direction === LEFT) {\n      x -= pointerWidth * 1.5;\n      width += pointerWidth;\n    } else if (direction === RIGHT) {\n      width += pointerWidth * 1.5;\n    }\n\n    return {\n      x: x,\n      y: y,\n      width: width,\n      height: height\n    };\n  };\n\n  return Tag;\n}(Shape_1.Shape);\n\nexports.Tag = Tag;\nTag.prototype.className = 'Tag';\n\nGlobal_1._registerNode(Tag);\n\nFactory_1.Factory.addGetterSetter(Tag, 'pointerDirection', NONE);\nFactory_1.Factory.addGetterSetter(Tag, 'pointerWidth', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Tag, 'pointerHeight', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Tag, 'cornerRadius', 0, Validators_1.getNumberValidator());\nUtil_1.Collection.mapMethods(Tag);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Line = function (_super) {\n  __extends(Line, _super);\n\n  function Line(config) {\n    var _this = _super.call(this, config) || this;\n\n    _this.on('pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva', function () {\n      this._clearCache('tensionPoints');\n    });\n\n    return _this;\n  }\n\n  Line.prototype._sceneFunc = function (context) {\n    var points = this.points(),\n        length = points.length,\n        tension = this.tension(),\n        closed = this.closed(),\n        bezier = this.bezier(),\n        tp,\n        len,\n        n;\n\n    if (!length) {\n      return;\n    }\n\n    context.beginPath();\n    context.moveTo(points[0], points[1]);\n\n    if (tension !== 0 && length > 4) {\n      tp = this.getTensionPoints();\n      len = tp.length;\n      n = closed ? 0 : 4;\n\n      if (!closed) {\n        context.quadraticCurveTo(tp[0], tp[1], tp[2], tp[3]);\n      }\n\n      while (n < len - 2) {\n        context.bezierCurveTo(tp[n++], tp[n++], tp[n++], tp[n++], tp[n++], tp[n++]);\n      }\n\n      if (!closed) {\n        context.quadraticCurveTo(tp[len - 2], tp[len - 1], points[length - 2], points[length - 1]);\n      }\n    } else if (bezier) {\n      n = 2;\n\n      while (n < length) {\n        context.bezierCurveTo(points[n++], points[n++], points[n++], points[n++], points[n++], points[n++]);\n      }\n    } else {\n      for (n = 2; n < length; n += 2) {\n        context.lineTo(points[n], points[n + 1]);\n      }\n    }\n\n    if (closed) {\n      context.closePath();\n      context.fillStrokeShape(this);\n    } else {\n      context.strokeShape(this);\n    }\n  };\n\n  Line.prototype.getTensionPoints = function () {\n    return this._getCache('tensionPoints', this._getTensionPoints);\n  };\n\n  Line.prototype._getTensionPoints = function () {\n    if (this.closed()) {\n      return this._getTensionPointsClosed();\n    } else {\n      return Util_1.Util._expandPoints(this.points(), this.tension());\n    }\n  };\n\n  Line.prototype._getTensionPointsClosed = function () {\n    var p = this.points(),\n        len = p.length,\n        tension = this.tension(),\n        firstControlPoints = Util_1.Util._getControlPoints(p[len - 2], p[len - 1], p[0], p[1], p[2], p[3], tension),\n        lastControlPoints = Util_1.Util._getControlPoints(p[len - 4], p[len - 3], p[len - 2], p[len - 1], p[0], p[1], tension),\n        middle = Util_1.Util._expandPoints(p, tension),\n        tp = [firstControlPoints[2], firstControlPoints[3]].concat(middle).concat([lastControlPoints[0], lastControlPoints[1], p[len - 2], p[len - 1], lastControlPoints[2], lastControlPoints[3], firstControlPoints[0], firstControlPoints[1], p[0], p[1]]);\n\n    return tp;\n  };\n\n  Line.prototype.getWidth = function () {\n    return this.getSelfRect().width;\n  };\n\n  Line.prototype.getHeight = function () {\n    return this.getSelfRect().height;\n  };\n\n  Line.prototype.getSelfRect = function () {\n    var points;\n\n    if (this.tension() !== 0) {\n      points = this._getTensionPoints();\n    } else {\n      points = this.points();\n    }\n\n    var minX = points[0];\n    var maxX = points[0];\n    var minY = points[1];\n    var maxY = points[1];\n    var x, y;\n\n    for (var i = 0; i < points.length / 2; i++) {\n      x = points[i * 2];\n      y = points[i * 2 + 1];\n      minX = Math.min(minX, x);\n      maxX = Math.max(maxX, x);\n      minY = Math.min(minY, y);\n      maxY = Math.max(maxY, y);\n    }\n\n    return {\n      x: Math.round(minX),\n      y: Math.round(minY),\n      width: Math.round(maxX - minX),\n      height: Math.round(maxY - minY)\n    };\n  };\n\n  return Line;\n}(Shape_1.Shape);\n\nexports.Line = Line;\nLine.prototype.className = 'Line';\nLine.prototype._attrsAffectingSize = ['points', 'bezier', 'tension'];\n\nGlobal_1._registerNode(Line);\n\nFactory_1.Factory.addGetterSetter(Line, 'closed', false);\nFactory_1.Factory.addGetterSetter(Line, 'bezier', false);\nFactory_1.Factory.addGetterSetter(Line, 'tension', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Line, 'points', [], Validators_1.getNumberArrayValidator());\nUtil_1.Collection.mapMethods(Line);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Path = function (_super) {\n  __extends(Path, _super);\n\n  function Path(config) {\n    var _this = _super.call(this, config) || this;\n\n    _this.dataArray = [];\n    _this.pathLength = 0;\n    _this.dataArray = Path.parsePathData(_this.data());\n    _this.pathLength = 0;\n\n    for (var i = 0; i < _this.dataArray.length; ++i) {\n      _this.pathLength += _this.dataArray[i].pathLength;\n    }\n\n    _this.on('dataChange.konva', function () {\n      this.dataArray = Path.parsePathData(this.data());\n      this.pathLength = 0;\n\n      for (var i = 0; i < this.dataArray.length; ++i) {\n        this.pathLength += this.dataArray[i].pathLength;\n      }\n    });\n\n    return _this;\n  }\n\n  Path.prototype._sceneFunc = function (context) {\n    var ca = this.dataArray;\n    context.beginPath();\n\n    for (var n = 0; n < ca.length; n++) {\n      var c = ca[n].command;\n      var p = ca[n].points;\n\n      switch (c) {\n        case 'L':\n          context.lineTo(p[0], p[1]);\n          break;\n\n        case 'M':\n          context.moveTo(p[0], p[1]);\n          break;\n\n        case 'C':\n          context.bezierCurveTo(p[0], p[1], p[2], p[3], p[4], p[5]);\n          break;\n\n        case 'Q':\n          context.quadraticCurveTo(p[0], p[1], p[2], p[3]);\n          break;\n\n        case 'A':\n          var cx = p[0],\n              cy = p[1],\n              rx = p[2],\n              ry = p[3],\n              theta = p[4],\n              dTheta = p[5],\n              psi = p[6],\n              fs = p[7];\n          var r = rx > ry ? rx : ry;\n          var scaleX = rx > ry ? 1 : rx / ry;\n          var scaleY = rx > ry ? ry / rx : 1;\n          context.translate(cx, cy);\n          context.rotate(psi);\n          context.scale(scaleX, scaleY);\n          context.arc(0, 0, r, theta, theta + dTheta, 1 - fs);\n          context.scale(1 / scaleX, 1 / scaleY);\n          context.rotate(-psi);\n          context.translate(-cx, -cy);\n          break;\n\n        case 'z':\n          context.closePath();\n          break;\n      }\n    }\n\n    context.fillStrokeShape(this);\n  };\n\n  Path.prototype.getSelfRect = function () {\n    var points = [];\n    this.dataArray.forEach(function (data) {\n      points = points.concat(data.points);\n    });\n    var minX = points[0];\n    var maxX = points[0];\n    var minY = points[1];\n    var maxY = points[1];\n    var x, y;\n\n    for (var i = 0; i < points.length / 2; i++) {\n      x = points[i * 2];\n      y = points[i * 2 + 1];\n\n      if (!isNaN(x)) {\n        minX = Math.min(minX, x);\n        maxX = Math.max(maxX, x);\n      }\n\n      if (!isNaN(y)) {\n        minY = Math.min(minY, y);\n        maxY = Math.max(maxY, y);\n      }\n    }\n\n    return {\n      x: Math.round(minX),\n      y: Math.round(minY),\n      width: Math.round(maxX - minX),\n      height: Math.round(maxY - minY)\n    };\n  };\n\n  Path.prototype.getLength = function () {\n    return this.pathLength;\n  };\n\n  Path.prototype.getPointAtLength = function (length) {\n    var point,\n        i = 0,\n        ii = this.dataArray.length;\n\n    if (!ii) {\n      return null;\n    }\n\n    while (i < ii && length > this.dataArray[i].pathLength) {\n      length -= this.dataArray[i].pathLength;\n      ++i;\n    }\n\n    if (i === ii) {\n      point = this.dataArray[i - 1].points.slice(-2);\n      return {\n        x: point[0],\n        y: point[1]\n      };\n    }\n\n    if (length < 0.01) {\n      point = this.dataArray[i].points.slice(0, 2);\n      return {\n        x: point[0],\n        y: point[1]\n      };\n    }\n\n    var cp = this.dataArray[i];\n    var p = cp.points;\n\n    switch (cp.command) {\n      case 'L':\n        return Path.getPointOnLine(length, cp.start.x, cp.start.y, p[0], p[1]);\n\n      case 'C':\n        return Path.getPointOnCubicBezier(length / cp.pathLength, cp.start.x, cp.start.y, p[0], p[1], p[2], p[3], p[4], p[5]);\n\n      case 'Q':\n        return Path.getPointOnQuadraticBezier(length / cp.pathLength, cp.start.x, cp.start.y, p[0], p[1], p[2], p[3]);\n\n      case 'A':\n        var cx = p[0],\n            cy = p[1],\n            rx = p[2],\n            ry = p[3],\n            theta = p[4],\n            dTheta = p[5],\n            psi = p[6];\n        theta += dTheta * length / cp.pathLength;\n        return Path.getPointOnEllipticalArc(cx, cy, rx, ry, theta, psi);\n    }\n\n    return null;\n  };\n\n  Path.getLineLength = function (x1, y1, x2, y2) {\n    return Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n  };\n\n  Path.getPointOnLine = function (dist, P1x, P1y, P2x, P2y, fromX, fromY) {\n    if (fromX === undefined) {\n      fromX = P1x;\n    }\n\n    if (fromY === undefined) {\n      fromY = P1y;\n    }\n\n    var m = (P2y - P1y) / (P2x - P1x + 0.00000001);\n    var run = Math.sqrt(dist * dist / (1 + m * m));\n\n    if (P2x < P1x) {\n      run *= -1;\n    }\n\n    var rise = m * run;\n    var pt;\n\n    if (P2x === P1x) {\n      pt = {\n        x: fromX,\n        y: fromY + rise\n      };\n    } else if ((fromY - P1y) / (fromX - P1x + 0.00000001) === m) {\n      pt = {\n        x: fromX + run,\n        y: fromY + rise\n      };\n    } else {\n      var ix, iy;\n      var len = this.getLineLength(P1x, P1y, P2x, P2y);\n\n      if (len < 0.00000001) {\n        return undefined;\n      }\n\n      var u = (fromX - P1x) * (P2x - P1x) + (fromY - P1y) * (P2y - P1y);\n      u = u / (len * len);\n      ix = P1x + u * (P2x - P1x);\n      iy = P1y + u * (P2y - P1y);\n      var pRise = this.getLineLength(fromX, fromY, ix, iy);\n      var pRun = Math.sqrt(dist * dist - pRise * pRise);\n      run = Math.sqrt(pRun * pRun / (1 + m * m));\n\n      if (P2x < P1x) {\n        run *= -1;\n      }\n\n      rise = m * run;\n      pt = {\n        x: ix + run,\n        y: iy + rise\n      };\n    }\n\n    return pt;\n  };\n\n  Path.getPointOnCubicBezier = function (pct, P1x, P1y, P2x, P2y, P3x, P3y, P4x, P4y) {\n    function CB1(t) {\n      return t * t * t;\n    }\n\n    function CB2(t) {\n      return 3 * t * t * (1 - t);\n    }\n\n    function CB3(t) {\n      return 3 * t * (1 - t) * (1 - t);\n    }\n\n    function CB4(t) {\n      return (1 - t) * (1 - t) * (1 - t);\n    }\n\n    var x = P4x * CB1(pct) + P3x * CB2(pct) + P2x * CB3(pct) + P1x * CB4(pct);\n    var y = P4y * CB1(pct) + P3y * CB2(pct) + P2y * CB3(pct) + P1y * CB4(pct);\n    return {\n      x: x,\n      y: y\n    };\n  };\n\n  Path.getPointOnQuadraticBezier = function (pct, P1x, P1y, P2x, P2y, P3x, P3y) {\n    function QB1(t) {\n      return t * t;\n    }\n\n    function QB2(t) {\n      return 2 * t * (1 - t);\n    }\n\n    function QB3(t) {\n      return (1 - t) * (1 - t);\n    }\n\n    var x = P3x * QB1(pct) + P2x * QB2(pct) + P1x * QB3(pct);\n    var y = P3y * QB1(pct) + P2y * QB2(pct) + P1y * QB3(pct);\n    return {\n      x: x,\n      y: y\n    };\n  };\n\n  Path.getPointOnEllipticalArc = function (cx, cy, rx, ry, theta, psi) {\n    var cosPsi = Math.cos(psi),\n        sinPsi = Math.sin(psi);\n    var pt = {\n      x: rx * Math.cos(theta),\n      y: ry * Math.sin(theta)\n    };\n    return {\n      x: cx + (pt.x * cosPsi - pt.y * sinPsi),\n      y: cy + (pt.x * sinPsi + pt.y * cosPsi)\n    };\n  };\n\n  Path.parsePathData = function (data) {\n    if (!data) {\n      return [];\n    }\n\n    var cs = data;\n    var cc = ['m', 'M', 'l', 'L', 'v', 'V', 'h', 'H', 'z', 'Z', 'c', 'C', 'q', 'Q', 't', 'T', 's', 'S', 'a', 'A'];\n    cs = cs.replace(new RegExp(' ', 'g'), ',');\n\n    for (var n = 0; n < cc.length; n++) {\n      cs = cs.replace(new RegExp(cc[n], 'g'), '|' + cc[n]);\n    }\n\n    var arr = cs.split('|');\n    var ca = [];\n    var coords = [];\n    var cpx = 0;\n    var cpy = 0;\n    var re = /([-+]?((\\d+\\.\\d+)|((\\d+)|(\\.\\d+)))(?:e[-+]?\\d+)?)/gi;\n    var match;\n\n    for (n = 1; n < arr.length; n++) {\n      var str = arr[n];\n      var c = str.charAt(0);\n      str = str.slice(1);\n      coords.length = 0;\n\n      while (match = re.exec(str)) {\n        coords.push(match[0]);\n      }\n\n      var p = [];\n\n      for (var j = 0, jlen = coords.length; j < jlen; j++) {\n        var parsed = parseFloat(coords[j]);\n\n        if (!isNaN(parsed)) {\n          p.push(parsed);\n        } else {\n          p.push(0);\n        }\n      }\n\n      while (p.length > 0) {\n        if (isNaN(p[0])) {\n          break;\n        }\n\n        var cmd = null;\n        var points = [];\n        var startX = cpx,\n            startY = cpy;\n        var prevCmd, ctlPtx, ctlPty;\n        var rx, ry, psi, fa, fs, x1, y1;\n\n        switch (c) {\n          case 'l':\n            cpx += p.shift();\n            cpy += p.shift();\n            cmd = 'L';\n            points.push(cpx, cpy);\n            break;\n\n          case 'L':\n            cpx = p.shift();\n            cpy = p.shift();\n            points.push(cpx, cpy);\n            break;\n\n          case 'm':\n            var dx = p.shift();\n            var dy = p.shift();\n            cpx += dx;\n            cpy += dy;\n            cmd = 'M';\n\n            if (ca.length > 2 && ca[ca.length - 1].command === 'z') {\n              for (var idx = ca.length - 2; idx >= 0; idx--) {\n                if (ca[idx].command === 'M') {\n                  cpx = ca[idx].points[0] + dx;\n                  cpy = ca[idx].points[1] + dy;\n                  break;\n                }\n              }\n            }\n\n            points.push(cpx, cpy);\n            c = 'l';\n            break;\n\n          case 'M':\n            cpx = p.shift();\n            cpy = p.shift();\n            cmd = 'M';\n            points.push(cpx, cpy);\n            c = 'L';\n            break;\n\n          case 'h':\n            cpx += p.shift();\n            cmd = 'L';\n            points.push(cpx, cpy);\n            break;\n\n          case 'H':\n            cpx = p.shift();\n            cmd = 'L';\n            points.push(cpx, cpy);\n            break;\n\n          case 'v':\n            cpy += p.shift();\n            cmd = 'L';\n            points.push(cpx, cpy);\n            break;\n\n          case 'V':\n            cpy = p.shift();\n            cmd = 'L';\n            points.push(cpx, cpy);\n            break;\n\n          case 'C':\n            points.push(p.shift(), p.shift(), p.shift(), p.shift());\n            cpx = p.shift();\n            cpy = p.shift();\n            points.push(cpx, cpy);\n            break;\n\n          case 'c':\n            points.push(cpx + p.shift(), cpy + p.shift(), cpx + p.shift(), cpy + p.shift());\n            cpx += p.shift();\n            cpy += p.shift();\n            cmd = 'C';\n            points.push(cpx, cpy);\n            break;\n\n          case 'S':\n            ctlPtx = cpx;\n            ctlPty = cpy;\n            prevCmd = ca[ca.length - 1];\n\n            if (prevCmd.command === 'C') {\n              ctlPtx = cpx + (cpx - prevCmd.points[2]);\n              ctlPty = cpy + (cpy - prevCmd.points[3]);\n            }\n\n            points.push(ctlPtx, ctlPty, p.shift(), p.shift());\n            cpx = p.shift();\n            cpy = p.shift();\n            cmd = 'C';\n            points.push(cpx, cpy);\n            break;\n\n          case 's':\n            ctlPtx = cpx;\n            ctlPty = cpy;\n            prevCmd = ca[ca.length - 1];\n\n            if (prevCmd.command === 'C') {\n              ctlPtx = cpx + (cpx - prevCmd.points[2]);\n              ctlPty = cpy + (cpy - prevCmd.points[3]);\n            }\n\n            points.push(ctlPtx, ctlPty, cpx + p.shift(), cpy + p.shift());\n            cpx += p.shift();\n            cpy += p.shift();\n            cmd = 'C';\n            points.push(cpx, cpy);\n            break;\n\n          case 'Q':\n            points.push(p.shift(), p.shift());\n            cpx = p.shift();\n            cpy = p.shift();\n            points.push(cpx, cpy);\n            break;\n\n          case 'q':\n            points.push(cpx + p.shift(), cpy + p.shift());\n            cpx += p.shift();\n            cpy += p.shift();\n            cmd = 'Q';\n            points.push(cpx, cpy);\n            break;\n\n          case 'T':\n            ctlPtx = cpx;\n            ctlPty = cpy;\n            prevCmd = ca[ca.length - 1];\n\n            if (prevCmd.command === 'Q') {\n              ctlPtx = cpx + (cpx - prevCmd.points[0]);\n              ctlPty = cpy + (cpy - prevCmd.points[1]);\n            }\n\n            cpx = p.shift();\n            cpy = p.shift();\n            cmd = 'Q';\n            points.push(ctlPtx, ctlPty, cpx, cpy);\n            break;\n\n          case 't':\n            ctlPtx = cpx;\n            ctlPty = cpy;\n            prevCmd = ca[ca.length - 1];\n\n            if (prevCmd.command === 'Q') {\n              ctlPtx = cpx + (cpx - prevCmd.points[0]);\n              ctlPty = cpy + (cpy - prevCmd.points[1]);\n            }\n\n            cpx += p.shift();\n            cpy += p.shift();\n            cmd = 'Q';\n            points.push(ctlPtx, ctlPty, cpx, cpy);\n            break;\n\n          case 'A':\n            rx = p.shift();\n            ry = p.shift();\n            psi = p.shift();\n            fa = p.shift();\n            fs = p.shift();\n            x1 = cpx;\n            y1 = cpy;\n            cpx = p.shift();\n            cpy = p.shift();\n            cmd = 'A';\n            points = this.convertEndpointToCenterParameterization(x1, y1, cpx, cpy, fa, fs, rx, ry, psi);\n            break;\n\n          case 'a':\n            rx = p.shift();\n            ry = p.shift();\n            psi = p.shift();\n            fa = p.shift();\n            fs = p.shift();\n            x1 = cpx;\n            y1 = cpy;\n            cpx += p.shift();\n            cpy += p.shift();\n            cmd = 'A';\n            points = this.convertEndpointToCenterParameterization(x1, y1, cpx, cpy, fa, fs, rx, ry, psi);\n            break;\n        }\n\n        ca.push({\n          command: cmd || c,\n          points: points,\n          start: {\n            x: startX,\n            y: startY\n          },\n          pathLength: this.calcLength(startX, startY, cmd || c, points)\n        });\n      }\n\n      if (c === 'z' || c === 'Z') {\n        ca.push({\n          command: 'z',\n          points: [],\n          start: undefined,\n          pathLength: 0\n        });\n      }\n    }\n\n    return ca;\n  };\n\n  Path.calcLength = function (x, y, cmd, points) {\n    var len, p1, p2, t;\n    var path = Path;\n\n    switch (cmd) {\n      case 'L':\n        return path.getLineLength(x, y, points[0], points[1]);\n\n      case 'C':\n        len = 0.0;\n        p1 = path.getPointOnCubicBezier(0, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\n\n        for (t = 0.01; t <= 1; t += 0.01) {\n          p2 = path.getPointOnCubicBezier(t, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\n          len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n          p1 = p2;\n        }\n\n        return len;\n\n      case 'Q':\n        len = 0.0;\n        p1 = path.getPointOnQuadraticBezier(0, x, y, points[0], points[1], points[2], points[3]);\n\n        for (t = 0.01; t <= 1; t += 0.01) {\n          p2 = path.getPointOnQuadraticBezier(t, x, y, points[0], points[1], points[2], points[3]);\n          len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n          p1 = p2;\n        }\n\n        return len;\n\n      case 'A':\n        len = 0.0;\n        var start = points[4];\n        var dTheta = points[5];\n        var end = points[4] + dTheta;\n        var inc = Math.PI / 180.0;\n\n        if (Math.abs(start - end) < inc) {\n          inc = Math.abs(start - end);\n        }\n\n        p1 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], start, 0);\n\n        if (dTheta < 0) {\n          for (t = start - inc; t > end; t -= inc) {\n            p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n            len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n            p1 = p2;\n          }\n        } else {\n          for (t = start + inc; t < end; t += inc) {\n            p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n            len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n            p1 = p2;\n          }\n        }\n\n        p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], end, 0);\n        len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n        return len;\n    }\n\n    return 0;\n  };\n\n  Path.convertEndpointToCenterParameterization = function (x1, y1, x2, y2, fa, fs, rx, ry, psiDeg) {\n    var psi = psiDeg * (Math.PI / 180.0);\n    var xp = Math.cos(psi) * (x1 - x2) / 2.0 + Math.sin(psi) * (y1 - y2) / 2.0;\n    var yp = -1 * Math.sin(psi) * (x1 - x2) / 2.0 + Math.cos(psi) * (y1 - y2) / 2.0;\n    var lambda = xp * xp / (rx * rx) + yp * yp / (ry * ry);\n\n    if (lambda > 1) {\n      rx *= Math.sqrt(lambda);\n      ry *= Math.sqrt(lambda);\n    }\n\n    var f = Math.sqrt((rx * rx * (ry * ry) - rx * rx * (yp * yp) - ry * ry * (xp * xp)) / (rx * rx * (yp * yp) + ry * ry * (xp * xp)));\n\n    if (fa === fs) {\n      f *= -1;\n    }\n\n    if (isNaN(f)) {\n      f = 0;\n    }\n\n    var cxp = f * rx * yp / ry;\n    var cyp = f * -ry * xp / rx;\n    var cx = (x1 + x2) / 2.0 + Math.cos(psi) * cxp - Math.sin(psi) * cyp;\n    var cy = (y1 + y2) / 2.0 + Math.sin(psi) * cxp + Math.cos(psi) * cyp;\n\n    var vMag = function vMag(v) {\n      return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n    };\n\n    var vRatio = function vRatio(u, v) {\n      return (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v));\n    };\n\n    var vAngle = function vAngle(u, v) {\n      return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vRatio(u, v));\n    };\n\n    var theta = vAngle([1, 0], [(xp - cxp) / rx, (yp - cyp) / ry]);\n    var u = [(xp - cxp) / rx, (yp - cyp) / ry];\n    var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\n    var dTheta = vAngle(u, v);\n\n    if (vRatio(u, v) <= -1) {\n      dTheta = Math.PI;\n    }\n\n    if (vRatio(u, v) >= 1) {\n      dTheta = 0;\n    }\n\n    if (fs === 0 && dTheta > 0) {\n      dTheta = dTheta - 2 * Math.PI;\n    }\n\n    if (fs === 1 && dTheta < 0) {\n      dTheta = dTheta + 2 * Math.PI;\n    }\n\n    return [cx, cy, rx, ry, theta, dTheta, psi, fs];\n  };\n\n  return Path;\n}(Shape_1.Shape);\n\nexports.Path = Path;\nPath.prototype.className = 'Path';\nPath.prototype._attrsAffectingSize = ['data'];\n\nGlobal_1._registerNode(Path);\n\nFactory_1.Factory.addGetterSetter(Path, 'data');\nUtil_1.Collection.mapMethods(Path);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Rect = function (_super) {\n  __extends(Rect, _super);\n\n  function Rect() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Rect.prototype._sceneFunc = function (context) {\n    var cornerRadius = this.cornerRadius(),\n        width = this.width(),\n        height = this.height();\n    context.beginPath();\n\n    if (!cornerRadius) {\n      context.rect(0, 0, width, height);\n    } else {\n      var topLeft = 0;\n      var topRight = 0;\n      var bottomLeft = 0;\n      var bottomRight = 0;\n\n      if (typeof cornerRadius === 'number') {\n        topLeft = topRight = bottomLeft = bottomRight = Math.min(cornerRadius, width / 2, height / 2);\n      } else {\n        topLeft = Math.min(cornerRadius[0], width / 2, height / 2);\n        topRight = Math.min(cornerRadius[1], width / 2, height / 2);\n        bottomRight = Math.min(cornerRadius[2], width / 2, height / 2);\n        bottomLeft = Math.min(cornerRadius[3], width / 2, height / 2);\n      }\n\n      context.moveTo(topLeft, 0);\n      context.lineTo(width - topRight, 0);\n      context.arc(width - topRight, topRight, topRight, Math.PI * 3 / 2, 0, false);\n      context.lineTo(width, height - bottomRight);\n      context.arc(width - bottomRight, height - bottomRight, bottomRight, 0, Math.PI / 2, false);\n      context.lineTo(bottomLeft, height);\n      context.arc(bottomLeft, height - bottomLeft, bottomLeft, Math.PI / 2, Math.PI, false);\n      context.lineTo(0, topLeft);\n      context.arc(topLeft, topLeft, topLeft, Math.PI, Math.PI * 3 / 2, false);\n    }\n\n    context.closePath();\n    context.fillStrokeShape(this);\n  };\n\n  return Rect;\n}(Shape_1.Shape);\n\nexports.Rect = Rect;\nRect.prototype.className = 'Rect';\n\nGlobal_1._registerNode(Rect);\n\nFactory_1.Factory.addGetterSetter(Rect, 'cornerRadius', 0);\nUtil_1.Collection.mapMethods(Rect);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_1 = require(\"../Global\");\n\nvar RegularPolygon = function (_super) {\n  __extends(RegularPolygon, _super);\n\n  function RegularPolygon() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  RegularPolygon.prototype._sceneFunc = function (context) {\n    var sides = this.sides(),\n        radius = this.radius(),\n        n,\n        x,\n        y;\n    context.beginPath();\n    context.moveTo(0, 0 - radius);\n\n    for (n = 1; n < sides; n++) {\n      x = radius * Math.sin(n * 2 * Math.PI / sides);\n      y = -1 * radius * Math.cos(n * 2 * Math.PI / sides);\n      context.lineTo(x, y);\n    }\n\n    context.closePath();\n    context.fillStrokeShape(this);\n  };\n\n  RegularPolygon.prototype.getWidth = function () {\n    return this.radius() * 2;\n  };\n\n  RegularPolygon.prototype.getHeight = function () {\n    return this.radius() * 2;\n  };\n\n  RegularPolygon.prototype.setWidth = function (width) {\n    this.radius(width / 2);\n  };\n\n  RegularPolygon.prototype.setHeight = function (height) {\n    this.radius(height / 2);\n  };\n\n  return RegularPolygon;\n}(Shape_1.Shape);\n\nexports.RegularPolygon = RegularPolygon;\nRegularPolygon.prototype.className = 'RegularPolygon';\nRegularPolygon.prototype._centroid = true;\nRegularPolygon.prototype._attrsAffectingSize = ['radius'];\n\nGlobal_1._registerNode(RegularPolygon);\n\nFactory_1.Factory.addGetterSetter(RegularPolygon, 'radius', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(RegularPolygon, 'sides', 0, Validators_1.getNumberValidator());\nUtil_1.Collection.mapMethods(RegularPolygon);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_1 = require(\"../Global\");\n\nvar PIx2 = Math.PI * 2;\n\nvar Ring = function (_super) {\n  __extends(Ring, _super);\n\n  function Ring() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Ring.prototype._sceneFunc = function (context) {\n    context.beginPath();\n    context.arc(0, 0, this.innerRadius(), 0, PIx2, false);\n    context.moveTo(this.outerRadius(), 0);\n    context.arc(0, 0, this.outerRadius(), PIx2, 0, true);\n    context.closePath();\n    context.fillStrokeShape(this);\n  };\n\n  Ring.prototype.getWidth = function () {\n    return this.outerRadius() * 2;\n  };\n\n  Ring.prototype.getHeight = function () {\n    return this.outerRadius() * 2;\n  };\n\n  Ring.prototype.setWidth = function (width) {\n    this.outerRadius(width / 2);\n  };\n\n  Ring.prototype.setHeight = function (height) {\n    this.outerRadius(height / 2);\n  };\n\n  return Ring;\n}(Shape_1.Shape);\n\nexports.Ring = Ring;\nRing.prototype.className = 'Ring';\nRing.prototype._centroid = true;\nRing.prototype._attrsAffectingSize = ['innerRadius', 'outerRadius'];\n\nGlobal_1._registerNode(Ring);\n\nFactory_1.Factory.addGetterSetter(Ring, 'innerRadius', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Ring, 'outerRadius', 0, Validators_1.getNumberValidator());\nUtil_1.Collection.mapMethods(Ring);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Animation_1 = require(\"../Animation\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Sprite = function (_super) {\n  __extends(Sprite, _super);\n\n  function Sprite(config) {\n    var _this = _super.call(this, config) || this;\n\n    _this._updated = true;\n    _this.anim = new Animation_1.Animation(function () {\n      var updated = _this._updated;\n      _this._updated = false;\n      return updated;\n    });\n\n    _this.on('animationChange.konva', function () {\n      this.frameIndex(0);\n    });\n\n    _this.on('frameIndexChange.konva', function () {\n      this._updated = true;\n    });\n\n    _this.on('frameRateChange.konva', function () {\n      if (!this.anim.isRunning()) {\n        return;\n      }\n\n      clearInterval(this.interval);\n\n      this._setInterval();\n    });\n\n    return _this;\n  }\n\n  Sprite.prototype._sceneFunc = function (context) {\n    var anim = this.animation(),\n        index = this.frameIndex(),\n        ix4 = index * 4,\n        set = this.animations()[anim],\n        offsets = this.frameOffsets(),\n        x = set[ix4 + 0],\n        y = set[ix4 + 1],\n        width = set[ix4 + 2],\n        height = set[ix4 + 3],\n        image = this.image();\n\n    if (this.hasFill() || this.hasStroke()) {\n      context.beginPath();\n      context.rect(0, 0, width, height);\n      context.closePath();\n      context.fillStrokeShape(this);\n    }\n\n    if (image) {\n      if (offsets) {\n        var offset = offsets[anim],\n            ix2 = index * 2;\n        context.drawImage(image, x, y, width, height, offset[ix2 + 0], offset[ix2 + 1], width, height);\n      } else {\n        context.drawImage(image, x, y, width, height, 0, 0, width, height);\n      }\n    }\n  };\n\n  Sprite.prototype._hitFunc = function (context) {\n    var anim = this.animation(),\n        index = this.frameIndex(),\n        ix4 = index * 4,\n        set = this.animations()[anim],\n        offsets = this.frameOffsets(),\n        width = set[ix4 + 2],\n        height = set[ix4 + 3];\n    context.beginPath();\n\n    if (offsets) {\n      var offset = offsets[anim];\n      var ix2 = index * 2;\n      context.rect(offset[ix2 + 0], offset[ix2 + 1], width, height);\n    } else {\n      context.rect(0, 0, width, height);\n    }\n\n    context.closePath();\n    context.fillShape(this);\n  };\n\n  Sprite.prototype._useBufferCanvas = function () {\n    return (this.hasShadow() || this.getAbsoluteOpacity() !== 1) && this.hasStroke();\n  };\n\n  Sprite.prototype._setInterval = function () {\n    var that = this;\n    this.interval = setInterval(function () {\n      that._updateIndex();\n    }, 1000 / this.frameRate());\n  };\n\n  Sprite.prototype.start = function () {\n    if (this.isRunning()) {\n      return;\n    }\n\n    var layer = this.getLayer();\n    this.anim.setLayers(layer);\n\n    this._setInterval();\n\n    this.anim.start();\n  };\n\n  Sprite.prototype.stop = function () {\n    this.anim.stop();\n    clearInterval(this.interval);\n  };\n\n  Sprite.prototype.isRunning = function () {\n    return this.anim.isRunning();\n  };\n\n  Sprite.prototype._updateIndex = function () {\n    var index = this.frameIndex(),\n        animation = this.animation(),\n        animations = this.animations(),\n        anim = animations[animation],\n        len = anim.length / 4;\n\n    if (index < len - 1) {\n      this.frameIndex(index + 1);\n    } else {\n      this.frameIndex(0);\n    }\n  };\n\n  return Sprite;\n}(Shape_1.Shape);\n\nexports.Sprite = Sprite;\nSprite.prototype.className = 'Sprite';\n\nGlobal_1._registerNode(Sprite);\n\nFactory_1.Factory.addGetterSetter(Sprite, 'animation');\nFactory_1.Factory.addGetterSetter(Sprite, 'animations');\nFactory_1.Factory.addGetterSetter(Sprite, 'frameOffsets');\nFactory_1.Factory.addGetterSetter(Sprite, 'image');\nFactory_1.Factory.addGetterSetter(Sprite, 'frameIndex', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Sprite, 'frameRate', 17, Validators_1.getNumberValidator());\nFactory_1.Factory.backCompat(Sprite, {\n  index: 'frameIndex',\n  getIndex: 'getFrameIndex',\n  setIndex: 'setFrameIndex'\n});\nUtil_1.Collection.mapMethods(Sprite);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Star = function (_super) {\n  __extends(Star, _super);\n\n  function Star() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Star.prototype._sceneFunc = function (context) {\n    var innerRadius = this.innerRadius(),\n        outerRadius = this.outerRadius(),\n        numPoints = this.numPoints();\n    context.beginPath();\n    context.moveTo(0, 0 - outerRadius);\n\n    for (var n = 1; n < numPoints * 2; n++) {\n      var radius = n % 2 === 0 ? outerRadius : innerRadius;\n      var x = radius * Math.sin(n * Math.PI / numPoints);\n      var y = -1 * radius * Math.cos(n * Math.PI / numPoints);\n      context.lineTo(x, y);\n    }\n\n    context.closePath();\n    context.fillStrokeShape(this);\n  };\n\n  Star.prototype.getWidth = function () {\n    return this.outerRadius() * 2;\n  };\n\n  Star.prototype.getHeight = function () {\n    return this.outerRadius() * 2;\n  };\n\n  Star.prototype.setWidth = function (width) {\n    this.outerRadius(width / 2);\n  };\n\n  Star.prototype.setHeight = function (height) {\n    this.outerRadius(height / 2);\n  };\n\n  return Star;\n}(Shape_1.Shape);\n\nexports.Star = Star;\nStar.prototype.className = 'Star';\nStar.prototype._centroid = true;\nStar.prototype._attrsAffectingSize = ['innerRadius', 'outerRadius'];\n\nGlobal_1._registerNode(Star);\n\nFactory_1.Factory.addGetterSetter(Star, 'numPoints', 5, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Star, 'innerRadius', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Star, 'outerRadius', 0, Validators_1.getNumberValidator());\nUtil_1.Collection.mapMethods(Star);","\"use strict\";\n\nrequire(\"core-js/modules/es.string.trim-end.js\");\n\nrequire(\"core-js/modules/es.string.trim-start.js\");\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_2 = require(\"../Global\");\n\nvar AUTO = 'auto',\n    CENTER = 'center',\n    JUSTIFY = 'justify',\n    CHANGE_KONVA = 'Change.konva',\n    CONTEXT_2D = '2d',\n    DASH = '-',\n    LEFT = 'left',\n    TEXT = 'text',\n    TEXT_UPPER = 'Text',\n    TOP = 'top',\n    BOTTOM = 'bottom',\n    MIDDLE = 'middle',\n    NORMAL = 'normal',\n    PX_SPACE = 'px ',\n    SPACE = ' ',\n    RIGHT = 'right',\n    WORD = 'word',\n    CHAR = 'char',\n    NONE = 'none',\n    ELLIPSIS = '',\n    ATTR_CHANGE_LIST = ['fontFamily', 'fontSize', 'fontStyle', 'fontVariant', 'padding', 'align', 'verticalAlign', 'lineHeight', 'text', 'width', 'height', 'wrap', 'ellipsis', 'letterSpacing'],\n    attrChangeListLen = ATTR_CHANGE_LIST.length;\nvar dummyContext;\n\nfunction getDummyContext() {\n  if (dummyContext) {\n    return dummyContext;\n  }\n\n  dummyContext = Util_1.Util.createCanvasElement().getContext(CONTEXT_2D);\n  return dummyContext;\n}\n\nfunction _fillFunc(context) {\n  context.fillText(this._partialText, this._partialTextX, this._partialTextY);\n}\n\nfunction _strokeFunc(context) {\n  context.strokeText(this._partialText, this._partialTextX, this._partialTextY);\n}\n\nfunction checkDefaultFill(config) {\n  config = config || {};\n\n  if (!config.fillLinearGradientColorStops && !config.fillRadialGradientColorStops && !config.fillPatternImage) {\n    config.fill = config.fill || 'black';\n  }\n\n  return config;\n}\n\nvar Text = function (_super) {\n  __extends(Text, _super);\n\n  function Text(config) {\n    var _this = _super.call(this, checkDefaultFill(config)) || this;\n\n    _this._partialTextX = 0;\n    _this._partialTextY = 0;\n\n    for (var n = 0; n < attrChangeListLen; n++) {\n      _this.on(ATTR_CHANGE_LIST[n] + CHANGE_KONVA, _this._setTextData);\n    }\n\n    _this._setTextData();\n\n    return _this;\n  }\n\n  Text.prototype._sceneFunc = function (context) {\n    var padding = this.padding(),\n        fontSize = this.fontSize(),\n        lineHeightPx = this.lineHeight() * fontSize,\n        textArr = this.textArr,\n        textArrLen = textArr.length,\n        verticalAlign = this.verticalAlign(),\n        alignY = 0,\n        align = this.align(),\n        totalWidth = this.getWidth(),\n        letterSpacing = this.letterSpacing(),\n        fill = this.fill(),\n        textDecoration = this.textDecoration(),\n        shouldUnderline = textDecoration.indexOf('underline') !== -1,\n        shouldLineThrough = textDecoration.indexOf('line-through') !== -1,\n        n;\n    var translateY = 0;\n    var translateY = lineHeightPx / 2;\n    var lineTranslateX = 0;\n    var lineTranslateY = 0;\n    context.setAttr('font', this._getContextFont());\n    context.setAttr('textBaseline', MIDDLE);\n    context.setAttr('textAlign', LEFT);\n\n    if (verticalAlign === MIDDLE) {\n      alignY = (this.getHeight() - textArrLen * lineHeightPx - padding * 2) / 2;\n    } else if (verticalAlign === BOTTOM) {\n      alignY = this.getHeight() - textArrLen * lineHeightPx - padding * 2;\n    }\n\n    context.translate(padding, alignY + padding);\n\n    for (n = 0; n < textArrLen; n++) {\n      var lineTranslateX = 0;\n      var lineTranslateY = 0;\n      var obj = textArr[n],\n          text = obj.text,\n          width = obj.width,\n          lastLine = n !== textArrLen - 1,\n          spacesNumber,\n          oneWord,\n          lineWidth;\n      context.save();\n\n      if (align === RIGHT) {\n        lineTranslateX += totalWidth - width - padding * 2;\n      } else if (align === CENTER) {\n        lineTranslateX += (totalWidth - width - padding * 2) / 2;\n      }\n\n      if (shouldUnderline) {\n        context.save();\n        context.beginPath();\n        context.moveTo(lineTranslateX, translateY + lineTranslateY + Math.round(fontSize / 2));\n        spacesNumber = text.split(' ').length - 1;\n        oneWord = spacesNumber === 0;\n        lineWidth = align === JUSTIFY && lastLine && !oneWord ? totalWidth - padding * 2 : width;\n        context.lineTo(lineTranslateX + Math.round(lineWidth), translateY + lineTranslateY + Math.round(fontSize / 2));\n        context.lineWidth = fontSize / 15;\n        context.strokeStyle = fill;\n        context.stroke();\n        context.restore();\n      }\n\n      if (shouldLineThrough) {\n        context.save();\n        context.beginPath();\n        context.moveTo(lineTranslateX, translateY + lineTranslateY);\n        spacesNumber = text.split(' ').length - 1;\n        oneWord = spacesNumber === 0;\n        lineWidth = align === JUSTIFY && lastLine && !oneWord ? totalWidth - padding * 2 : width;\n        context.lineTo(lineTranslateX + Math.round(lineWidth), translateY + lineTranslateY);\n        context.lineWidth = fontSize / 15;\n        context.strokeStyle = fill;\n        context.stroke();\n        context.restore();\n      }\n\n      if (letterSpacing !== 0 || align === JUSTIFY) {\n        spacesNumber = text.split(' ').length - 1;\n\n        for (var li = 0; li < text.length; li++) {\n          var letter = text[li];\n\n          if (letter === ' ' && n !== textArrLen - 1 && align === JUSTIFY) {\n            lineTranslateX += Math.floor((totalWidth - padding * 2 - width) / spacesNumber);\n          }\n\n          this._partialTextX = lineTranslateX;\n          this._partialTextY = translateY + lineTranslateY;\n          this._partialText = letter;\n          context.fillStrokeShape(this);\n          lineTranslateX += Math.round(this.measureSize(letter).width) + letterSpacing;\n        }\n      } else {\n        this._partialTextX = lineTranslateX;\n        this._partialTextY = translateY + lineTranslateY;\n        this._partialText = text;\n        context.fillStrokeShape(this);\n      }\n\n      context.restore();\n\n      if (textArrLen > 1) {\n        translateY += lineHeightPx;\n      }\n    }\n  };\n\n  Text.prototype._hitFunc = function (context) {\n    var width = this.getWidth(),\n        height = this.getHeight();\n    context.beginPath();\n    context.rect(0, 0, width, height);\n    context.closePath();\n    context.fillStrokeShape(this);\n  };\n\n  Text.prototype.setText = function (text) {\n    var str = Util_1.Util._isString(text) ? text : (text || '').toString();\n\n    this._setAttr(TEXT, str);\n\n    return this;\n  };\n\n  Text.prototype.getWidth = function () {\n    var isAuto = this.attrs.width === AUTO || this.attrs.width === undefined;\n    return isAuto ? this.getTextWidth() + this.padding() * 2 : this.attrs.width;\n  };\n\n  Text.prototype.getHeight = function () {\n    var isAuto = this.attrs.height === AUTO || this.attrs.height === undefined;\n    return isAuto ? this.fontSize() * this.textArr.length * this.lineHeight() + this.padding() * 2 : this.attrs.height;\n  };\n\n  Text.prototype.getTextWidth = function () {\n    return this.textWidth;\n  };\n\n  Text.prototype.getTextHeight = function () {\n    Util_1.Util.warn('text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height.');\n    return this.textHeight;\n  };\n\n  Text.prototype.measureSize = function (text) {\n    var _context = getDummyContext(),\n        fontSize = this.fontSize(),\n        metrics;\n\n    _context.save();\n\n    _context.font = this._getContextFont();\n    metrics = _context.measureText(text);\n\n    _context.restore();\n\n    return {\n      width: metrics.width,\n      height: fontSize\n    };\n  };\n\n  Text.prototype._getContextFont = function () {\n    if (Global_1.Konva.UA.isIE) {\n      return this.fontStyle() + SPACE + this.fontSize() + PX_SPACE + this.fontFamily();\n    }\n\n    return this.fontStyle() + SPACE + this.fontVariant() + SPACE + this.fontSize() + PX_SPACE + this.fontFamily();\n  };\n\n  Text.prototype._addTextLine = function (line) {\n    if (this.align() === JUSTIFY) {\n      line = line.trim();\n    }\n\n    var width = this._getTextWidth(line);\n\n    return this.textArr.push({\n      text: line,\n      width: width\n    });\n  };\n\n  Text.prototype._getTextWidth = function (text) {\n    var letterSpacing = this.letterSpacing();\n    var length = text.length;\n    return getDummyContext().measureText(text).width + (length ? letterSpacing * (length - 1) : 0);\n  };\n\n  Text.prototype._setTextData = function () {\n    var lines = this.text().split('\\n'),\n        fontSize = +this.fontSize(),\n        textWidth = 0,\n        lineHeightPx = this.lineHeight() * fontSize,\n        width = this.attrs.width,\n        height = this.attrs.height,\n        fixedWidth = width !== AUTO && width !== undefined,\n        fixedHeight = height !== AUTO && height !== undefined,\n        padding = this.padding(),\n        maxWidth = width - padding * 2,\n        maxHeightPx = height - padding * 2,\n        currentHeightPx = 0,\n        wrap = this.wrap(),\n        shouldWrap = wrap !== NONE,\n        wrapAtWord = wrap !== CHAR && shouldWrap,\n        shouldAddEllipsis = this.ellipsis() && !shouldWrap;\n    this.textArr = [];\n    getDummyContext().font = this._getContextFont();\n    var additionalWidth = shouldAddEllipsis ? this._getTextWidth(ELLIPSIS) : 0;\n\n    for (var i = 0, max = lines.length; i < max; ++i) {\n      var line = lines[i];\n\n      var lineWidth = this._getTextWidth(line);\n\n      if (fixedWidth && lineWidth > maxWidth) {\n        while (line.length > 0) {\n          var low = 0,\n              high = line.length,\n              match = '',\n              matchWidth = 0;\n\n          while (low < high) {\n            var mid = low + high >>> 1,\n                substr = line.slice(0, mid + 1),\n                substrWidth = this._getTextWidth(substr) + additionalWidth;\n\n            if (substrWidth <= maxWidth) {\n              low = mid + 1;\n              match = substr + (shouldAddEllipsis ? ELLIPSIS : '');\n              matchWidth = substrWidth;\n            } else {\n              high = mid;\n            }\n          }\n\n          if (match) {\n            if (wrapAtWord) {\n              var wrapIndex;\n              var nextChar = line[match.length];\n              var nextIsSpaceOrDash = nextChar === SPACE || nextChar === DASH;\n\n              if (nextIsSpaceOrDash && matchWidth <= maxWidth) {\n                wrapIndex = match.length;\n              } else {\n                wrapIndex = Math.max(match.lastIndexOf(SPACE), match.lastIndexOf(DASH)) + 1;\n              }\n\n              if (wrapIndex > 0) {\n                low = wrapIndex;\n                match = match.slice(0, low);\n                matchWidth = this._getTextWidth(match);\n              }\n            }\n\n            match = match.trimRight();\n\n            this._addTextLine(match);\n\n            textWidth = Math.max(textWidth, matchWidth);\n            currentHeightPx += lineHeightPx;\n\n            if (!shouldWrap || fixedHeight && currentHeightPx + lineHeightPx > maxHeightPx) {\n              break;\n            }\n\n            line = line.slice(low);\n            line = line.trimLeft();\n\n            if (line.length > 0) {\n              lineWidth = this._getTextWidth(line);\n\n              if (lineWidth <= maxWidth) {\n                this._addTextLine(line);\n\n                currentHeightPx += lineHeightPx;\n                textWidth = Math.max(textWidth, lineWidth);\n                break;\n              }\n            }\n          } else {\n            break;\n          }\n        }\n      } else {\n        this._addTextLine(line);\n\n        currentHeightPx += lineHeightPx;\n        textWidth = Math.max(textWidth, lineWidth);\n      }\n\n      if (fixedHeight && currentHeightPx + lineHeightPx > maxHeightPx) {\n        break;\n      }\n    }\n\n    this.textHeight = fontSize;\n    this.textWidth = textWidth;\n  };\n\n  Text.prototype.getStrokeScaleEnabled = function () {\n    return true;\n  };\n\n  return Text;\n}(Shape_1.Shape);\n\nexports.Text = Text;\nText.prototype._fillFunc = _fillFunc;\nText.prototype._strokeFunc = _strokeFunc;\nText.prototype.className = TEXT_UPPER;\nText.prototype._attrsAffectingSize = ['text', 'fontSize', 'padding', 'wrap', 'lineHeight'];\n\nGlobal_2._registerNode(Text);\n\nFactory_1.Factory.overWriteSetter(Text, 'width', Validators_1.getNumberOrAutoValidator());\nFactory_1.Factory.overWriteSetter(Text, 'height', Validators_1.getNumberOrAutoValidator());\nFactory_1.Factory.addGetterSetter(Text, 'fontFamily', 'Arial');\nFactory_1.Factory.addGetterSetter(Text, 'fontSize', 12, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Text, 'fontStyle', NORMAL);\nFactory_1.Factory.addGetterSetter(Text, 'fontVariant', NORMAL);\nFactory_1.Factory.addGetterSetter(Text, 'padding', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Text, 'align', LEFT);\nFactory_1.Factory.addGetterSetter(Text, 'verticalAlign', TOP);\nFactory_1.Factory.addGetterSetter(Text, 'lineHeight', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Text, 'wrap', WORD);\nFactory_1.Factory.addGetterSetter(Text, 'ellipsis', false);\nFactory_1.Factory.addGetterSetter(Text, 'letterSpacing', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Text, 'text', '', Validators_1.getStringValidator());\nFactory_1.Factory.addGetterSetter(Text, 'textDecoration', '');\nUtil_1.Collection.mapMethods(Text);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Path_1 = require(\"./Path\");\n\nvar Text_1 = require(\"./Text\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_1 = require(\"../Global\");\n\nvar EMPTY_STRING = '',\n    NORMAL = 'normal';\n\nfunction _fillFunc(context) {\n  context.fillText(this.partialText, 0, 0);\n}\n\nfunction _strokeFunc(context) {\n  context.strokeText(this.partialText, 0, 0);\n}\n\nvar TextPath = function (_super) {\n  __extends(TextPath, _super);\n\n  function TextPath(config) {\n    var _this = _super.call(this, config) || this;\n\n    _this.dummyCanvas = Util_1.Util.createCanvasElement();\n    _this.dataArray = [];\n    _this.dataArray = Path_1.Path.parsePathData(_this.attrs.data);\n\n    _this.on('dataChange.konva', function () {\n      this.dataArray = Path_1.Path.parsePathData(this.attrs.data);\n\n      this._setTextData();\n    });\n\n    _this.on('textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva', _this._setTextData);\n\n    if (config && config['getKerning']) {\n      Util_1.Util.warn('getKerning TextPath API is deprecated. Please use \"kerningFunc\" instead.');\n\n      _this.kerningFunc(config['getKerning']);\n    }\n\n    _this._setTextData();\n\n    return _this;\n  }\n\n  TextPath.prototype._sceneFunc = function (context) {\n    context.setAttr('font', this._getContextFont());\n    context.setAttr('textBaseline', this.textBaseline());\n    context.setAttr('textAlign', 'left');\n    context.save();\n    var textDecoration = this.textDecoration();\n    var fill = this.fill();\n    var fontSize = this.fontSize();\n    var glyphInfo = this.glyphInfo;\n\n    if (textDecoration === 'underline') {\n      context.beginPath();\n    }\n\n    for (var i = 0; i < glyphInfo.length; i++) {\n      context.save();\n      var p0 = glyphInfo[i].p0;\n      context.translate(p0.x, p0.y);\n      context.rotate(glyphInfo[i].rotation);\n      this.partialText = glyphInfo[i].text;\n      context.fillStrokeShape(this);\n\n      if (textDecoration === 'underline') {\n        if (i === 0) {\n          context.moveTo(0, fontSize / 2 + 1);\n        }\n\n        context.lineTo(fontSize, fontSize / 2 + 1);\n      }\n\n      context.restore();\n    }\n\n    if (textDecoration === 'underline') {\n      context.strokeStyle = fill;\n      context.lineWidth = fontSize / 20;\n      context.stroke();\n    }\n\n    context.restore();\n  };\n\n  TextPath.prototype._hitFunc = function (context) {\n    context.beginPath();\n    var glyphInfo = this.glyphInfo;\n\n    if (glyphInfo.length >= 1) {\n      var p0 = glyphInfo[0].p0;\n      context.moveTo(p0.x, p0.y);\n    }\n\n    for (var i = 0; i < glyphInfo.length; i++) {\n      var p1 = glyphInfo[i].p1;\n      context.lineTo(p1.x, p1.y);\n    }\n\n    context.setAttr('lineWidth', this.fontSize());\n    context.setAttr('strokeStyle', this.colorKey);\n    context.stroke();\n  };\n\n  TextPath.prototype.getTextWidth = function () {\n    return this.textWidth;\n  };\n\n  TextPath.prototype.getTextHeight = function () {\n    Util_1.Util.warn('text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height.');\n    return this.textHeight;\n  };\n\n  TextPath.prototype.setText = function (text) {\n    return Text_1.Text.prototype.setText.call(this, text);\n  };\n\n  TextPath.prototype._getContextFont = function () {\n    return Text_1.Text.prototype._getContextFont.call(this);\n  };\n\n  TextPath.prototype._getTextSize = function (text) {\n    var dummyCanvas = this.dummyCanvas;\n\n    var _context = dummyCanvas.getContext('2d');\n\n    _context.save();\n\n    _context.font = this._getContextFont();\n\n    var metrics = _context.measureText(text);\n\n    _context.restore();\n\n    return {\n      width: metrics.width,\n      height: parseInt(this.attrs.fontSize, 10)\n    };\n  };\n\n  TextPath.prototype._setTextData = function () {\n    var that = this;\n\n    var size = this._getTextSize(this.attrs.text);\n\n    var letterSpacing = this.letterSpacing();\n    var align = this.align();\n    var kerningFunc = this.kerningFunc();\n    this.textWidth = size.width;\n    this.textHeight = size.height;\n    var textFullWidth = Math.max(this.textWidth + ((this.attrs.text || '').length - 1) * letterSpacing, 0);\n    this.glyphInfo = [];\n    var fullPathWidth = 0;\n\n    for (var l = 0; l < that.dataArray.length; l++) {\n      if (that.dataArray[l].pathLength > 0) {\n        fullPathWidth += that.dataArray[l].pathLength;\n      }\n    }\n\n    var offset = 0;\n\n    if (align === 'center') {\n      offset = Math.max(0, fullPathWidth / 2 - textFullWidth / 2);\n    }\n\n    if (align === 'right') {\n      offset = Math.max(0, fullPathWidth - textFullWidth);\n    }\n\n    var charArr = this.text().split('');\n    var spacesNumber = this.text().split(' ').length - 1;\n    var p0, p1, pathCmd;\n    var pIndex = -1;\n    var currentT = 0;\n\n    var getNextPathSegment = function getNextPathSegment() {\n      currentT = 0;\n      var pathData = that.dataArray;\n\n      for (var j = pIndex + 1; j < pathData.length; j++) {\n        if (pathData[j].pathLength > 0) {\n          pIndex = j;\n          return pathData[j];\n        } else if (pathData[j].command === 'M') {\n          p0 = {\n            x: pathData[j].points[0],\n            y: pathData[j].points[1]\n          };\n        }\n      }\n\n      return {};\n    };\n\n    var findSegmentToFitCharacter = function findSegmentToFitCharacter(c) {\n      var glyphWidth = that._getTextSize(c).width + letterSpacing;\n\n      if (c === ' ' && align === 'justify') {\n        glyphWidth += (fullPathWidth - textFullWidth) / spacesNumber;\n      }\n\n      var currLen = 0;\n      var attempts = 0;\n      p1 = undefined;\n\n      while (Math.abs(glyphWidth - currLen) / glyphWidth > 0.01 && attempts < 25) {\n        attempts++;\n        var cumulativePathLength = currLen;\n\n        while (pathCmd === undefined) {\n          pathCmd = getNextPathSegment();\n\n          if (pathCmd && cumulativePathLength + pathCmd.pathLength < glyphWidth) {\n            cumulativePathLength += pathCmd.pathLength;\n            pathCmd = undefined;\n          }\n        }\n\n        if (pathCmd === {} || p0 === undefined) {\n          return undefined;\n        }\n\n        var needNewSegment = false;\n\n        switch (pathCmd.command) {\n          case 'L':\n            if (Path_1.Path.getLineLength(p0.x, p0.y, pathCmd.points[0], pathCmd.points[1]) > glyphWidth) {\n              p1 = Path_1.Path.getPointOnLine(glyphWidth, p0.x, p0.y, pathCmd.points[0], pathCmd.points[1], p0.x, p0.y);\n            } else {\n              pathCmd = undefined;\n            }\n\n            break;\n\n          case 'A':\n            var start = pathCmd.points[4];\n            var dTheta = pathCmd.points[5];\n            var end = pathCmd.points[4] + dTheta;\n\n            if (currentT === 0) {\n              currentT = start + 0.00000001;\n            } else if (glyphWidth > currLen) {\n              currentT += Math.PI / 180.0 * dTheta / Math.abs(dTheta);\n            } else {\n              currentT -= Math.PI / 360.0 * dTheta / Math.abs(dTheta);\n            }\n\n            if (dTheta < 0 && currentT < end || dTheta >= 0 && currentT > end) {\n              currentT = end;\n              needNewSegment = true;\n            }\n\n            p1 = Path_1.Path.getPointOnEllipticalArc(pathCmd.points[0], pathCmd.points[1], pathCmd.points[2], pathCmd.points[3], currentT, pathCmd.points[6]);\n            break;\n\n          case 'C':\n            if (currentT === 0) {\n              if (glyphWidth > pathCmd.pathLength) {\n                currentT = 0.00000001;\n              } else {\n                currentT = glyphWidth / pathCmd.pathLength;\n              }\n            } else if (glyphWidth > currLen) {\n              currentT += (glyphWidth - currLen) / pathCmd.pathLength;\n            } else {\n              currentT -= (currLen - glyphWidth) / pathCmd.pathLength;\n            }\n\n            if (currentT > 1.0) {\n              currentT = 1.0;\n              needNewSegment = true;\n            }\n\n            p1 = Path_1.Path.getPointOnCubicBezier(currentT, pathCmd.start.x, pathCmd.start.y, pathCmd.points[0], pathCmd.points[1], pathCmd.points[2], pathCmd.points[3], pathCmd.points[4], pathCmd.points[5]);\n            break;\n\n          case 'Q':\n            if (currentT === 0) {\n              currentT = glyphWidth / pathCmd.pathLength;\n            } else if (glyphWidth > currLen) {\n              currentT += (glyphWidth - currLen) / pathCmd.pathLength;\n            } else {\n              currentT -= (currLen - glyphWidth) / pathCmd.pathLength;\n            }\n\n            if (currentT > 1.0) {\n              currentT = 1.0;\n              needNewSegment = true;\n            }\n\n            p1 = Path_1.Path.getPointOnQuadraticBezier(currentT, pathCmd.start.x, pathCmd.start.y, pathCmd.points[0], pathCmd.points[1], pathCmd.points[2], pathCmd.points[3]);\n            break;\n        }\n\n        if (p1 !== undefined) {\n          currLen = Path_1.Path.getLineLength(p0.x, p0.y, p1.x, p1.y);\n        }\n\n        if (needNewSegment) {\n          needNewSegment = false;\n          pathCmd = undefined;\n        }\n      }\n    };\n\n    var testChar = 'C';\n    var glyphWidth = that._getTextSize(testChar).width + letterSpacing;\n\n    for (var k = 0; k < offset / glyphWidth; k++) {\n      findSegmentToFitCharacter(testChar);\n\n      if (p0 === undefined || p1 === undefined) {\n        break;\n      }\n\n      p0 = p1;\n    }\n\n    for (var i = 0; i < charArr.length; i++) {\n      findSegmentToFitCharacter(charArr[i]);\n\n      if (p0 === undefined || p1 === undefined) {\n        break;\n      }\n\n      var width = Path_1.Path.getLineLength(p0.x, p0.y, p1.x, p1.y);\n      var kern = 0;\n\n      if (kerningFunc) {\n        try {\n          kern = kerningFunc(charArr[i - 1], charArr[i]) * this.fontSize();\n        } catch (e) {\n          kern = 0;\n        }\n      }\n\n      p0.x += kern;\n      p1.x += kern;\n      this.textWidth += kern;\n      var midpoint = Path_1.Path.getPointOnLine(kern + width / 2.0, p0.x, p0.y, p1.x, p1.y);\n      var rotation = Math.atan2(p1.y - p0.y, p1.x - p0.x);\n      this.glyphInfo.push({\n        transposeX: midpoint.x,\n        transposeY: midpoint.y,\n        text: charArr[i],\n        rotation: rotation,\n        p0: p0,\n        p1: p1\n      });\n      p0 = p1;\n    }\n  };\n\n  TextPath.prototype.getSelfRect = function () {\n    var points = [];\n    this.glyphInfo.forEach(function (info) {\n      points.push(info.p0.x);\n      points.push(info.p0.y);\n      points.push(info.p1.x);\n      points.push(info.p1.y);\n    });\n    var minX = points[0];\n    var maxX = points[0];\n    var minY = points[0];\n    var maxY = points[0];\n    var x, y;\n\n    for (var i = 0; i < points.length / 2; i++) {\n      x = points[i * 2];\n      y = points[i * 2 + 1];\n      minX = Math.min(minX, x);\n      maxX = Math.max(maxX, x);\n      minY = Math.min(minY, y);\n      maxY = Math.max(maxY, y);\n    }\n\n    var fontSize = this.fontSize();\n    return {\n      x: Math.round(minX) - fontSize / 2,\n      y: Math.round(minY) - fontSize / 2,\n      width: Math.round(maxX - minX) + fontSize,\n      height: Math.round(maxY - minY) + fontSize\n    };\n  };\n\n  return TextPath;\n}(Shape_1.Shape);\n\nexports.TextPath = TextPath;\nTextPath.prototype._fillFunc = _fillFunc;\nTextPath.prototype._strokeFunc = _strokeFunc;\nTextPath.prototype._fillFuncHit = _fillFunc;\nTextPath.prototype._strokeFuncHit = _strokeFunc;\nTextPath.prototype.className = 'TextPath';\nTextPath.prototype._attrsAffectingSize = ['text', 'fontSize', 'data'];\n\nGlobal_1._registerNode(TextPath);\n\nFactory_1.Factory.addGetterSetter(TextPath, 'data');\nFactory_1.Factory.addGetterSetter(TextPath, 'fontFamily', 'Arial');\nFactory_1.Factory.addGetterSetter(TextPath, 'fontSize', 12, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(TextPath, 'fontStyle', NORMAL);\nFactory_1.Factory.addGetterSetter(TextPath, 'align', 'left');\nFactory_1.Factory.addGetterSetter(TextPath, 'letterSpacing', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(TextPath, 'textBaseline', 'middle');\nFactory_1.Factory.addGetterSetter(TextPath, 'fontVariant', NORMAL);\nFactory_1.Factory.addGetterSetter(TextPath, 'text', EMPTY_STRING);\nFactory_1.Factory.addGetterSetter(TextPath, 'textDecoration', null);\nFactory_1.Factory.addGetterSetter(TextPath, 'kerningFunc', null);\nUtil_1.Collection.mapMethods(TextPath);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Node_1 = require(\"../Node\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Rect_1 = require(\"./Rect\");\n\nvar Group_1 = require(\"../Group\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_2 = require(\"../Global\");\n\nvar ATTR_CHANGE_LIST = ['resizeEnabledChange', 'rotateAnchorOffsetChange', 'rotateEnabledChange', 'enabledAnchorsChange', 'anchorSizeChange', 'borderEnabledChange', 'borderStrokeChange', 'borderStrokeWidthChange', 'borderDashChange', 'anchorStrokeChange', 'anchorStrokeWidthChange', 'anchorFillChange', 'anchorCornerRadiusChange', 'ignoreStrokeChange'].join(' ');\nvar NODE_RECT = 'nodeRect';\nvar TRANSFORM_CHANGE_STR = ['widthChange.tr', 'heightChange.tr', 'scaleXChange.tr', 'scaleYChange.tr', 'skewXChange.tr', 'skewYChange.tr', 'rotationChange.tr', 'offsetXChange.tr', 'offsetYChange.tr', 'transformsEnabledChange.tr', 'strokeWidthChange.tr'].join(' ');\nvar ANGLES = {\n  'top-left': -45,\n  'top-center': 0,\n  'top-right': 45,\n  'middle-right': -90,\n  'middle-left': 90,\n  'bottom-left': -135,\n  'bottom-center': 180,\n  'bottom-right': 135\n};\n\nfunction getCursor(anchorName, rad, isMirrored) {\n  if (anchorName === 'rotater') {\n    return 'crosshair';\n  }\n\n  rad += Util_1.Util._degToRad(ANGLES[anchorName] || 0);\n\n  if (isMirrored) {\n    rad *= -1;\n  }\n\n  var angle = (Util_1.Util._radToDeg(rad) % 360 + 360) % 360;\n\n  if (Util_1.Util._inRange(angle, 315 + 22.5, 360) || Util_1.Util._inRange(angle, 0, 22.5)) {\n    return 'ns-resize';\n  } else if (Util_1.Util._inRange(angle, 45 - 22.5, 45 + 22.5)) {\n    return 'nesw-resize';\n  } else if (Util_1.Util._inRange(angle, 90 - 22.5, 90 + 22.5)) {\n    return 'ew-resize';\n  } else if (Util_1.Util._inRange(angle, 135 - 22.5, 135 + 22.5)) {\n    return 'nwse-resize';\n  } else if (Util_1.Util._inRange(angle, 180 - 22.5, 180 + 22.5)) {\n    return 'ns-resize';\n  } else if (Util_1.Util._inRange(angle, 225 - 22.5, 225 + 22.5)) {\n    return 'nesw-resize';\n  } else if (Util_1.Util._inRange(angle, 270 - 22.5, 270 + 22.5)) {\n    return 'ew-resize';\n  } else if (Util_1.Util._inRange(angle, 315 - 22.5, 315 + 22.5)) {\n    return 'nwse-resize';\n  } else {\n    Util_1.Util.error('Transformer has unknown angle for cursor detection: ' + angle);\n    return 'pointer';\n  }\n}\n\nvar ANCHORS_NAMES = ['top-left', 'top-center', 'top-right', 'middle-right', 'middle-left', 'bottom-left', 'bottom-center', 'bottom-right'];\nvar MAX_SAFE_INTEGER = 100000000;\n\nvar Transformer = function (_super) {\n  __extends(Transformer, _super);\n\n  function Transformer(config) {\n    var _this = _super.call(this, config) || this;\n\n    _this._transforming = false;\n\n    _this._createElements();\n\n    _this._handleMouseMove = _this._handleMouseMove.bind(_this);\n    _this._handleMouseUp = _this._handleMouseUp.bind(_this);\n    _this.update = _this.update.bind(_this);\n\n    _this.on(ATTR_CHANGE_LIST, _this.update);\n\n    if (_this.getNode()) {\n      _this.update();\n    }\n\n    return _this;\n  }\n\n  Transformer.prototype.attachTo = function (node) {\n    this.setNode(node);\n    return this;\n  };\n\n  Transformer.prototype.setNode = function (node) {\n    var _this = this;\n\n    if (this._node) {\n      this.detach();\n    }\n\n    this._node = node;\n\n    this._resetTransformCache();\n\n    var additionalEvents = node._attrsAffectingSize.map(function (prop) {\n      return prop + 'Change.tr';\n    }).join(' ');\n\n    var onChange = function onChange() {\n      _this._resetTransformCache();\n\n      if (!_this._transforming) {\n        _this.update();\n      }\n    };\n\n    node.on(additionalEvents, onChange);\n    node.on(TRANSFORM_CHANGE_STR, onChange);\n    node.on('xChange.tr yChange.tr', function () {\n      return _this._resetTransformCache();\n    });\n    var elementsCreated = !!this.findOne('.top-left');\n\n    if (elementsCreated) {\n      this.update();\n    }\n\n    return this;\n  };\n\n  Transformer.prototype.getNode = function () {\n    return this._node;\n  };\n\n  Transformer.prototype.detach = function () {\n    if (this.getNode()) {\n      this.getNode().off('.tr');\n      this._node = undefined;\n    }\n\n    this._resetTransformCache();\n  };\n\n  Transformer.prototype._resetTransformCache = function () {\n    this._clearCache(NODE_RECT);\n\n    this._clearCache('transform');\n\n    this._clearSelfAndDescendantCache('absoluteTransform');\n  };\n\n  Transformer.prototype._getNodeRect = function () {\n    return this._getCache(NODE_RECT, this.__getNodeRect);\n  };\n\n  Transformer.prototype.__getNodeRect = function () {\n    var node = this.getNode();\n\n    if (!node) {\n      return {\n        x: -MAX_SAFE_INTEGER,\n        y: -MAX_SAFE_INTEGER,\n        width: 0,\n        height: 0,\n        rotation: 0\n      };\n    }\n\n    if (node.parent && this.parent && node.parent !== this.parent) {\n      Util_1.Util.warn('Transformer and attached node have different parents. Konva does not support such case right now. Please move Transformer to the parent of attaching node.');\n    }\n\n    var rect = node.getClientRect({\n      skipTransform: true,\n      skipShadow: true,\n      skipStroke: this.ignoreStroke()\n    });\n    var rotation = Global_1.Konva.getAngle(node.rotation());\n    var dx = rect.x * node.scaleX() - node.offsetX() * node.scaleX();\n    var dy = rect.y * node.scaleY() - node.offsetY() * node.scaleY();\n    return {\n      x: node.x() + dx * Math.cos(rotation) + dy * Math.sin(-rotation),\n      y: node.y() + dy * Math.cos(rotation) + dx * Math.sin(rotation),\n      width: rect.width * node.scaleX(),\n      height: rect.height * node.scaleY(),\n      rotation: node.rotation()\n    };\n  };\n\n  Transformer.prototype.getX = function () {\n    return this._getNodeRect().x;\n  };\n\n  Transformer.prototype.getY = function () {\n    return this._getNodeRect().y;\n  };\n\n  Transformer.prototype.getRotation = function () {\n    return this._getNodeRect().rotation;\n  };\n\n  Transformer.prototype.getWidth = function () {\n    return this._getNodeRect().width;\n  };\n\n  Transformer.prototype.getHeight = function () {\n    return this._getNodeRect().height;\n  };\n\n  Transformer.prototype._createElements = function () {\n    this._createBack();\n\n    ANCHORS_NAMES.forEach(function (name) {\n      this._createAnchor(name);\n    }.bind(this));\n\n    this._createAnchor('rotater');\n  };\n\n  Transformer.prototype._createAnchor = function (name) {\n    var _this = this;\n\n    var anchor = new Rect_1.Rect({\n      stroke: 'rgb(0, 161, 255)',\n      fill: 'white',\n      strokeWidth: 1,\n      name: name + ' _anchor',\n      dragDistance: 0,\n      draggable: true\n    });\n    var self = this;\n    anchor.on('mousedown touchstart', function (e) {\n      self._handleMouseDown(e);\n    });\n    anchor.on('dragstart', function (e) {\n      e.cancelBubble = true;\n    });\n    anchor.on('dragmove', function (e) {\n      e.cancelBubble = true;\n    });\n    anchor.on('dragend', function (e) {\n      e.cancelBubble = true;\n    });\n    anchor.on('mouseenter', function () {\n      var rad = Global_1.Konva.getAngle(_this.rotation());\n\n      var scale = _this.getNode().getAbsoluteScale();\n\n      var isMirrored = scale.y * scale.x < 0;\n      var cursor = getCursor(name, rad, isMirrored);\n      anchor.getStage().content.style.cursor = cursor;\n      _this._cursorChange = true;\n    });\n    anchor.on('mouseout', function () {\n      if (!anchor.getStage() || !anchor.getParent()) {\n        return;\n      }\n\n      anchor.getStage().content.style.cursor = '';\n      _this._cursorChange = false;\n    });\n    this.add(anchor);\n  };\n\n  Transformer.prototype._createBack = function () {\n    var back = new Shape_1.Shape({\n      name: 'back',\n      width: 0,\n      height: 0,\n      listening: false,\n      sceneFunc: function sceneFunc(ctx) {\n        var tr = this.getParent();\n        var padding = tr.padding();\n        ctx.beginPath();\n        ctx.rect(-padding, -padding, this.width() + padding * 2, this.height() + padding * 2);\n        ctx.moveTo(this.width() / 2, -padding);\n\n        if (tr.rotateEnabled()) {\n          ctx.lineTo(this.width() / 2, -tr.rotateAnchorOffset() * Util_1.Util._sign(this.height()));\n        }\n\n        ctx.fillStrokeShape(this);\n      }\n    });\n    this.add(back);\n  };\n\n  Transformer.prototype._handleMouseDown = function (e) {\n    this.movingResizer = e.target.name().split(' ')[0];\n\n    var attrs = this._getNodeRect();\n\n    var width = attrs.width;\n    var height = attrs.height;\n    var hypotenuse = Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2));\n    this.sin = Math.abs(height / hypotenuse);\n    this.cos = Math.abs(width / hypotenuse);\n    window.addEventListener('mousemove', this._handleMouseMove);\n    window.addEventListener('touchmove', this._handleMouseMove);\n    window.addEventListener('mouseup', this._handleMouseUp, true);\n    window.addEventListener('touchend', this._handleMouseUp, true);\n    this._transforming = true;\n\n    this._fire('transformstart', {\n      evt: e\n    });\n\n    this.getNode()._fire('transformstart', {\n      evt: e\n    });\n  };\n\n  Transformer.prototype._handleMouseMove = function (e) {\n    var x, y, newHypotenuse;\n    var resizerNode = this.findOne('.' + this.movingResizer);\n    var stage = resizerNode.getStage();\n    var box = stage.getContent().getBoundingClientRect();\n    var zeroPoint = {\n      x: box.left,\n      y: box.top\n    };\n    var pointerPos = {\n      left: e.clientX !== undefined ? e.clientX : e.touches[0].clientX,\n      top: e.clientX !== undefined ? e.clientY : e.touches[0].clientY\n    };\n    var newAbsPos = {\n      x: pointerPos.left - zeroPoint.x,\n      y: pointerPos.top - zeroPoint.y\n    };\n    resizerNode.setAbsolutePosition(newAbsPos);\n    var keepProportion = this.keepRatio() || e.shiftKey;\n\n    if (this.movingResizer === 'top-left') {\n      if (keepProportion) {\n        newHypotenuse = Math.sqrt(Math.pow(this.findOne('.bottom-right').x() - resizerNode.x(), 2) + Math.pow(this.findOne('.bottom-right').y() - resizerNode.y(), 2));\n        var reverse = this.findOne('.top-left').x() > this.findOne('.bottom-right').x() ? -1 : 1;\n        x = newHypotenuse * this.cos * reverse;\n        y = newHypotenuse * this.sin * reverse;\n        this.findOne('.top-left').x(this.findOne('.bottom-right').x() - x);\n        this.findOne('.top-left').y(this.findOne('.bottom-right').y() - y);\n      }\n    } else if (this.movingResizer === 'top-center') {\n      this.findOne('.top-left').y(resizerNode.y());\n    } else if (this.movingResizer === 'top-right') {\n      if (keepProportion) {\n        newHypotenuse = Math.sqrt(Math.pow(this.findOne('.bottom-left').x() - resizerNode.x(), 2) + Math.pow(this.findOne('.bottom-left').y() - resizerNode.y(), 2));\n        var reverse = this.findOne('.top-right').x() < this.findOne('.top-left').x() ? -1 : 1;\n        x = newHypotenuse * this.cos * reverse;\n        y = newHypotenuse * this.sin * reverse;\n        this.findOne('.top-right').x(x);\n        this.findOne('.top-right').y(this.findOne('.bottom-left').y() - y);\n      }\n\n      var pos = resizerNode.position();\n      this.findOne('.top-left').y(pos.y);\n      this.findOne('.bottom-right').x(pos.x);\n    } else if (this.movingResizer === 'middle-left') {\n      this.findOne('.top-left').x(resizerNode.x());\n    } else if (this.movingResizer === 'middle-right') {\n      this.findOne('.bottom-right').x(resizerNode.x());\n    } else if (this.movingResizer === 'bottom-left') {\n      if (keepProportion) {\n        newHypotenuse = Math.sqrt(Math.pow(this.findOne('.top-right').x() - resizerNode.x(), 2) + Math.pow(this.findOne('.top-right').y() - resizerNode.y(), 2));\n        var reverse = this.findOne('.top-right').x() < this.findOne('.bottom-left').x() ? -1 : 1;\n        x = newHypotenuse * this.cos * reverse;\n        y = newHypotenuse * this.sin * reverse;\n        this.findOne('.bottom-left').x(this.findOne('.top-right').x() - x);\n        this.findOne('.bottom-left').y(y);\n      }\n\n      pos = resizerNode.position();\n      this.findOne('.top-left').x(pos.x);\n      this.findOne('.bottom-right').y(pos.y);\n    } else if (this.movingResizer === 'bottom-center') {\n      this.findOne('.bottom-right').y(resizerNode.y());\n    } else if (this.movingResizer === 'bottom-right') {\n      if (keepProportion) {\n        newHypotenuse = Math.sqrt(Math.pow(this.findOne('.bottom-right').x(), 2) + Math.pow(this.findOne('.bottom-right').y(), 2));\n        var reverse = this.findOne('.top-left').x() > this.findOne('.bottom-right').x() ? -1 : 1;\n        x = newHypotenuse * this.cos * reverse;\n        y = newHypotenuse * this.sin * reverse;\n        this.findOne('.bottom-right').x(x);\n        this.findOne('.bottom-right').y(y);\n      }\n    } else if (this.movingResizer === 'rotater') {\n      var padding = this.padding();\n\n      var attrs = this._getNodeRect();\n\n      x = resizerNode.x() - attrs.width / 2;\n      y = -resizerNode.y() + attrs.height / 2;\n      var dAlpha = Math.atan2(-y, x) + Math.PI / 2;\n\n      if (attrs.height < 0) {\n        dAlpha -= Math.PI;\n      }\n\n      var rot = Global_1.Konva.getAngle(this.rotation());\n\n      var newRotation = Util_1.Util._radToDeg(rot) + Util_1.Util._radToDeg(dAlpha);\n\n      var alpha = Global_1.Konva.getAngle(this.getNode().rotation());\n\n      var newAlpha = Util_1.Util._degToRad(newRotation);\n\n      var snaps = this.rotationSnaps();\n      var offset = 0.1;\n\n      for (var i = 0; i < snaps.length; i++) {\n        var angle = Global_1.Konva.getAngle(snaps[i]);\n        var dif = Math.abs(angle - Util_1.Util._degToRad(newRotation)) % (Math.PI * 2);\n\n        if (dif < offset) {\n          newRotation = Util_1.Util._radToDeg(angle);\n          newAlpha = Util_1.Util._degToRad(newRotation);\n        }\n      }\n\n      var dx = padding;\n      var dy = padding;\n\n      this._fitNodeInto({\n        rotation: Global_1.Konva.angleDeg ? newRotation : Util_1.Util._degToRad(newRotation),\n        x: attrs.x + (attrs.width / 2 + padding) * (Math.cos(alpha) - Math.cos(newAlpha)) + (attrs.height / 2 + padding) * (Math.sin(-alpha) - Math.sin(-newAlpha)) - (dx * Math.cos(rot) + dy * Math.sin(-rot)),\n        y: attrs.y + (attrs.height / 2 + padding) * (Math.cos(alpha) - Math.cos(newAlpha)) + (attrs.width / 2 + padding) * (Math.sin(alpha) - Math.sin(newAlpha)) - (dy * Math.cos(rot) + dx * Math.sin(rot)),\n        width: attrs.width + padding * 2,\n        height: attrs.height + padding * 2\n      }, e);\n    } else {\n      console.error(new Error('Wrong position argument of selection resizer: ' + this.movingResizer));\n    }\n\n    if (this.movingResizer === 'rotater') {\n      return;\n    }\n\n    var absPos = this.findOne('.top-left').getAbsolutePosition(this.getParent());\n    var centeredScaling = this.centeredScaling() || e.altKey;\n\n    if (centeredScaling) {\n      var topLeft = this.findOne('.top-left');\n      var bottomRight = this.findOne('.bottom-right');\n      var topOffsetX = topLeft.x();\n      var topOffsetY = topLeft.y();\n      var bottomOffsetX = this.getWidth() - bottomRight.x();\n      var bottomOffsetY = this.getHeight() - bottomRight.y();\n      bottomRight.move({\n        x: -topOffsetX,\n        y: -topOffsetY\n      });\n      topLeft.move({\n        x: bottomOffsetX,\n        y: bottomOffsetY\n      });\n      absPos = topLeft.getAbsolutePosition(this.getParent());\n    }\n\n    x = absPos.x;\n    y = absPos.y;\n    var width = this.findOne('.bottom-right').x() - this.findOne('.top-left').x();\n    var height = this.findOne('.bottom-right').y() - this.findOne('.top-left').y();\n\n    this._fitNodeInto({\n      x: x + this.offsetX(),\n      y: y + this.offsetY(),\n      width: width,\n      height: height\n    }, e);\n  };\n\n  Transformer.prototype._handleMouseUp = function (e) {\n    this._removeEvents(e);\n  };\n\n  Transformer.prototype._removeEvents = function (e) {\n    if (this._transforming) {\n      this._transforming = false;\n      window.removeEventListener('mousemove', this._handleMouseMove);\n      window.removeEventListener('touchmove', this._handleMouseMove);\n      window.removeEventListener('mouseup', this._handleMouseUp, true);\n      window.removeEventListener('touchend', this._handleMouseUp, true);\n\n      this._fire('transformend', {\n        evt: e\n      });\n\n      var node = this.getNode();\n\n      if (node) {\n        node.fire('transformend', {\n          evt: e\n        });\n      }\n    }\n  };\n\n  Transformer.prototype._fitNodeInto = function (newAttrs, evt) {\n    var boundBoxFunc = this.boundBoxFunc();\n\n    if (boundBoxFunc) {\n      var oldAttrs = this._getNodeRect();\n\n      newAttrs = boundBoxFunc.call(this, oldAttrs, newAttrs);\n    }\n\n    var node = this.getNode();\n\n    if (newAttrs.rotation !== undefined) {\n      this.getNode().rotation(newAttrs.rotation);\n    }\n\n    var pure = node.getClientRect({\n      skipTransform: true,\n      skipShadow: true,\n      skipStroke: this.ignoreStroke()\n    });\n    var padding = this.padding();\n    var scaleX = (newAttrs.width - padding * 2) / pure.width;\n    var scaleY = (newAttrs.height - padding * 2) / pure.height;\n    var rotation = Global_1.Konva.getAngle(node.rotation());\n    var dx = pure.x * scaleX - padding - node.offsetX() * scaleX;\n    var dy = pure.y * scaleY - padding - node.offsetY() * scaleY;\n    this.getNode().setAttrs({\n      scaleX: scaleX,\n      scaleY: scaleY,\n      x: newAttrs.x - (dx * Math.cos(rotation) + dy * Math.sin(-rotation)),\n      y: newAttrs.y - (dy * Math.cos(rotation) + dx * Math.sin(rotation))\n    });\n\n    this._fire('transform', {\n      evt: evt\n    });\n\n    this.getNode()._fire('transform', {\n      evt: evt\n    });\n\n    this.update();\n    this.getLayer().batchDraw();\n  };\n\n  Transformer.prototype.forceUpdate = function () {\n    this._resetTransformCache();\n\n    this.update();\n  };\n\n  Transformer.prototype.update = function () {\n    var _this = this;\n\n    var attrs = this._getNodeRect();\n\n    var node = this.getNode();\n    var scale = {\n      x: 1,\n      y: 1\n    };\n\n    if (node && node.getParent()) {\n      scale = node.getParent().getAbsoluteScale();\n    }\n\n    var invertedScale = {\n      x: 1 / scale.x,\n      y: 1 / scale.y\n    };\n    var width = attrs.width;\n    var height = attrs.height;\n    var enabledAnchors = this.enabledAnchors();\n    var resizeEnabled = this.resizeEnabled();\n    var padding = this.padding();\n    var anchorSize = this.anchorSize();\n    this.find('._anchor').each(function (node) {\n      return node.setAttrs({\n        width: anchorSize,\n        height: anchorSize,\n        offsetX: anchorSize / 2,\n        offsetY: anchorSize / 2,\n        stroke: _this.anchorStroke(),\n        strokeWidth: _this.anchorStrokeWidth(),\n        fill: _this.anchorFill(),\n        cornerRadius: _this.anchorCornerRadius()\n      });\n    });\n    this.findOne('.top-left').setAttrs({\n      x: -padding,\n      y: -padding,\n      scale: invertedScale,\n      visible: resizeEnabled && enabledAnchors.indexOf('top-left') >= 0\n    });\n    this.findOne('.top-center').setAttrs({\n      x: width / 2,\n      y: -padding,\n      scale: invertedScale,\n      visible: resizeEnabled && enabledAnchors.indexOf('top-center') >= 0\n    });\n    this.findOne('.top-right').setAttrs({\n      x: width + padding,\n      y: -padding,\n      scale: invertedScale,\n      visible: resizeEnabled && enabledAnchors.indexOf('top-right') >= 0\n    });\n    this.findOne('.middle-left').setAttrs({\n      x: -padding,\n      y: height / 2,\n      scale: invertedScale,\n      visible: resizeEnabled && enabledAnchors.indexOf('middle-left') >= 0\n    });\n    this.findOne('.middle-right').setAttrs({\n      x: width + padding,\n      y: height / 2,\n      scale: invertedScale,\n      visible: resizeEnabled && enabledAnchors.indexOf('middle-right') >= 0\n    });\n    this.findOne('.bottom-left').setAttrs({\n      x: -padding,\n      y: height + padding,\n      scale: invertedScale,\n      visible: resizeEnabled && enabledAnchors.indexOf('bottom-left') >= 0\n    });\n    this.findOne('.bottom-center').setAttrs({\n      x: width / 2,\n      y: height + padding,\n      scale: invertedScale,\n      visible: resizeEnabled && enabledAnchors.indexOf('bottom-center') >= 0\n    });\n    this.findOne('.bottom-right').setAttrs({\n      x: width + padding,\n      y: height + padding,\n      scale: invertedScale,\n      visible: resizeEnabled && enabledAnchors.indexOf('bottom-right') >= 0\n    });\n    var scaledRotateAnchorOffset = -this.rotateAnchorOffset() * Math.abs(invertedScale.y);\n    this.findOne('.rotater').setAttrs({\n      x: width / 2,\n      y: scaledRotateAnchorOffset * Util_1.Util._sign(height),\n      scale: invertedScale,\n      visible: this.rotateEnabled()\n    });\n    this.findOne('.back').setAttrs({\n      width: width * scale.x,\n      height: height * scale.y,\n      scale: invertedScale,\n      visible: this.borderEnabled(),\n      stroke: this.borderStroke(),\n      strokeWidth: this.borderStrokeWidth(),\n      dash: this.borderDash()\n    });\n  };\n\n  Transformer.prototype.isTransforming = function () {\n    return this._transforming;\n  };\n\n  Transformer.prototype.stopTransform = function () {\n    if (this._transforming) {\n      this._removeEvents();\n\n      var resizerNode = this.findOne('.' + this.movingResizer);\n\n      if (resizerNode) {\n        resizerNode.stopDrag();\n      }\n    }\n  };\n\n  Transformer.prototype.destroy = function () {\n    if (this.getStage() && this._cursorChange) {\n      this.getStage().content.style.cursor = '';\n    }\n\n    Group_1.Group.prototype.destroy.call(this);\n    this.detach();\n\n    this._removeEvents();\n\n    return this;\n  };\n\n  Transformer.prototype.toObject = function () {\n    return Node_1.Node.prototype.toObject.call(this);\n  };\n\n  return Transformer;\n}(Group_1.Group);\n\nexports.Transformer = Transformer;\n\nfunction validateAnchors(val) {\n  if (!(val instanceof Array)) {\n    Util_1.Util.warn('enabledAnchors value should be an array');\n  }\n\n  if (val instanceof Array) {\n    val.forEach(function (name) {\n      if (ANCHORS_NAMES.indexOf(name) === -1) {\n        Util_1.Util.warn('Unknown anchor name: ' + name + '. Available names are: ' + ANCHORS_NAMES.join(', '));\n      }\n    });\n  }\n\n  return val || [];\n}\n\nTransformer.prototype.className = 'Transformer';\n\nGlobal_2._registerNode(Transformer);\n\nFactory_1.Factory.addGetterSetter(Transformer, 'enabledAnchors', ANCHORS_NAMES, validateAnchors);\nFactory_1.Factory.addGetterSetter(Transformer, 'resizeEnabled', true);\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorSize', 10, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'rotateEnabled', true);\nFactory_1.Factory.addGetterSetter(Transformer, 'rotationSnaps', []);\nFactory_1.Factory.addGetterSetter(Transformer, 'rotateAnchorOffset', 50, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'borderEnabled', true);\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorStroke', 'rgb(0, 161, 255)');\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorStrokeWidth', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorFill', 'white');\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorCornerRadius', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'borderStroke', 'rgb(0, 161, 255)');\nFactory_1.Factory.addGetterSetter(Transformer, 'borderStrokeWidth', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'borderDash');\nFactory_1.Factory.addGetterSetter(Transformer, 'keepRatio', true);\nFactory_1.Factory.addGetterSetter(Transformer, 'centeredScaling', false);\nFactory_1.Factory.addGetterSetter(Transformer, 'ignoreStroke', false);\nFactory_1.Factory.addGetterSetter(Transformer, 'padding', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'node');\nFactory_1.Factory.addGetterSetter(Transformer, 'boundBoxFunc');\nFactory_1.Factory.backCompat(Transformer, {\n  lineEnabled: 'borderEnabled',\n  rotateHandlerOffset: 'rotateAnchorOffset',\n  enabledHandlers: 'enabledAnchors'\n});\nUtil_1.Collection.mapMethods(Transformer);","\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_2 = require(\"../Global\");\n\nvar Wedge = function (_super) {\n  __extends(Wedge, _super);\n\n  function Wedge() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Wedge.prototype._sceneFunc = function (context) {\n    context.beginPath();\n    context.arc(0, 0, this.radius(), 0, Global_1.Konva.getAngle(this.angle()), this.clockwise());\n    context.lineTo(0, 0);\n    context.closePath();\n    context.fillStrokeShape(this);\n  };\n\n  Wedge.prototype.getWidth = function () {\n    return this.radius() * 2;\n  };\n\n  Wedge.prototype.getHeight = function () {\n    return this.radius() * 2;\n  };\n\n  Wedge.prototype.setWidth = function (width) {\n    this.radius(width / 2);\n  };\n\n  Wedge.prototype.setHeight = function (height) {\n    this.radius(height / 2);\n  };\n\n  return Wedge;\n}(Shape_1.Shape);\n\nexports.Wedge = Wedge;\nWedge.prototype.className = 'Wedge';\nWedge.prototype._centroid = true;\nWedge.prototype._attrsAffectingSize = ['radius'];\n\nGlobal_2._registerNode(Wedge);\n\nFactory_1.Factory.addGetterSetter(Wedge, 'radius', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Wedge, 'angle', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Wedge, 'clockwise', false);\nFactory_1.Factory.backCompat(Wedge, {\n  angleDeg: 'angle',\n  getAngleDeg: 'getAngle',\n  setAngleDeg: 'setAngle'\n});\nUtil_1.Collection.mapMethods(Wedge);","/*!\n * vue-konva v2.1.7 - https://github.com/konvajs/vue-konva#readme\n * MIT Licensed\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n  if (typeof exports === 'object' && typeof module === 'object') module.exports = factory(require(\"vue\"), require(\"konva\"));else if (typeof define === 'function' && define.amd) define([\"vue\", \"konva\"], factory);else if (typeof exports === 'object') exports[\"VueKonva\"] = factory(require(\"vue\"), require(\"konva\"));else root[\"VueKonva\"] = factory(root[\"Vue\"], root[\"Konva\"]);\n})(this, function (__WEBPACK_EXTERNAL_MODULE__0__, __WEBPACK_EXTERNAL_MODULE__2__) {\n  return (\n    /******/\n    function (modules) {\n      // webpackBootstrap\n\n      /******/\n      // The module cache\n\n      /******/\n      var installedModules = {};\n      /******/\n\n      /******/\n      // The require function\n\n      /******/\n\n      function __webpack_require__(moduleId) {\n        /******/\n\n        /******/\n        // Check if module is in cache\n\n        /******/\n        if (installedModules[moduleId]) {\n          /******/\n          return installedModules[moduleId].exports;\n          /******/\n        }\n        /******/\n        // Create a new module (and put it into the cache)\n\n        /******/\n\n\n        var module = installedModules[moduleId] = {\n          /******/\n          i: moduleId,\n\n          /******/\n          l: false,\n\n          /******/\n          exports: {}\n          /******/\n\n        };\n        /******/\n\n        /******/\n        // Execute the module function\n\n        /******/\n\n        modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n        /******/\n\n        /******/\n        // Flag the module as loaded\n\n        /******/\n\n        module.l = true;\n        /******/\n\n        /******/\n        // Return the exports of the module\n\n        /******/\n\n        return module.exports;\n        /******/\n      }\n      /******/\n\n      /******/\n\n      /******/\n      // expose the modules object (__webpack_modules__)\n\n      /******/\n\n\n      __webpack_require__.m = modules;\n      /******/\n\n      /******/\n      // expose the module cache\n\n      /******/\n\n      __webpack_require__.c = installedModules;\n      /******/\n\n      /******/\n      // define getter function for harmony exports\n\n      /******/\n\n      __webpack_require__.d = function (exports, name, getter) {\n        /******/\n        if (!__webpack_require__.o(exports, name)) {\n          /******/\n          Object.defineProperty(exports, name, {\n            enumerable: true,\n            get: getter\n          });\n          /******/\n        }\n        /******/\n\n      };\n      /******/\n\n      /******/\n      // define __esModule on exports\n\n      /******/\n\n\n      __webpack_require__.r = function (exports) {\n        /******/\n        if (typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n          /******/\n          Object.defineProperty(exports, Symbol.toStringTag, {\n            value: 'Module'\n          });\n          /******/\n        }\n        /******/\n\n\n        Object.defineProperty(exports, '__esModule', {\n          value: true\n        });\n        /******/\n      };\n      /******/\n\n      /******/\n      // create a fake namespace object\n\n      /******/\n      // mode & 1: value is a module id, require it\n\n      /******/\n      // mode & 2: merge all properties of value into the ns\n\n      /******/\n      // mode & 4: return value when already ns object\n\n      /******/\n      // mode & 8|1: behave like require\n\n      /******/\n\n\n      __webpack_require__.t = function (value, mode) {\n        /******/\n        if (mode & 1) value = __webpack_require__(value);\n        /******/\n\n        if (mode & 8) return value;\n        /******/\n\n        if (mode & 4 && typeof value === 'object' && value && value.__esModule) return value;\n        /******/\n\n        var ns = Object.create(null);\n        /******/\n\n        __webpack_require__.r(ns);\n        /******/\n\n\n        Object.defineProperty(ns, 'default', {\n          enumerable: true,\n          value: value\n        });\n        /******/\n\n        if (mode & 2 && typeof value != 'string') for (var key in value) {\n          __webpack_require__.d(ns, key, function (key) {\n            return value[key];\n          }.bind(null, key));\n        }\n        /******/\n\n        return ns;\n        /******/\n      };\n      /******/\n\n      /******/\n      // getDefaultExport function for compatibility with non-harmony modules\n\n      /******/\n\n\n      __webpack_require__.n = function (module) {\n        /******/\n        var getter = module && module.__esModule ?\n        /******/\n        function getDefault() {\n          return module['default'];\n        } :\n        /******/\n        function getModuleExports() {\n          return module;\n        };\n        /******/\n\n        __webpack_require__.d(getter, 'a', getter);\n        /******/\n\n\n        return getter;\n        /******/\n      };\n      /******/\n\n      /******/\n      // Object.prototype.hasOwnProperty.call\n\n      /******/\n\n\n      __webpack_require__.o = function (object, property) {\n        return Object.prototype.hasOwnProperty.call(object, property);\n      };\n      /******/\n\n      /******/\n      // __webpack_public_path__\n\n      /******/\n\n\n      __webpack_require__.p = \"\";\n      /******/\n\n      /******/\n\n      /******/\n      // Load entry module and return exports\n\n      /******/\n\n      return __webpack_require__(__webpack_require__.s = 1);\n      /******/\n    }\n    /************************************************************************/\n\n    /******/\n    ([\n    /* 0 */\n\n    /***/\n    function (module, exports) {\n      module.exports = __WEBPACK_EXTERNAL_MODULE__0__;\n      /***/\n    },\n    /* 1 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      module.exports = __webpack_require__(3);\n      /***/\n    },\n    /* 2 */\n\n    /***/\n    function (module, exports) {\n      module.exports = __WEBPACK_EXTERNAL_MODULE__2__;\n      /***/\n    },\n    /* 3 */\n\n    /***/\n    function (module, __webpack_exports__, __webpack_require__) {\n      \"use strict\"; // ESM COMPAT FLAG\n\n      __webpack_require__.r(__webpack_exports__); // EXTERNAL MODULE: external {\"root\":\"Vue\",\"commonjs2\":\"vue\",\"commonjs\":\"vue\",\"amd\":\"vue\"}\n\n\n      var external_root_Vue_commonjs2_vue_commonjs_vue_amd_vue_ = __webpack_require__(0);\n\n      var external_root_Vue_commonjs2_vue_commonjs_vue_amd_vue_default = /*#__PURE__*/__webpack_require__.n(external_root_Vue_commonjs2_vue_commonjs_vue_amd_vue_); // CONCATENATED MODULE: ./src/utils/updatePicture.js\n      // adapted FROM: https://github.com/lavrton/react-konva/blob/master/src/react-konva-fiber.js\n\n\n      function updatePicture(node) {\n        var drawingNode = node.getLayer() || node.getStage();\n        drawingNode && drawingNode.batchDraw();\n      } // CONCATENATED MODULE: ./src/utils/applyNodeProps.js\n      // adapted FROM: https://github.com/lavrton/react-konva/blob/master/src/react-konva-fiber.js\n\n\n      var propsToSkip = {\n        key: true,\n        style: true,\n        elm: true,\n        isRootInsert: true\n      };\n      var EVENTS_NAMESPACE = '.vue-konva-event';\n\n      function applyNodeProps(vueComponent, props, oldProps, useStrict) {\n        if (props === void 0) {\n          props = {};\n        }\n\n        if (oldProps === void 0) {\n          oldProps = {};\n        }\n\n        var instance = vueComponent._konvaNode;\n        var updatedProps = {};\n        var hasUpdates = false;\n\n        for (var key in oldProps) {\n          if (propsToSkip[key]) {\n            continue;\n          }\n\n          var isEvent = key.slice(0, 2) === 'on';\n          var propChanged = oldProps[key] !== props[key];\n\n          if (isEvent && propChanged) {\n            var eventName = key.substr(2).toLowerCase();\n\n            if (eventName.substr(0, 7) === 'content') {\n              eventName = 'content' + eventName.substr(7, 1).toUpperCase() + eventName.substr(8);\n            }\n\n            instance.off(eventName + EVENTS_NAMESPACE, oldProps[key]);\n          }\n\n          var toRemove = !props.hasOwnProperty(key);\n\n          if (toRemove) {\n            instance.setAttr(key, undefined);\n          }\n        }\n\n        for (var _key in props) {\n          if (propsToSkip[_key]) {\n            continue;\n          }\n\n          var _isEvent = _key.slice(0, 2) === 'on';\n\n          var toAdd = oldProps[_key] !== props[_key];\n\n          if (_isEvent && toAdd) {\n            var _eventName = _key.substr(2).toLowerCase();\n\n            if (_eventName.substr(0, 7) === 'content') {\n              _eventName = 'content' + _eventName.substr(7, 1).toUpperCase() + _eventName.substr(8);\n            }\n\n            if (props[_key]) {\n              instance.off(_eventName + EVENTS_NAMESPACE);\n              instance.on(_eventName + EVENTS_NAMESPACE, props[_key]);\n            }\n          }\n\n          if (!_isEvent && (props[_key] !== oldProps[_key] || useStrict && props[_key] !== instance.getAttr(_key))) {\n            hasUpdates = true;\n            updatedProps[_key] = props[_key];\n          }\n        }\n\n        if (hasUpdates) {\n          instance.setAttrs(updatedProps);\n          updatePicture(instance);\n        }\n      } // CONCATENATED MODULE: ./src/utils/index.js\n\n\n      var componentPrefix = 'v';\n      var konvaNodeMarker = '_konvaNode';\n\n      function copy(obj) {\n        return JSON.parse(JSON.stringify(obj));\n      }\n\n      function createListener(obj) {\n        var output = {};\n        Object.keys(obj).forEach(function (eventName) {\n          output['on' + eventName] = obj[eventName];\n        });\n        return output;\n      }\n\n      function findParentKonva(instance) {\n        function re(instance) {\n          if (instance._konvaNode) {\n            return instance;\n          }\n\n          if (instance.$parent) {\n            return re(instance.$parent);\n          }\n\n          return {};\n        }\n\n        return re(instance.$parent);\n      }\n\n      function findKonvaNode(instance) {\n        if (!instance) {\n          return null;\n        }\n\n        if (instance.$options[konvaNodeMarker]) {\n          return instance.getNode();\n        }\n\n        if (instance.$children.length === 0) {\n          return null;\n        }\n\n        return findKonvaNode(instance.$children[0]);\n      }\n\n      function checkOrder($vnode, konvaNode) {\n        var needRedraw = false; // check indexes\n        // somehow this.$children are not ordered correctly\n        // so we have to dive-in into componentOptions of vnode\n        // also componentOptions.children may have empty nodes, and other non Konva elements so we need to filter them first\n\n        var children = $vnode.componentOptions.children || [];\n        var nodes = [];\n        children.forEach(function ($vnode) {\n          var konvaNode = findKonvaNode($vnode.componentInstance);\n\n          if (konvaNode) {\n            nodes.push(konvaNode);\n          }\n\n          var elm = $vnode.elm,\n              componentInstance = $vnode.componentInstance;\n\n          if (elm && elm.tagName && componentInstance && !konvaNode) {\n            var name = elm && elm.tagName.toLowerCase();\n            console.error(\"vue-konva error: You are trying to render \\\"\" + name + \"\\\" inside your component tree. Looks like it is not a Konva node. You can render only Konva components inside the Stage.\");\n          }\n        });\n        nodes.forEach(function (konvaNode, index) {\n          if (konvaNode.getZIndex() !== index) {\n            konvaNode.setZIndex(index);\n            needRedraw = true;\n          }\n        });\n\n        if (needRedraw) {\n          updatePicture(konvaNode);\n        }\n      } // CONCATENATED MODULE: ./src/components/Stage.js\n\n\n      function _extends() {\n        _extends = Object.assign || function (target) {\n          for (var i = 1; i < arguments.length; i++) {\n            var source = arguments[i];\n\n            for (var key in source) {\n              if (Object.prototype.hasOwnProperty.call(source, key)) {\n                target[key] = source[key];\n              }\n            }\n          }\n\n          return target;\n        };\n\n        return _extends.apply(this, arguments);\n      }\n      /* harmony default export */\n\n\n      var Stage = external_root_Vue_commonjs2_vue_commonjs_vue_amd_vue_default.a.component('v-stage', {\n        render: function render(createElement) {\n          return createElement('div', this.$slots.default);\n        },\n        watch: {\n          config: {\n            handler: function handler(val) {\n              this.uploadKonva();\n            },\n            deep: true\n          }\n        },\n        props: {\n          config: {\n            type: Object,\n            default: function _default() {\n              return {};\n            }\n          },\n          __useStrictMode: {\n            type: Boolean\n          }\n        },\n        created: function created() {\n          this._konvaNode = new window.Konva.Stage({\n            width: this.config.width,\n            height: this.config.height,\n            // create fake container, later it will be replaced with real div on the page\n            container: document.createElement('div')\n          });\n        },\n        mounted: function mounted() {\n          this.$el.innerHTML = '';\n\n          this._konvaNode.container(this.$el);\n\n          this.uploadKonva();\n          this.validateChildren();\n        },\n        updated: function updated() {\n          this.uploadKonva();\n          this.uploadKonva();\n          checkOrder(this.$vnode, this._konvaNode);\n        },\n        beforeDestroy: function beforeDestroy() {\n          this._konvaNode.destroy();\n        },\n        methods: {\n          getNode: function getNode() {\n            return this._konvaNode;\n          },\n          getStage: function getStage() {\n            return this._konvaNode;\n          },\n          uploadKonva: function uploadKonva() {\n            var oldProps = this.oldProps || {};\n\n            var props = _extends({}, this.$attrs, this.config, createListener(this.$listeners));\n\n            applyNodeProps(this, props, oldProps, this.__useStrictMode);\n            this.oldProps = props;\n          },\n          validateChildren: function validateChildren() {// TODO: add a waring if we see non-Konva element here\n            // this.$vnode.componentOptions.children.forEach(child => {\n            //   console.log(child);\n            // })\n          }\n        }\n      }); // CONCATENATED MODULE: ./src/components/KonvaNode.js\n\n      function KonvaNode_extends() {\n        KonvaNode_extends = Object.assign || function (target) {\n          for (var i = 1; i < arguments.length; i++) {\n            var source = arguments[i];\n\n            for (var key in source) {\n              if (Object.prototype.hasOwnProperty.call(source, key)) {\n                target[key] = source[key];\n              }\n            }\n          }\n\n          return target;\n        };\n\n        return KonvaNode_extends.apply(this, arguments);\n      }\n\n      var KonvaNode_EVENTS_NAMESPACE = '.vue-konva-event';\n      var CONTAINERS = {\n        Group: true,\n        Layer: true,\n        FastLayer: true,\n        Label: true\n      };\n      /* harmony default export */\n\n      var KonvaNode = function KonvaNode(nameNode) {\n        var _ref;\n\n        return _ref = {}, _ref[konvaNodeMarker] = true, _ref.render = function render(createElement) {\n          // containers should be able to draw children\n          var isContainer = CONTAINERS[nameNode];\n\n          if (isContainer) {\n            return createElement('template', this.$slots.default);\n          } // other elements are not containers\n\n\n          return null;\n        }, _ref.watch = {\n          config: {\n            handler: function handler(val) {\n              this.uploadKonva();\n            },\n            deep: true\n          }\n        }, _ref.props = {\n          config: {\n            type: Object,\n            default: function _default() {\n              return {};\n            }\n          },\n          __useStrictMode: {\n            type: Boolean\n          }\n        }, _ref.created = function created() {\n          this.initKonva();\n        }, _ref.mounted = function mounted() {\n          var parentVueInstance = findParentKonva(this);\n          var parentKonvaNode = parentVueInstance._konvaNode;\n          parentKonvaNode.add(this._konvaNode);\n          updatePicture(this._konvaNode);\n        }, _ref.updated = function updated() {\n          this.uploadKonva();\n          checkOrder(this.$vnode, this._konvaNode);\n        }, _ref.destroyed = function destroyed() {\n          updatePicture(this._konvaNode);\n\n          this._konvaNode.destroy();\n\n          this._konvaNode.off(KonvaNode_EVENTS_NAMESPACE);\n        }, _ref.methods = {\n          getNode: function getNode() {\n            return this._konvaNode;\n          },\n          getStage: function getStage() {\n            return this._konvaNode;\n          },\n          initKonva: function initKonva() {\n            var NodeClass = window.Konva[nameNode];\n\n            if (!NodeClass) {\n              console.error('vue-konva error: Can not find node ' + nameNode);\n              return;\n            }\n\n            this._konvaNode = new NodeClass();\n            this._konvaNode.VueComponent = this;\n            this.uploadKonva();\n          },\n          uploadKonva: function uploadKonva() {\n            var oldProps = this.oldProps || {};\n            var props = KonvaNode_extends({}, this.$attrs, this.config, createListener(this.$listeners));\n            applyNodeProps(this, props, oldProps, this.__useStrictMode);\n            this.oldProps = props;\n          }\n        }, _ref;\n      }; // CONCATENATED MODULE: ./src/index.js\n\n\n      if (typeof window !== 'undefined' && !window.Konva) {\n        __webpack_require__(2);\n      }\n\n      var KONVA_NODES = ['Layer', 'FastLayer', 'Group', 'Label', 'Rect', 'Circle', 'Ellipse', 'Wedge', 'Line', 'Sprite', 'Image', 'Text', 'TextPath', 'Star', 'Ring', 'Arc', 'Tag', 'Path', 'RegularPolygon', 'Arrow', 'Shape', 'Transformer'];\n      var components = [{\n        name: 'Stage',\n        component: Stage\n      }].concat(KONVA_NODES.map(function (name) {\n        return {\n          name: name,\n          component: KonvaNode(name)\n        };\n      }));\n      var VueKonva = {\n        install: function install(Vue, options) {\n          var prefixToUse = componentPrefix;\n\n          if (options && options.prefix) {\n            prefixToUse = options.prefix;\n          }\n\n          components.forEach(function (k) {\n            Vue.component(\"\" + prefixToUse + k.name, k.component);\n          });\n        }\n      };\n      /* harmony default export */\n\n      var src = __webpack_exports__[\"default\"] = VueKonva;\n\n      if (typeof window !== 'undefined' && window.Vue) {\n        window.Vue.use(VueKonva);\n      }\n      /***/\n\n    }\n    /******/\n    ])[\"default\"]\n  );\n});","'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopDefault(ex) {\n  return ex && typeof ex === 'object' && 'default' in ex ? ex['default'] : ex;\n}\n\nvar React = _interopDefault(require('react'));\n\nvar ReactDOM = _interopDefault(require('react-dom'));\n\nvar Vue = _interopDefault(require('vue'));\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar classCallCheck = function classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar defineProperty = function defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar inherits = function inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar objectWithoutProperties = function objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};\n\nvar possibleConstructorReturn = function possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nvar VUE_COMPONENT_NAME = 'vuera-internal-component-name';\n\nvar wrapReactChildren = function wrapReactChildren(createElement, children) {\n  return createElement('vuera-internal-react-wrapper', {\n    props: {\n      component: function component() {\n        return React.createElement('div', null, children);\n      }\n    }\n  });\n};\n\nvar VueContainer = function (_React$Component) {\n  inherits(VueContainer, _React$Component);\n\n  function VueContainer(props) {\n    classCallCheck(this, VueContainer);\n    /**\n     * We have to track the current Vue component so that we can reliably catch updates to the\n     * `component` prop.\n     */\n\n    var _this = possibleConstructorReturn(this, (VueContainer.__proto__ || Object.getPrototypeOf(VueContainer)).call(this, props));\n\n    _this.currentVueComponent = props.component;\n    /**\n     * Modify createVueInstance function to pass this binding correctly. Doing this in the\n     * constructor to avoid instantiating functions in render.\n     */\n\n    var createVueInstance = _this.createVueInstance;\n    var self = _this;\n\n    _this.createVueInstance = function (element, component, prevComponent) {\n      createVueInstance(element, self, component, prevComponent);\n    };\n\n    return _this;\n  }\n\n  createClass(VueContainer, [{\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      var component = nextProps.component,\n          props = objectWithoutProperties(nextProps, ['component']);\n\n      if (this.currentVueComponent !== component) {\n        this.updateVueComponent(this.props.component, component);\n      }\n      /**\n       * NOTE: we're not comparing this.props and nextProps here, because I didn't want to write a\n       * function for deep object comparison. I don't know if this hurts performance a lot, maybe\n       * we do need to compare those objects.\n       */\n\n\n      Object.assign(this.vueInstance.$data, props);\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.vueInstance.$destroy();\n    }\n    /**\n     * Creates and mounts the Vue instance.\n     * NOTE: since we need to access the current instance of VueContainer, as well as the Vue instance\n     * inside of the Vue constructor, we cannot bind this function to VueContainer, and we need to\n     * pass VueContainer's binding explicitly.\n     * @param {HTMLElement} targetElement - element to attact the Vue instance to\n     * @param {ReactInstance} reactThisBinding - current instance of VueContainer\n     */\n\n  }, {\n    key: 'createVueInstance',\n    value: function createVueInstance(targetElement, reactThisBinding) {\n      var _components;\n\n      var _reactThisBinding$pro = reactThisBinding.props,\n          component = _reactThisBinding$pro.component,\n          on = _reactThisBinding$pro.on,\n          props = objectWithoutProperties(_reactThisBinding$pro, ['component', 'on']); // `this` refers to Vue instance in the constructor\n\n      reactThisBinding.vueInstance = new Vue(_extends({\n        el: targetElement,\n        data: props\n      }, config.vueInstanceOptions, {\n        render: function render(createElement) {\n          return createElement(VUE_COMPONENT_NAME, {\n            props: this.$data,\n            on: on\n          }, [wrapReactChildren(createElement, this.children)]);\n        },\n        components: (_components = {}, defineProperty(_components, VUE_COMPONENT_NAME, component), defineProperty(_components, 'vuera-internal-react-wrapper', ReactWrapper), _components)\n      }));\n    }\n  }, {\n    key: 'updateVueComponent',\n    value: function updateVueComponent(prevComponent, nextComponent) {\n      this.currentVueComponent = nextComponent;\n      /**\n       * Replace the component in the Vue instance and update it.\n       */\n\n      this.vueInstance.$options.components[VUE_COMPONENT_NAME] = nextComponent;\n      this.vueInstance.$forceUpdate();\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return React.createElement('div', {\n        ref: this.createVueInstance\n      });\n    }\n  }]);\n  return VueContainer;\n}(React.Component);\n\nvar makeReactContainer = function makeReactContainer(Component) {\n  var _class, _temp;\n\n  return _temp = _class = function (_React$Component) {\n    inherits(ReactInVue, _React$Component);\n\n    function ReactInVue(props) {\n      classCallCheck(this, ReactInVue);\n      /**\n       * We create a stateful component in order to attach a ref on it. We will use that ref to\n       * update component's state, which seems better than re-rendering the whole thing with\n       * ReactDOM.\n       */\n\n      var _this = possibleConstructorReturn(this, (ReactInVue.__proto__ || Object.getPrototypeOf(ReactInVue)).call(this, props));\n\n      _this.state = _extends({}, props);\n      return _this;\n    }\n\n    createClass(ReactInVue, [{\n      key: 'wrapVueChildren',\n      value: function wrapVueChildren(children) {\n        return {\n          render: function render(createElement) {\n            return createElement('div', children);\n          }\n        };\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        var _state = this.state,\n            children = _state.children,\n            _invoker = _state[''],\n            rest = objectWithoutProperties(_state, ['children', '']);\n        var wrappedChildren = this.wrapVueChildren(children);\n        return React.createElement(Component, rest, children && React.createElement(VueContainer, {\n          component: wrappedChildren\n        }));\n      }\n    }]);\n    return ReactInVue;\n  }(React.Component), _class.displayName = 'ReactInVue' + (Component.displayName || Component.name || 'Component'), _temp;\n};\n\nvar ReactWrapper = {\n  props: ['component', 'passedProps'],\n  render: function render(createElement) {\n    return createElement('div', {\n      ref: 'react'\n    });\n  },\n  methods: {\n    mountReactComponent: function mountReactComponent(component) {\n      var _this2 = this;\n\n      var Component = makeReactContainer(component);\n      var children = this.$slots.default !== undefined ? {\n        children: this.$slots.default\n      } : {};\n      ReactDOM.render(React.createElement(Component, _extends({}, this.$props.passedProps, this.$attrs, this.$listeners, children, {\n        ref: function ref(_ref) {\n          return _this2.reactComponentRef = _ref;\n        }\n      })), this.$refs.react);\n    }\n  },\n  mounted: function mounted() {\n    this.mountReactComponent(this.$props.component);\n  },\n  beforeDestroy: function beforeDestroy() {\n    ReactDOM.unmountComponentAtNode(this.$refs.react);\n  },\n  updated: function updated() {\n    /**\n     * AFAIK, this is the only way to update children. It doesn't seem to be possible to watch\n     * `$slots` or `$children`.\n     */\n    if (this.$slots.default !== undefined) {\n      this.reactComponentRef.setState({\n        children: this.$slots.default\n      });\n    } else {\n      this.reactComponentRef.setState({\n        children: null\n      });\n    }\n  },\n  inheritAttrs: false,\n  watch: {\n    $attrs: {\n      handler: function handler() {\n        this.reactComponentRef.setState(_extends({}, this.$attrs));\n      },\n      deep: true\n    },\n    '$props.component': {\n      handler: function handler(newValue) {\n        this.mountReactComponent(newValue);\n      }\n    },\n    $listeners: {\n      handler: function handler() {\n        this.reactComponentRef.setState(_extends({}, this.$listeners));\n      },\n      deep: true\n    },\n    '$props.passedProps': {\n      handler: function handler() {\n        this.reactComponentRef.setState(_extends({}, this.$props.passedProps));\n      },\n      deep: true\n    }\n  }\n};\n\nfunction isReactComponent(component) {\n  if ((typeof component === 'undefined' ? 'undefined' : _typeof(component)) === 'object' && !isReactForwardReference(component)) {\n    return false;\n  }\n\n  return !(typeof component === 'function' && component.prototype && (component.prototype.constructor.super && component.prototype.constructor.super.isVue || component.prototype instanceof Vue));\n}\n\nfunction isReactForwardReference(component) {\n  return component.$$typeof && component.$$typeof.toString() === 'Symbol(react.forward_ref)';\n}\n\nfunction VueResolver$$1(component) {\n  return {\n    components: {\n      ReactWrapper: ReactWrapper\n    },\n    props: ['passedProps'],\n    inheritAttrs: false,\n    render: function render(createElement) {\n      return createElement('react-wrapper', {\n        props: {\n          component: component,\n          passedProps: this.$props.passedProps\n        },\n        attrs: this.$attrs,\n        on: this.$listeners\n      }, this.$slots.default);\n    }\n  };\n}\n/**\n * This mixin automatically wraps all React components into Vue.\n */\n\n\nvar VuePlugin = {\n  install: function install(Vue$$1, options) {\n    /**\n     * We define a custom merging strategy for the `components` field. This strategy really just\n     * wraps all the React components while leaving Vue components as is.\n     */\n    var originalComponentsMergeStrategy = Vue$$1.config.optionMergeStrategies.components;\n\n    Vue$$1.config.optionMergeStrategies.components = function (parent) {\n      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      var mergedValue = originalComponentsMergeStrategy.apply(undefined, [parent].concat(args));\n      var wrappedComponents = mergedValue ? Object.entries(mergedValue).reduce(function (acc, _ref) {\n        var _ref2 = slicedToArray(_ref, 2),\n            k = _ref2[0],\n            v = _ref2[1];\n\n        return _extends({}, acc, defineProperty({}, k, isReactComponent(v) ? VueResolver$$1(v) : v));\n      }, {}) : mergedValue;\n      return Object.assign(mergedValue, wrappedComponents);\n    };\n\n    Vue$$1.prototype.constructor.isVue = true;\n  }\n};\n/* eslint-disable prefer-object-spread/prefer-object-spread */\n\nfunction ReactResolver$$1(component) {\n  return isReactComponent(component) ? component : function (props) {\n    return React.createElement(VueContainer, _extends({}, props, {\n      component: component\n    }));\n  };\n}\n/**\n * This function gets imported by the babel plugin. It wraps a suspected React element and, if it\n * isn't a valid React element, wraps it into a Vue container.\n */\n\n\nfunction babelReactResolver$$1(component, props, children) {\n  return isReactComponent(component) ? React.createElement(component, props, children) : React.createElement(VueContainer, Object.assign({\n    component: component\n  }, props), children);\n}\n\nfunction defaultConfig() {\n  return {\n    vueInstanceOptions: {}\n  };\n}\n\nvar config = defaultConfig();\nexports.ReactWrapper = ReactWrapper;\nexports.VueWrapper = VueContainer;\nexports.__vueraReactResolver = babelReactResolver$$1;\nexports.VuePlugin = VuePlugin;\nexports.VueInReact = ReactResolver$$1;\nexports.ReactInVue = VueResolver$$1;\nexports.config = config;","var global = require('../internals/global');\nvar TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar isCallable = require('../internals/is-callable');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar Object = global.Object;\n\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && isCallable(O.callee) ? 'Arguments' : result;\n};\n","var PROPER_FUNCTION_NAME = require('../internals/function-name').PROPER;\nvar fails = require('../internals/fails');\nvar whitespaces = require('../internals/whitespaces');\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]()\n      || non[METHOD_NAME]() !== non\n      || (PROPER_FUNCTION_NAME && whitespaces[METHOD_NAME].name !== METHOD_NAME);\n  });\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar toString = require('../internals/to-string');\nvar whitespaces = require('../internals/whitespaces');\n\nvar replace = uncurryThis(''.replace);\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = toString(requireObjectCoercible($this));\n    if (TYPE & 1) string = replace(string, ltrim, '');\n    if (TYPE & 2) string = replace(string, rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.es/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","var global = require('../internals/global');\nvar classof = require('../internals/classof');\n\nvar String = global.String;\n\nmodule.exports = function (argument) {\n  if (classof(argument) === 'Symbol') throw TypeError('Cannot convert a Symbol value to a string');\n  return String(argument);\n};\n","// a string of all valid unicode whitespaces\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002' +\n  '\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","'use strict';\nvar $ = require('../internals/export');\nvar $trimEnd = require('../internals/string-trim').end;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\nvar FORCED = forcedStringTrimMethod('trimEnd');\n\nvar trimEnd = FORCED ? function trimEnd() {\n  return $trimEnd(this);\n// eslint-disable-next-line es/no-string-prototype-trimstart-trimend -- safe\n} : ''.trimEnd;\n\n// `String.prototype.{ trimEnd, trimRight }` methods\n// https://tc39.es/ecma262/#sec-string.prototype.trimend\n// https://tc39.es/ecma262/#String.prototype.trimright\n$({ target: 'String', proto: true, name: 'trimEnd', forced: FORCED }, {\n  trimEnd: trimEnd,\n  trimRight: trimEnd\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $trimStart = require('../internals/string-trim').start;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\nvar FORCED = forcedStringTrimMethod('trimStart');\n\nvar trimStart = FORCED ? function trimStart() {\n  return $trimStart(this);\n// eslint-disable-next-line es/no-string-prototype-trimstart-trimend -- safe\n} : ''.trimStart;\n\n// `String.prototype.{ trimStart, trimLeft }` methods\n// https://tc39.es/ecma262/#sec-string.prototype.trimstart\n// https://tc39.es/ecma262/#String.prototype.trimleft\n$({ target: 'String', proto: true, name: 'trimStart', forced: FORCED }, {\n  trimStart: trimStart,\n  trimLeft: trimStart\n});\n","import React from \"react\";\nimport { VueWrapper } from \"vuera\";\n\nimport { log } from \"./index\";\n\nlet GameCanvas: unknown;\n\nexport type VueInteropProps = {\n  preload: () => void;\n  passthroughProps: Record<string, unknown>;\n};\n\ntype VueInteropState = {\n  mount: boolean;\n};\n\n/**\n * Lazily loads the game canvas at runtime into the React application\n */\nclass VueInterop extends React.Component<VueInteropProps, VueInteropState> {\n  constructor(props: VueInteropProps) {\n    super(props);\n    // The state is \"unused\" in that it is only used to force a re-render:\n    // eslint-disable-next-line react/no-unused-state\n    this.state = { mount: false };\n  }\n\n  componentDidMount(): void {\n    const { preload } = this.props;\n    if (preload != null) preload();\n\n    // eslint-disable-next-line max-len\n    // eslint-disable-next-line global-require,@typescript-eslint/no-var-requires\n    GameCanvas = (require(\"./vue/GameCanvas.vue\") as { default: unknown })\n      .default;\n\n    // The state is \"unused\" in that it is only used to force a re-render:\n    // eslint-disable-next-line react/no-unused-state\n    this.setState({ mount: true });\n    log(\"Loading Vue component, forcing re-render\");\n  }\n\n  render(): React.ReactElement | null {\n    const { passthroughProps } = this.props;\n    if (GameCanvas == null) return <div />;\n    // eslint-disable-next-line react/jsx-props-no-spreading\n    return <VueWrapper component={GameCanvas} {...passthroughProps} />;\n  }\n}\n\nexport default VueInterop;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"stageWrapper\",staticClass:\"stage-wrapper\",on:{\"contextmenu\":function($event){$event.preventDefault();void 0}}},[_c('v-stage',{ref:\"stage\",staticClass:\"stage\",attrs:{\"config\":_vm.stageConfig},on:{\"mousedown\":_vm.handleMouseDown}},[_c('v-layer',[_c('v-rect',{attrs:{\"config\":{\n        x: -50000,\n        y: -50000,\n        width: 100000,\n        height: 100000,\n        fill: '#1d2951'}}}),_vm._v(\" \"),_vm._l((_vm.waterConnectionConfigs),function(waterConnection){return _c('v-line',{key:waterConnection.num,attrs:{\"config\":waterConnection}})})],2),_vm._v(\" \"),_c('v-layer',_vm._l((_vm.territoryData),function(territory,index){return _c('v-territory',{key:index,attrs:{\"castle\":territory.castle,\"highlight\":territory.highlight,\"baseColor\":territory.baseColor,\"path\":territory.path},on:{\"territory-click-raw\":function (left, isTouch) { return _vm.handleTerritoryMouseUp(index, left, isTouch); }}})}),1),_vm._v(\" \"),_c('v-layer',{ref:\"castleLayer\"},[_vm._l((_vm.castleData),function(castle){return _c('v-castle-icon',_vm._b({key:castle.num,attrs:{\"onLoad\":_vm.handleCastleIconLoad}},'v-castle-icon',castle,false))}),_vm._v(\" \"),_vm._l((_vm.armyData),function(army){return _c('v-army-shape',_vm._b({key:army.num},'v-army-shape',army,false))})],2)],1),_vm._v(\" \"),_c('div',{staticClass:\"stage-fill\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* eslint-disable */\n\nexport const colorLuminance = (hex, lum) => {\n  // validate hex string\n  hex = String(hex).replace(/[^0-9a-f]/gi, \"\");\n  if (hex.length < 6) {\n    hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n  }\n  lum = lum || 0;\n  // convert to decimal and change luminosity\n  let rgb = \"#\",\n    c,\n    i;\n  for (i = 0; i < 3; i++) {\n    c = parseInt(hex.substr(i * 2, 2), 16);\n    c = Math.round(Math.min(Math.max(0, c + c * lum), 255)).toString(16);\n    rgb += (\"00\" + c).substr(c.length);\n  }\n  return rgb;\n};\n\n//rgb to hsv function\nconst hsvToRgb = (color) => {\n  let r, g, b, i, f, p, q, t;\n  let h = color.h;\n  let s = color.s;\n  let v = color.v;\n  i = Math.floor(h * 6);\n  f = h * 6 - i;\n  p = v * (1 - s);\n  q = v * (1 - f * s);\n  t = v * (1 - (1 - f) * s);\n  switch (i % 6) {\n    case 0:\n      (r = v), (g = t), (b = p);\n      break;\n    case 1:\n      (r = q), (g = v), (b = p);\n      break;\n    case 2:\n      (r = p), (g = v), (b = t);\n      break;\n    case 3:\n      (r = p), (g = q), (b = v);\n      break;\n    case 4:\n      (r = t), (g = p), (b = v);\n      break;\n    case 5:\n      (r = v), (g = p), (b = q);\n      break;\n  }\n  return {\n    r: Math.round(r * 255),\n    g: Math.round(g * 255),\n    b: Math.round(b * 255),\n  };\n};\n\n//hsv to rgb function\nconst rgbToHsv = (color) => {\n  let r = color.r;\n  let g = color.g;\n  let b = color.b;\n  let max = Math.max(r, g, b),\n    min = Math.min(r, g, b),\n    d = max - min,\n    h,\n    s = max === 0 ? 0 : d / max,\n    v = max / 255;\n\n  switch (max) {\n    case min:\n      h = 0;\n      break;\n    case r:\n      h = g - b + d * (g < b ? 6 : 0);\n      h /= 6 * d;\n      break;\n    case g:\n      h = b - r + d * 2;\n      h /= 6 * d;\n      break;\n    case b:\n      h = r - g + d * 4;\n      h /= 6 * d;\n      break;\n  }\n\n  return {\n    h: h,\n    s: s,\n    v: v,\n  };\n};\n\nconst componentToHex = (c) => {\n  let hex = c.toString(16);\n  return hex.length === 1 ? \"0\" + hex : hex;\n};\n\nconst rgbToHex = (color) => {\n  return (\n    \"#\" +\n    componentToHex(color.r) +\n    componentToHex(color.g) +\n    componentToHex(color.b)\n  );\n};\n\nconst hexToRgb = (hex) => {\n  let result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  return result\n    ? {\n        r: parseInt(result[1], 16),\n        g: parseInt(result[2], 16),\n        b: parseInt(result[3], 16),\n      }\n    : null;\n};\n\nexport const alphaBlended = (hex, alpha) => {\n  const rgb = hexToRgb(hex);\n  return \"rgba(\" + rgb.r + \",\" + rgb.g + \",\" + rgb.b + \",\" + alpha + \")\";\n};\n\nexport const colorSaturation = (hex, sat) => {\n  let rgb = hexToRgb(hex);\n\n  let hsv = rgbToHsv(rgb);\n  const brightness = hsv.v >= 0.7 ? 0.85 : 1;\n  hsv.s *= sat;\n  hsv.v *= brightness;\n  rgb = hsvToRgb(hsv);\n  hex = rgbToHex(rgb);\n  return hex;\n};\n\nexport const distance = (p1, p2) => {\n  return Math.sqrt(Math.pow(p2.x - p1.x, 2) + Math.pow(p2.y - p1.y, 2));\n};\n\nexport const clamp = (num, min, max) => {\n  return num <= min ? min : num >= max ? max : num;\n};\n\nexport const seqStringToArray = (string) => {\n  return string.indexOf(\"List(\") === 0\n    ? string\n        .slice(5, string.length - 1)\n        .split(\", \")\n        .map(function (item) {\n          return parseInt(item, 10);\n        })\n    : [];\n};\n\nexport const specialSeqToArray = (string) => {\n  let matches = /^\\([A-Z][a-z]+\\((.+)\\),(\\d),(\\d)\\)$/gi.exec(string);\n  return matches.length > 3\n    ? [\n        matches[1].split(\", \").map(function (item) {\n          return parseInt(item, 10);\n        }),\n        parseInt(matches[2], 10),\n        parseInt(matches[3], 10),\n      ]\n    : [];\n};\n\nexport const exists = (object) =>\n  !(typeof object === \"undefined\" || object === null);\n\nimport { log } from \"../index\";\nexport const logError = (message) => log(message, \"Vue\", \"Error\");\n\nexport const debounce = (fn, delay) => {\n  var timer = null;\n  return function () {\n    var context = this,\n      args = arguments;\n    clearTimeout(timer);\n    timer = setTimeout(function () {\n      fn.apply(context, args);\n    }, delay);\n  };\n};\n","/* globals __VUE_SSR_CONTEXT__ */\n\n// IMPORTANT: Do NOT use ES2015 features in this file (except for modules).\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nexport default function normalizeComponent (\n  scriptExports,\n  render,\n  staticRenderFns,\n  functionalTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier, /* server only */\n  shadowMode /* vue-cli only */\n) {\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (render) {\n    options.render = render\n    options.staticRenderFns = staticRenderFns\n    options._compiled = true\n  }\n\n  // functional template\n  if (functionalTemplate) {\n    options.functional = true\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = 'data-v-' + scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) { // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = shadowMode\n      ? function () {\n        injectStyles.call(\n          this,\n          (options.functional ? this.parent : this).$root.$options.shadowRoot\n        )\n      }\n      : injectStyles\n  }\n\n  if (hook) {\n    if (options.functional) {\n      // for template-only hot-reload because in that case the render fn doesn't\n      // go through the normalizer\n      options._injectStyles = hook\n      // register for functional component in vue file\n      var originalRender = options.render\n      options.render = function renderWithStyleInjection (h, context) {\n        hook.call(context)\n        return originalRender(h, context)\n      }\n    } else {\n      // inject component registration as beforeCreate hook\n      var existing = options.beforeCreate\n      options.beforeCreate = existing\n        ? [].concat(existing, hook)\n        : [hook]\n    }\n  }\n\n  return {\n    exports: scriptExports,\n    options: options\n  }\n}\n","import { render, staticRenderFns } from \"./ArmyShape.vue?vue&type=template&id=1e576e0e&\"\nimport script from \"./ArmyShape.vue?vue&type=script&lang=js&\"\nexport * from \"./ArmyShape.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <v-shape :config=\"config\"></v-shape>\n</template>\n\n<script>\nexport default {\n  props: {\n    color: String,\n    size: Number,\n    x: Number,\n    y: Number,\n  },\n  computed: {\n    config: function() {\n      const size = this.size\n      const color = this.color\n      const radius = size < 5 ? 5 : size > 9 ? 12 : 10\n      const bgOffset = 3\n      const bgFill = 'rgba(245, 242, 242, 0.55)'\n      const textFill = 'rgb(245, 242, 242)'\n      const position = {\n        a: this.x,\n        b: this.y,\n      }\n      return {\n        x: position.a,\n        y: position.b,\n        width: radius,\n        height: radius,\n        listening: false,\n        sceneFunc: function(context) {\n          if (size <= 0) return\n          context.beginPath()\n          const spacing = 1\n          if (size <= 4) {\n            if (size === 1) {\n              // background - circle\n              context.beginPath()\n              context.arc(0, 0, radius + bgOffset, 0, 2 * Math.PI)\n              context.closePath()\n              context.fillStyle = bgFill\n              context.fill()\n\n              // foreground\n              context.beginPath()\n              context.arc(0, 0, radius, 0, 2 * Math.PI, false)\n              context.closePath()\n              context.fillStyle = color\n              context.fill()\n            } else if (size === 2) {\n              // background - capsule shape\n              context.beginPath()\n              context.arcTo(\n                -radius - spacing,\n                0,\n                radius + bgOffset,\n                0.5 * Math.PI,\n                1.5 * Math.PI\n              )\n              context.arcTo(\n                radius + spacing,\n                0,\n                radius + bgOffset,\n                1.5 * Math.PI,\n                0.5 * Math.PI,\n                false\n              )\n              context.closePath()\n              context.fillStyle = bgFill\n              context.fill()\n\n              // foreground\n              context.beginPath()\n              context.arc(-radius - spacing, 0, radius, 0, 2 * Math.PI, false)\n              context.moveTo(radius + spacing, 0)\n              context.arc(radius + spacing, 0, radius, 0, 2 * Math.PI, false)\n              context.closePath()\n              context.fillStyle = color\n              context.fill()\n            } else if (size === 3) {\n              const correction = 1\n\n              // background - rounded triangle shape\n              context.beginPath()\n              context.arcTo(\n                -radius - spacing,\n                radius + spacing,\n                radius + bgOffset,\n                1.3333 * Math.PI,\n                0.3333 * Math.PI,\n                true\n              )\n              context.arcTo(\n                radius + spacing,\n                radius + spacing,\n                radius + bgOffset,\n                0.6667 * Math.PI,\n                1.6667 * Math.PI,\n                true\n              )\n              context.arcTo(\n                0,\n                -radius - spacing + correction,\n                radius + bgOffset,\n                0,\n                Math.PI,\n                true\n              )\n              context.closePath()\n              context.fillStyle = bgFill\n              context.fill()\n\n              // foreground\n              context.beginPath()\n              context.arc(\n                -radius - spacing,\n                radius + spacing,\n                radius,\n                0,\n                2 * Math.PI,\n                false\n              )\n              context.moveTo(radius + spacing, radius + spacing)\n              context.arc(\n                radius + spacing,\n                radius + spacing,\n                radius,\n                0,\n                2 * Math.PI,\n                false\n              )\n              context.moveTo(0, -radius - spacing + correction)\n              context.arc(\n                0,\n                -radius - spacing + correction,\n                radius,\n                0,\n                2 * Math.PI,\n                false\n              )\n              context.closePath()\n              context.fillStyle = color\n              context.fill()\n            } else {\n              // background - rounded rectangle\n              context.beginPath()\n              context.arcTo(\n                -radius - spacing,\n                -radius - spacing,\n                radius + bgOffset,\n                0.75 * Math.PI,\n                1.75 * Math.PI,\n                false\n              )\n              context.arcTo(\n                radius + spacing,\n                -radius - spacing,\n                radius + bgOffset,\n                1.25 * Math.PI,\n                0.25 * Math.PI,\n                false\n              )\n              context.arcTo(\n                radius + spacing,\n                radius + spacing,\n                radius + bgOffset,\n                1.75 * Math.PI,\n                0.75 * Math.PI,\n                false\n              )\n              context.arcTo(\n                -radius - spacing,\n                radius + spacing,\n                radius + bgOffset,\n                0.25 * Math.PI,\n                1.25 * Math.PI,\n                false\n              )\n              context.closePath()\n              context.fillStyle = bgFill\n              context.fill()\n\n              // foreground\n              context.beginPath()\n              context.arc(\n                -radius - spacing,\n                -radius - spacing,\n                radius,\n                0,\n                2 * Math.PI,\n                false\n              )\n              context.moveTo(radius + spacing, -radius - spacing)\n              context.arc(\n                radius + spacing,\n                -radius - spacing,\n                radius,\n                0,\n                2 * Math.PI,\n                false\n              )\n              context.moveTo(-radius - spacing, radius + spacing)\n              context.arc(\n                -radius - spacing,\n                radius + spacing,\n                radius,\n                0,\n                2 * Math.PI,\n                false\n              )\n              context.moveTo(radius + spacing, radius + spacing)\n              context.arc(\n                radius + spacing,\n                radius + spacing,\n                radius,\n                0,\n                2 * Math.PI,\n                false\n              )\n              context.closePath()\n              context.fillStyle = color\n              context.fill()\n            }\n          } else {\n            // background circle\n            context.beginPath()\n            context.arc(0, 0, radius, 0, 2 * Math.PI, false)\n            context.closePath()\n            context.fillStyle = color\n            context.fill()\n\n            // foreground text\n            context.fillStyle = textFill\n            context.font = 'bold 15px Roboto'\n            context.shadowBlur = 6\n            context.shadowOpacity = 0.4\n            context.textBaseline = 'middle'\n            context.textAlign = 'center'\n            context.fillText(size, 0, 2)\n          }\n        },\n      }\n    },\n  },\n}\n</script>\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-shape',{attrs:{\"config\":_vm.config}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-image :config=\"config\"></v-image>\n</template>\n\n<script>\nimport { log } from '../index'\n\nconst image = document.createElement('img')\nconst imgWidth = 28\nconst imgHeight = 28\nconst imageOnLoadCallbacks = new Set()\nimage.onload = () => {\n  log('Image loaded, forcing redraw', 'Vue', 'CastleIcon')\n  imageOnLoadCallbacks.forEach(callback => callback())\n}\nimage.src = '/projects/risk-game/demo_castle.png'\n\nconst layerRefWrapper = {\n  layerRef: null,\n  needsRedraw: false,\n}\n\nexport default {\n  props: {\n    x: Number,\n    y: Number,\n    onLoad: Function,\n  },\n  computed: {\n    config: function() {\n      const position = {\n        a: this.x,\n        b: this.y,\n      }\n      return {\n        x: position.a - imgWidth / 4,\n        y: position.b - imgHeight / 4,\n        image: image,\n        width: imgWidth,\n        height: imgHeight,\n        listening: false,\n      }\n    },\n  },\n  mounted() {\n    imageOnLoadCallbacks.add(this.onLoad)\n  },\n}\n</script>\n","import { render, staticRenderFns } from \"./CastleIcon.vue?vue&type=template&id=eda004fa&\"\nimport script from \"./CastleIcon.vue?vue&type=script&lang=js&\"\nexport * from \"./CastleIcon.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-image',{attrs:{\"config\":_vm.config}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./Territory.vue?vue&type=template&id=00f57a1e&\"\nimport script from \"./Territory.vue?vue&type=script&lang=js&\"\nexport * from \"./Territory.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<!--suppress HtmlUnknownTag -->\n<template>\n  <v-group>\n    <v-path\n      :config=\"pathConfig\"\n      @mouseover=\"handleMouseOver\"\n      @mouseout=\"handleMouseOut\"\n      @mouseup=\"handleMouseUp\"\n      @tap=\"handleMouseUp({evt: {which: 1}}, true)\"\n    ></v-path>\n    <v-group v-if=\"isHighlighted\" :config=\"clipConfig\">\n      <v-path :config=\"highlightConfig\"></v-path>\n    </v-group>\n  </v-group>\n</template>\n\n<script>\nimport { alphaBlended, colorLuminance, colorSaturation, exists } from './util'\nimport Konva from 'konva'\n\nexport default {\n  props: {\n    // Location of castle, or null if no castle\n    castle: Object,\n    // Color of highlight, or null if no highlight\n    highlight: String,\n    // Base fill of the territory shape\n    baseColor: String,\n    // SVG path data\n    path: String,\n  },\n\n  data() {\n    return {\n      mouseOver: false,\n    }\n  },\n\n  methods: {\n    // Mouse over event callback\n    handleMouseOver() {\n      this.mouseOver = true\n    },\n\n    // Mouse out event callback\n    handleMouseOut() {\n      this.mouseOver = false\n    },\n\n    // Mouse down event callback\n    handleMouseUp({ evt }, isTouch = false) {\n      const { which } = evt\n      if (which !== 1 && which !== 3) return\n      this.$emit('territory-click-raw', which === 1, isTouch)\n    },\n  },\n\n  computed: {\n    // Shape config for each shape\n    pathConfig() {\n      return {\n        x: 0,\n        y: 0,\n        scale: {\n          x: 1,\n          y: 1,\n        },\n        data: this.path,\n        fill: this.color,\n        shadowBlur: 10,\n      }\n    },\n\n    // Config of highlight object\n    highlightConfig() {\n      return {\n        x: 0,\n        y: 0,\n        scale: {\n          x: 1,\n          y: 1,\n        },\n        data: this.path,\n        stroke: this.highlight,\n        strokeWidth: 10,\n        opacity: 0.4,\n        lineJoin: 'round',\n        fill: alphaBlended(this.color, 0.8),\n        listening: false,\n      }\n    },\n\n    clipConfig() {\n      const arr = Konva.Path.parsePathData(this.path)\n      return {\n        clipFunc(context) {\n          // from https://github.com/konvajs/konva/blob/master/src/shapes/Path.ts\n          context.beginPath()\n          for (var n = 0; n < arr.length; n++) {\n            var c = arr[n].command\n            var p = arr[n].points\n            switch (c) {\n              case 'L':\n                context.lineTo(p[0], p[1])\n                break\n              case 'M':\n                context.moveTo(p[0], p[1])\n                break\n              case 'C':\n                context.bezierCurveTo(p[0], p[1], p[2], p[3], p[4], p[5])\n                break\n              case 'Q':\n                context.quadraticCurveTo(p[0], p[1], p[2], p[3])\n                break\n              case 'A':\n                var cx = p[0],\n                  cy = p[1],\n                  rx = p[2],\n                  ry = p[3],\n                  theta = p[4],\n                  dTheta = p[5],\n                  psi = p[6],\n                  fs = p[7]\n                var r = rx > ry ? rx : ry\n                var scaleX = rx > ry ? 1 : rx / ry\n                var scaleY = rx > ry ? ry / rx : 1\n                context.translate(cx, cy)\n                context.rotate(psi)\n                context.scale(scaleX, scaleY)\n                context.arc(0, 0, r, theta, theta + dTheta, 1 - fs)\n                context.scale(1 / scaleX, 1 / scaleY)\n                context.rotate(-psi)\n                context.translate(-cx, -cy)\n                break\n              case 'z':\n                context.closePath()\n                break\n            }\n          }\n        },\n      }\n    },\n\n    // Color to render as\n    color() {\n      const color = this.baseColor\n      const saturOffset = 2.5\n      const luminOffset = 0.15\n      if (this.mouseOver && this.isHighlighted)\n        return colorSaturation(color, saturOffset)\n      else if (this.isHighlighted)\n        return colorLuminance(colorSaturation(color, saturOffset), -luminOffset)\n      else if (this.mouseOver) return colorLuminance(color, luminOffset)\n      else return '#' + color\n    },\n\n    // Whether or not the territory is highlighted\n    isHighlighted() {\n      return exists(this.highlight)\n    },\n  },\n}\n</script>\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-group',[_c('v-path',{attrs:{\"config\":_vm.pathConfig},on:{\"mouseover\":_vm.handleMouseOver,\"mouseout\":_vm.handleMouseOut,\"mouseup\":_vm.handleMouseUp,\"tap\":function($event){return _vm.handleMouseUp({evt: {which: 1}}, true)}}}),_vm._v(\" \"),(_vm.isHighlighted)?_c('v-group',{attrs:{\"config\":_vm.clipConfig}},[_c('v-path',{attrs:{\"config\":_vm.highlightConfig}})],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"stage-wrapper\" ref=\"stageWrapper\" @contextmenu.prevent=\"void 0\">\n    <v-stage :config=\"stageConfig\" ref=\"stage\" class=\"stage\" @mousedown=\"handleMouseDown\">\n      <v-layer>\n        <v-rect\n          :config=\"{\n          x: -50000,\n          y: -50000,\n          width: 100000,\n          height: 100000,\n          fill: '#1d2951'}\"\n        ></v-rect>\n        <v-line\n          v-for=\"waterConnection in waterConnectionConfigs\"\n          :key=\"waterConnection.num\"\n          :config=\"waterConnection\"\n        ></v-line>\n      </v-layer>\n      <v-layer>\n        <v-territory\n          v-for=\"(territory, index) in territoryData\"\n          :key=\"index\"\n          :castle=\"territory.castle\"\n          :highlight=\"territory.highlight\"\n          :baseColor=\"territory.baseColor\"\n          :path=\"territory.path\"\n          @territory-click-raw=\"(left, isTouch) => handleTerritoryMouseUp(index, left, isTouch)\"\n        ></v-territory>\n      </v-layer>\n      <v-layer ref=\"castleLayer\">\n        <v-castle-icon\n          v-for=\"castle in castleData\"\n          v-bind=\"castle\"\n          :key=\"castle.num\"\n          :onLoad=\"handleCastleIconLoad\"\n        ></v-castle-icon>\n        <v-army-shape v-for=\"army in armyData\" v-bind=\"army\" :key=\"army.num\"></v-army-shape>\n      </v-layer>\n    </v-stage>\n    <div class=\"stage-fill\"></div>\n  </div>\n</template>\n\n<script>\nimport { clamp, distance, exists, logError } from './util'\nimport { log } from '../index'\nimport dataFile from './data'\n\n// Components\nimport ArmyShape from './ArmyShape'\nimport CastleIcon from './CastleIcon'\n\n// hook Konva\nimport VueKonva from 'vue-konva'\nimport Vue from 'vue'\nimport Territory from './Territory'\nVue.use(VueKonva)\n\nexport default {\n  props: {\n    // Initial scale (optional)\n    initialScale: Number,\n    // Stage height (optional)\n    height: Number,\n  },\n\n  components: {\n    'v-army-shape': ArmyShape,\n    'v-territory': Territory,\n    'v-castle-icon': CastleIcon,\n  },\n\n  data() {\n    return {\n      // DOM object for the stage, gotten through refs upon mount\n      stageObj: undefined,\n      // Current stage dimensions updated upon resize\n      stageDimensions: {\n        w: 400,\n        h: this.height,\n      },\n      // Current touch state (unused if on desktop)\n      touchState: {\n        lastDist: 0,\n        point: undefined,\n      },\n      // Current scale bounds (may be updated upon initialization as appropriate)\n      scaleBounds: {\n        min: 0.8,\n        max: 5,\n      },\n      // Current index of territory with mouse over\n      mouseOver: -1,\n      armyData: dataFile.armyData,\n      // Last click location\n      mouseDownLoc: {\n        x: 0,\n        y: 0,\n      },\n    }\n  },\n\n  computed: {\n    // Configuration objects for the stage\n    stageConfig() {\n      return {\n        // Depend on dimensions changed upon resize\n        width: this.stageDimensions.w,\n        height: this.stageDimensions.h,\n        draggable: true,\n        // Clamp dragging\n        dragBoundFunc: pos => this.clampPosition(pos),\n      }\n    },\n\n    // *****************\n    // Rendering configs\n    // *****************\n\n    // Creates array of territory data\n    territoryData() {\n      return dataFile.territoryData\n    },\n\n    // Config data for water connection paths\n    waterConnectionConfigs() {\n      return dataFile.waterConnectionConfigs\n    },\n\n    // Rendering data for each castle\n    castleData() {\n      return dataFile.castleData\n    },\n\n    // Gets the size of the gameboard from the store\n    gameboardSize() {\n      return dataFile.gameboardSize\n    },\n  },\n\n  methods: {\n    // ***************\n    // Utility methods\n    // ***************\n\n    // Calculates the initial position & scale of the map in the viewport\n    calculateInitialTransform() {\n      const bounds = this.stageDimensions\n      const totalW = bounds.w\n      const totalH = bounds.h\n      const size = this.gameboardSize\n\n      let k\n      if (exists(this.initialScale)) {\n        // use passed in initial scale\n        k = this.initialScale\n        log(`Using non-default scale ${k.toFixed(2)}`, 'Vue')\n      } else {\n        // make initial map take up 3/4 of smaller dimension\n        const margin = Math.min(totalW, totalH) / 8\n        const kw = (totalW - 2 * margin) / size.a\n        const kh = (totalH - 2 * margin) / size.b\n        k = Math.min(kw, kh)\n        log(`Calculating default fit scale ${k.toFixed(2)}`, 'Vue')\n      }\n      return {\n        x: (totalW - size.a * k) / 2,\n        y: (totalH - size.b * k) / 2,\n        scale: k,\n      }\n    },\n\n    // Translates the pointer mouse pointer minus the stage offset\n    relativePointer(clientX, clientY, stage) {\n      return {\n        x: clientX - stage.getContent().offsetLeft,\n        y: clientY - stage.getContent().offsetTop,\n      }\n    },\n\n    // Clamps the scale according to the current bounds\n    clampScale(scale) {\n      return clamp(scale, this.scaleBounds.min, this.scaleBounds.max)\n    },\n\n    // Clamps the position according to newly calculated position bounds\n    clampPosition(pos) {\n      const bounds = this.calculatePositionBounds()\n      return {\n        x: clamp(pos.x, bounds.x.min, bounds.x.max),\n        y: clamp(pos.y, bounds.y.min, bounds.y.max),\n      }\n    },\n\n    // Calculates the position bounds according to the current scale & dimensions\n    calculatePositionBounds() {\n      if (exists(this.stageObj)) {\n        const scale = this.stageObj.scale()\n        const bounds = this.stageDimensions\n        const size = this.gameboardSize\n        return {\n          x: this.axisBounds(size.a * scale.x, bounds.w),\n          y: this.axisBounds(size.b * scale.y, bounds.h),\n        }\n      } else {\n        logError('StageObj or Gameboard are undefined. Ignoring')\n        // default value\n        return {\n          x: {\n            min: 0,\n            max: 1,\n          },\n          y: {\n            min: 0,\n            max: 1,\n          },\n        }\n      }\n    },\n\n    // Applies bounds, wrapping as necessary\n    axisBounds(size, bound) {\n      return size < bound\n        ? {\n            min: -(size / 2),\n            max: bound - size / 2,\n          }\n        : {\n            min: bound / 2 - size,\n            max: bound / 2,\n          }\n    },\n\n    // ***************\n    // Event listeners\n    // ***************\n\n    // Handles castle icon loading\n    handleCastleIconLoad() {\n      if (exists(this.$refs) && exists(this.$refs.castleLayer)) {\n        this.$refs.castleLayer.getStage().batchDraw()\n        log('Calling batch draw on castle layer', 'Vue', 'GameCanvas')\n      } else {\n        logError('StageWrapper not found. Skipping icon-driven redraw')\n      }\n    },\n\n    // Handles territory clicks\n    handleTerritoryMouseUp(index, left, isTouch) {\n      if (exists(this.stageObj)) {\n        if (!isTouch) {\n          // Exit if in a full drag\n          const mousePos = this.stageObj.getPointerPosition()\n          const distSquared =\n            (mousePos.x - this.mouseDownLoc.x) ** 2 +\n            (mousePos.y - this.mouseDownLoc.y) ** 2\n          if (distSquared > 144) return\n        }\n\n        if (left) {\n          ++this.armyData[index].size\n        } else if (this.armyData[index].size > 0) {\n          --this.armyData[index].size\n        }\n      } else {\n        logError('Stage object not found. Skipping mouse up event')\n      }\n    },\n\n    // Handle stage mouse down\n    handleMouseDown() {\n      if (exists(this.stageObj)) {\n        this.mouseDownLoc = this.stageObj.getPointerPosition()\n      } else {\n        logError('Stage object not found. Skipping mouse down event')\n      }\n    },\n\n    // Handles resize events\n    handleResize() {\n      if (exists(this.$refs) && exists(this.$refs.stageWrapper)) {\n        this.stageDimensions = {\n          w: this.$refs.stageWrapper.clientWidth,\n          h: this.$refs.stageWrapper.clientHeight,\n        }\n      } else {\n        logError('StageWrapper not found. Skipping resize event')\n      }\n    },\n\n    // Handles scroll wheel input (event callback)\n    handleScroll(event) {\n      const stage = this.stageObj\n      if (exists(stage)) {\n        event.preventDefault()\n        const oldScale = stage.scaleX()\n\n        const pointer = stage.getPointerPosition()\n        const startPos = {\n          x: pointer.x / oldScale - stage.x() / oldScale,\n          y: pointer.y / oldScale - stage.y() / oldScale,\n        }\n\n        let deltaYBounded = 0\n        if (!(event.deltaY % 1)) {\n          deltaYBounded = Math.abs(Math.min(-10, Math.max(10, event.deltaY)))\n        } else {\n          // noinspection JSSuspiciousNameCombination\n          deltaYBounded = Math.abs(event.deltaY)\n        }\n        const scaleBy = 1.01 + deltaYBounded / 70\n        let newScale = 0\n        if (event.deltaY > 0) {\n          newScale = oldScale / scaleBy\n        } else {\n          newScale = oldScale * scaleBy\n        }\n        newScale = this.clampScale(newScale)\n        stage.scale({ x: newScale, y: newScale })\n\n        const newPosition = {\n          x: (pointer.x / newScale - startPos.x) * newScale,\n          y: (pointer.y / newScale - startPos.y) * newScale,\n        }\n        stage.position(this.clampPosition(newPosition))\n        stage.batchDraw()\n      } else {\n        logError('StageObj not found. Scroll events will not work')\n      }\n    },\n\n    // Handles touch move input (event callback)\n    handleTouchMove(event) {\n      if (!exists(event.touches)) return\n      const t1 = event.touches[0]\n      const t2 = event.touches[1]\n      if (t1 && t2) {\n        event.preventDefault()\n        event.stopPropagation()\n        const stage = this.stageObj\n        const touchState = this.touchState\n        if (exists(stage)) {\n          const oldScale = stage.scaleX()\n          const dist = distance(\n            { x: t1.clientX, y: t1.clientY },\n            { x: t2.clientX, y: t2.clientY }\n          )\n          if (!touchState.lastDist) touchState.lastDist = dist\n          const delta = dist - touchState.lastDist\n          const px = (t1.clientX + t2.clientX) / 2\n          const py = (t1.clientY + t2.clientY) / 2\n          let pointer = {}\n          if (typeof touchState.point === 'undefined') {\n            pointer = this.relativePointer(px, py, stage)\n            touchState.point = pointer\n          } else {\n            pointer = touchState.point\n          }\n          const startPos = {\n            x: pointer.x / oldScale - stage.x() / oldScale,\n            y: pointer.y / oldScale - stage.y() / oldScale,\n          }\n          const scaleBy = 1.01 + Math.abs(delta) / 100\n          const newScale = this.clampScale(\n            delta < 0 ? oldScale / scaleBy : oldScale * scaleBy\n          )\n          stage.scale({ x: newScale, y: newScale })\n          const newPosition = {\n            x: (pointer.x / newScale - startPos.x) * newScale,\n            y: (pointer.y / newScale - startPos.y) * newScale,\n          }\n          stage.position(this.clampPosition(newPosition))\n          stage.batchDraw()\n          // Update touch state\n          touchState.lastDist = dist\n        } else {\n          logError('StageObj not found. Touch events will not work')\n        }\n      }\n    },\n\n    // Handles touch end input (event callback)\n    handleTouchEnd() {\n      // Reset touch state\n      this.touchState.lastDist = 0\n      this.touchState.point = undefined\n    },\n\n    // Handles mouse down on the document node (event callback)\n    handleDocumentMouseDown(e) {\n      if (e.button !== 0) this.stageObj.draggable(false)\n    },\n\n    // Handles mouse up on the document node (event callback)\n    handleDocumentMouseUp(e) {\n      this.stageObj.draggable(true)\n    },\n\n    // Attach event listeners upon mounting\n    attachEventListeners(stageRef) {\n      window.addEventListener('resize', this.handleResize)\n      document.addEventListener('mousedown', this.handleDocumentMouseDown)\n      document.addEventListener('mouseup', this.handleDocumentMouseUp)\n      // attach events to the stage\n      if (exists(stageRef)) {\n        stageRef.addEventListener('wheel', this.handleScroll)\n        stageRef.addEventListener('touchmove', this.handleTouchMove)\n        stageRef.addEventListener('touchend', this.handleTouchEnd)\n      } else {\n        logError('StageRef not found. Canvas events will not work')\n      }\n    },\n\n    // Detach any event listeners upon being destroyed\n    detachEventListeners(stageRef) {\n      window.removeEventListener('resize', this.handleResize)\n      document.removeEventListener('mousedown', this.handleDocumentMouseDown)\n      document.removeEventListener('mouseup', this.handleDocumentMouseUp)\n      if (exists(stageRef)) {\n        stageRef.removeEventListener('wheel', this.handleScroll)\n        stageRef.removeEventListener('touchmove', this.handleTouchMove)\n        stageRef.removeEventListener('touchend', this.handleTouchEnd)\n      }\n    },\n\n    // *********************\n    // Async synchronization\n    // *********************\n\n    // Attempts to unlock the GUI side of the async initialization lock\n    unlockInitialization() {\n      this.initializeTransforms()\n    },\n\n    // Initializes transforms once information from the server is loaded\n    initializeTransforms() {\n      const dims = {\n        w: this.$refs.stageWrapper.clientWidth,\n        h: this.$refs.stageWrapper.clientHeight,\n      }\n      log(\n        `Loaded stage dimensions from globals: { w: ${dims.w}, h: ${dims.h} }`,\n        'Vue'\n      )\n      const stage = this.stageObj\n      const initialTransform = this.calculateInitialTransform()\n      const scaleBounds = this.scaleBounds\n      if (exists(stage)) {\n        // Scale\n        stage.scale({\n          x: initialTransform.scale,\n          y: initialTransform.scale,\n        })\n        // Translate\n        stage.x(initialTransform.x)\n        stage.y(initialTransform.y)\n        // Update scale bounds\n        scaleBounds.min = Math.min(scaleBounds.min, initialTransform.scale)\n        scaleBounds.max = Math.max(scaleBounds.max, initialTransform.scale)\n      } else {\n        logError('StageObj not found. Canvas will not be positioned')\n      }\n    },\n  },\n\n  // Mounted lifecycle hook\n  mounted() {\n    this.$nextTick(function() {\n      // initialize canvas dimensions\n      this.handleResize()\n      if (exists(this.$refs.stage)) {\n        // load the stageObj\n        this.stageObj = this.$refs.stage.getStage()\n        this.attachEventListeners(this.stageObj.getContent())\n        this.unlockInitialization()\n      }\n    })\n  },\n\n  // Destruction lifecycle hook\n  beforeDestroy() {\n    this.detachEventListeners(this.stageObj.getContent())\n  },\n}\n</script>\n","import { render, staticRenderFns } from \"./GameCanvas.vue?vue&type=template&id=e7bcb0bc&\"\nimport script from \"./GameCanvas.vue?vue&type=script&lang=js&\"\nexport * from \"./GameCanvas.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["Object","defineProperty","exports","value","Global_1","now","glob","performance","Date","getTime","Animation","func","layers","this","id","animIdCounter","frame","time","timeDiff","lastTime","frameRate","setLayers","prototype","lays","length","getLayers","addLayer","layer","n","len","_id","push","isRunning","animations","start","stop","_addAnimation","_removeAnimation","_updateFrameObject","anim","_handleAnimation","splice","_runFrames","i","layersLen","key","layerHash","call","undefined","hasOwnProperty","draw","_animationLoop","Anim","requestAnimationFrame","animRunning","_extendStatics","__extends","d","b","setPrototypeOf","__proto__","Array","p","__","constructor","create","Util_1","Container_1","Node_1","Factory_1","Canvas_1","BaseLayer","_super","config","_this","canvas","SceneCanvas","_waitingForDraw","on","_checkVisibility","_checkSmooth","createPNGStream","_canvas","getCanvas","getHitCanvas","hitCanvas","getContext","clear","bounds","setZIndex","index","stage","getStage","content","removeChild","getChildren","insertBefore","appendChild","moveToTop","Node","moveUp","moveDown","children","moveToBottom","getLayer","remove","parentNode","Util","_isInDocument","parent","setSize","_a","width","height","_toKonvaCanvas","getWidth","getHeight","x","y","visible","style","display","_context","imageSmoothingEnabled","setWidth","warn","setHeight","getIntersection","pos","selector","batchDraw","requestAnimFrame","_applyTransform","shape","context","top","m","getAbsoluteTransform","getMatrix","transform","Container","nodeType","Factory","addGetterSetter","Collection","mapMethods","_pixelRatio","Context_1","Validators_1","Canvas","pixelRatio","isCache","Konva","createCanvasElement","_global","devicePixelRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","getDevicePixelRatio","padding","margin","border","background","position","left","getPixelRatio","setPixelRatio","previousRatio","scale","toDataURL","mimeType","quality","e","err","error","message","getNumberValidator","SceneContext","HitCanvas","HitContext","DragAndDrop_1","apply","arguments","filterFunc","results","each","child","hasChildren","removeChildren","destroyChildren","destroy","add","getParent","moveTo","_validateAdd","_fire","isDragging","DD","find","_generalFind","get","findOne","result","retArr","_descendants","node","valid","_isMatch","toCollection","fn","toObject","obj","_getDescendants","arr","isAncestorOf","clone","no","getAllIntersections","isVisible","intersects","_setChildrenIndices","drawScene","can","caching","cachedCanvas","_getCanvasCache","cachedSceneCanvas","scene","save","_drawCachedSceneCanvas","restore","_drawChildren","drawHit","cachedHitCanvas","hit","shouldDrawHit","_drawCachedHitCanvas","drawMethod","skipBuffer","skipComposition","clipX","clipY","clipWidth","clipHeight","clipFunc","hasClip","beginPath","rect","clip","copy","invert","hasComposition","globalCompositeOperation","_applyGlobalCompositeOperation","layerUnderDrag","indexOf","hitGraphEnabled","getClientRect","attrs","minX","minY","maxX","maxY","skipTransform","relativeTo","selfRect","Infinity","that","skipShadow","skipStroke","Math","min","max","shapes","hasVisible","_isVisible","_transformedRect","addComponentsGetterSetter","CONTEXT_METHODS","Context","enableTrace","traceArr","_enableTrace","fillShape","getFillEnabled","_fill","strokeShape","getStrokeEnabled","_stroke","fillStrokeShape","getTrace","relaxed","trace","method","args","str","_isArray","join","property","val","clearTrace","_trace","shift","reset","setTransform","clearRect","_applyLineCap","lineCap","getLineCap","setAttr","_applyOpacity","absOpacity","getAbsoluteOpacity","_applyLineJoin","lineJoin","getLineJoin","attr","arc","a0","a1","a2","a3","a4","a5","arcTo","bezierCurveTo","closePath","createImageData","a","createLinearGradient","createPattern","createRadialGradient","drawImage","a6","a7","a8","ellipse","isPointInPath","fill","fillRect","strokeRect","fillText","measureText","text","getImageData","lineTo","putImageData","quadraticCurveTo","rotate","setLineDash","getLineDash","stroke","strokeText","translate","_simplifyArray","origSetter","methodName","ret","origMethod","slice","prop","getGlobalCompositeOperation","forEach","set","_fillColor","_fillFunc","_fillPattern","fillPatternX","getFillPatternX","fillPatternY","getFillPatternY","fillPatternScaleX","getFillPatternScaleX","fillPatternScaleY","getFillPatternScaleY","fillPatternRotation","getAngle","getFillPatternRotation","fillPatternOffsetX","getFillPatternOffsetX","fillPatternOffsetY","getFillPatternOffsetY","_getFillPattern","_fillLinearGradient","grd","_getLinearGradient","_fillRadialGradient","_getRadialGradient","hasColor","fillPriority","getFillPriority","hasPattern","getFillPatternImage","hasLinearGradient","getFillLinearGradientColorStops","hasRadialGradient","getFillRadialGradientColorStops","_strokeLinearGradient","getStrokeLinearGradientStartPoint","end","getStrokeLinearGradientEndPoint","colorStops","getStrokeLinearGradientColorStops","addColorStop","dash","strokeScaleEnabled","getStrokeScaleEnabled","hasStroke","dashEnabled","dashOffset","strokeWidth","getShadowForStrokeEnabled","_strokeFunc","_applyShadow","util","color","getShadowRGBA","blur","getShadowBlur","offset","getShadowOffset","getAbsoluteScale","ratio","scaleX","scaleY","abs","colorKey","_fillFuncHit","hitStrokeWidth","_strokeFuncHit","Animation_1","startPointerPos","dirty","justDragged","_drag","evt","getPointerPosition","setPointersPositions","dragDistance","fire","type","target","_setDragPosition","_endDragBefore","listenClickTap","dragEndNode","drawNode","_endDragAfter","isBrowser","window","addEventListener","GET","SET","def","validator","after","addGetter","addSetter","addOverloadedGetterSetter","_capitalize","overWriteSetter","_setAttr","components","component","capitalize","getter","setter","getAttr","basicValidator","getComponentValidator","oldVal","_fireChangeEvent","capitalizedAttr","addDeprecatedGetterSetter","backCompat","methods","oldMethodName","newMethodName","oldGetter","oldSetter","deprecated","afterSetFilter","_filterUpToDate","BaseLayer_1","FastLayer","getType","throw","_setCanvasSize","clearBeforeDraw","_registerNode","PI_OVER_180","PI","_detectIE","ua","msie","parseInt","substring","rv","edge","_parseUA","userAgent","toLowerCase","match","exec","mobile","ieMobile","browser","version","isIE","g","WorkerGlobalScope","self","toString","isUnminified","test","param","dblClickWindow","angle","angleDeg","_pointerEventsEnabled","inDblClickWindow","showWarnings","dragButtons","isDragReady","UA","navigator","document","_injectGlobal","_NODES_REGISTRY","NodeClass","getClassName","Group","Shape_1","INTERSECTION_OFFSETS","INTERSECTION_OFFSETS_LEN","Layer","intersectionOffset","spiralSearchDistance","continueSearch","_getIntersection","findAncestor","antialiased","round","data","p3","_rgbToHex","enableHitGraph","disableHitGraph","toggleHitCanvas","getBooleanValidator","ids","names","_removeId","_addName","name","_removeName","nodes","ABSOLUTE_OPACITY","ABSOLUTE_TRANSFORM","ABSOLUTE_SCALE","CANVAS","LISTENING","MOUSEENTER","MOUSELEAVE","SHAPE","SPACE","STAGE","TRANSFORM","VISIBLE","CLONE_BLACK_LIST","TRANSFORM_CHANGE_STR","SCALE_CHANGE_STR","emptyChildren","idCounter","eventListeners","_cache","Map","_lastPos","_isUnderCache","setAttrs","_clearCache","_clearSelfAndDescendantCache","delete","_getCache","privateGetter","cache","clearCache","conf","drawBorder","cachedFilterCanvas","sceneContext","hitContext","filter","Error","points","trans","point","transformed","canvasCache","cacheCanvas","_getCachedSceneCanvas","imageData","filters","sceneCanvas","filterCanvas","filterContext","evtStr","handler","_delegate","parts","baseEvent","events","split","off","callback","t","_off","dispatchEvent","removeEventListener","event","stopNode","targets","findAncestors","cloneObject","currentTarget","stopDrag","_remove","subname","_isFunction","getAncestors","ancestors","getAttrs","isListening","_isListening","listening","show","hide","getZIndex","getAbsoluteZIndex","depth","getDepth","addChildren","concat","toArray","setPosition","getPosition","getAbsolutePosition","absoluteMatrix","absoluteTransform","Transform","getTranslation","setAbsolutePosition","it","origTrans","_clearTransform","_setTransform","rotation","offsetX","offsetY","skewX","skewY","move","change","changeX","changeY","_eachAncestorReverse","family","unshift","theta","zIndex","_getAbsoluteOpacity","opacity","newContainer","defaultValue","isObject","_isPlainObject","className","_prepareToStringify","toJSON","JSON","stringify","includeSelf","res","ancestor","sel","selectorArr","replace","isValidSelector","charAt","hasName","_getStage","eventType","bubble","_fireAndBubble","_getAbsoluteTransform","at","transformsEnabled","getTransformsEnabled","multiply","getTransform","getX","getOffsetX","getY","getOffsetY","_getAbsoluteScale","_getTransform","skew","allListeners","listener","box","toCanvas","url","toImage","_urlToImage","img","size","getSize","getDragDistance","evtName","evtListeners","newVal","setId","oldId","_addId","setName","oldNames","newNames","addName","oldName","newName","fullName","removeName","_setComponentAttr","compareShape","stopBubble","cancelBubble","startDrag","ap","dbf","dragBoundFunc","newNodePos","setDraggable","draggable","_dragChange","_listenDrag","_dragCleanup","dd","container","_isString","parse","_createNode","Class","_attrsAffectingSize","getStringValidator","rotateDeg","setRotationDeg","getRotationDeg","Captures","createEvent","pointerId","releaseCapture","releasePointerCapture","PointerEvent","getCapturedShape","hasPointerCapture","setPointerCapture","dummyContext","PointerEvents","HAS_SHADOW","SHADOW_RGBA","patternImage","linearGradient","radialGradient","getDummyContext","_clearHasShadowCache","_clearGetShadowRGBACache","_clearFillPatternCache","_clearLinearGradientCache","_clearRadialGradientCache","Shape","getRandomColor","getSceneFunc","sceneFunc","getHitFunc","hitFunc","hasShadow","_hasShadow","shadowEnabled","shadowOpacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","__getFillPattern","fillPatternImage","fillPatternRepeat","__getLinearGradient","fillLinearGradientColorStops","ctx","fillLinearGradientStartPoint","fillLinearGradientEndPoint","__getRadialGradient","fillRadialGradientColorStops","fillRadialGradientStartPoint","fillRadialGradientEndPoint","fillRadialGradientStartRadius","fillRadialGradientEndRadius","_getShadowRGBA","rgba","colorToRGBA","r","hasFill","strokeEnabled","strokeLinearGradientColorStops","bufferHitCanvas","_useBufferCanvas","perfectDrawEnabled","setStrokeHitEnabled","getStrokeHitEnabled","getSelfRect","_centroid","fillAndStrokeWidth","fillAndStrokeHeight","applyShadow","preWidth","preHeight","blurRadius","roundingOffset","bufferCanvas","bufferContext","drawFunc","o","shadowForStrokeEnabled","drawHitFromCache","alphaThreshold","hitImageData","hitData","rgbColorKey","hitWidth","hitHeight","_hexToRgb","getNumberOrAutoValidator","dashArray","getDashArray","setDashArray","getDrawFunc","setDrawFunc","drawHitFunc","getDrawHitFunc","setDrawHitFunc","Global_2","MOUSEOUT","MOUSEOVER","MOUSEMOVE","MOUSEDOWN","MOUSEUP","POINTERMOVE","POINTERDOWN","POINTERUP","CONTEXTMENU","CLICK","DBL_CLICK","TOUCHSTART","TOUCHEND","DBL_TAP","TOUCHMOVE","WHEEL","EVENTS","eventsLength","addEvent","eventName","checkNoClip","stages","Stage","_buildDOM","_bindContentEvents","_resizeDOM","isLayer","isFastLayer","setContainer","getElementsByClassName","getElementById","parentElement","createElement","pointerPos","getContent","layerCanvas","_mouseenter","_mouseover","_mouseout","targetShape","_mousemove","_touchmove","differentTarget","cancelable","preventDefault","_mousedown","_touchstart","clickStartShape","_mouseup","_touchend","clickEndShape","fireDblClick","clearTimeout","dblTimeout","setTimeout","_contextmenu","tapStartShape","_wheel","_pointerdown","_pointermove","_pointerup","_pointercancel","_lostpointercapture","contentPosition","_getContentPosition","touches","touch","clientX","clientY","_setPointerPosition","getBoundingClientRect","innerHTML","userSelect","setAttribute","blacklist","duration","easing","onFinish","yoyo","colorAttrs","TweenEngine","propFunc","begin","finish","_pos","_change","prevPos","_time","_position","_startTime","_finish","pause","setTime","reverse","play","update","state","getTimer","onEnterFrame","seek","Tween","nodeId","Easings","Linear","tween","_tweenFunc","_addListeners","tweens","_addAttr","onReset","diff","tweenId","trueEnd","trueStart","endRGBA","_prepareArrayForTween","closed","startRGBA","onPlay","onReverse","onPause","thisId","to","params","BackEaseIn","c","s","BackEaseOut","BackEaseInOut","ElasticEaseIn","asin","pow","sin","ElasticEaseOut","ElasticEaseInOut","BounceEaseOut","BounceEaseIn","BounceEaseInOut","EaseIn","EaseOut","EaseInOut","StrongEaseIn","StrongEaseOut","StrongEaseInOut","collection","_mapMethod","prot","sx","sy","rad","cos","m11","m12","m21","m22","matrix","dx","dy","m0","m1","m2","m3","m4","m5","yt","xt","PI_OVER_DEG180","DEG180_OVER_PI","KONVA_ERROR","COLORS","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","transparent","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","RGB_REGEX","animQueue","_isElement","_isNumber","isNaN","isFinite","_isBoolean","firstChar","toUpperCase","_sign","number","queue","cb","createImageElement","el","imageObj","Image","onload","src","hex","bigint","randColor","random","getRGB","rgb","substr","_namedColorToRBA","_hex3ColorToRGBA","_hex6ColorToRGBA","_rgbColorToRGBA","_rgbaColorToRGBA","map","Number","haveIntersection","r1","r2","retObj","cloneArray","_degToRad","deg","_radToDeg","console","extend","Ctor","oldProto","__super__","super","_getControlPoints","x0","y0","x1","y1","x2","y2","d01","sqrt","d12","fa","fb","_expandPoints","tension","cp","allPoints","_inRange","right","_getProjectionToSegment","x3","y3","dist","pd2","u","_getProjectionToLine","pt","line","isClosed","pc","MAX_VALUE","p1","p2","proj","px","py","pdist","startArray","endArray","temp","newStart","pr","desc","visitedByCircularReferenceRemoval","getOwnPropertyDescriptor","configurable","_assign","source","_formatValue","RGBComponent","alphaComponent","getFunctionValidator","getNumberArrayValidator","item","Stage_1","Layer_1","FastLayer_1","Group_1","Tween_1","_CoreInternals_1","Arc_1","Arrow_1","Circle_1","Ellipse_1","Image_1","Label_1","Line_1","Path_1","Rect_1","RegularPolygon_1","Ring_1","Sprite_1","Star_1","Text_1","TextPath_1","Transformer_1","Wedge_1","Blur_1","Brighten_1","Contrast_1","Emboss_1","Enhance_1","Grayscale_1","HSL_1","HSV_1","Invert_1","Kaleidoscope_1","Mask_1","Noise_1","Pixelate_1","Posterize_1","RGB_1","RGBA_1","Sepia_1","Solarize_1","Threshold_1","Arc","Arrow","Circle","Ellipse","Label","Tag","Line","Path","Rect","RegularPolygon","Ring","Sprite","Star","Text","TextPath","Transformer","Wedge","Filters","Blur","Brighten","Contrast","Emboss","Enhance","Grayscale","HSL","HSV","Invert","Kaleidoscope","Mask","Noise","Pixelate","Posterize","RGB","RGBA","Sepia","Solarize","Threshold","BlurStack","next","mul_table","shg_table","radius","yp","yi","yw","r_sum","g_sum","b_sum","a_sum","r_out_sum","g_out_sum","b_out_sum","a_out_sum","r_in_sum","g_in_sum","b_in_sum","a_in_sum","pg","pb","pa","rbs","pixels","div","widthMinus1","heightMinus1","radiusPlus1","sumFactor","stackStart","stackEnd","stack","stackIn","stackOut","mul_sum","shg_sum","filterGaussBlurRGBA","brightness","adjust","contrast","nPixels","strength","embossStrength","greyLevel","embossWhiteLevel","direction","embossDirection","blend","embossBlend","dirY","dirX","w","h","w4","otherY","offsetYOther","otherX","offsetOther","dR","dG","dB","dif","absDif","remap","fromValue","fromMin","fromMax","toMin","toMax","fromRange","toRange","nSubPixels","rMin","rMax","gMin","gMax","bMin","bMax","enhanceAmount","enhance","rMid","rGoalMax","rGoalMin","gMid","gGoalMax","gGoalMin","bMid","bGoalMax","bGoalMin","saturation","hue","l","luminance","vsu","vsw","rr","rg","rb","gr","gg","gb","br","bg","bb","v","srcPos","dstPos","xSize","ySize","power","kaleidoscopePower","kaleidoscopeAngle","floor","tempCanvas","scratchData","dst","opt","srcPixels","dstPixels","xMid","polarCenterX","yMid","polarCenterY","rSize","tSize","conversion","ToPolar","minSectionSize","sectionSize","ceil","xStart","xEnd","xDelta","phaseShift","polarRotation","atan2","FromPolar","pixelAt","idata","idx","rgbDistance","mask","threshold","rgbv_no","rgbv_ne","rgbv_so","rgbv_se","thres","mean","pTab","rgbMean","backgroundMask","applyMask","sw","sh","weights","side","halfSide","maskResult","so","cy","cx","scy","scx","wt","smoothEdgeMask","dilateMask","erodeMask","amount","noise","half","alpha","xBinStart","xBinEnd","yBinStart","yBinEnd","xBin","yBin","pixelsInBin","pixelSize","nBinsX","nBinsY","levels","ia","level","module","_sceneFunc","clockwise","outerRadius","innerRadius","PI2","tp","fromTension","getTensionPoints","radians","pointerLength","pointerWidth","pointerAtBeginning","isDashEnabled","rx","radiusX","ry","radiusY","cropWidth","cropHeight","image","cropX","cropY","_hitFunc","fromURL","crossOrigin","ATTR_CHANGE_LIST","UP","RIGHT","DOWN","LEFT","attrChangeListLen","_sync","getText","getTag","pointerDirection","pointerHeight","tag","cornerRadius","bezier","_getTensionPoints","_getTensionPointsClosed","firstControlPoints","lastControlPoints","middle","dataArray","pathLength","parsePathData","ca","command","dTheta","psi","fs","getLength","getPointAtLength","ii","getPointOnLine","getPointOnCubicBezier","getPointOnQuadraticBezier","getPointOnEllipticalArc","getLineLength","P1x","P1y","P2x","P2y","fromX","fromY","run","rise","ix","iy","pRise","pRun","pct","P3x","P3y","P4x","P4y","CB1","CB2","CB3","CB4","QB1","QB2","QB3","cosPsi","sinPsi","cs","cc","RegExp","coords","cpx","cpy","re","j","jlen","parsed","parseFloat","prevCmd","ctlPtx","ctlPty","cmd","startX","startY","convertEndpointToCenterParameterization","calcLength","path","inc","psiDeg","xp","lambda","f","cxp","cyp","vMag","vRatio","vAngle","acos","topLeft","topRight","bottomLeft","bottomRight","sides","PIx2","_updated","updated","frameIndex","clearInterval","interval","_setInterval","animation","ix4","offsets","frameOffsets","ix2","setInterval","_updateIndex","getIndex","setIndex","numPoints","AUTO","JUSTIFY","MIDDLE","NORMAL","checkDefaultFill","_partialTextX","_partialTextY","_setTextData","fontSize","lineHeightPx","lineHeight","textArr","textArrLen","verticalAlign","alignY","align","totalWidth","letterSpacing","textDecoration","shouldUnderline","shouldLineThrough","translateY","lineTranslateX","lineTranslateY","_getContextFont","spacesNumber","oneWord","lineWidth","lastLine","strokeStyle","li","letter","_partialText","measureSize","setText","getTextWidth","textWidth","getTextHeight","textHeight","metrics","font","fontStyle","fontFamily","fontVariant","_addTextLine","trim","_getTextWidth","lines","fixedWidth","fixedHeight","maxWidth","maxHeightPx","currentHeightPx","wrap","shouldWrap","wrapAtWord","shouldAddEllipsis","ellipsis","additionalWidth","low","high","matchWidth","mid","substrWidth","wrapIndex","nextChar","lastIndexOf","trimRight","trimLeft","partialText","dummyCanvas","kerningFunc","textBaseline","glyphInfo","p0","_getTextSize","textFullWidth","fullPathWidth","pathCmd","charArr","pIndex","currentT","getNextPathSegment","pathData","findSegmentToFitCharacter","glyphWidth","currLen","attempts","cumulativePathLength","needNewSegment","k","kern","midpoint","transposeX","transposeY","info","NODE_RECT","ANGLES","ANCHORS_NAMES","_transforming","_createElements","_handleMouseMove","bind","_handleMouseUp","getNode","attachTo","setNode","_node","detach","_resetTransformCache","additionalEvents","onChange","_getNodeRect","__getNodeRect","ignoreStroke","getRotation","_createBack","_createAnchor","anchor","_handleMouseDown","isMirrored","cursor","anchorName","getCursor","_cursorChange","back","tr","rotateEnabled","rotateAnchorOffset","movingResizer","hypotenuse","newHypotenuse","resizerNode","zeroPoint","newAbsPos","keepProportion","keepRatio","shiftKey","dAlpha","rot","newRotation","newAlpha","snaps","rotationSnaps","_fitNodeInto","absPos","centeredScaling","altKey","topOffsetX","topOffsetY","bottomOffsetX","bottomOffsetY","_removeEvents","newAttrs","boundBoxFunc","oldAttrs","pure","forceUpdate","invertedScale","enabledAnchors","resizeEnabled","anchorSize","anchorStroke","anchorStrokeWidth","anchorFill","anchorCornerRadius","scaledRotateAnchorOffset","borderEnabled","borderStroke","borderStrokeWidth","borderDash","isTransforming","stopTransform","lineEnabled","rotateHandlerOffset","enabledHandlers","getAngleDeg","setAngleDeg","factory","__WEBPACK_EXTERNAL_MODULE__0__","__WEBPACK_EXTERNAL_MODULE__2__","modules","installedModules","moduleId","enumerable","Symbol","toStringTag","mode","__esModule","ns","object","__webpack_exports__","external_root_Vue_commonjs2_vue_commonjs_vue_amd_vue_","updatePicture","drawingNode","propsToSkip","elm","isRootInsert","EVENTS_NAMESPACE","applyNodeProps","vueComponent","props","oldProps","useStrict","instance","_konvaNode","updatedProps","hasUpdates","isEvent","propChanged","_key","_isEvent","toAdd","_eventName","createListener","output","keys","findKonvaNode","$options","$children","checkOrder","$vnode","konvaNode","needRedraw","componentOptions","componentInstance","tagName","_extends","assign","render","$slots","default","watch","uploadKonva","deep","__useStrictMode","Boolean","created","mounted","$el","validateChildren","beforeDestroy","$attrs","$listeners","KonvaNode_extends","CONTAINERS","nameNode","_ref","initKonva","$parent","destroyed","VueComponent","VueKonva","install","Vue","options","prefixToUse","prefix","use","_interopDefault","ex","React","ReactDOM","_typeof","iterator","classCallCheck","Constructor","TypeError","createClass","defineProperties","descriptor","writable","protoProps","staticProps","inherits","subClass","superClass","objectWithoutProperties","possibleConstructorReturn","ReferenceError","slicedToArray","isArray","_arr","_n","_d","_e","_s","_i","done","sliceIterator","VUE_COMPONENT_NAME","wrapReactChildren","VueContainer","_React$Component","getPrototypeOf","currentVueComponent","createVueInstance","element","prevComponent","nextProps","updateVueComponent","vueInstance","$data","$destroy","targetElement","reactThisBinding","_components","_reactThisBinding$pro","vueInstanceOptions","ReactWrapper","nextComponent","$forceUpdate","ref","Component","mountReactComponent","_this2","_class","_temp","ReactInVue","_state","rest","wrappedChildren","wrapVueChildren","displayName","makeReactContainer","$props","passedProps","reactComponentRef","$refs","react","unmountComponentAtNode","setState","inheritAttrs","newValue","isReactComponent","$$typeof","isReactForwardReference","isVue","VueResolver$$1","VuePlugin","Vue$$1","originalComponentsMergeStrategy","optionMergeStrategies","_len","mergedValue","wrappedComponents","entries","reduce","acc","_ref2","global","TO_STRING_TAG_SUPPORT","isCallable","classofRaw","TO_STRING_TAG","wellKnownSymbol","CORRECT_ARGUMENTS","O","tryGet","callee","PROPER_FUNCTION_NAME","fails","whitespaces","METHOD_NAME","uncurryThis","requireObjectCoercible","whitespace","ltrim","rtrim","createMethod","TYPE","$this","string","String","classof","argument","$","$trimEnd","FORCED","forcedStringTrimMethod","trimEnd","proto","forced","$trimStart","trimStart","GameCanvas","VueInterop","mount","componentDidMount","preload","require","log","passthroughProps","colorLuminance","lum","componentToHex","hexToRgb","colorSaturation","sat","hsv","rgbToHsv","q","hsvToRgb","clamp","num","exists","logError","normalizeComponent","scriptExports","staticRenderFns","functionalTemplate","injectStyles","scopeId","moduleIdentifier","shadowMode","hook","_compiled","functional","_scopeId","ssrContext","__VUE_SSR_CONTEXT__","_registeredComponents","_ssrRegister","$root","shadowRoot","_injectStyles","originalRender","existing","beforeCreate","_vm","_h","$createElement","_self","_c","pathConfig","handleMouseOver","handleMouseOut","handleMouseUp","$event","which","_v","clipConfig","highlightConfig","staticClass","stageConfig","handleMouseDown","_l","waterConnection","territory","castle","highlight","baseColor","isTouch","handleTerritoryMouseUp","_b","handleCastleIconLoad","army"],"sourceRoot":""}